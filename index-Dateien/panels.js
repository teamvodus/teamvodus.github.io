function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};define("panels/panelManager/panelManager",["lodash","stateManagement"],function(e,t){"use strict";return{create:function(n){return{openPanel:function(e,a,s){n.dispatch(t.editorPlugins.panels.actions.updateOrOpenPanel(e,a,s))},openComponentPanel:function(e,a){n.dispatch(t.editorPlugins.panels.actions.openComponentPanel(e,a))},replaceComponentPanel:function(a,s){n.dispatch(t.editorPlugins.panels.actions.openComponentPanel(a,e.assign({},s,{useLastPanelPosition:!0})))},closePanelByName:function(e,a){n.dispatch(t.editorPlugins.panels.actions.closePanelByName(e,a))},closeAllPanels:function(){n.dispatch(t.editorPlugins.panels.actions.closeOpenedPanels())},getOpenPanels:function(){return t.editorPlugins.panels.selectors.selectOpenPanels(n.getState())},registerPanelType:function(e,a,s){n.dispatch(t.editorPlugins.panels.actions.setPanelType(e,a,s))},getPanelsOfType:function(a){var s=t.editorPlugins.panels.selectors.selectOpenPanels(n.getState());return e.filter(s,{frameType:a})},closeAllPanelsOfType:function(e){n.dispatch(t.editorPlugins.panels.actions.closeAllPanelsOfType(e))},openHelpCenter:function(e,a,s){n.dispatch(t.editorPlugins.panels.actions.openHelpCenter(e,a,s))},closeHelpCenter:function(){n.dispatch(t.editorPlugins.helpPanel.actions.closeHelpCenter())},notifyMouseDown:function(){n.dispatch(t.editorPlugins.panels.actions.stageMouseDown())},openPlatformPanel:function(e){n.dispatch(t.editorPlugins.panels.actions.openPlatformPanel(e))},openFirstTimePanel:function(e){n.dispatch(t.editorPlugins.panels.actions.openFirstTimePanel(e))},updatePanelProps:function(e,a){n.dispatch(t.editorPlugins.panels.actions.updatePanel(e,a))},findPlatformPanelByType:function(a){var s=t.editorPlugins.panels.selectors.selectOpenPanels(n.getState());return e.some(s,["props.type",a])}}}}}),define("panels/frames/leftPanelFrame.rt",["react","lodash","symbols","baseUILib"],function(e,t,n,a){"use strict";return function(){return e.createElement("div",{className:"left-panel-frame panel-index-"+this.props.panelIndex+" "+this.props.panelClass+(0===this.props.panelIndex?" first-panel":""),style:this.getFrameStyle(),onWheel:this.props.blockOuterScroll,onContextMenu:function(e){this.props.onContextMenu&&this.props.onContextMenu(e)}.bind(this)},this.props.label?e.createElement(a.PanelHeader,{key:"header",className:"light",onClose:this.props.close,onHelp:this.props.openHelpCenter,noHelpBtn:!this.props.helpId&&!this.props.onHelpClicked},e.createElement("span",{},this.props.label)):null,e.createElement("div",{id:this.props.id,className:"left-panel-frame-content "+(this.props.className||"")},this.props.children))}}),define("panels/frames/leftPanelFrame",["create-react-class","lodash","prop-types","core","higherOrderComponents","constants","panels/frames/leftPanelFrame.rt"],function(e,t,n,a,s,i,o){"use strict";var r=e({displayName:i.PANEL_TYPES.LEFT,mixins:[a.mixins.editorAPIMixin],PropTypes:{panelClass:n.string.isRequired,panelIndex:n.number.isRequired,label:n.string,onClose:function(e,t){if(e.title&&"function"!=typeof e[t])return new Error("onClose prop must be of type a function")},styleOverride:n.object,openPanelBiEvent:n.object,openPanelBiParams:n.object},getFrameStyle:function(){return this.props.styleOverride},componentWillMount:function(){var e=this.getEditorAPI().panelManager,n=t.filter(e.getOpenPanels(),{frameType:i.PANEL_TYPES.LEFT});t.size(n)>1&&e.closePanelByName(t.head(n).name)},render:o}),l=s.panelFrame(i.PANEL_TYPES.LEFT)(r);return l.pure=r,l}),define("panels/mixins/disableKeyboardShortcutsMixin",["lodash","util"],function(e,t){"use strict";var n=t.keyboardShortcuts,a=0,s=[];return{componentWillMount:function(){var e=!1;n.isEnabled()||(n.enable(),e=!0),s.push(n.getContext()),this.dynamicKeyboardContext=n.CONTEXTS.MODAL_PANEL+"_"+a++,n.registerContext(this.dynamicKeyboardContext,this.getPanelShortcuts()),n.setContext(this.dynamicKeyboardContext),e&&n.disable()},componentWillUnmount:function(){var e=!1;n.isEnabled()||(n.enable(),e=!0),n.unregisterContext(this.dynamicKeyboardContext);var t=s.pop();t!==this.dynamicKeyboardContext&&n.setContext(t),e&&n.disable()},getPanelShortcuts:function(){return this.props.keyboardShortcuts?this.props.shouldExtendDefaultShortcuts?e.assign(this.getDefaultShortcuts(),this.props.keyboardShortcuts):this.props.keyboardShortcuts:this.getDefaultShortcuts()},getDefaultShortcuts:function(){var t=void 0;return t=this.props.isBareMode?e.noop:this.onCancel||this.onEscape||this.close||this.props.close,{esc:t}}}}),define("panels/frames/panelCloseOrigin",[],function(){"use strict";return{HEADER_CLOSE_BUTTON:"header_close_button",CLICK_OUTSIDE:"click_outside",ESCAPE_PRESS:"escape_press",DONE_BUTTON:"done_button",CONFIRM_BUTTON:"confirm_button"}}),define("panels/frames/messagePanelFrame.rt",["react","lodash","baseUI","symbols","baseUILib","panels/frames/panelCloseOrigin"],function(e,t,n,a,s,i){"use strict";return function(){return e.createElement("div",{className:"panel-frame-container screen-centered-frame message-panel-frame-z-index"},e.createElement("div",{className:"dark-frame-overlay"}),e.createElement("div",function(e,n){var a=t.assign({},e,n);return e.hasOwnProperty("style")&&(a.style=t.defaults(a.style,e.style)),e.hasOwnProperty("className")&&n.hasOwnProperty("className")&&(a.className=n.className+" "+e.className),a}({className:"message-panel-frame"},this.getPanelProps()),e.createElement(s.PanelHeader,{className:"dark",onClose:this.onCancel(i.HEADER_CLOSE_BUTTON),noHelpBtn:!0},this.props.panelTitle?e.createElement("span",{key:"headerTitle"},this.props.panelTitle):null),e.createElement("div",{className:"content"},this.props.children),e.createElement("div",{className:"panel-footer"},this.props.footerText?e.createElement("div",{key:"footerText",className:"footer-text"},this.props.footerText):null,this.props.dontShowAgainKey&&this.props.userPrefType?e.createElement(s.Checkbox,{key:"dont-show-again-toggle",labelAfterSymbol:!0,className:"dont-show-again",label:"Notification_Box_Dont_Show_Again",value:this.props.dontShowAgain,onChange:this.onDontShowAgainChange}):null,this.props.cancelLabel?e.createElement(n.button,{key:"btn-confirm-secondary",className:"btn-confirm-secondary",onClick:this.onCancel(i.DONE_BUTTON),label:this.props.cancelLabel}):null,e.createElement(n.button,{className:"btn-confirm-primary",onClick:this.onConfirm,label:this.props.confirmLabel}))))}}),define("panels/frames/messagePanelFrame",["create-react-class","lodash","prop-types","util","constants","higherOrderComponents","panels/mixins/disableKeyboardShortcutsMixin","panels/frames/panelCloseOrigin","panels/frames/messagePanelFrame.rt"],function(e,t,n,a,s,i,o,r,l){"use strict";var c=e({displayName:s.PANEL_TYPES.MESSAGE,mixins:[a.propTypesFilterMixin,o],propTypes:{panelName:n.string.isRequired,panelTitle:n.string,width:n.string,height:n.string,onConfirm:n.func,confirmLabel:n.string,keyboardShortcuts:n.object,shouldExtendDefaultShortcuts:n.bool,dontShowAgain:n.bool,toggleDontShowAgain:n.func.isRequired,showCancelBtn:n.bool,cancelLabel:n.string,onCancel:n.func,close:n.func,type:n.string,footerText:n.object},getInitialState:function(){return{buttonWasClicked:!1}},getDefaultProps:function(){return{confirmLabel:"messagePanelFrame_Confirm"}},getPanelProps:function(){return{style:{width:this.props.width,height:this.props.height},className:this.props.className}},_closeAndCall:function(e,t){this.state.buttonWasClicked||(this.setState({buttonWasClicked:!0}),this.props.close(t),e&&e())},onConfirm:function(){this._closeAndCall(this.props.onConfirm,r.CONFIRM_BUTTON)},onCancel:function(e){var t=this;return function(){return t._closeAndCall(t.props.onCancel,e)}},onDontShowAgainChange:function(e){this.props.onDontShowAgainChange(e),this.props.toggleDontShowAgain(e)},render:l}),p=i.linkUserPreferences()(i.panelFrame(s.PANEL_TYPES.MESSAGE)(c));return p.pure=c,p}),define("panels/frames/toolPanelFrame.rt",["react","lodash","baseUI","symbols","baseUILib"],function(e,t,n,a,s){"use strict";return function(){return e.createElement("div",{className:"panel-frame-container tool-panel-frame-container tool-panel-frame-z-index"+(this.props.isBlockingLayerFullScreen?" full-screen":""),onWheel:this.blockOuterScrollIfNecessary},e.createElement("div",{className:"transparent-frame-overlay",onClick:this.onOverlayClick,ref:"closeButton"}),e.createElement("div",t.assign({},{ref:this.setContentWrapper},this.getContentWrapperProps()),this.props.headerTitle?e.createElement(s.PanelHeader,{ref:"header",key:"toolFrameHeader",onMouseDown:this.startContentDrag,className:"dragger "+(this.props.lightHeader?"light":"dark"),onClose:this.closePanel,onHelp:this.props.openHelpCenter,noHelpBtn:!this.props.helpId},this.props.headerTitle?e.createElement("span",{key:"headerTitle"},this.props.headerTitle):null):null,e.createElement("div",{className:this.getContentClass()},this.renderChildren())))}}),define("panels/frames/toolPanelFrame",["react","create-react-class","prop-types","lodash","reactDOM","constants","util","baseUILib","zepto","core","higherOrderComponents","panels/mixins/disableKeyboardShortcutsMixin","panels/frames/toolPanelFrame.rt","panels/frames/panelCloseOrigin"],function(e,t,n,a,s,i,o,r,l,c,p,u,d,m){"use strict";function h(e,t){if(/%$/.test(e)){var n=parseInt(e,10);return parseInt(t*(n/100),10)||0}return parseInt(e,10)||0}var g=t({displayName:i.PANEL_TYPES.TOOL,propTypes:{panelName:n.string.isRequired,selectedComponentType:n.string,headerTitle:n.string,width:n.string,height:n.string,helpId:n.string,top:n.oneOfType([n.string,n.number]),left:n.oneOfType([n.string,n.number]),isBlockingLayerFullScreen:n.bool,shouldBlockOuterScroll:n.bool,lightHeader:n.bool,contentClass:n.string,contentWrapperClass:n.string,onClose:n.func,openHelpCenter:n.func,contentStyle:n.object,close:n.func,reportMeasurementsStateKey:n.func,registerMeasureFunc:n.func.isRequired,onContentElementReady:n.func,measuredRes:n.shape({contentHeight:n.number,contentWidth:n.number,stageLayout:n.object,initialPos:n.shape({top:n.number,left:n.number})}),renderContent:n.func,children:n.oneOfType([n.array,n.object])},mixins:[o.draggableMixin,u],getInitialState:function(){var e=this.props.registerMeasureFunc(this.measureContentElement);return a.isFunction(this.props.reportMeasurementsStateKey)&&this.props.reportMeasurementsStateKey(e),{}},componentDidMount:function(){this.props.onContentElementReady&&this.contentWrapper&&this.props.onContentElementReady(this.contentWrapper)},measureContentElement:function(){var e=l(s.findDOMNode(this.getContentWrapperElement())),t=c.utils.stageUtils.getStageLayout(),n=e.height()||0,i=e.width()||0,o={contentHeight:n,contentWidth:i,contentOffset:e.offset()||0,stageLayout:t},r=h(e.css("top"),t.height+t.top),p=h(e.css("left"),t.width+t.left),u=this.calcInitialContentPos(r,p,t,i,n);return a.defaults({initialPos:u},o)},calcInitialContentPos:function(e,t,n,a,s){var i=(l(window).scrollTop()||0)+(n.bottom-s),o=n.right-a;return{top:Math.min(e,i),left:Math.min(Math.max(t,0),o)}},getContentWrapperProps:function(){return{style:this.getContentWrapperStyle(),className:"tool-panel-frame "+(this.props.measuredRes?"":"hidden")+" "+this.props.contentWrapperClass}},getContentWrapperStyle:function(){return!this.state.isCustomPosition&&a.get(this.props,"measuredRes.initialPos")?a.defaults({},this.props.measuredRes.initialPos,this.props.contentStyle):this.props.contentStyle},getDragLimits:function(){if(!this.props.measuredRes)return{x:[],y:[]};var e=this.props.measuredRes,t=e.stageLayout,n=e.contentHeight,a=e.contentWidth;return o.panelUtils.getPanelDragLimits(n,a,t)},getContentClass:function(){return"content "+(this.props.contentClass||"")},getContentWrapperElement:function(){return this.contentWrapper},setContentWrapper:function(e){this.contentWrapper=e},renderDefaultHeader:function(){var t=this;return e.createElement(r.PanelHeader,{ref:"header",key:"toolFrameHeader",onMouseDown:function(e){return t.startDrag(e,t.getDragLimits(),t.contentWrapper)},className:"dragger "+(this.props.lightHeader?"light":"dark"),onClose:this.closePanel,onHelp:this.props.openHelpCenter,noHelpBtn:!this.props.helpId},e.createElement("span",null,this.props.headerTitle))},blockOuterScrollIfNecessary:function(){this.props.shouldBlockOuterScroll&&this.blockOuterScroll.apply(this,arguments)},closePanel:function(e){this.props.onClose&&this.props.onClose(e),this.props.close()},onOverlayClick:function(){this.closePanel(m.CLICK_OUTSIDE)},onEscape:function(){this.closePanel(m.ESCAPE_PRESS)},startContentDrag:function(e){return this.startDrag(e,this.getDragLimits(this.contentWrapper),this.contentWrapper)},renderChildren:function(){return a.isFunction(this.props.renderContent)?this.props.renderContent(this.startContentDrag):this.props.children},render:d});return a.flowRight(p.panelFrame(i.PANEL_TYPES.TOOL),p.withMeasurements())(g)}),define("panels/frames/focusPanelFrame.rt",["react","lodash","symbols","util","baseUILib"],function(e,t,n,a,s){"use strict";return function(){return e.createElement("div",{className:"panel-frame-container screen-centered-frame focus-panel-frame-z-index "+(this.props.frameClassName||""),onWheel:this.props.blockOuterScroll,onContextMenu:function(e){this.props.onContextMenu&&this.props.onContextMenu(e)}.bind(this)},e.createElement("div",{className:this.getClassName("focus-panel-frame"),style:this.getWidthHeight()},this.shouldHideHeader()?null:e.createElement(s.PanelHeader,{className:this.getHeaderClassName()+" dark",key:"header",onClose:this.onXButtonClick,onHelp:this.props.openHelpCenter,noHelpBtn:this.props.shouldHideHelp},e.createElement("span",{},this.props.title)),e.createElement("div",{className:this.props.title?"focus-panel-frame-content":"focus-panel-frame-content-no-header",style:{backgroundColor:this.props.containerBackground}},this.props.children)),e.createElement("div",{className:"dark-frame-overlay",onClick:this.handleBlur,style:{backgroundColor:this.props.overlayBackground}}))}}),define("panels/frames/focusPanelFrame",["create-react-class","prop-types","lodash","constants","util","higherOrderComponents","panels/mixins/disableKeyboardShortcutsMixin","panels/frames/focusPanelFrame.rt"],function(e,t,n,a,s,i,o,r){"use strict";var l={OUT_OF_FOCUS:"out_of_focus",X_BUTTON:"x_button"},c=e({mixins:[o],displayName:a.PANEL_TYPES.FOCUS,propTypes:{blockOuterScroll:t.func.isRequired,close:t.func.isRequired,openHelpCenter:t.func.isRequired,panelName:t.string.isRequired,width:t.string,height:t.string,title:t.string,headerClassName:t.string,frameClassName:t.string,shouldHideHeader:t.bool,shouldHideHelp:t.bool,shouldNotCloseOnBlur:t.bool,keyboardShortcuts:t.object,shouldExtendDefaultShortcuts:t.bool},getHeaderClassName:function(){return this.props.headerClassName||"panel-header"},getFrameProps:function(){return{style:{width:this.props.width,height:this.props.height}}},shouldHideHeader:function(){return this.props.shouldHideHeader},shouldCloseFrame:function(e){return!this.props.onClose||!0===this.props.onClose(e)},onXButtonClick:function(){this.closeFrameIfNeeded(l.X_BUTTON)},closeFrameIfNeeded:function(e){this.shouldCloseFrame(e)&&this.props.close()},handleBlur:function(){this.props.shouldNotCloseOnBlur||this.closeFrameIfNeeded(l.OUT_OF_FOCUS)},getClassName:function(e){return s.inheritClassName(this.props,e)},getWidthHeight:function(){var e={};return this.props.width&&(e.width=this.props.width),this.props.height&&(e.height=this.props.height),e},render:r}),p=i.panelFrame(a.PANEL_TYPES.FOCUS)(c);return p.pure=c,p}),define("panels/frames/helpPanelFrame.rt",["react","lodash","symbols","baseUI","baseUILib"],function(e,t,n,a,s){"use strict";return function(){return e.createElement("div",{className:"help-panel-frame"},e.createElement(s.PanelHeader,{ref:"header",onMouseDown:function(e){this.startDrag(e,this.getDragLimits())}.bind(this),className:"dragger dark help-panel-frame-drag-handle",onClose:this.closeHelpCenter,noHelpBtn:!0}),e.createElement("iframe",{id:this.props.id,className:this.props.className||"",src:this.getIframeSrc(),ref:"helpIframe"}),e.createElement(a.preloader,{className:t({hidden:!this.state.showLoader}).transform(function(e,t,n){t&&e.push(n)},[]).join(" ")}))}}),define("panels/frames/helpPanelFrame",["lodash","reactDOM","create-react-class","prop-types","util","core","constants","higherOrderComponents","panels/frames/helpPanelFrame.rt","helpIds","stateManagement"],function(e,t,n,a,s,i,o,r,l,c,p){"use strict";var u=p.domMeasurements.selectors.getViewPort,d=n({displayName:o.PANEL_TYPES.HELP,mixins:[s.draggableMixin,i.mixins.editorAPIMixin],PropTypes:{helpUrl:a.string.isRequired,closePanelBiEvent:a.object,closePanelBiParams:a.object,openPanelBiEvent:a.object,openPanelBiParams:a.object,isMobileEditor:a.bool},getInitialState:function(){return{showLoader:!0}},getUrlPrefix:function(){return"https://support.wix.com/"+this.getEditorAPI().getLanguageCode()+"/widget/"+c.HELP_CENTER.HELP_WIDGET_ID+"/article/"},componentDidMount:function(){this.props.openPanelBiEvent&&this.props.openPanelBiParams&&this.getEditorAPI().bi.event(this.props.openPanelBiEvent,this.props.openPanelBiParams),t.findDOMNode(this.refs.helpIframe).addEventListener("load",this.hideLoader)},componentWillReceiveProps:function(e){e.isMobileEditor!==this.props.isMobileEditor&&this.closeHelpCenter()},getDragLimits:function(){var e=this.getEditorAPI(),t=u(e.store.getState());return{y:[t&&t.minY||e.editorConfig.topBarHeight]}},componentWillUnmount:function(){this.props.closePanelBiEvent&&this.props.closePanelBiParams&&this.getEditorAPI().bi.event(this.props.closePanelBiEvent,this.props.closePanelBiParams)},closeHelpCenter:function(){this.getEditorAPI().panelManager.closeHelpCenter()},onCancel:function(){this.closeHelpCenter()},hideLoader:function(){this.setState({showLoader:!1})},getIframeSrc:function(){var t=e.assign({panel_name:"",origin:"",editor_working_mode:this.getEditorAPI().viewMode.get()},this.props.biHelpParams),n=e.template("&origin=<%= origin %>&panel_name=<%= panel_name %>&editor_working_mode=<%= editor_working_mode %>")(t);return this.getUrlPrefix()+this.props.helpUrl+n},render:l}),m=r.panelFrame(o.PANEL_TYPES.HELP)(d);return m.pure=d,m}),define("panels/frames/confirmationPanelFrame.rt",["react","lodash","baseUI","symbols","baseUILib"],function(e,t,n,a,s){"use strict";return function(){return e.createElement("div",{className:"panel-frame-container screen-centered-frame confirmation-panel-frame-z-index"},e.createElement("div",function(e,n){var a=t.assign({},e,n);return e.hasOwnProperty("style")&&(a.style=t.defaults(a.style,e.style)),e.hasOwnProperty("className")&&n.hasOwnProperty("className")&&(a.className=n.className+" "+e.className),a}({className:"confirmation-panel-frame "+this.props.type+"-confirmation"},this.getPanelProps()),this.shouldHideHeader()?null:e.createElement(s.PanelHeader,{className:"dark",key:"header",onClose:this.onClose,noHelpBtn:!0},this.props.panelTitle?e.createElement("span",{key:"headerTitle"},this.props.panelTitle):null),e.createElement("div",{className:"content"},this.props.children),this.props.shouldHideFooter?null:e.createElement("footer",{key:"footer"},this.props.shouldHideCancelButton?null:e.createElement(n.button,{key:"cancelButton",className:this.getSecondaryButtonClass(),onClick:this.onCancel,label:this.props.cancelLabel}),e.createElement(n.button,{className:this.getConfirmButtonClass(),onClick:this.onConfirm,label:this.props.confirmLabel}))),e.createElement("div",{className:"dark-frame-overlay"}))}}),define("panels/frames/confirmationPanelFrame",["create-react-class","prop-types","lodash","util","constants","higherOrderComponents","panels/mixins/disableKeyboardShortcutsMixin","panels/frames/confirmationPanelFrame.rt"],function(e,t,n,a,s,i,o,r){"use strict";var l=e({displayName:s.PANEL_TYPES.CONFIRMATION,mixins:[a.propTypesFilterMixin,o],propTypes:{panelName:t.string.isRequired,panelTitle:t.string,width:t.string,height:t.string,onConfirm:t.func,shouldCloseByDefaultOnConfirm:t.bool,onCancel:t.func,onClose:t.func,confirmLabel:t.string,cancelLabel:t.string,shouldHideHeader:t.bool,shouldHideFooter:t.bool,shouldHideCancelButton:t.bool,type:t.oneOf(["important","normal"])},getDefaultProps:function(){return{type:"normal",confirmLabel:"confirmationPanelFrame_Confirm",cancelLabel:"confirmationPanelFrame_Cancel",shouldCloseByDefaultOnConfirm:!0}},getPanelProps:function(){return{style:{width:this.props.width,height:this.props.height},className:this.props.className}},onConfirm:function(){this.props.shouldCloseByDefaultOnConfirm&&this.props.close(),this.props.onConfirm&&this.props.onConfirm()},onCancel:function(){this.props.close(),this.props.onCancel&&this.props.onCancel()},onClose:function(){this.props.onClose?(this.props.close(),this.props.onClose()):this.onCancel()},getConfirmLabel:function(){return this.props.confirmLabel},getCancelLabel:function(){return this.props.cancelLabel},getConfirmButtonClass:function(){return("important"===this.props.type?"btn-danger-primary":"btn-confirm-primary")+" btn-md"},getSecondaryButtonClass:function(){return("important"===this.props.type?"btn-danger-secondary":"btn-confirm-secondary")+" btn-md"},shouldHideHeader:function(){return this.props.shouldHideHeader},shouldHideFooter:function(){return this.props.shouldHideFooter},render:r}),c=i.panelFrame(s.PANEL_TYPES.CONFIRMATION)(l);return c.pure=l,c}),define("panels/mixins/panelDragLimitsMixin",["reactDOM","core","constants","zepto"],function(e,t,n,a){"use strict";return{getDragLimits:function(s){var i=n.PANELS.PANEL_SIZE_TO_KEEP_IN_VIEW,o=t.utils.stageUtils.getStageLayout(),r=void 0,l=(r=a(this.contentElement?this.contentElement:s?e.findDOMNode(s):e.findDOMNode(this))).height(),c=r.width(),p=o.left-c+i,u=o.right+c-i,d=o.bottom+l-i;return{x:[p,u],y:[o.top+10,d]}}}}),define("panels/frames/bgSubPanelFrame.rt",["react","lodash","baseUI","symbols","util","baseUILib"],function(e,t,n,a,s,i){"use strict";return function(){return e.createElement("div",function(e,n){var a=t.assign({},e,n);return e.hasOwnProperty("style")&&(a.style=t.defaults(a.style,e.style)),e.hasOwnProperty("className")&&n.hasOwnProperty("className")&&(a.className=n.className+" "+e.className),a}({className:"background-sub-panel-frame"},this.getPanelProps()),this.props.label?e.createElement(i.PanelHeader,{ref:"header",key:"header",onMouseDown:function(e){this.startDrag(e,this.getDragLimits())}.bind(this),className:"dragger dark",onClose:this.props.close,onHelp:this.props.openHelpCenter},this.props.label?e.createElement("span",{key:"label"},s.translate(this.props.label)):null):null,e.createElement("div",{className:"content"+(this.props.contentClass?" "+this.props.contentClass:"")},this.props.children))}}),define("panels/frames/bgSubPanelFrame",["create-react-class","lodash","prop-types","panels/mixins/panelDragLimitsMixin","constants","util","higherOrderComponents","panels/frames/bgSubPanelFrame.rt"],function(e,t,n,a,s,i,o,r){"use strict";var l=e({displayName:s.PANEL_TYPES.BG_SUB_PANEL,mixins:[i.draggableMixin,a],propTypes:{panelName:n.string.isRequired,title:n.string,width:n.number,height:n.number,top:n.number,left:n.number,contentClass:n.string},getPanelProps:function(){var e=["width","height","top","left"],n={};t.forEach(e,t.bind(function(e){this.props[e]&&(n[e]=this.props[e])},this));var a=t.omit(this.props,"children",e);return a.style=n,a},render:r}),c=o.panelFrame(s.PANEL_TYPES.BG_SUB_PANEL)(l);return c.pure=l,c}),define("panels/frames/backgroundPanelFrame.rt",["react","lodash","symbols","baseUILib"],function(e,t,n,a){"use strict";return function(){return e.createElement("div",{className:"background-panel-frame"},this.props.label?e.createElement(a.PanelHeader,{key:"header",className:"dragger dark",onMouseDown:function(e){this.startDrag(e,this.getDragLimits())}.bind(this),onClose:this.props.close,onHelp:this.props.openHelpCenter,noHelpBtn:!this.props.helpId&&!this.props.onHelpClicked},e.createElement("span",{},this.props.label)):null,e.createElement("div",{id:this.props.id,className:this.props.className||""},this.props.children))}}),define("panels/frames/backgroundPanelFrame",["create-react-class","lodash","prop-types","higherOrderComponents","panels/mixins/panelDragLimitsMixin","constants","util","panels/frames/backgroundPanelFrame.rt"],function(e,t,n,a,s,i,o,r){"use strict";var l=e({displayName:i.PANEL_TYPES.BG_PANEL,mixins:[o.draggableMixin,s],PropTypes:{label:n.string,onClose:function(e,t){if(e.title&&"function"!=typeof e[t])return new Error("onClose prop must be of type a function")},openPanelBiEvent:n.object,openPanelBiParams:n.object},render:r}),c=a.panelFrame(i.PANEL_TYPES.BG_PANEL)(l);return c.pure=l,c}),define("panels/frames/emptyPanelFrame.rt",["react","lodash"],function(e,t){"use strict";return function(){return e.createElement("div",this.getHtmlProps(),e.createElement("div",{className:"content"},this.props.children))}}),define("panels/frames/emptyPanelFrame",["create-react-class","prop-types","lodash","constants","higherOrderComponents","panels/frames/emptyPanelFrame.rt"],function(e,t,n,a,s,i){"use strict";var o=e({displayName:a.PANEL_TYPES.EMPTY,propTypes:{panelName:t.string.isRequired},getHtmlProps:function(){return n.pick(this.props,["style","className"])},render:i}),r=s.panelFrame(a.PANEL_TYPES.EMPTY)(o);return r.pure=o,r}),define("panels/frames/frames",["panels/frames/leftPanelFrame","panels/frames/messagePanelFrame","panels/frames/toolPanelFrame","panels/frames/focusPanelFrame","panels/frames/helpPanelFrame","panels/frames/confirmationPanelFrame","panels/frames/bgSubPanelFrame","panels/frames/backgroundPanelFrame","panels/frames/emptyPanelFrame"],function(e,t,n,a,s,i,o,r,l){"use strict";return{leftPanelFrame:e,messagePanelFrame:t,toolPanelFrame:n,focusPanelFrame:a,helpPanelFrame:s,confirmationPanelFrame:i,bgSubPanelFrame:o,backgroundPanelFrame:r,emptyPanelFrame:l}}),define("panels/mixins/statefulKeyboardContextMixin",["lodash","util"],function(e,t){"use strict";var n=t.keyboardShortcuts,a=0,s=[];return{componentWillMount:function(){s.push(n.getContext()),this.myKeyboardContextName=function(e){return(e||"")+n.CONTEXTS.AUTOMATIC+"_"+a++}(this.keyboardShortcutsContextNamePrefix),n.registerContext(this.myKeyboardContextName,this.getCustomKeyboardShortcuts()),n.setContext(this.myKeyboardContextName)},componentWillUnmount:function(){if(n.unregisterContext(this.myKeyboardContextName),this.myKeyboardContextName===n.getContext()){var e=s.pop();n.setContext(e)}s.splice(s.indexOf(this.myKeyboardContextName),1)},getCustomKeyboardShortcuts:function(){return this.getKeyboardShortcuts?this.getKeyboardShortcuts():this.getDefaultShortcuts()},getDefaultShortcuts:function(){return{}}}}),define("panels/mixins/reportBiEventOnUiChangeMixin",["prop-types","lodash","core","coreUtilsLib"],function(e,t,n,a){"use strict";function s(e,s,o){(function(e,s,o){var r=n.utils.uiControlsBIUtil.getEventDefinition(e);if(r){var l=n.utils.uiControlsBIUtil.getParams(e,o),c=t.merge({panel_name:this.constructor.displayName,control_name:s},l);this.getEditorAPI().selectedComponent.sendSelectedComponentBI(r,c)}else a.log.warn(i,e,this.constructor.displayName)}).call(this,e,s,o)}var i="There is no BI event for the control [%s], in [%s] panel.\n\tDear developer, Please add the control mapping to core/bi/controlsToEvents and the event to core/bi/events.json .";return{childContextTypes:{reportUIChange:e.func},componentDidMount:function(){if(!t.isFunction(this.getEditorAPI))throw new Error("You must use editorAPIMixin to use the reportBiEventOnUiChangeMixin")},getChildContext:function(){return{reportUIChange:s.bind(this)}}}}),define("panels/mixins/mixins",["panels/mixins/disableKeyboardShortcutsMixin","panels/mixins/statefulKeyboardContextMixin","panels/mixins/panelDragLimitsMixin","panels/mixins/reportBiEventOnUiChangeMixin"],function(e,t,n,a){"use strict";return{disableKeyboardShortcutsMixin:e,statefulKeyboardContextMixin:t,panelDragLimitsMixin:n,reportBiEventOnUiChangeMixin:a}}),define("panels/helpPanels/helpPanel.rt",["react","lodash","panels/frames/helpPanelFrame"],function(e,t,n){"use strict";return function(){return e.createElement(n,{panelName:this.props.panelName,helpUrl:this.props.helpUrl})}}),define("panels/helpPanels/helpPanel",["create-react-class","lodash","util","panels/helpPanels/helpPanel.rt"],function(e,t,n,a){"use strict";return e({displayName:"exampleHelpPanel",PropTypes:{helpUrl:function(e,t){if(!n.validate.url(e[t]))return new Error("helpUrl prop must be a string representing a valid url")}},render:a})}),define("panels/helpPanels/helpPanels",["panels/helpPanels/helpPanel"],function(e){"use strict";return{helpPanel:e}}),define("panels/errorPages/constants",[],function(){"use strict";return{404:{panelName:"404-errorPanel",title:"DYNAMIC_PAGES_404_ERROR_TITLE",symbol:"404_Error_message_illustration",errorBodyTop:"DYNAMIC_Pages_404_Error_Body_1",routerAddress:"https://www.wix.com/error-pages-samples/error404",errorBodyBottom:"DYNAMIC_Pages_404_Error_Body_2",btnViewErrorPage:"DYNAMIC_Pages_Error_View_Error_Page_Button",btnClose:"DYNAMIC_Pages_Error_Close_Button"},500:{panelName:"500-errorPanel",title:"DYNAMIC_PAGES_500_ERROR_TITLE",symbol:"500_Error_message_illustration",errorBodyTop:"DYNAMIC_Pages_500_Error_Body_1",routerAddress:"https://www.wix.com/error-pages-samples/error500",errorBodyBottom:"DYNAMIC_Pages_500_Error_Body_2",btnViewErrorPage:"DYNAMIC_Pages_Error_View_Error_Page_Button",btnClose:"DYNAMIC_Pages_Error_Close_Button"},403:{panelName:"403-errorPanel",title:"DYNAMIC_PAGES_403_ERROR_TITLE",symbol:"403_page_forbidden_message_illustration",errorBodyTop:"DYNAMIC_Pages_403_Error_Body_1",routerAddress:"https://www.wix.com/error-pages-samples/error403",errorBodyBottom:"DYNAMIC_Pages_403_Error_Body_2",btnViewErrorPage:"DYNAMIC_Pages_Error_View_Error_Page_Button",btnClose:"DYNAMIC_Pages_Error_Close_Button"},other:{panelName:"other-errorPanel",title:"DYNAMIC_PAGES_GENERAL_ERROR_TITLE",symbol:"general_error_message_illustration",errorBodyTop:"DYNAMIC_Pages_General_Error_Body_1",routerAddress:"https://www.wix.com/error-pages-samples/error",errorBodyBottom:"DYNAMIC_Pages_General_Error_Body_2",btnViewErrorPage:"DYNAMIC_Pages_Error_View_Error_Page_Button",btnClose:"DYNAMIC_Pages_Error_Close_Button"}}}),define("panels/errorPages/errorPanel.rt",["react","lodash","baseUI","symbols","util","baseUILib"],function(e,t,n,a,s,i){"use strict";return function(){return e.createElement("div",{className:"panel-frame-container screen-centered-frame error-page-panel-frame-z-index"},e.createElement("div",{className:"confirmation-panel-frame info-error-page error-page-panel"},e.createElement(i.PanelHeader,{className:"dark",key:"header",onClose:this.onClose,noHelpBtn:!0},e.createElement("span",{key:"headerTitle"},this.getConstants().title)),e.createElement("div",{className:"content-wrapper"},e.createElement("div",{className:"error-logo"},e.createElement(n.symbol,{name:this.getConstants().symbol})),e.createElement("div",{className:"description-wrapper"},e.createElement("span",{className:"description-line"},s.translate(this.getConstants().errorBodyTop)),e.createElement("br",{}),e.createElement("span",{className:"description-line"},e.createElement("b",{},this.props.routerAddress)),e.createElement("br",{}),e.createElement("span",{className:"description-line"},s.translate(this.getConstants().errorBodyBottom)))),e.createElement("footer",{},e.createElement(n.button,{key:"cancelButton",className:"btn-confirm-secondary  btn-md",onClick:this.openErrorPageInNewTab,label:this.getConstants().btnViewErrorPage}),e.createElement(n.button,{className:"btn-confirm-primary  btn-md",onClick:this.onClose,label:this.getConstants().btnClose}))),e.createElement("div",{className:"dark-frame-overlay"}))}}),define("panels/errorPages/errorPanel",["create-react-class","lodash","core","util","panels/errorPages/constants","panels/errorPages/errorPanel.rt"],function(e,t,n,a,s,i){"use strict";return e({displayName:"404_errorPopup",propTypes:{},mixins:[a.translationMixin,n.mixins.editorAPIMixin],openErrorPageInNewTab:function(){window.open(this.getConstants().routerAddress)},getConstants:function(){if(this.constants)return this.constants;var e=s[this.props.errorInfo.statusCode];return e?(e=t.clone(e)).title=a.translate(e.title):(e=s.other,(e=t.clone(e)).title=a.translate(e.title).replace("{error_code}",this.props.errorInfo.statusCode)),this.constants=e,e},onClose:function(){this.getEditorAPI().panelManager.closePanelByName("panels.errorPages.errorPagePanel")},render:i})}),define("panels/errorPages/errorPagesPanels",["panels/errorPages/errorPanel"],function(e){"use strict";return{errorPagePanel:e}}),define("panels/focusPanels/welcomeVideoPanel.rt",["react","lodash","panels/frames/focusPanelFrame","util","symbols"],function(e,t,n,a,s){"use strict";return function(){return e.createElement(n,{ref:"frame",panelName:this.props.panelName,shouldHideHeader:!0,shouldHideHelp:!0,isBareMode:!0,className:"welcome-screen-panel "+(this.props.className||""),onClose:this.handleShouldCloseOnBlur,keyboardShortcuts:this.getKeyboardShortcuts(),shouldNotCloseOnBlur:this.props.shouldNotCloseOnBlur},e.createElement("header",{className:"panel-header dark",key:"header"},e.createElement("button",{className:"close",onClick:function(){this.closeByX()}.bind(this)},e.createElement(s.symbol,{name:"headerCloseButton"})),e.createElement("div",{className:"welcome-panel-header-title"},this.props.title),e.createElement("div",{className:"welcome-panel-header-subtitle"},this.props.subtitle),e.createElement("div",{className:"videoInput-wrapper"},e.createElement("iframe",{src:this.props.linkedVideoData,frameBorder:"0",allowFullScreen:!0}),e.createElement("div",{className:"video-pixel-cover"}))),e.createElement("div",{className:"content "+this.getContentClass()},e.createElement("p",{},this.getContent("line1")," ",this.getContent("link")),e.createElement("p",{},this.getContent("line2"))),"\n    ",this.props.children,"\n\n")}}),define("panels/focusPanels/welcomeVideoPanel",["create-react-class","prop-types","lodash","core","util","coreBi","panels/focusPanels/welcomeVideoPanel.rt"],function(e,t,n,a,s,i,o){"use strict";var r=i;return e({displayName:"welcomeScreenPanel",mixins:[a.mixins.editorAPIMixin],propTypes:{title:t.string,subtitle:t.string,linkedVideoData:t.string,content:t.object,contentClass:t.string,className:t.string,panelName:t.string,onCloseByX:t.func,onCloseByESC:t.func},close:function(){this.getEditorAPI().panelManager.closePanelByName(this.props.panelName)},closeByX:function(){n.isFunction(this.props.onCloseByX)&&this.props.onCloseByX(),this.close()},getKeyboardShortcuts:function(){return{esc:this.closeByESC}},closeByESC:function(){n.isFunction(this.props.onCloseByESC)?this.props.onCloseByESC():this.getEditorAPI().bi.event(r.events.welcomeVideoPanel.WELCOME_SCREEN_CLOSED,{panel_name:this.props.panelName,origin:"ESC"}),this.close()},handleShouldCloseOnBlur:function(){return this.getEditorAPI().bi.event(r.events.welcomeVideoPanel.WELCOME_SCREEN_CLOSED,{panel_name:this.props.panelName,origin:"outerClick"}),!0},getContent:function(e){var t=this.props.content;return t?s.translate(t[e]):""},getContentClass:function(){return this.props.contentClass||""},render:o})}),define("panels/focusPanels/exampleFocusPanel.rt",["react","lodash","panels/frames/focusPanelFrame"],function(e,t,n){"use strict";return function(){return e.createElement(n,{title:"Example Focus Panel",panelName:this.props.panelName,className:"example-focus-panel"},e.createElement("iframe",{className:"content-iframe",src:"http://www.w3schools.com"}))}}),define("panels/focusPanels/exampleFocusPanel",["create-react-class","panels/focusPanels/exampleFocusPanel.rt"],function(e,t){"use strict";return e({displayName:"exampleFocusPanel",render:t})}),define("panels/focusPanels/blogManagerPanel.rt",["react","lodash","baseUI","panels/frames/focusPanelFrame"],function(e,t,n,a){"use strict";return function(){return e.createElement("div",{className:"blog-manager-panel"},e.createElement(a,{panelName:this.props.panelName,className:"blog-manager-panel",shouldHideHeader:!0},e.createElement("iframe",{id:"blogManager",ref:"iframe",width:"100%",height:"100%",src:this.state.src,frameBorder:"0",allowFullScreen:!0})))}}),define("panels/focusPanels/blogManagerPanel",["reactDOM","create-react-class","prop-types","lodash","util","core","panels/focusPanels/blogManagerPanel.rt"],function(e,t,n,a,s,i,o){"use strict";return t({displayName:"blogManagerDialog",mixins:[s.postMessageMixin,i.mixins.editorAPIMixin],propTypes:{blogManagerAppPathType:n.string,api:n.object},getInitialState:function(){return{src:this.props.api.frameUrl}},componentWillMount:function(){this.setPostMessageHandler(null,this.onMessageFromDialog)},onMessageFromDialog:function(e){switch(e.type){case"ready":this.onReady();break;case"anchors":e.payload.pageId&&this.onAnchorsRequest(e.payload.pageId);break;case"cancel":void 0!==e.payload&&e.payload.postsUnchanged||this.props.api.reloadAppPartsMethod(),this.getEditorAPI().panelManager.closePanelByName(this.props.panelName)}},onAnchorsRequest:function(t){var n=JSON.stringify({type:"anchors",payload:{anchorsData:this.props.api.getAnchorsByPage(t),pageId:t}});e.findDOMNode(this.refs.iframe).contentWindow.postMessage(n,"*")},onReady:function(){var t=JSON.stringify({type:"settings",payload:{isOpenFromSantaEditor:!0,themeData:this.props.api.themeData,themeDataSchema:this.props.api.themeDataSchema,WIXAPPS_EDITOR_STYLES:this.props.api.WIXAPPS_EDITOR_STYLES,CK_EDITOR_FONT_STYLES:this.props.api.CK_EDITOR_FONT_STYLES,CustomUsedFontsUrl:this.props.api.CustomUsedFontsUrl,FontsCssUrls:this.props.api.FontsCssUrls,FontsData:this.props.api.FontsData,FontsMetadata:this.props.api.FontsMetadata,pagesData:this.props.api.pagesData,currentPageId:this.props.api.currentPageId,charSet:this.props.api.charSet,siteUrl:this.props.api.siteUrl,isSitePublished:this.props.api.isSitePublished,imageOrganizerUrl:this.props.api.imageOrganizerUrl,urlFormat:this.props.api.urlFormat,blogPageTitle:this.props.api.blogPageTitle,singlePostLayout:this.props.api.singlePostLayout,siteTitle:this.props.api.siteTitle,isHeroImageEnabled:this.props.api.isHeroImageEnabled,isHttpsEnabled:this.props.api.isHttpsEnabled}});e.findDOMNode(this.refs.iframe).contentWindow.postMessage(t,"*")},render:o})}),define("panels/focusPanels/shoutOutTemplatesPanel.rt",["react","lodash","baseUI","panels/frames/focusPanelFrame"],function(e,t,n,a){"use strict";return function(){return e.createElement("div",{className:"shoutout-templates-panel"},e.createElement(a,{panelName:"panels.focusPanels.shoutOutTemplatesPanel",className:"shoutout-templates-panel",shouldHideHeader:!0,onClose:this.onClose},e.createElement("iframe",{id:"shoutOutTemplates",ref:"iframe",width:"100%",height:"100%",src:this.props.frameUrl,frameBorder:"0",allowFullScreen:!0})))}}),define("panels/focusPanels/shoutOutTemplatesPanel",["create-react-class","prop-types","lodash","core","util","panels/focusPanels/shoutOutTemplatesPanel.rt"],function(e,t,n,a,s,i){"use strict";var o={evid:91,src:36,endpoint:"shout",sampleRatio:0,fields:{is_first:"bool",msid:"guid",referral_info:"string"}};return e({displayName:"shoutOutDialog",mixins:[a.mixins.editorAPIMixin,s.postMessageMixin],propTypes:{frameUrl:t.object},onClose:function(){return this.getEditorAPI().bi.event(o,{is_first:!0,referral_info:"editor panel"}),!0},componentWillMount:function(){this.setPostMessageHandler(null,this._onMessageFromDialog)},_onMessageFromDialog:function(e){"cancel"===e.type&&this.getEditorAPI().panelManager.closePanelByName("panels.focusPanels.shoutOutTemplatesPanel")},render:i})}),define("panels/focusPanels/aviaryPanel.rt",["react","lodash","baseUI","panels/frames/focusPanelFrame","util"],function(e,t,n,a,s){"use strict";return function(){return e.createElement(a,{panelName:this.props.panelName,shouldHideHelp:!0,title:s.translate("AVIARY_PANEL_TITLE"),className:"aviary-panel",onClose:this.onCloseFrame},e.createElement("div",{className:"aviary-dialog"},e.createElement("div",{ref:"content",id:"aviary_dialog_editor_content_wrapper"}),e.createElement("div",{id:"message",className:t({hidden:!this.state.showMessage}).transform(function(e,t,n){t&&e.push(n)},[]).join(" ")},e.createElement("div",{className:"message-bg"},e.createElement("span",{className:t({hidden:null==this.state.counter}).transform(function(e,t,n){t&&e.push(n)},[]).join(" "),id:"progress"},e.createElement("span",{id:"counter"},this.state.counter,"%")),e.createElement("span",{id:"messageContent"},this.state.messageText),e.createElement("span",{id:"cancel-button",className:t({hidden:!this.state.showCancelButton}).transform(function(e,t,n){t&&e.push(n)},[]).join(" "),onClick:this.onCancelClicked},s.translate("AVIARY_CANCEL_UPLOAD"))))))}}),define("panels/focusPanels/aviaryPanel",["reactDOM","create-react-class","prop-types","lodash","zepto","core","util","panels/focusPanels/aviaryPanel.rt","coreUtilsLib"],function(e,t,n,a,s,i,o,r,l){"use strict";function c(e){var t={},n=e.imageLink.value,a=n.uri,s=/(^https?)|(^data)/.test(a)?"":"/static/media/",i=/(jpg$)|(jpeg$)/i.test(a)?"image/jpeg":"image/png";return(n.width>C||n.height>C)&&(a=a+"_"+C),t.tmpImageSrc=N+s+a,t.tmpImageType=i,t}function p(e,t,n,a,s,i){e=e||"GET";var o=new window.XMLHttpRequest;o.open(e,t,!0),o.onreadystatechange=function(){4===o.readyState&&(200===o.status||304===o.status?s(o):a(o))},o.setRequestHeader("Content-type",i||"text/plain"),o.send(n)}function u(e,t){!function(e,t){var n=function(e){try{e=JSON.parse(e.responseText)}catch(t){e.status="error",e.errorDescription="Parse error: ticket returned unexpected response"}t(e)};p("GET",e+"?accept=json",null,n,n,"text/plain")}(y+"/media/tickets/get",function(n){var s=n.responseValue;if(!s)return _("ERROR_AVIARY_TITLE","ERROR_AVIARY_UPLOAD_MESSAGE","Code: "+v.AVIARY_UPLOAD_GET_TICKET_FAILED.errorCode),P.call(this,!0),!1;(function(e,t,n){var s=m,i=function(){var e=this.responseXML||this.responseText;n(s(e))},o={datauri:t,ut:e,s:"media"},r=[],l=void 0;for(l in o)o.hasOwnProperty(l)&&r.push(l+"="+o[l]);r=r.join("&");var c={onLoad:i,onError:i,onTimeout:i,onUploadProgress:function(e){if(e.lengthComputable){var t=Math.round(e.loaded/e.total*100);this.setState({counter:t})}}.bind(this),onAbort:this.onAbort};(function(e,t,n,s,i,o){e=e||"GET",s=s||{};var r=!0,l="undefined"!=typeof XDomainRequest;l?(this._xhrObject=new window.XDomainRequest,r=void 0):this._xhrObject=new window.XMLHttpRequest;var c=this._xhrObject;c.open(e,t,r),c.timeout=3e5,c.onload=s.onLoad||a.noop,c.onerror=s.onError||a.noop,c.ontimeout=s.onTimeout||a.noop,c.onprogress=s.onProgress||a.noop,c.upload&&c.upload.addEventListener("progress",s.onUploadProgress||a.noop,!1);l||(c.onabort=s.onAbort||a.noop,c.setRequestHeader("Content-type",i||"text/plain"),c.withCredentials=Boolean(o));c.send(n)}).call(this,"POST",T,r,c,"application/x-www-form-urlencoded",!1)}).call(this,s,e,t)}.bind(this))}function d(){var e=this.getEditorAPI(),t=e.selection.getSelectedComponents(),n=e.components.layout.get(t);return n.width+":"+n.height}function m(e){var t=void 0,n=void 0,a=void 0;if("string"==typeof e?(a=new window.Element("div")).innerHTML=e:a=e,a?n=(t=a.querySelector("upload")).getAttribute("success"):(t={getAttribute:function(){return"No Response Error"}},n=!1),o.stringUtils.isTrue(n)){var s=a.querySelector("properties"),i=a.querySelector("sys_meta");return{status:t.getAttribute("errorDescription"),originalName:i.getAttribute("original_file"),mimeType:i.getAttribute("mime_type"),fileUrl:i.getAttribute("file_url"),iconUrl:i.getAttribute("icon_url"),fileSize:i.getAttribute("file_size"),width:i.getAttribute("width"),height:i.getAttribute("height"),ver:i.getAttribute("ver"),fileName:s.getAttribute("file_name")}}return{status:"error",origin:t.getAttribute("origin"),errorCode:t.getAttribute("errorCode"),errorDescription:t.getAttribute("errorDescription")}}function h(e){if("error"===(e=e||{}).status||"timeout"===e.status)return P.call(this,!1),_("ERROR_AVIARY_TITLE","ERROR_AVIARY_UPLOAD_MESSAGE","Code: "+v.AVIARY_UPLOAD_TO_STATIC_FAILED.errorCode),!1;var t=new Date,n=[t.getFullYear(),t.getMonth()+1,t.getDate(),[t.getHours(),t.getMinutes(),t.getSeconds()].join(":")].join("-");this._newImageUri=e.fileName,e.originalName=(this.props.imageLink.value.title||"Edited Image")+" "+n,function(e){var t=function(e){var t="<mediaItemList>";return t+="<mediaItem",t+=' mediaType="picture',t+='" componentType="photo',t+='" fileName="'+e.fileName,t+='" originalFileName="'+e.originalName,t+='" fileSize="'+e.fileSize,t+='" width="'+e.width,t+='" height="'+e.height,t+='" mimeType="'+e.mimeType,t+='" iconURL="'+e.iconUrl,t+='" version="'+e.ver,t+='" tags="'+S,t+='" />\n',t+="</mediaItemList>"}(e),n=y+"/media/private/add",s=function(){(function(){(function(){if(!this._newImageSize||!this._newImageUri)return;var e=this.props.imageLink.value.originalImageDataRef;e||delete(e=a.cloneDeep(this.props.imageLink.value)).originalImageDataRef;this.props.imageLink.requestChange({height:this._newImageSize.height,width:this._newImageSize.width,uri:this._newImageUri,originalImageDataRef:e}),this._newImageSize=null,this._newImageUri=null}).call(this),function(){this.setState({disableCloseButton:!1})}.call(this),g.call(this,{result:"OK"})}).call(this)}.bind(this);p("POST",n,t,function(){return _("ERROR_AVIARY_TITLE","ERROR_AVIARY_UPLOAD_MESSAGE","Code: "+v.AVIARY_UPLOAD_UPDATE_MEDIA_FAILED.errorCode),!1},s,"application/xml")}.call(this,e)}function g(e){e=e||{},this.state.disableCloseButton||(this._aviaryCloseCause=e.result||"CANCEL",k.close(),this._forceClose||this.setTimeoutNamed("close",function(){this._forceClose=!0}.bind(this),2e3))}function f(e,t){var n=void 0;n=e?{messageText:e,showMessage:!0}:{showMessage:!1},t?(n.showCancelButton=!0,window.XDomainRequest||(n.counter=0)):a.merge(n,{showCancelButton:!1,counter:null}),this.setState(n)}function P(e,t,n){k&&window.AV&&window.AV.paintWidgetInstance&&(e?(k.disableControls(),k.showWaitIndicator(),this.setState({disableCloseButton:!0}),f.call(this,t,n)):(k.enableControls(),k.hideWaitIndicator(),this.setState({disableCloseButton:!1,showMessage:!1})))}function _(e,t,n){var a=t&&b(t);(window&&window.confirm||function(){})(a,n)}function E(e){return function(){L.reactFunctions[e]&&L.reactFunctions[e]()}}var b=o.translate,C=1500,N=o.serviceTopology.htmlEditorRootUrl;N=N?N.replace(/html\/editor\/?/,""):"http://editor.wix.com/";var I=o.serviceTopology.mediaServerRoot,y="//editor."+I,T="//0.static."+I+"/api/add_file",S="edited image",v={AVIARY_MISSING_ID_IN_SKIN:{errorCode:21030,desc:"Missing an id on this._skinParts.content, it is required for Aviary to work"},AVIARY_DIALOG_WRONG_DATA_TYPE:{errorCode:21031,desc:"Data is missing or Data Type is not an Image Data"},AVIARY_NOT_LOADED:{errorCode:21032,desc:"Aviary.js was not loaded after 5000ms"},AVIARY_FORCE_CLOSED:{errorCode:21033,desc:"Aviary dialog was not closed on first try, forced it to close on second try"},AVIARY_UPLOAD_GET_TICKET_FAILED:{errorCode:21034,params:{c1:"error message"},desc:"Failed on getting ticket for upload."},AVIARY_UPLOAD_TO_STATIC_FAILED:{errorCode:21035,params:{c1:"error message"},desc:"Uploading image to statics failed."},AVIARY_UPLOAD_UPDATE_MEDIA_FAILED:{errorCode:21036,params:{c1:"error message"},desc:"Updating private media with uploaded file failed."},AVIARY_RETURNED_AN_ERROR:{errorCode:21037,params:{c1:"error message",i1:"error code"},desc:"Aviary editor failed on external script error."},AVIARY_REACHED_INNER_SAVE_FUNCTION:{errorCode:21038,desc:"Aviary somehow called its inner save function, this does not supposed to happen."}},k=void 0,L={reactFunctions:{},onLoad:E("onLoad"),onAviarySave:E("onAviarySave"),onAviaryClose:E("onAviaryClose"),onAviaryReady:E("onAviaryReady"),onAviarySaveButtonClick:E("onAviarySaveButtonClick"),onError:E("onError")};return t({displayName:"aviaryPanel",mixins:[o.postMessageMixin,l.timersMixins.timeoutsMixin,i.mixins.editorAPIMixin],propTypes:{imageLink:n.object,onDialogResult:n.func,editorAPI:n.object.isRequired},getInitialState:function(){var e=c(this.props);return a.merge(e,{tmpImageId:"some_random_id_"+Date.now(),disableCloseButton:!0,showMessage:!0,messageText:null,showCancelButton:!1,counter:null}),e},componentWillReceiveProps:function(e){this.setState(c(e))},componentDidMount:function(){(function(){L.reactFunctions={onLoad:this.onLoad,onAviarySave:this.onAviarySave,onAviaryClose:this.onAviaryClose,onAviaryReady:this.onAviaryReady,onAviarySaveButtonClick:this.onAviarySaveButtonClick,onError:this.onError},k?L.onLoad():k=new window.Aviary.Feather({apiKey:"57b23071b",apiVersion:3,tools:"crop,orientation,enhance,effects,frames,brightness,contrast,saturation,warmth,focus,sharpness,draw,redeye,whiten,blemish,stickers,text",maxSize:C,theme:"minimum",noCloseButton:!0,displayImageSize:!0,onLoad:L.onLoad,onSave:L.onAviarySave,onClose:L.onAviaryClose,onReady:L.onAviaryReady,onSaveButtonClicked:L.onAviarySaveButtonClick,onError:L.onError,appendTo:"aviary_dialog_editor_content_wrapper",language:function(e){return e?e.toLowerCase():"en"}(this.getEditorAPI().getLanguageCode()),launchDelay:0})}).call(this),this.setTimeoutNamed("aviaryIsDeadTimer",function(){this.setState({disableCloseButton:!1})}.bind(this),1e4),f.call(this,b("AVIARY_LOAD_MESSAGE","Loading Image Editor..."),!1)},componentWillMount:function(){var e=s("<img/>",{id:this.state.tmpImageId,src:this.state.tmpImageSrc,type:this.state.tmpImageType,crossOrigin:""});this.image=e.get(0)},launchAviary:function(){var e=b("AVIARY_ORIGINAL_ASPECT");k.launch({image:this.state.tmpImageId,cropPresetDefault:e,cropPresets:[[e,d.call(this)],"Custom"]})},onLoad:function(){var e=b("AVIARY_ORIGINAL_ASPECT");k.launch({image:this.image,cropPresetDefault:e,cropPresets:[[e,d.call(this)],"Custom"]})},onAviarySave:function(){return!1},onAviaryClose:function(){this.clearTimeoutNamed("close"),this._forceClose=!1,this.props.onDialogResult&&this.props.onDialogResult(this._aviaryCloseCause)},onAviaryReady:function(){this.clearTimeoutNamed("aviaryIsDeadTimer"),this.setState({showMessage:!1,disableCloseButton:!1})},onAviarySaveButtonClick:function(){var t=JSON.parse(k.getActionList()),n=a.get(t,"actionlist.length",0)>1,s=e.findDOMNode(this.refs.content).querySelector("#avpw_canvas_element"),i="";return n?(P.call(this,!0,b("AVIARY_WAIT_MESSAGE","Uploading image, please wait..."),!0),i=encodeURIComponent(s.toDataURL(this.state.tmpImageType)),this._newImageSize={width:s.width,height:s.height},u.call(this,i,h.bind(this))):g.call(this,{result:"CANCEL"}),!1},onProgress:function(e){if(e.lengthComputable){var t=Math.round(e.loaded/e.total*100);this.setState({counter:t})}},onAbort:function(){return P.call(this,!1),this._xhrObject=null,!1},onError:function(e){return _(0,"ERROR_AVIARY_GENERAL_MESSAGE","Codes: "+v.AVIARY_RETURNED_AN_ERROR.errorCode+", "+e.code),!1},onCloseFrame:function(){g.call(this)},componentWillUnmount:function(){g.call(this)},onCancelClicked:function(){this._xhrObject?(this._xhrObject.abort(),window.XDomainRequest&&this.onAbort()):P.call(this,!1)},render:function(){return r.call(this)}})}),define("panels/focusPanels/organizeImagesPanel.rt",["react","lodash","baseUI","panels/frames/focusPanelFrame","util","symbols"],function(e,t,n,a,s,i){"use strict";return function(){return e.createElement(a,{panelName:this.props.panelName,helpId:this.state.helpId,className:"organize-images-panel",shouldNotCloseOnBlur:!0,shouldHideHeader:!0,onClose:this.onPanelClose,width:Math.round(.8*window.innerWidth).toString(),height:Math.round(.8*window.innerHeight).toString()},e.createElement("iframe",{id:"organizeImages",ref:"iframe",className:t({hidden:!this.state.show,transition:!0}).transform(function(e,t,n){t&&e.push(n)},[]).join(" "),onLoad:this.onLoad,width:"100%",height:"100%",src:this.getFrameUrl(),frameBorder:"0",allowTransparency:!0}),e.createElement(n.preloader,{ref:"preloader",className:t({hidden:this.state.show,transition:!0}).transform(function(e,t,n){t&&e.push(n)},[]).join(" ")}))}}),define("panels/focusPanels/organizeImagesPanel",["reactDOM","create-react-class","prop-types","lodash","util","panels/focusPanels/organizeImagesPanel.rt","pms","core","helpIds","higherOrderComponents","coreUtilsLib","coreBi","constants","stateManagement"],function(e,t,n,a,s,i,o,r,l,c,p,u,d,m){"use strict";function h(){this.getEditorAPI().bi.event(v.ORGIMAGES_DIALOG_LOADED,{c1:"new Organize Images"}),this._isReady=!0;var e=function(){return{images:this.props.imageDatas,translation:s.imageOrganizerUtils.getTranslation(this.props.galleryType),topology:s.serviceTopology,isPreset:this.props.isPreset,userSets:this.userSets}}.call(this);this._pms.send("set",e)}function g(e){var t=e.data&&e.data.helpId;if(t){var n={panel_name:this.props.panelName,origin:d.BI.HELP.ORIGIN.PANEL,component:this.getEditorAPI().selection.getSelectedComponentType()};this.getEditorAPI().panelManager.openHelpCenter(t,null,null,n)}}function f(){var e=P.call(this),t=void 0,n=void 0;this.props.galleryType===S?(n="6377d68a-a81f-4fd7-a675-f5a79f7e7ea9",t=s.translate("ORGANIZE_ICONS_DIALOG_TITLE")):(n=l.EXTERNAL.ORGANIZE_IMAGES,t=s.translate("OrganizeImages_IMAGES_DIALOG_TITLE")),this.setState({helpId:n,title:t,show:!0}),e.contentWindow.focus()}function P(){return e.findDOMNode(this.refs.iframe)}function _(e){var t=this.props.createImageDataItem();return a.merge(t,e),t}function E(e){var t=e.data,n=this.props.imageDatas,s=void 0,i=a.map(t,a.bind(function(e){return s=a.includes(e.id,"new_")?_.call(this,e.data):function(e,t){var n=void 0,s=a.find(e,{id:t.id});return s&&(n=a.merge(s.data,t.data)),n}(n,e),function(e){a.get(e,"title.length",0)>100&&(e.title=e.title.substring(0,100))}(s),s},this));this.props.imagesChanged(i)}function b(){this.getEditorAPI().panelManager.closePanelByName(this.props.panelName)}function C(e){var t=this.getEditorAPI(),n=e.data,s=t.bi.event;p.log.info("bi events",e),a.forOwn(n,function(e,t){s(v[t],n[t])})}function N(e){var t=this.getEditorAPI(),n=e.data,a=n.params||{};p.log.info("bi events",e),t.bi.event(v[n.name],a)}function I(e){e=e.data;var t=this.getEditorAPI();t.openLinkPanel({defaultLinkType:"ExternalLink",link:e.data.link,callback:function(n){n&&n.type||(n=null),this._pms.send("setLink",{link:n,linkText:n?s.link.getLinkValueAsString(t,n,!0):"",imgData:e,id:e.id})}.bind(this)})}function y(e,t,n){var i=this,o=void 0,r={title:"ORGANIZE_IMAGES_MEDIA_MNGR_TITLE",submit:"ORGANIZE_IMAGES_MEDIA_MNGR_SUBMIT"},l=this.getEditorAPI().mediaServices,c=l.mediaManager;switch(this.props.galleryType){case S:a.forEach(r,function(e,t){r[t]=e.replace("IMAGES","ICONS")}),o=c.categories.ICON_SOCIAL;break;default:o=c.categories.IMAGE}var p=e?"_MANY":"_ONE";c.open(o,{multiSelect:e,translation:{title:s.translate(r.title+p),submitButton:n?s.translate("MMGR_submitbutton_gallery_uploads_choose"):s.translate("MMGR_submitbutton_gallery_uploads_add")},callback:function(e,n){t.call(i,e,n),l.setFocusToEditor()}})}function T(){return"new_"+k++}var S="socialIcons",v=u.events.organizeImages,k=0,L=t({displayName:"organizeImagesPanel",mixins:[s.postMessageMixin,r.mixins.editorAPIMixin],propTypes:{imageDatas:n.arrayOf(n.object).isRequired,isPreset:n.bool.isRequired,galleryType:n.oneOf(["images",S]).isRequired,imagesChanged:n.func.isRequired,createImageDataItem:n.func.isRequired},getInitialState:function(){return this.userSets=m.editorPlugins.userPreferences.selectors.getGlobalUserPreferences("OrganizeImages")(this.getEditorAPI().store.getState()),this._pms=new o({connectionID:"OrganizeImages"}),this._pms.on("ready",h,this),this._pms.on("setup",f,this),this._pms.on("closed",b,this),this._pms.on("openLinkDialog",I,this),this._pms.on("save",E,this),this._pms.on("bi",N,this),this._pms.on("biChanges",C,this),this._pms.on("openHelpCenter",g,this),this._pms.on("openMediaGallery",this.openMediaGallery,this),this._pms.on("openMediaGalleryForReplace",this.openMediaGalleryForReplace,this),{show:!1}},openMediaGallery:function(){y.call(this,!0,function(e){if(e){var t=[];a.forEach(e,a.bind(function(e){var n=_.call(this,{uri:e.fileName,height:e.height,width:e.width,title:e.title||e.fileName});t.push({id:T(),data:n,linkText:""})},this)),this._pms.send("add",t)}},!1)},openMediaGalleryForReplace:function(e){var t=e.data.position;y.call(this,!1,function(e){if(e){var n=[];a.forEach(e,a.bind(function(e){var t=_.call(this,{uri:e.fileName,height:e.height,width:e.width,title:e.title||e.fileName});n.push({id:T(),data:t,linkText:""})},this)),n.length<=0||this._pms.send("replace",{position:t,data:n[0]})}},!0)},getFrameUrl:function(){return s.imageOrganizerUtils.getFrameUrl(this.props.galleryType)},componentDidMount:function(){this._pms.setTargetWindow(P.call(this).contentWindow),P.call(this).addEventListener("load",this.onFrameLoad)},onFrameLoad:function(){this._pms.on("setUserSets",this.setUserSettings,this)},setUserSettings:function(e){var t=this.userSets=e.data;this.getEditorAPI().store.dispatch(m.editorPlugins.userPreferences.actions.setGlobalUserPreferences("OrganizeImages",a.assign(t,{saveNow:!0}))).catch(a.noop)},onPanelClose:function(){var e=this.getEditorAPI();return!this._isReady||(this._pms.send("saveAndClose"),e.bi.event(v.ORGIMAGES_CLICK_CLOSE),!1)},render:i}),A=c.connectEditorAPI(function(e){var t=e.selection.getSelectedComponents();return{imageDatas:function(e,t){return a.map(e.items,function(e){var n=e.link;return{id:T(),data:e,linkText:n?s.link.getLinkValueAsString(t,n,!0):""}})}(e.components.data.get(a.head(t)),e)}})(L);return A.pure=L,A}),define("panels/focusPanels/popupTemplateMapper",["lodash"],function(e){"use strict";return function(t,n){return{close:e.partial(t.panelManager.closePanelByName,n.panelName),openHelpCenter:t.panelManager.openHelpCenter,selectedComponentType:t.selection.getSelectedComponentType()}}}),define("panels/focusPanels/popupTemplate.rt",["react","lodash","panels/frames/focusPanelFrame","baseUI","baseUILib","symbols","util"],function(e,t,n,a,s,i,o){"use strict";return function(){function r(){var r=o.translate;return e.createElement(n,{shouldHideHeader:!0,isSingleInstance:this.props.isSingleInstance,panelName:this.props.panelName,shouldNotCloseOnBlur:this.props.shouldNotCloseOnBlur},e.createElement("div",{className:"popup-template-panel "+(this.props.className||"")},e.createElement("div",{className:"panel-header dark"},e.createElement("button",{className:"close",onClick:this.props.close},e.createElement(i.symbol,{name:"headerCloseButton"})),this.props.h1text?e.createElement("h1",{key:"h1text"},r(this.props.h1text)):null,this.props.h2text?e.createElement("h2",{key:"h2text"},r(this.props.h2text)):null,e.createElement("div",{className:"image "+(this.props.imageClassName||"")},this.props.symbolName?e.createElement(a.symbol,{key:"symbol",name:this.props.symbolName,className:"popup-symbol"}):null)),e.createElement("div",{className:"content"},e.createElement("div",{className:"panel-text"},e.createElement("span",{},r(this.props.bodyText)+" "),this.props.helpId?e.createElement("span",{key:"learnMoreLink",className:"learn-more-link",onClick:this.openLearnMore},r("Notification_Box_Learn_More")):null),e.createElement("div",{className:"bottom-controls"},this.props.hideDontShowCheckbox?null:e.createElement(s.Checkbox,{value:this.props.dontShowAgain,onChange:this.props.toggleDontShowAgain,key:"dont-show-again-checkbox",labelAfterSymbol:!0,className:"dont-show-again",label:"Notification_Box_Dont_Show_Again"}),this.hasCustomButtons()?null:e.createElement(a.button,{key:"hasNoCustomButtons",className:"btn-ok btn-md",onClick:this.props.close,label:this.props.btnText||"Notification_Box_Got_It"}),this.hasCustomButtons()?e.createElement.apply(this,["span",{key:"hasCustomButtons"},t.map(this.props.buttons,function(t,n,a){return e.createElement(s.Button,{key:a,className:n.className,onClick:this.handleBtnClick.bind(this,n),automationId:n.automationId},n.icon?e.createElement(i.symbol,{key:"symbol-"+n.icon,className:n.label?"symbol-with-label":"",name:n.icon}):null,e.createElement("span",{"data-hint-id":n.hintId},"\n                            ",t(n.label),"\n                        "))}.bind(this,r))]):null))))}return r.apply(this,[])}}),define("panels/focusPanels/popupTemplate",["create-react-class","prop-types","lodash","higherOrderComponents","panels/focusPanels/popupTemplateMapper","constants","panels/focusPanels/popupTemplate.rt"],function(e,t,n,a,s,i,o){"use strict";function r(e,t,a){var s="Warning: Failed propType: ";return!e.symbolName^!e.imageClassName?e[t]&&!n.isString(e[t])?new Error(s+"Invalid prop `"+t+"` of type `"+_typeof(e[t])+"` supplied to `"+a+"`, expected `string`."):void 0:new Error(s+a+" must have either symbolName or imageClassName but not both.")}var l=e({displayName:"popupTemplate",propTypes:{close:t.func.isRequired,openHelpCenter:t.func.isRequired,panelName:t.string.isRequired,h1text:t.string,h2text:t.string,symbolName:r,imageClassName:r,bodyText:t.string,btnText:t.string,buttons:t.arrayOf(t.object),helpId:t.string,selectedComponentType:t.string,dontShowAgain:t.bool,toggleDontShowAgain:t.func.isRequired,hideDontShowCheckbox:t.bool,shouldNotCloseOnBlur:t.bool},openLearnMore:function(){var e={component:this.props.selectedComponentType,panel_name:this.props.panelName,origin:i.BI.HELP.ORIGIN.PANEL,learn_more:!0};this.props.openHelpCenter(this.props.helpId,null,e)},handleBtnClick:function(e){n.isFunction(e.onClick)&&e.onClick(),this.props.close()},hasCustomButtons:function(){return this.props.buttons&&this.props.buttons.length},render:o}),c=a.connectEditorAPI(s)(a.renderWhenMutated(l)),p=a.linkUserPreferences()(c);return p.pure=l,p}),define("panels/focusPanels/outOfGridMobilePanel.rt",["react","lodash","constants","panels/focusPanels/popupTemplate"],function(e,t,n,a){"use strict";return function(){return e.createElement(a,{panelName:this.props.panelName,h1text:"Notification_Box_Out_Grid_Mobile_Title",h2text:"Notification_Box_Out_Grid_Mobile_Subtitle",symbolName:"outOfGridMobile",bodyText:"Notification_Box_Out_Grid_Mobile_Text",helpId:"769b8807-30b7-4ee4-8a7b-93674099732f",dontShowAgainKey:n.USER_PREFS.OUT_OF_GRID.MOBILE.OUT_OF_GRID_DONT_SHOW_AGAIN,userPrefType:"site"})}}),define("panels/focusPanels/outOfGridMobilePanel",["create-react-class","core","panels/focusPanels/outOfGridMobilePanel.rt"],function(e,t,n){"use strict";return e({displayName:"outOfGridMobilePanel",mixins:[t.mixins.editorAPIMixin],render:n})}),define("panels/focusPanels/outOfGridDesktopPanel.rt",["react","lodash","constants","panels/focusPanels/popupTemplate"],function(e,t,n,a){"use strict";return function(){return e.createElement(a,{panelName:this.props.panelName,className:"out-of-grid-desktop-panel",h1text:"Notification_Box_Out_Grid_Desktop_Title",h2text:"Notification_Box_Out_Grid_Desktop_Subtitle",symbolName:"outOfGridDesktop",bodyText:"Notification_Box_Out_Grid_Desktop_Text",helpId:"b712fa83-f939-4ec4-ab68-b7f968d90fab",dontShowAgainKey:n.USER_PREFS.OUT_OF_GRID.DESKTOP.OUT_OF_GRID_DONT_SHOW_AGAIN,userPrefType:"site"})}}),define("panels/focusPanels/outOfGridDesktopPanel",["create-react-class","core","panels/focusPanels/outOfGridDesktopPanel.rt"],function(e,t,n){"use strict";return e({displayName:"outOfGridDesktopPanel",mixins:[t.mixins.editorAPIMixin],render:n})}),define("panels/focusPanels/outOfContainerGridPanel.rt",["react","lodash","constants","panels/focusPanels/popupTemplate"],function(e,t,n,a){"use strict";return function(){return e.createElement(a,{panelName:this.props.panelName,h1text:"Notification_Box_Out_Column_Desktop_Title",imageClassName:"container-out-of-grid",bodyText:"Notification_Box_Out_Column_Desktop_Text",helpId:"88ed6daf-e9e1-4531-bdfb-bc00fafdb9d0",dontShowAgainKey:n.USER_PREFS.OUT_OF_GRID.CONTAINER.OUT_OF_GRID_DONT_SHOW_AGAIN,userPrefType:"site"})}}),define("panels/focusPanels/outOfContainerGridPanel",["create-react-class","core","panels/focusPanels/outOfContainerGridPanel.rt"],function(e,t,n){"use strict";return e({displayName:"outOfContainerGridPanel",mixins:[t.mixins.editorAPIMixin],render:n})}),define("panels/focusPanels/dragToHeaderPanel.rt",["react","lodash","constants","panels/focusPanels/popupTemplate"],function(e,t,n,a){"use strict";return function(){return e.createElement(a,{panelName:this.props.panelName,h1text:"Notification_Box_Header_Added_Title",h2text:"Notification_Box_Header_Added_Subtitle",symbolName:"showOnAllPages",bodyText:"Notification_Box_Header_Added_Text",helpId:"db639aa7-f012-4526-9390-ef466c95f19d",dontShowAgainKey:n.USER_PREFS.DRAG_TO_HEADER.DONT_SHOW_AGAIN,userPrefType:n.USER_PREFS.TYPES.SITE})}}),define("panels/focusPanels/dragToHeaderPanel",["create-react-class","core","panels/focusPanels/dragToHeaderPanel.rt"],function(e,t,n){"use strict";return e({displayName:"dragToHeaderPanel",mixins:[t.mixins.editorAPIMixin],render:n})}),define("panels/focusPanels/attachToSOSPPanelMapper",["constants","stateManagement"],function(e,t){"use strict";var n=function(n){return function(){n.store.dispatch(t.editorPlugins.userPreferences.actions.setSiteUserPreferences(e.USER_PREFS.SOSP.PANELS.ATTACH_DO_NOT_SHOW_AGAIN,!0))}};return function(a){return{closePanel:a.panelManager.closePanelByName,openHelpCenter:a.panelManager.openHelpCenter,doNotShowAgain:!!t.editorPlugins.userPreferences.selectors.getSiteUserPreferences(e.USER_PREFS.SOSP.PANELS.ATTACH_DO_NOT_SHOW_AGAIN)(a.store.getState()),setDoNotShowAgain:n(a)}}}),define("panels/focusPanels/attachToSOSPPanel.rt",["react","lodash","panels/frames/focusPanelFrame","baseUILib","symbols","util"],function(e,t,n,a,s,i){"use strict";return function(){return function(){var t=i.translate;return e.createElement(n,{ref:"panelFrame",className:"popup-medium attach-to-sosp-panel",shouldHideHeader:!0,keyboardShortcuts:this.getKeyboardShortcuts(),panelName:this.props.panelName},e.createElement(a.Composites.BigPanelHeader,{},e.createElement(a.PanelHeaderCenteredText,{title:"Notification_Box_MembersBar_Added_Title",subtitle:"Notification_Box_MembersBar_Added_Subtitle",titleType:"T16",onClose:this.onClose}),e.createElement(a.PanelHeaderIllustration,{blueStripHeight:92},e.createElement("img",{className:"illustration",src:this.getIllustrationSrc()}))),e.createElement(a.Composites.PanelContent,{},e.createElement(a.Composites.RichText,{},e.createElement(a.RichText,{type:"T06"},e.createElement("p",{},t("Notification_Box_MembersBar_Added_Text"),"\n                    ",e.createElement("a",{onClick:this.onLearnMoreClick}," ",t("Notification_Box_Learn_More")))))),e.createElement(a.Composites.ActionSetHorizontal,{},e.createElement(a.Checkbox,{value:this.state.doNotShowAgain,label:"Notification_Box_Dont_Show_Again",labelAfterSymbol:!0,onChange:this.onDoNotShowAgainClick}),e.createElement(a.Button,{className:"btn-md",onClick:this.onClose},e.createElement("span",{},t("Notification_Box_Got_It")))))}.apply(this,[])}}),define("panels/focusPanels/attachToSOSPPanel",["create-react-class","prop-types","util","helpIds","higherOrderComponents","panels/focusPanels/attachToSOSPPanelMapper","panels/focusPanels/attachToSOSPPanel.rt"],function(e,t,n,a,s,i,o){"use strict";var r=e({displayName:"AttachDetachSOSPPanel",propTypes:{panelName:t.string.isRequired,closePanel:t.func.isRequired,openHelpCenter:t.func.isRequired,doNotShowAgain:t.bool.isRequired,setDoNotShowAgain:t.func.isRequired},getInitialState:function(){return{doNotShowAgain:this.props.doNotShowAgain}},getKeyboardShortcuts:function(){return{esc:this.onClose}},getIllustrationSrc:function(){var e=2===n.browserUtil.getDevicePixelRatio()?"panels/focusPanels/addRemoveFromBarRetina.gif":"panels/focusPanels/addRemoveFromBar.gif";return n.media.getMediaUrl(e)},onClose:function(){this.state.doNotShowAgain&&this.props.setDoNotShowAgain(),this.props.closePanel(this.props.panelName)},onLearnMoreClick:function(){this.props.openHelpCenter(a.LEARN_MORE.SOSP_ATTACH_PANEL)},onDoNotShowAgainClick:function(){this.setState({doNotShowAgain:!this.state.doNotShowAgain})},render:o});return s.connectEditorAPI(i)(s.renderWhenMutated(r))}),define("panels/focusPanels/detachedFromSOSPPanelMapper",["constants","stateManagement"],function(e,t){"use strict";var n=function(n){return function(){n.store.dispatch(t.editorPlugins.userPreferences.actions.setSiteUserPreferences(e.USER_PREFS.SOSP.PANELS.DETACH_DO_NOT_SHOW_AGAIN,!0))}};return function(a){return{closePanel:a.panelManager.closePanelByName,openHelpCenter:a.panelManager.openHelpCenter,doNotShowAgain:!!t.editorPlugins.userPreferences.selectors.getSiteUserPreferences(e.USER_PREFS.SOSP.PANELS.DETACH_DO_NOT_SHOW_AGAIN)(a.store.getState()),setDoNotShowAgain:n(a)}}}),define("panels/focusPanels/detachedFromSOSPPanel.rt",["react","lodash","panels/frames/focusPanelFrame","baseUILib","symbols","util"],function(e,t,n,a,s,i){"use strict";return function(){return function(){var t=i.translate;return e.createElement(n,{ref:"panelFrame",className:"popup-medium detached-from-sosp-panel",shouldHideHeader:!0,keyboardShortcuts:this.getKeyboardShortcuts(),panelName:this.props.panelName},e.createElement(a.Composites.BigPanelHeader,{},e.createElement(a.PanelHeaderCenteredText,{title:"Notification_Box_MemberSidebar_Move_Element_Title",subtitle:"Notification_Box_Membersidebar_Move_Element_Subtitle",titleType:"T16",onClose:this.onClose}),e.createElement(a.PanelHeaderIllustration,{blueStripHeight:92},e.createElement("img",{className:"illustration",src:this.getIllustrationSrc()}))),e.createElement(a.Composites.PanelContent,{},e.createElement(a.Composites.RichText,{},e.createElement(a.RichText,{type:"T06"},e.createElement("p",{},t("Notification_Box_Membersidebar_Move_Body"),"\n                    ",e.createElement("a",{onClick:this.onLearnMoreClick},t("Notification_Box_Membersidebar_Move_Link")))))),e.createElement(a.Composites.ActionSetHorizontal,{},e.createElement(a.Checkbox,{value:this.state.doNotShowAgain,label:"Notification_Box_Dont_Show_Again",labelAfterSymbol:!0,onChange:this.onDoNotShowAgainClick}),e.createElement(a.Button,{className:"btn-md",onClick:this.onClose},e.createElement("span",{},t("Notification_Box_Membersidebar_Move_Close")))))}.apply(this,[])}}),define("panels/focusPanels/detachedFromSOSPPanel",["create-react-class","prop-types","util","helpIds","higherOrderComponents","panels/focusPanels/detachedFromSOSPPanelMapper","panels/focusPanels/detachedFromSOSPPanel.rt"],function(e,t,n,a,s,i,o){"use strict";var r=e({displayName:"DetachedFromSOSPPanel",propTypes:{panelName:t.string.isRequired,closePanel:t.func.isRequired,openHelpCenter:t.func.isRequired,doNotShowAgain:t.bool.isRequired,setDoNotShowAgain:t.func.isRequired},getInitialState:function(){return{doNotShowAgain:this.props.doNotShowAgain}},getKeyboardShortcuts:function(){return{esc:this.onClose}},getIllustrationSrc:function(){var e=2===n.browserUtil.getDevicePixelRatio()?"panels/focusPanels/addRemoveFromBarRetina.gif":"panels/focusPanels/addRemoveFromBar.gif";return n.media.getMediaUrl(e)},onClose:function(){this.state.doNotShowAgain&&this.props.setDoNotShowAgain(),this.props.closePanel(this.props.panelName)},onLearnMoreClick:function(){this.props.openHelpCenter(a.LEARN_MORE.SOSP_DETACH_PANEL)},onDoNotShowAgainClick:function(){this.setState({doNotShowAgain:!this.state.doNotShowAgain})},render:o});return s.connectEditorAPI(i)(s.renderWhenMutated(r))}),define("panels/focusPanels/spotifySearchFocusPanel.rt",["react","lodash","panels/frames/focusPanelFrame","helpIds"],function(e,t,n,a){"use strict";return function(){return e.createElement(n,{ref:"focusPanelFrame",title:this.translateIfNeeded("Spotify_Player_Settings_Search"),panelName:this.props.panelName,selectedComponentType:this.props.selectedComponentType,className:"spotify-search-panel",helpId:a.EXTERNAL.SEARCH_SPOTIFY},e.createElement("iframe",{className:"content-iframe",src:this.props.iframeSrc}))}}),define("panels/focusPanels/spotifySearchFocusPanel",["create-react-class","lodash","core","util","panels/focusPanels/spotifySearchFocusPanel.rt"],function(e,t,n,a,s){"use strict";return e({displayName:"spotifySearch",mixins:[n.mixins.editorAPIMixin,a.translationMixin,a.postMessageMixin],render:s,componentDidMount:function(){this.setPostMessageHandlerNamed("spotifySearch",this.props.id,this.onMessageFromDialog)},onMessageFromDialog:function(e){t.isFunction(this.props.callback)&&this.props.callback(e),this.getEditorAPI().panelManager.closePanelByName(this.props.panelName)}})}),define("panels/focusPanels/iTunsLinkMaker.rt",["react","lodash","panels/frames/focusPanelFrame","helpIds"],function(e,t,n,a){"use strict";return function(){return e.createElement(n,{title:this.translateIfNeeded("iTunes_Link_Maker_Title"),panelName:this.props.panelName,helpId:a.EXTERNAL.SEARCH_ITUNES,className:"itunes-link-maker"},e.createElement("iframe",{className:"content-iframe",src:"https://linkmaker.itunes.apple.com"}))}}),define("panels/focusPanels/iTunsLinkMaker",["create-react-class","lodash","util","panels/focusPanels/iTunsLinkMaker.rt"],function(e,t,n,a){"use strict";return e({displayName:"iTunesLinkMaker",mixins:[n.translationMixin],render:a})}),define("panels/focusPanels/pageAppInstallingPanelMapper",[],function(){"use strict";return function(e){return{closePanel:e.panelManager.closePanelByName,openHelpCenter:e.panelManager.openHelpCenter}}}),define("panels/focusPanels/pageAppInstalling.rt",["react","lodash","panels/frames/focusPanelFrame","baseUILib","symbols","util"],function(e,t,n,a,s,i){"use strict";return function(){return function(){var t=i.translate;return e.createElement(n,{ref:"panelFrame",shouldHideHeader:!0,className:"member-area-added-panel popup-medium",shouldNotCloseOnBlur:this.props.isInstalling,keyboardShortcuts:this.getKeyboardShortcuts(),panelName:this.props.panelName},e.createElement(a.Composites.BigPanelHeader,{},e.createElement(a.PanelHeaderCenteredText,{title:this.getTitleText(),shouldTranslate:!1,subtitle:this.getSubtitleText(),onClose:this.props.isInstalling?void 0:this.onClose}),e.createElement(a.PanelHeaderIllustration,{blueStripHeight:92},e.createElement("img",{className:"illustration",src:this.getIllustrationSrc(),alt:"app installing illustration"}))),e.createElement(a.Composites.PanelContent,{},e.createElement(a.Composites.RichText,{},e.createElement(a.RichText,{type:"T06"},e.createElement("p",{},this.getBodyText())))),e.createElement(a.Composites.ActionSetHorizontal,{},e.createElement(a.Button,{onClick:this.onClose,disabled:this.props.isInstalling,className:"btn-md"},e.createElement("span",{},t(this.getButtonText())))))}.apply(this,[])}}),define("panels/focusPanels/pageAppInstalling",["create-react-class","prop-types","util","higherOrderComponents","panels/focusPanels/pageAppInstallingPanelMapper","panels/focusPanels/pageAppInstalling.rt"],function(e,t,n,a,s,i){"use strict";var o=e({displayName:"pageAppInstallingPanel",mixins:[n.translationMixin],propTypes:{closePanel:t.func.isRequired,isInstalling:t.bool.isRequired,appName:t.string.isRequired,panelName:t.string.isRequired},getTitleText:function(){var e={appName:this.props.appName};return this.translateTemplate("tpa_messages_new_page_added_popup_title",e)},getSubtitleText:function(){return this.translateTemplate("tpa_messages_new_page_added_popup_subtitle",{})},getBodyText:function(){var e={appName:this.props.appName};return this.translateTemplate("tpa_messages_new_page_added_popup_body",e)},getButtonText:function(){return this.props.isInstalling?"tpa_messages_new_page_added_popup_button":"tpa_messages_new_page_added_popup_button_getstarted"},getKeyboardShortcuts:function(){return{esc:function(){this.props.isInstalling&&this.onClose()}}},onClose:function(){this.props.closePanel(this.props.panelName)},getIllustrationSrc:function(){var e=void 0;return e=this.props.isInstalling?2===n.browserUtil.getDevicePixelRatio()?"panels/focusPanels/appLoaderRetina.v2.gif":"panels/focusPanels/appLoader.v2.gif":2===n.browserUtil.getDevicePixelRatio()?"panels/focusPanels/appLoaderSuccessRetina.v2.gif":"panels/focusPanels/appLoaderSuccess.v2.gif",n.media.getMediaUrl(e)},render:i});return a.connectEditorAPI(s)(a.renderWhenMutated(o))}),define("panels/focusPanels/howToVideoGalleryPanel.rt",["react","lodash","panels/frames/focusPanelFrame","baseUILib"],function(e,t,n,a){"use strict";return function(){return e.createElement(n,{ref:"panelFrame",frameClassName:"how-to-video-gallery-frame",className:"how-to-video-gallery-panel",shouldHideHeader:!0,keyboardShortcuts:this.getKeyboardShortcuts(),panelName:this.props.panelName},e.createElement("div",{className:"panel-content"},e.createElement(a.Composites.BigPanelHeader,{},e.createElement(a.PanelHeaderCenteredText,{title:"HowTo_Videos_Panel_Title",subtitle:"HowTo_Videos_Panel_Subtitle",onClose:this.onClose})),e.createElement("iframe",{className:"gallery-iframe",src:this.getIframeSrc()})))}}),define("panels/focusPanels/howToVideoGalleryPanel",["create-react-class","lodash","core","util","stateManagement","panels/focusPanels/howToVideoGalleryPanel.rt"],function(e,t,n,a,s,i){"use strict";function o(){return"https://apps."+a.serviceTopology.baseDomain}var r=1290,l=s.editorPlugins.domMeasurements.selectors.getPreviewPosition;return e({displayName:"howToVideoGalleryPanel",mixins:[a.translationMixin,n.mixins.editorAPIMixin],componentDidMount:function(){window.addEventListener("message",this.iframeMessageHandler)},componentWillUnmount:function(){window.removeEventListener("message",this.iframeMessageHandler)},getStageWidth:function(){var e=this.getEditorAPI().store.getState();return n.utils.stageUtils.getStageLayout().width+l(e).left},iframeMessageHandler:function(e){(e.origin||e.originalEvent.origin)===o()&&"dealerButtonClick"===t.get(e,"data.event")&&this.getEditorAPI().panelManager.openPanel("panels.focusPanels.howToVideoPlayer",{videoId:e.data.details.clickType,origin:"TOP_BAR_HELP",withOverlay:!1,withShadow:!1},!0)},getIframeSrc:function(){var e=this.getEditorAPI().documentServices.generalInfo.getMetaSiteId(),t=this.getStageWidth();return o()+function(e){var t="/wix-dealer-webapp/api/lightboxViewer/EDITOR_VIDEO_GALLERY";return t+=e<r?"_SMALL/":"/"}(t)+e},getKeyboardShortcuts:function(){return{esc:this.onClose}},onClose:function(){this.getEditorAPI().panelManager.closePanelByName(this.props.panelName)},render:i})}),define("panels/focusPanels/feedbackPanel.rt",["react","lodash","panels/frames/focusPanelFrame"],function(e,t,n){"use strict";return function(){return e.createElement(n,{ref:"panelFrame",panelName:this.props.panelName,shouldHideHeader:!0,shouldHideHelp:!0,onClose:this.panelWillClose,isBareMode:!0},e.createElement("iframe",{className:"feedback-iframe",src:this.getIframeSrc(),width:"500",height:"743",ref:"iframe"}))}}),define("panels/focusPanels/feedbackPanel",["create-react-class","prop-types","lodash","core","util","constants","panels/focusPanels/feedbackPanel.rt"],function(e,t,n,a,s,i,o){"use strict";function r(){return"//feedback."+s.serviceTopology.baseDomain}function l(){return window.location.protocol+r()}var c=["ReactSource","experiments","experimentsoff","editorexp","viewerexp"];return e({propTypes:{panelName:t.string.isRequired},displayName:"feedbackPanel",mixins:[a.mixins.editorAPIMixin],getIframeSrc:function(){var e=this.getEditorAPI(),t=e.documentServices.generalInfo.getSiteId(),a=e.documentServices.generalInfo.getMetaSiteId();return l()+"/shareSite/"+t+"?metaSiteId="+a+function(){var e=s.url.getParameterByName("feedbackVersion"),t=n(c).map(function(e){var t=s.url.getParameterByName(e);return t?"&"+e+"="+t:null}).compact().join("");return e&&(t+="&rc="+e),t}()},componentDidMount:function(){window.addEventListener("message",this.iframeMessageHandler)},componentWillUnmount:function(){this.closeTimeout&&window.clearTimeout(this.closeTimeout),window.removeEventListener("message",this.iframeMessageHandler)},iframeMessageHandler:function(e){var t=this.getEditorAPI();if(e.origin.substring(e.origin.indexOf("//"))===r()){var a=e.data&&JSON.parse(e.data);switch(a.action){case"feedbackhelp":var s=function(e){switch(e){case"ShareHelpPro":return"4ca0f60b-3c8e-48c2-9259-8d70c8564101";case"ReadHelp":return"38fac604-38ba-4d83-97eb-3fbc8f702762";case"ReadHelpPro":return"4e1993e1-ece8-4478-b553-139926f66bfc";default:return"cb9a32fa-b217-4e31-b2e6-905dd8e2116c"}}(n.get(a,"helpType"));t.panelManager.openHelpCenter(s,null,{component:this.props.id,origin:i.BI.HELP.ORIGIN.PANEL,panel_name:"panels.focusPanels.feedbackPanel"});break;case"feedbackclose":this.getEditorAPI().panelManager.closePanelByName(this.props.panelName);break;case"opensitesettings":t.account.openSettings("authorization","feedback")}}},panelWillClose:function(){if(!this.closeTimeout)return this.closeTimeout=window.setTimeout(function(){this.getEditorAPI().panelManager.closePanelByName(this.props.panelName)}.bind(this),i.FEEDBACK.CLOSE_PANEL_TIMEOUT),n.get(this.refs,"iframe.contentWindow")&&this.refs.iframe.contentWindow.postMessage("panelClosed",l()),!1},render:o})}),define("panels/focusPanels/getTrafficPanel.rt",["react","lodash","panels/focusPanels/welcomeVideoPanel","util","baseUI"],function(e,t,n,a,s){"use strict";return function(){return e.createElement(n,{ref:"frame",title:a.translate("Notification_Box_Get_Traffic_Title"),subtitle:a.translate("Notification_Box_Get_Traffic_Description"),linkedVideoData:this.linkedVideoData(),panelName:this.props.panelName,className:"getTrafficPanel",shouldNotCloseOnBlur:!0},e.createElement("div",{className:"get-traffic-description content"},e.createElement("span",{className:"text-before-link"},this.getDescription(0)),e.createElement("a",{className:"get-found-link",href:"#",onClick:function(){this.searchOnGoogle()}.bind(this)},this.getDescription(2)),e.createElement("span",{className:"text-after-link"},this.getDescription(1))),e.createElement("div",{className:"buttons"},e.createElement(s.button,{label:"Notification_Box_Get_Traffic_Submit_Website_Button_Label",onClick:function(){this.getFoundOnGoogle()}.bind(this)})))}}),define("panels/focusPanels/getTrafficPanel",["create-react-class","lodash","core","util","coreBi","panels/focusPanels/getTrafficPanel.rt"],function(e,t,n,a,s,i){"use strict";var o=s,r=a.translate("Notification_Box_Get_Traffic_Video_URL"),l=[];return e({propTypes:{},displayName:"getTrafficPanel",mixins:[n.mixins.editorAPIMixin,a.translationMixin],getFoundOnGoogle:function(){this.sendPanelGetFoundEvent("getFoundOnGoogle");var e=this.translateIfNeeded("Notification_Box_Get_Traffic_Submit_Website_Button_Link");window.open(e,"_blank")},getPublicUrl:function(){var e=this.getEditorAPI().documentServices.generalInfo.getPublicUrl();return e&&(e=e.replace(/.*?:\/\//g,"")),e},searchOnGoogle:function(){var e=this.getPublicUrl("https://www.google.co.il/?#q=site:"),t="https://www.google.co.il/?#q=site:"+e;e&&window.open(t,"_blank"),this.sendSearchOnGoogleEvent(t)},getContentClass:function(){return"only-new"},linkedVideoData:function(){return r},getDescription:function(e){if(t.isEmpty(l)){var n="site:"+this.getPublicUrl(),a={domain_address:n},s=this.translateTemplate("Notification_Box_Get_Traffic_Bottom_Text",a,this.getEditorAPI());(l=s.split(n)).push(n)}return l.length>=e?l[e]:""},sendSearchOnGoogleEvent:function(e){var t=this.getEditorAPI(),n=o.events.getTrafficPanel.GET_TRAFFIC_SEARCH_GOOGLE_CLICK,a={site_id:t.documentServices.generalInfo.getSiteId(),url:e};t.bi.event(n,a)},sendPanelGetFoundEvent:function(e){var t=this.getEditorAPI(),n=o.events.getTrafficPanel.GET_TRAFFIC_GET_FOUND_ON_GOOGLE_CLICK,a={site_id:t.documentServices.generalInfo.getSiteId(),origin:e,video_url:r};t.bi.event(n,a)},render:i})}),define("panels/focusPanels/promotionModalPanel.rt",["react","lodash","panels/frames/focusPanelFrame","util","baseUI","symbols"],function(e,t,n,a,s,i){"use strict";return function(){return e.createElement(n,{panelName:this.props.panelName,shouldHideHeader:!0,shouldHideHelp:!0,className:"promo-popup-panel "+this.props.className},function(){var n=this.getImageContainerClass();return e.createElement("header",{className:"panel-header dark"},e.createElement("button",{className:"close",onClick:function(e){this.close()}.bind(this,n)},e.createElement(i.symbol,{name:"headerCloseButton"})),e.createElement("div",{className:"title-line-1"},a.translate(this.props.headerFirstLineText)),this.props.headerSecondLineText?e.createElement("div",{className:"title-line-2",key:"headerSecondLine"},"\n            ",a.translate(this.props.headerSecondLineText),"\n        "):null,e.createElement(n,{className:"image-wrapper",onClick:this.props.isImageLinkActive?this.handleAction.bind(this,"image"):t.noop},e.createElement("img",{ref:"image",src:this.props.imageSrc}),e.createElement("div",{className:"overlay-box-1"}),e.createElement("div",{className:"overlay-box-2"}),e.createElement("div",{className:"overlay-box-3"}),e.createElement(n,{})))}.apply(this,[]),e.createElement("div",{className:"content"},e.createElement("p",{},a.translate(this.props.bodyText),this.props.bodyLinkText?e.createElement("a",{key:"link",onClick:function(){this.handleAction("date kink")}.bind(this)},a.translate(this.props.bodyLinkText)):null),this.props.bodyBottomText?e.createElement("p",{key:"bodyBottomText"},a.translate(this.props.bodyBottomText)):null,e.createElement(s.button,{label:this.props.actionText,onClick:function(){this.handleAction("submission button")}.bind(this)})))}}),define("panels/focusPanels/promotionModalPanel",["create-react-class","prop-types","lodash","core","util","panels/focusPanels/promotionModalPanel.rt"],function(e,t,n,a,s,i){"use strict";return e({displayName:"promotionModalPanel",mixins:[a.mixins.editorAPIMixin],propTypes:{headerFirstLineText:t.string,headerSecondLineText:t.string,imageSrc:t.string,bodyText:t.string,bodyLinkText:t.string,isImageLinkActive:t.bool,actionText:t.string,actionUrl:t.string,biEvent:t.object},getDefaultProps:function(){return{isImageLinkActive:!0}},getImageContainerClass:function(){return this.props.isImageLinkActive?"a":"div"},handleAction:function(e){this.sendSubmitVideoClickedBI(e),window&&window.open(s.translate(this.props.actionUrl))},sendSubmitVideoClickedBI:function(e){var t={origin:e};this.getEditorAPI().bi.event(this.props.biEvent,t)},close:function(){this.getEditorAPI().panelManager.closePanelByName(this.props.panelName)},render:i})}),define("panels/focusPanels/sizeRestrictionPanel.rt",["react","lodash","constants","panels/focusPanels/popupTemplate"],function(e,t,n,a){"use strict";return function(){return e.createElement(a,{panelName:this.props.panelName,h1text:this.props.title,symbolName:"bigtopin",bodyText:this.props.content,dontShowAgainKey:n.PANELS.PIN_TOO_BIG.PIN_TOO_BIG_DONT_SHOW_AGAIN,helpId:"7827a21e-04e0-4bdd-9ee0-b68677fa7a5a",userPrefType:"site"})}}),define("panels/focusPanels/sizeRestrictionPanel",["create-react-class","core","lodash","stateManagement","coreBi","panels/focusPanels/sizeRestrictionPanel.rt"],function(e,t,n,a,s,i){"use strict";return e({mixins:[t.mixins.editorAPIMixin],displayName:"sizeRestrictionPanel",componentDidMount:function(){var e=this.getEditorAPI(),t=e.store;t.dispatch(a.editorPlugins.bi.actions.event(s.events.pinToScreen.NOTIFICATION_TOO_BIG,{state:this.props.state,component_type:a.editorPlugins.selection.selectors.getSelectedComponentType(t.getState(),e.documentServices)}))},render:i})}),define("panels/focusPanels/newEditorWelcomeScreenPanel.rt",["react","lodash","panels/focusPanels/welcomeVideoPanel","util","baseUI"],function(e,t,n,a,s){"use strict";return function(){return e.createElement(n,{ref:"frame",title:a.translate("Notification_Box_New_Template_Title"),subtitle:a.translate("Notification_Box_New_Template_Subtitle"),linkedVideoData:this.linkedVideoData(),contentClass:this.getContentClass(),content:this.getContent(),panelName:this.props.panelName,shouldNotCloseOnBlur:!0},e.createElement("div",{className:"buttons"},this.props.isEligibleForSwitch?e.createElement(s.button,{label:"Notification_Box_Back_To_Old_Editor",onClick:function(){this.back()}.bind(this),key:"Notification_Box_Back_To_Old_Editor",className:"btn-confirm-secondary"}):null,e.createElement(s.button,{label:this.props.nextBtnLabel,onClick:function(){this.next()}.bind(this)})))}}),define("panels/focusPanels/newEditorWelcomeScreenPanel",["create-react-class","prop-types","lodash","core","util","coreBi","panels/focusPanels/newEditorWelcomeScreenPanel.rt"],function(e,t,n,a,s,i,o){"use strict";var r=i,l=void 0;return e({displayName:"newEditorWelcomeScreenPanel",mixins:[a.mixins.editorAPIMixin],propTypes:{isEligibleForSwitch:t.bool,onNextClick:t.func.isRequired,nextBtnLabel:t.string.isRequired,onBackClick:t.func.isRequired},next:function(){this.getEditorAPI().panelManager.closePanelByName(this.props.panelName),this.props.onNextClick()},back:function(){this.getEditorAPI().panelManager.closePanelByName(this.props.panelName),this.props.onBackClick()},linkClick:function(){var e=this.props.isEligibleForSwitch?"LEARN_MORE_CLICK_WITH_BACK_OPTION":"LEARN_MORE_CLICK_WITHOUT_BACK_OPTION";this.sendBIEvent(e);var t=s.translate("SWITCH_EDITORS_LP_LINK");window&&window.open(t)},getContentClass:function(){return this.props.isEligibleForSwitch?"switch-to-old":"only-new"},getContent:function(){var e={};return this.props.isEligibleForSwitch?(e.line1="Notification_Box_Switch_Editor_Description",e.link="Notification_Box_Switch_Editor_Link",e.line2=""):(e.line1="Notification_Box_New_Template_Line1",e.link="Notification_Box_New_Template_Link",e.line2="Notification_Box_New_Template_Line2"),e},linkedVideoData:function(){return"//www.youtube.com/embed/"+s.translate("SWITCH_EDITORS_PR_VIDEO")},sendBIEvent:function(e){var t=this.getEditorAPI(),n=r.events.newEditorWelcomeScreens[e],a={site_id:t.documentServices.generalInfo.getSiteId()};n.fields.duration&&(a.duration=Date.now()-l),t.bi.event(n,a)},componentDidMount:function(){l=Date.now();var e=this.props.isEligibleForSwitch?"POP_UP_OPEN_WITH_BACK_OPTION":"POP_UP_OPEN_WITHOUT_BACK_OPTION";this.sendBIEvent(e)},render:o})}),define("panels/focusPanels/editorMigrationFailedPanel.rt",["react","lodash","baseUI","panels/frames/focusPanelFrame","util"],function(e,t,n,a,s){"use strict";return function(){return e.createElement(a,{panelName:this.props.panelName,shouldHideHelp:!0,shouldHideHeader:!0,shouldNotCloseOnBlur:!0,isBareMode:!0,className:"editor-compatibility-panel"},e.createElement("header",{className:"save-publish-panel-header header"},e.createElement("div",{className:"header-content"},e.createElement("span",{className:"title"},s.translate("Notification_Box_Wrong_Editor_Title")),e.createElement("div",{className:"subtitle"},s.translate("Notification_Box_Wrong_Editor_Subtitle")))),e.createElement(n.symbol,{name:"coffee",className:"coffee-img"}),e.createElement("div",{className:"content"},e.createElement("div",{},e.createElement("span",{},s.translate("Notification_Box_Wrong_Editor_Line1")),e.createElement("span",{},e.createElement("a",{target:"_blank",href:this.getHref()},s.translate("Notification_Box_Wrong_Editor_Link"))),e.createElement("span",{}," ",s.translate("Notification_Box_Wrong_Editor_Line2"))),e.createElement(n.button,{label:"Notification_Box_Wrong_Editor_Continue",onClick:this.onClick,className:"button"})))}}),define("panels/focusPanels/editorMigrationFailedPanel",["create-react-class","lodash","panels/focusPanels/editorMigrationFailedPanel.rt"],function(e,t,n){"use strict";return e({displayName:"editorMigrationFailedPanel",render:n,onClick:function(){var e=function(e,n,a){var s=new RegExp("([?&])"+n+"=.*?(&|$)","i"),i=t.includes(e,"?")?"&":"?";return e.match(s)?e.replace(s,"$1"+n+"="+a+"$2"):e+i+n+"="+a}(window.document.location.href,"forceEditorVersion","old");window.location=e},getHref:function(){return"http://www.wix.com/website/templates/html/new/1"}})}),define("panels/focusPanels/focusPanelMixin",["lodash"],function(e){"use strict";var t=void 0;return{componentDidMount:function(){t=Date.now()},startNow:function(){this.sendPanelClosedBIEvent("startNow"),this.getEditorAPI().panelManager.closePanelByName(this.props.panelName),this.onVideoClosed()},getContentClass:function(){return"only-new"},sendBIEventWhenClosedByX:function(){this.sendPanelClosedBIEvent("xButton"),this.onVideoClosed()},sendBIEventWhenClosedByESC:function(){this.sendPanelClosedBIEvent("ESC"),this.onVideoClosed()},onVideoClosed:function(){e.isFunction(this.openTooltip)&&this.openTooltip()},sendPanelClosedBIEvent:function(e){var n=this.getEditorAPI(),a={site_id:n.documentServices.generalInfo.getSiteId(),duration:Date.now()-t,origin:e,video_url:this.props.linkedVideoData,panel_name:this.constructor.displayName};n.bi.event(this.getBIEvent(),a)}}}),define("panels/focusPanels/welcomeScreenVideoPanel.rt",["react","lodash","panels/focusPanels/welcomeVideoPanel","util","baseUI"],function(e,t,n,a,s){"use strict";return function(){return e.createElement(n,{ref:"frame",title:this.props.title,subtitle:this.props.subtitle,linkedVideoData:this.props.linkedVideoData,panelName:this.props.panelName,onCloseByX:this.sendBIEventWhenClosedByX,onCloseByESC:this.sendBIEventWhenClosedByESC,shouldNotCloseOnBlur:!0},e.createElement("div",{className:"buttons"},e.createElement(s.button,{label:this.props.buttonLabel,onClick:function(){this.startNow()}.bind(this)})))}}),define("panels/focusPanels/newUserIntroVideoPanel",["create-react-class","lodash","core","panels/focusPanels/focusPanelMixin","coreBi","panels/focusPanels/welcomeScreenVideoPanel.rt"],function(e,t,n,a,s,i){"use strict";var o=s;return e({displayName:"newUserIntroVideoPanel",mixins:[n.mixins.editorAPIMixin,a],getBIEvent:function(){return o.events.newUserIntroVideoPanel.INTRO_VIDEO_CLOSE},render:i})}),define("panels/focusPanels/cameFromADIVideoPanel",["create-react-class","lodash","core","util","panels/focusPanels/focusPanelMixin","coreBi","panels/focusPanels/welcomeScreenVideoPanel.rt","experiment","stateManagement"],function(e,t,n,a,s,i,o,r,l){"use strict";var c=i;return e({displayName:"ADIVideoPanel",mixins:[n.mixins.editorAPIMixin,s],openTooltip:function(){if(r.isOpen("se_backToADIFromEditor")){this.getEditorAPI().store.dispatch(l.editorPlugins.topBarTooltip.actions.showBackToAdiTooltip()),this.sendTooltipOpenedBI()}},getBIEvent:function(){return c.events.cameFromADIVideoPanel.CAME_FROM_ADI_INTRO_VIDEO_CLOSE},sendTooltipOpenedBI:function(){var e=this.getEditorAPI();e.bi.event(i.events.backToADIFromEditor.goingBackToWixADITooltipOpened,{esi:a.editorModel.editorSessionId,site_id:e.documentServices.generalInfo.getSiteId()})},render:o})}),define("panels/focusPanels/howToVideoPlayer.rt",["react","lodash","baseUI","panels/frames/emptyPanelFrame"],function(e,t,n,a){"use strict";return function(){return e.createElement(a,{panelName:"howToVideoPlayer",className:"how-to-video-player panel-frame-container"},e.createElement("div",{key:"darkOverlay",className:t({"dark-overlay":this.props.withOverlay,"close-overlay":!this.props.withOverlay}).transform(function(e,t,n){t&&e.push(n)},[]).join(" "),onClick:this.handleClickClose}),e.createElement("div",{className:t({"container-iframe":!0,"with-shadow":this.props.withShadow}).transform(function(e,t,n){t&&e.push(n)},[]).join(" ")},e.createElement("div",{className:"close",onClick:this.handleClickClose},e.createElement(n.symbol,{name:"close_video_icon_reg"})),e.createElement("iframe",{id:"how-to-video-player-iframe",src:this.getIframeSrcUrl()})))}}),define("panels/focusPanels/howToVideoPlayer",["create-react-class","prop-types","core","lodash","panels/focusPanels/howToVideoPlayer.rt","coreBi","panels/mixins/disableKeyboardShortcutsMixin"],function(e,t,n,a,s,i,o){"use strict";return e({displayName:"howToVideoPlayer",mixins:[o,n.mixins.editorAPIMixin],propTypes:{videoId:t.string.isRequired,origin:t.string.isRequired,withShadow:t.bool,withOverlay:t.bool},getDefaultProps:function(){return{withShadow:!0,withOverlay:!0}},componentDidMount:function(){var e={videoID:this.props.videoId,origin:this.props.origin};this.getEditorAPI().bi.event(i.events.videoPlayer.OPEN,e),this.startTime=Date.now(),window.focus();var t=function(){new window.YT.Player("how-to-video-player-iframe",{events:{onStateChange:function(e){e.data===window.YT.PlayerState.ENDED&&this.close({code:"VIDEO_ENDED"})}.bind(this)}})};if(window.YT)window.YT.Player&&window.YT.PlayerState&&t.call(this);else{window.onYouTubeIframeAPIReady=function(){t.call(this),delete window.onYouTubeIframeAPIReady}.bind(this);var n=window.document.createElement("script");n.type="text/javascript",n.src="//www.youtube.com/iframe_api",window.document.head.appendChild(n)}},getIframeSrcUrl:function(){return"https://www.youtube.com/embed/"+this.props.videoId+"?rel=0&autoplay=1&color=red&controls=1&showinfo=0&fs=0&enablejsapi=1&origin=http://editor.wix.com&modestbranding=1"},close:function(e){var t=this.getEditorAPI(),n={videoID:this.props.videoId,duration:Date.now()-this.startTime,origin:e.code};t.bi.event(i.events.videoPlayer.CLOSE,n),t.panelManager.closePanelByName(this.props.panelName)},handleClickClose:function(){this.close({code:"X_BUTTON"})},handleClickOverlay:function(){this.close({code:"CLOSE_OVERLAY"})},getKeyboardShortcuts:function(){return{esc:this.close}},render:s})}),define("panels/focusPanels/newEditorListWelcomeScreenPanel.rt",["react","lodash","panels/frames/focusPanelFrame","baseUI","util","symbols"],function(e,t,n,a,s,i){"use strict";return function(){return e.createElement(n,{ref:"frame",panelName:this.props.panelName,shouldHideHeader:!0,shouldHideHelp:!0,isBareMode:!0,className:"new-editor-list-welcome-screen-panel"},e.createElement("header",{className:"panel-header dark",key:"header"},e.createElement("div",{className:"welcome-panel-header-title"},s.translate("list_migration_welcome_screen_title")),e.createElement(i.symbol,{name:"listWelcomeScreenAsset"})),e.createElement("div",{className:t({content:!0,"only-new":!this.props.isEligibleForSwitch,"switch-to-old":this.props.isEligibleForSwitch}).transform(function(e,t,n){t&&e.push(n)},[]).join(" ")},e.createElement("p",{},"\n            ",s.translate("list_migration_welcome_screen_text_paragraph_1_before_changes_link"),"\n            ",e.createElement("a",{href:this.getChangesPageUrl(),target:"_blank"},s.translate("list_migration_welcome_screen_text_paragraph_1_changes_link")),s.translate("list_migration_welcome_screen_text_paragraph_1_after_changes_link"),"\n        "),e.createElement("p",{},s.translate("list_migration_welcome_screen_text_paragraph_2"))),e.createElement("div",{className:"buttons"},this.props.isEligibleForSwitch?e.createElement(a.button,{label:"Notification_Box_Back_To_Old_Editor",onClick:function(){this.back()}.bind(this),key:"Notification_Box_Back_To_Old_Editor",className:"btn-confirm-secondary"}):null,e.createElement(a.button,{label:"Notification_Box_Start_Now",onClick:function(){this.next()}.bind(this)})))}}),define("panels/focusPanels/newEditorListWelcomeScreenPanel",["create-react-class","prop-types","lodash","util","panels/focusPanels/newEditorListWelcomeScreenPanel.rt"],function(e,t,n,a,s){"use strict";return e({displayName:"newEditorListWelcomeScreen",propTypes:{isEligibleForSwitch:t.bool,onNextClick:t.func.isRequired,onBackClick:t.func.isRequired},next:function(){this.getEditorAPI().panelManager.closePanelByName(this.props.panelName),this.props.onNextClick()},back:function(){this.getEditorAPI().panelManager.closePanelByName(this.props.panelName),this.props.onBackClick()},getChangesPageUrl:function(){var e=a.languages.getLanguageCode();return"https://www.wix.com/support/html5/new-wix-editor-june-2015/list/kb/information-about-moving-to-the-new-editor-with-the-list-builder".replace("www.wix.com",("en"===e?"www":e)+".wix.com")},render:s})}),define("panels/focusPanels/createNewTextBoxPanel.rt",["react","lodash","core","panels/focusPanels/popupTemplate"],function(e,t,n,a){"use strict";return function(){return e.createElement(a,{panelName:this.props.panelName,h1text:"text_box_too_much_text_error_message_title",symbolName:"createNewTextBox",bodyText:"text_box_too_much_text_error_message_text",hideDontShowCheckbox:!0,isSingleInstance:this.props.isSingleInstance})}}),define("panels/focusPanels/createNewTextBoxPanel",["create-react-class","core","panels/focusPanels/createNewTextBoxPanel.rt"],function(e,t,n){"use strict";return e({displayName:"createNewTextBoxPanel",mixins:[t.mixins.editorAPIMixin],render:n})}),define("panels/focusPanels/siteImageOptimizationPanel.rt",["react","lodash","baseUILib","core","baseUI","panels/frames/focusPanelFrame","util","helpIds"],function(e,t,n,a,s,i,o,r){"use strict";return function(){return e.createElement(i,{panelName:this.props.panelName,title:o.translate("SITE_IMAGE_QUALITY_SETTINGS_PANEL_HEADER_TITLE"),ref:"frame",helpId:r.SETTINGS.IMAGE_OPTIMIZATION,className:"site-image-optimisation-panel"},e.createElement(n.Composites.Thumbnails,{},e.createElement(n.TextLabel,{value:"SITE_IMAGE_QUALITY_SETTINGS_PANEL_DESCRIPTION",enableEllipsis:!1}),e.createElement(n.Thumbnails,{value:this.linkedQualityPresets().value,onChange:this.linkedQualityPresets().requestChange,maxThumbsPerRow:3,borderType:"thumbnailAndLabel",options:this.getImageQualityPresetsOptions()})),e.createElement(n.Divider,{long:!0}),e.createElement("div",{className:"action-buttons"},e.createElement(s.button2,{label:"SITE_IMAGE_QUALITY_SETTINGS_PANEL_CANCEL_BUTTON",onClick:this.closeImageQualityPanel,className:"default image-optimisation-cancel"}),e.createElement(s.button2,{label:"SITE_IMAGE_QUALITY_SETTINGS_PANEL_APPLY_BUTTON",disabled:this.isApplyDisabled(),onClick:this.handleApplyQuality,className:"default image-optimisation-done"})))}}),define("panels/focusPanels/siteImageOptimizationPanel",["core","react","symbols","baseUILib","create-react-class","prop-types","lodash","coreBi","panels/focusPanels/siteImageOptimizationPanel.rt"],function(e,t,n,a,s,i,o,r,l){"use strict";var c=["none","mild","regular","moderate","strong","maximum"],p=[{unsharpMask:{radius:0,amount:0,threshold:0},quality:90},{unsharpMask:{radius:.33,amount:1,threshold:0}},{unsharpMask:{radius:.66,amount:1,threshold:.01}},{unsharpMask:{radius:1.2,amount:1,threshold:.01}},{unsharpMask:{radius:2,amount:1,threshold:0}},{unsharpMask:{radius:4,amount:1,threshold:0}}],u=[{value:0,label:"IMAGE_QUALITY_NAME_NONE",illustration:t.createElement(a.Tooltip,{content:"IMAGE_QUALITY_NAME_NONE_TOOLTIP",alignment:"TOP",marginTop:23},t.createElement(n.symbol,{name:"image-quality-none"}))},{value:1,label:"IMAGE_QUALITY_NAME_GLOBAL_MILD",illustration:t.createElement(a.Tooltip,{content:"IMAGE_QUALITY_NAME_GLOBAL_MILD_TOOLTIP",alignment:"TOP",marginTop:23},t.createElement(n.symbol,{name:"image-quality-mild"}))},{value:2,label:"IMAGE_QUALITY_NAME_GLOBAL_REGULAR",illustration:t.createElement(a.Tooltip,{content:"IMAGE_QUALITY_NAME_GLOBAL_REGULAR_TOOLTIP",alignment:"TOP",marginTop:23},t.createElement(n.symbol,{name:"image-quality-regular"}))},{value:3,label:"IMAGE_QUALITY_NAME_GLOBAL_MODERATE",illustration:t.createElement(a.Tooltip,{content:"IMAGE_QUALITY_NAME_GLOBAL_MODERATE_TOOLTIP",alignment:"TOP",marginTop:23},t.createElement(n.symbol,{name:"image-quality-moderate"}))},{value:4,label:"IMAGE_QUALITY_NAME_GLOBAL_STRONG",illustration:t.createElement(a.Tooltip,{content:"IMAGE_QUALITY_NAME_GLOBAL_STRONG_TOOLTIP",alignment:"TOP",marginTop:23},t.createElement(n.symbol,{name:"image-quality-strong"}))},{value:5,label:"IMAGE_QUALITY_NAME_GLOBAL_MAXIMUM",illustration:t.createElement(a.Tooltip,{content:"IMAGE_QUALITY_NAME_GLOBAL_MAXIMUM_TOOLTIP",alignment:"TOP",marginTop:23},t.createElement(n.symbol,{name:"image-quality-maximum"}))}];return s({mixins:[e.mixins.editorAPIMixin],displayName:"siteImageOptimization",propTypes:{unsharpMask:i.shape({radius:i.number,amount:i.number,threshold:i.number})},getInitialState:function(){var e=this.getGlobalImageQualityData()||p[2];return{selectedIndex:function(e,t){return o.findIndex(t,function(t){return o.isEqual(t,e)})}(e,p),selectedValue:e}},getImageQualityPresetsOptions:function(){return u},linkedQualityPresets:function(){return{value:this.state.selectedIndex,requestChange:function(e){this.setState({selectedValue:p[e],selectedIndex:e})}.bind(this)}},handleApplyQuality:function(){this.isApplyDisabled()||(this.updateGlobalImageQualityData(this.state.selectedValue),this.sendQualityApplyBI(this.state.selectedIndex),this.closeImageQualityPanel())},sendQualityApplyBI:function(e){var t=this.state.selectedValue;this.getEditorAPI().bi.event(r.events.siteImageQualitySettingsPanel.site_image_quality_settings_panel_apply,{origin:"global",preset:c[e]||"custom",unsharp_amount:100*t.unsharpMask.amount,unsharp_radius:100*t.unsharpMask.radius,unsharp_threshold:100*t.unsharpMask.threshold})},closeImageQualityPanel:function(){this.getEditorAPI().panelManager.closePanelByName(this.props.panelName)},isApplyDisabled:function(){var e=this.getGlobalImageQualityData();return-1===this.state.selectedIndex||!this.getGlobalImageQualityData()&&2===this.state.selectedIndex||o.isEqual(e,this.state.selectedValue)},getGlobalImageQualityData:function(){var e=this.getEditorAPI().documentServices.media.imageQuality.get();return o.isEmpty(e)?null:o.pick(e,["unsharpMask","quality"])},updateGlobalImageQualityData:function(e){var t=this.getEditorAPI();t.documentServices.media.imageQuality.reset(),t.documentServices.media.imageQuality.update(e),t.documentServices.wixapps.classics.reloadApp("blog"),this.getEditorAPI().history.add("site image quality panel - update quality")},render:l})}),define("panels/focusPanels/siteMembersSettingsNewPanel.rt",["react","lodash","baseUILib","baseUI","panels/frames/focusPanelFrame","util","helpIds","experiment"],function(e,t,n,a,s,i,o,r){"use strict";return function(){function o(s){var i=this.getTabValues();return e.createElement("div",{className:"member-settings-panel-content"},e.createElement(a.horizontalTabs,{shouldTranslate:!0,options:this.getTabs(),value:this.state.selectedTab,onChange:this.selectTab,className:"tabbed"}),e.createElement("div",{className:"tab-content"},e.createElement(n.Composites.RichText,{},e.createElement(n.RichText,{className:"light"},s("Pages_Member_Signup_Settings_Description"))),this.state.selectedTab===i.GENERAL?e.createElement("div",{className:"general-settings settings",key:"smSettingsTab"},e.createElement(n.CustomScroll,{heightRelativeToParent:"100%"},e.createElement(n.Divider,{}),e.createElement(n.Composites.RadioButtonsLabeled,{},e.createElement(n.TextLabel,{value:"Pages_Member_Signup_Permission_Settings_Dropdown_Label"}),e.createElement(n.RadioButtons,{value:this.state.autoApproval,options:this.getAutoApprovalOptions(),onChange:t.partial(this.onRadioButtonsClick,"autoApproval")})),e.createElement(n.Divider,{}),e.createElement(n.Composites.RadioButtonsLabeled,{},e.createElement(n.TextLabel,{value:"Pages_Member_Signup_Display_Settings_Dropdown_Label"}),e.createElement(n.RadioButtons,{value:this.state.loginDialogFirst,options:this.getLoginFirstOptions(),onChange:t.partial(this.onRadioButtonsClick,"loginDialogFirst")})))):null,this.state.selectedTab===i.SOCIAL?e.createElement("div",{className:"social-login-settings settings",key:"smSocialLoginSettingsSection"},e.createElement(n.CustomScroll,{heightRelativeToParent:"100%"},e.createElement(n.Divider,{long:!0}),e.createElement(n.SectionDivider,{},s("Pages_Member_Signup_Settings_Social_Label"),"\n                    "),e.createElement(n.Divider,{long:!0}),e.createElement("div",{className:"options"},e.createElement("section",{className:"social-option"},e.createElement(a.symbol,{name:"mba_social_panel_google_plus_new",className:"icon google"}),e.createElement(a.toggle,{name:"switch",valueLink:this.linkState("socialLoginGoogleEnabled"),label:"Member_Login_Settings_Social_Google"})),e.createElement(n.Divider,{long:!0}),e.createElement("section",{className:"social-option"},e.createElement(a.symbol,{name:"mba_social_panel_facebook",className:"icon facebook"}),e.createElement(a.toggle,{name:"switch",valueLink:this.linkState("socialLoginFacebookEnabled"),label:"Member_Login_Settings_Social_Facebook"}))),this.isSocialAppInstalled()?e.createElement("div",{key:"shouldDisplayCommunityToggle"},e.createElement(n.Divider,{long:!0}),e.createElement(n.Composites.SectionDividerWithInfoIcon,{},e.createElement(n.InfoIcon,{shouldTranslate:!0,text:"Member_Login_Settings_Community_Settings_Info_Tooltip"}),e.createElement(n.SectionDivider,{},s("Member_Login_Settings_Settings_Community_Label"),"\n                            ")),e.createElement(n.Divider,{long:!0}),e.createElement("div",{className:"options"},e.createElement("section",{className:"social-option"},e.createElement(a.symbol,{name:"communityIcon",className:"icon community"}),e.createElement(a.toggle,{name:"switch",valueLink:this.linkState("joinCommunityEnabled"),label:"Member_Login_Settings_Community_Join"})))):null)):null,this.state.selectedTab===i.TERMS_AND_CONDITIONS?function(s,i){var o=this,r=this.getArticles();return e.createElement("div",{className:"signup-policies-settings settings",key:"smSignupPoliciesSection"},e.createElement(n.CustomScroll,{heightRelativeToParent:"100%"},e.createElement("div",{className:"policies-segment-header"},e.createElement(n.Divider,{long:!0}),e.createElement(n.Composites.SectionDividerWithInfoIcon,{},e.createElement(n.InfoIcon,{shouldTranslate:!0,linkText:"Pages_Member_Signup_Settings_Terms_Of_Use_Link_Label_",onLinkClick:function(){return o.openExamplePolicy(r.TERMS_OF_USE)},text:"Pages_Member_Signup_Settings_Terms_Of_Use_Info_Tooltip"}),e.createElement(n.SectionDivider,{},s("Pages_Member_Signup_Settings_Terms_Of_Use_Divider_Label"),"\n                            ")),e.createElement(n.Divider,{long:!0})),e.createElement("div",{className:"options"},e.createElement("section",{className:"option"},e.createElement(a.toggle,{name:"switch",value:this.state.termsOfUseLinkVisible,onChange:t.partial(this.toggleEditPoliciesVisibility,"termsOfUseLinkVisible"),label:"Pages_Member_Signup_Settings_Terms_Of_Use_Toggle_Label"}))),this.state.termsOfUseLinkVisible?e.createElement("div",{key:"ifTermsOfUseVisible",className:"policy-link-area"},e.createElement("div",{className:"policy-toggle-divider"},e.createElement(n.Divider,{})),e.createElement(n.Composites.ActionWithSymbolLabeled,{},e.createElement(n.TextLabel,{value:"Pages_Member_Signup_Settings_Policies_Link_Header",shouldTranslate:!0}),e.createElement(n.ActionWithSymbol,{action:t.partial(this.openLinkPanelFor,"termsOfUseLink")},"\n                                ",this.getLabelForPolicyPage("termsOfUseLink"),"\n                            "))):null,e.createElement("div",{className:"policies-segment-header"},e.createElement(n.Divider,{long:!0}),e.createElement(n.Composites.SectionDividerWithInfoIcon,{},e.createElement(n.InfoIcon,{shouldTranslate:!0,linkText:"Pages_Member_Signup_Settings_Terms_Of_Use_Link_Label_",onLinkClick:function(){return o.openExamplePolicy(r.PRIVACY_POLICY)},text:"Pages_Member_Signup_Settings_Privacy_Policy_Tooltip"}),e.createElement(n.SectionDivider,{},s("Pages_Member_Signup_Settings_Privacy_Policy_Divider_Label"),"\n                            ")),e.createElement(n.Divider,{long:!0})),e.createElement("div",{className:"options"},e.createElement("section",{className:"option"},e.createElement(a.toggle,{name:"switch",value:this.state.privacyPolicyLinkVisible,onChange:t.partial(this.toggleEditPoliciesVisibility,"privacyPolicyLinkVisible"),label:"Pages_Member_Signup_Settings_Privacy_Policy_Toggle_Label"}))),this.state.privacyPolicyLinkVisible?e.createElement("div",{key:"ifPrivacyPolicyVisible",className:"policy-link-area"},e.createElement("div",{className:"policy-toggle-divider"},e.createElement(n.Divider,{})),e.createElement(n.Composites.ActionWithSymbolLabeled,{},e.createElement(n.TextLabel,{value:"Pages_Member_Signup_Settings_Policies_Link_Header",shouldTranslate:!0}),e.createElement(n.ActionWithSymbol,{action:t.partial(this.openLinkPanelFor,"privacyPolicyLink")},"\n                                ",this.getLabelForPolicyPage("privacyPolicyLink"),"\n                            "))):null,this.isSocialAppInstalled()?e.createElement("div",{key:"shouldShowCodeOfConductSection"},e.createElement("div",{className:"policies-segment-header"},e.createElement(n.Divider,{long:!0}),e.createElement(n.Composites.SectionDividerWithInfoIcon,{},e.createElement(n.SectionDivider,{},"\n                                    ",s("Pages_Member_Signup_Settings_Code_Of_Conduct_Divider_Label"),"\n                                ")),e.createElement(n.Divider,{long:!0})),e.createElement("div",{className:"options"},e.createElement("section",{className:"option"},e.createElement(a.toggle,{name:"switch",value:this.state.codeOfConductLinkVisible,onChange:t.partial(this.toggleEditPoliciesVisibility,"codeOfConductLinkVisible"),label:"Pages_Member_Signup_Settings_Code_Of_Conduct_Toggle_Label"}))),this.state.codeOfConductLinkVisible?e.createElement("div",{key:"ifCodeOfConductVisible",className:"policy-link-area"},e.createElement("div",{className:"policy-toggle-divider"},e.createElement(n.Divider,{})),e.createElement(n.Composites.ActionWithSymbolLabeled,{},e.createElement(n.TextLabel,{value:"Pages_Member_Signup_Settings_Policies_Link_Header",shouldTranslate:!0}),e.createElement(n.ActionWithSymbol,{action:t.partial(this.openLinkPanelFor,"codeOfConductLink")},"\n                                    ",this.getLabelForPolicyPage("codeOfConductLink"),"\n                                "))):null):null))}.apply(this,[s,i]):null),e.createElement(n.Divider,{long:!0}),e.createElement("footer",{className:"actions"},e.createElement(a.button,{label:"Pages_Member_Signup_Settings_Done",onClick:this.applySettings,className:"btn-confirm-primary btn-md done-button"})))}return function(){var t=i.translate;return e.createElement(s,{panelName:this.props.panelName,title:t("Pages_Member_Signup_Settings_Title"),ref:"frame",helpId:this.getTabHelpId(),className:"site-members-settings-new-panel"},o.apply(this,[t]))}.apply(this,[])}}),define("panels/focusPanels/siteMembersSettingsPanel",["react","create-react-class","lodash","core","helpIds","symbols","panels/focusPanels/siteMembersSettingsNewPanel.rt","pmrpc","coreBi","util"],function(e,t,n,a,s,i,o,r,l,c){"use strict";var p={GOOGLE:"google",FACEBOOK:"facebook"},u={TERMS_OF_USE:"termsOfUse",PRIVACY:"privacyPolicy",CODE_OF_CONDUCT:"codeOfConduct"},d={GENERAL:"general",SOCIAL:"social",TERMS_AND_CONDITIONS:"terms"},m={TERMS_OF_USE:s.SITE_MEMBERS.TERMS_OF_USE_EXAMPLE,PRIVACY_POLICY:s.SITE_MEMBERS.PRIVACY_POLICY_EXAMPLE};return t({displayName:"siteMembersSettingsPanel",mixins:[a.mixins.editorAPIMixin,e.addons.LinkedStateMixin],getInitialState:function(){var e=this.getEditorAPI();return{selectedTab:d.GENERAL,autoApproval:e.siteMembers.isAutoApproval(),loginDialogFirst:e.siteMembers.isLoginDialogFirst(),socialLoginGoogleEnabled:e.siteMembers.isSocialLoginEnabled(p.GOOGLE),socialLoginFacebookEnabled:e.siteMembers.isSocialLoginEnabled(p.FACEBOOK),joinCommunityEnabled:e.siteMembers.isJoinCommunityEnabled(),termsOfUseLinkVisible:e.siteMembers.isSignupPoliciesFieldEnabled(u.TERMS_OF_USE),privacyPolicyLinkVisible:e.siteMembers.isSignupPoliciesFieldEnabled(u.PRIVACY),codeOfConductLinkVisible:e.siteMembers.isSignupPoliciesFieldEnabled(u.CODE_OF_CONDUCT),termsOfUseLink:e.siteMembers.getSignupPoliciesLink(u.TERMS_OF_USE),privacyPolicyLink:e.siteMembers.getSignupPoliciesLink(u.PRIVACY),codeOfConductLink:e.siteMembers.getSignupPoliciesLink(u.CODE_OF_CONDUCT),hasSocialPages:!1}},componentWillMount:function(){var e=this,t=this.getEditorAPI(),n=t.documentServices.tpa.app.getDataByAppDefId("14cc59bc-f0b7-15b8-e1c7-89ce41d0e0c9");n?function(e,t,n){r.api.request(t.applicationId,{target:e.documentServices.platform.getAppsContainer()}).then(n).catch(function(){n({Error:"Application API not found."})})}(t,n,function(t){return t.hasSocialPages().then(function(t){return e.setState({hasSocialPages:t})})}):this.setState({hasSocialPages:!1})},closePanel:function(){this.getEditorAPI().panelManager.closePanelByName(this.props.panelName)},getTabs:function(){return[{label:"Member_Login_Settings_General_Tab_Title",value:d.GENERAL},{label:"Member_Login_Settings_Social_Tab_Title",value:d.SOCIAL},{label:"Member_Login_Settings_Policies_Tab_Title",value:d.TERMS_AND_CONDITIONS}]},getLabelForPolicyPage:function(e){return this.state[e+"Item"]?c.link.getLinkValueAsString(this.getEditorAPI(),this.state[e+"Item"]):this.state[e]?c.link.getLinkValueAsString(this.getEditorAPI(),this.getEditorAPI().data.getById(this.state[e].replace("#",""))):c.translate("Pages_Member_Signup_Settings_Policies_Link_Label")},getTabValues:function(){return d},getArticles:function(){return m},selectTab:function(e){this.setState({selectedTab:e})},isSocialAppInstalled:function(){return this.state.hasSocialPages},toggleEditPoliciesVisibility:function(e){this.setState(_defineProperty({},e,!this.state[e]))},linkPanelCallback:function(e,t){n.isObject(t)&&this.setState(_defineProperty({},e+"Item",t)),n.isString(t)&&this.setState(_defineProperty({},""+e,t)),this.getEditorAPI().bi.event(l.events.topbar.pages.top_bar_PAGES_settings_signup_link_to_policy,{name:e,action:"set-link",type:n.isObject(t)?t.type:this.getEditorAPI().data.getById(t.replace("#",""))})},applySettings:function(){var e=this,t=this.getEditorAPI().siteMembers,a=this.state,s=a.autoApproval,i=a.loginDialogFirst,o=a.socialLoginGoogleEnabled,r=a.socialLoginFacebookEnabled;t.isAutoApproval()!==s&&t.setAutoApproval(s),t.isLoginDialogFirst()!==i&&(t.setLoginDialogFirst(i),this.getEditorAPI().bi.event(l.events.topbar.pages.top_bar_PAGES_settings_signup_settings,{name:"shown first",value:this.state.loginDialogFirst?"login":"signup"})),t.isSocialLoginEnabled(p.GOOGLE)!==o&&(t.setSocialLoginVendorStatus(p.GOOGLE,o),this.getEditorAPI().bi.event(l.events.topbar.pages.top_bar_PAGES_settings_google_login_changed,{googlePlus:o})),t.isSocialLoginEnabled(p.FACEBOOK)!==r&&(t.setSocialLoginVendorStatus(p.FACEBOOK,r),this.getEditorAPI().bi.event(l.events.topbar.pages.top_bar_PAGES_settings_facebook_login_changed,{facebook:r})),this.isSocialAppInstalled()&&t.isJoinCommunityEnabled()!==this.state.joinCommunityEnabled&&(t.setJoinCommunityStatus(this.state.joinCommunityEnabled),this.getEditorAPI().bi.event(l.events.topbar.pages.top_bar_PAGES_settings_signup_settings,{name:"join the community",value:this.state.joinCommunityEnabled?"checked":"unchecked"})),n.forEach(n.values(u),function(n){(function(e,t,n){return e.isSignupPoliciesFieldEnabled(n)!==t[n+"LinkVisible"]&&(t[n+"LinkItem"]||t[n+"Link"])})(t,e.state,n)&&(t.setSignupPoliciesFieldStatus(n,e.state[n+"LinkVisible"]),e.getEditorAPI().bi.event(l.events.topbar.pages.top_bar_PAGES_settings_signup_settings,{name:n,value:e.state[n+"LinkVisible"]?"on":"off"})),e.state[n+"LinkItem"]&&t.setSignupPoliciesLink(n,e.state[n+"LinkItem"])}),this.closePanel()},openHowToHelpCenter:function(){this.getEditorAPI().panelManager.openHelpCenter(s.SITE_MEMBERS.HOW_TO,{},{origin:this.props.panelName,panel_name:this.props.panelName})},openExamplePolicy:function(e){this.getEditorAPI().panelManager.openHelpCenter(e,{},{})},getAutoApprovalOptions:function(){return[{label:"Pages_Member_Signup_Permission_Settings_Dropdown_Automatic",value:!0},{label:"Pages_Member_Signup_Permission_Settings_Dropdown_Manual",value:!1}]},getLoginFirstOptions:function(){return[{label:"Pages_Member_Signup_Display_Settings_Dropdown_Signup",value:!1},{label:"Pages_Member_Signup_Display_Settings_Dropdown_Login",value:!0}]},onRadioButtonsClick:function(e,t){this.setState(_defineProperty({},e,t))},getGoogleSymbol:function(){return e.createElement(i.symbol,{name:"mba_social_panel_google_plus_new"})},getFacebookSymbol:function(){return e.createElement(i.symbol,{name:"mba_social_panel_facebook"})},openLinkPanelFor:function(e){var t=this.getEditorAPI();t.openLinkPanel({visibleSections:{PageLink:!0,AnchorLink:!0,NoLink:!1,PhoneLink:!1,ExternalLink:!1,EmailLink:!1,DocumentLink:!1,LoginToWixLink:!1,EdgeAnchorLinks:!1,PopupLink:!1},link:function(e,t,n){return t[n+"Item"]?t[n+"Item"]:t[n]?e.data.getById(t[n].replace("#","")):null}(t,this.state,e),showAllPopups:!0,pageTabTitle:"LINK_PANEL_TAB_ANCHOR",pageTabPageDropDownTitle:"PLATFORM_LINK_MENU_PAGE_PAGE_OPTION",anchorTabPageDropDownTitle:"LINK_PANEL_PAGE_DROP_DOWN_PAGELINK_LABEL",title:"Pages_Member_Signup_Settings_Policies_Link_Header",callback:n.partial(this.linkPanelCallback,e)}),this.getEditorAPI().bi.event(l.events.topbar.pages.top_bar_PAGES_settings_signup_link_to_policy,{name:e,action:"click",type:"none"})},getTabHelpId:function(){switch(this.state.selectedTab){case d.GENERAL:return s.SITE_MEMBERS.GENERAL;case d.SOCIAL:return s.SITE_MEMBERS.SOCIAL_AND_COMMUNITY;case d.TERMS_AND_CONDITIONS:return s.SITE_MEMBERS.POLICIES;default:return s.SITE_MEMBERS.SETTINGS}},render:function(){return o.apply(this)}})}),define("panels/focusPanels/newFeaturesVideoPanel",["create-react-class","lodash","core","panels/focusPanels/focusPanelMixin","coreBi","panels/focusPanels/welcomeScreenVideoPanel.rt"],function(e,t,n,a,s,i){"use strict";var o=s;return e({displayName:"newFeaturesVideoPanel",mixins:[n.mixins.editorAPIMixin,a],getBIEvent:function(){return o.events.newFeaturesVideoPanel.NEW_FEATURES_INTRO_VIDEO_CLOSE},render:i})}),define("panels/commonControls/buttonWithSpinner/buttonWithSpinner.rt",["react","lodash","baseUI","baseUILib"],function(e,t,n,a){"use strict";return function(){return e.createElement(a.Button,{className:t(this.getButtonClasses()).transform(function(e,t,n){t&&e.push(n)},[]).join(" ")+" "+(this.props.className||""),disabled:this.props.disabled,onClick:this.onClick},e.createElement("div",{className:"btn-content "+t({"hidden-content":!this.isStatus("initial")}).transform(function(e,t,n){t&&e.push(n)},[]).join(" ")}," ",this.props.children," "),e.createElement("div",{className:"intermidiate-states"},this.isStatus("pending")?e.createElement("div",{className:"spinner",key:"spinner"}):null,this.isStatus("success")?e.createElement("div",{className:"appearance-container",key:"success"},e.createElement(n.symbol,{name:"check",className:"success-icon"})):null,this.isStatus("error")?e.createElement("div",{className:"appearance-container",key:"error"},e.createElement("div",{className:"error-container"},"!")):null))}}),define("panels/commonControls/buttonWithSpinner/buttonWithSpinner",["create-react-class","prop-types","lodash","panels/commonControls/buttonWithSpinner/buttonWithSpinner.rt"],function(e,t,n,a){"use strict";return e({displayName:"ButtonWithSpinner",propTypes:{class:t.string,disabled:t.bool,onClick:t.func,fadeDuration:t.number,dontReturnToInitialState:t.bool,allowToClickAfterFail:t.bool},getInitialState:function(){return{status:"initial",hadFail:!1,clickCounter:0}},getButtonClasses:function(){return{"btn-with-spinner":!0,"success-status":"success"===this.state.status,"error-status":"error"===this.state.status}},onClick:function(e){var t=0===this.state.clickCounter&&this.props.dontReturnToInitialState,n=this.props.allowToClickAfterFail&&this.state.hadFail;(t||n)&&(this.setState({status:"pending"}),this.props.onClick(e,this.onSuccess,this.onError)),this.setState({clickCounter:this.state.clickCounter+1})},onSuccess:function(){this.changeStatusAndReturnToInitial("success")},onError:function(){this.changeStatusAndReturnToInitial("error"),this.setState({hadFail:!0})},changeStatusAndReturnToInitial:function(e){var t="error"===e&&this.props.allowToClickAfterFail;this.setState({status:e}),!t&&this.props.dontReturnToInitialState||window.setTimeout(function(){this.setState({status:"initial"})}.bind(this),this.props.fadeDuraion||2300)},isStatus:function(e){return e===this.state.status},render:a})}),define("panels/focusPanels/accessibilityPanel.rt",["react","lodash","baseUILib","baseUI","util","panels/frames/focusPanelFrame","panels/commonControls/buttonWithSpinner/buttonWithSpinner","helpIds","experiment"],function(e,t,n,a,s,i,o,r,l){"use strict";return function(){return e.createElement(i,{panelName:this.props.panelName,shouldHideHeader:!0,onClose:this.onPanelClose},e.createElement("div",{className:"accessibility-panel"},e.createElement(n.PanelHeaderCenteredText,{title:"SITE_ACCESSIBLITY_SETTINGS_PANEL_HEADER_TITLE",subtitle:"SITE_ACCESSIBLITY_SETTINGS_PANEL_SUB_TITLE",onHelp:this.openHeaderHelp,onClose:this.closeByXButton}),e.createElement("div",{className:"accessibility-panel-content"},e.createElement("div",{className:"accessibility-settings"},e.createElement("div",{className:"accessibility-settings-block"},e.createElement("div",{className:"accessibility-settings-block-icon"},e.createElement(a.symbol,{name:"keyboardAccessibility"})),e.createElement("div",{className:"accessibility-settings-block-info"},e.createElement("div",{className:"accessibility-settings-block-title"},s.translate("SITE_ACCESSIBLITY_SETTINGS_PANEL_FOCUS_TITLE")),e.createElement("div",{className:"accessibility-settings-block-description"},s.translate("SITE_ACCESSIBLITY_SETTINGS_PANEL_FOCUS_TEXT"))),e.createElement("div",{className:"accessibility-settings-block-control"},e.createElement(n.Tooltip,{content:"SITE_ACCESSIBLITY_SETTINGS_PANEL_FOCUS_TOOLTIP",isOpen:this.state.visualFocusTootlipOpen,disabled:this.state.visualFocusEnabled},e.createElement(n.ToggleSwitch,{value:this.state.visualFocusEnabled,onChange:this.toggleVisualFocus})))))),e.createElement("div",{className:"accessibility-panel-footer"},e.createElement("div",{className:"accessibility-panel-footer-content"},e.createElement("div",{className:"accessibility-learn-more"},e.createElement("span",{className:"accessibility-learn-more-text"},s.translate("SITE_ACCESSIBLITY_SETTINGS_PANEL_LINK_TO_KB_TEXT")),e.createElement(n.Button,{className:"btn-text accessibility-learn-more-link",onClick:this.openLearnMoreLink},s.translate("SITE_ACCESSIBLITY_SETTINGS_PANEL_LINK_TO_KB"))),e.createElement(n.Button,{className:"accessibility-done-btn btn-confirm-secondary btn-md",onClick:this.closeByCloseButton},s.translate("SITE_ACCESSIBLITY_SETTINGS_PANEL_CLOSE_BUTTON"))))))}}),define("panels/focusPanels/accessibilityPanel",["create-react-class","lodash","core","helpIds","coreBi","constants","panels/focusPanels/accessibilityPanel.rt"],function(e,t,n,a,s,i,o){"use strict";return e({propTypes:{},displayName:"accessibilityPanel",mixins:[n.mixins.editorAPIMixin],successStatusDuration:1e3,getInitialState:function(){return{visualFocusEnabled:this.getEditorAPI().accessibility.visualFocus.get(),visualFocusTootlipOpen:!1}},componentDidMount:function(){var e=this.getEditorAPI();e.bi.event(s.events.accessibilityPanel.opened,{visual_ind_toggle:e.accessibility.visualFocus.get()?"on":"off",site_id:e.documentServices.generalInfo.getSiteId()})},openHelpLink:function(e){var t={learn_more:Boolean(e),panel_name:this.props.panelName,origin:i.BI.HELP.ORIGIN.PANEL};this.getEditorAPI().panelManager.openHelpCenter(a.EXTERNAL.ACCESSIBILITY_PANEL,{},t)},openHeaderHelp:function(){this.openHelpLink(!1)},openLearnMoreLink:function(){this.openHelpLink(!0)},close:function(e){var t=this.getEditorAPI();t.bi.event(s.events.accessibilityPanel.close,{visual_ind_toggle:t.accessibility.visualFocus.get()?"on":"off",closeMethod:e,site_id:t.documentServices.generalInfo.getSiteId()}),t.panelManager.closePanelByName(this.props.panelName)},closeByXButton:function(){this.close("X")},closeByCloseButton:function(){this.close("close")},onPanelClose:function(e){this.close(e)},activateReordering:function(e,n,a){var i=this.getEditorAPI(),o=t.now();i.bi.event(s.events.accessibilityPanel.click_reordering_button,{site_id:i.documentServices.generalInfo.getSiteId()}),i.accessibility.reorderComponents(function(){var e=Math.floor(t.now()-o);i.bi.event(s.events.accessibilityPanel.reordering_has_finished,{duration:e,site_id:i.documentServices.generalInfo.getSiteId()}),n()},a)},toggleVisualFocus:function(){var e=this.getEditorAPI(),n=!this.state.visualFocusEnabled;this.getEditorAPI().accessibility.visualFocus.set(n),this.setState({visualFocusEnabled:n,visualFocusTootlipOpen:!n}),e.bi.event(s.events.accessibilityPanel.click_enable_visual_indicator,{site_id:e.documentServices.generalInfo.getSiteId(),value:n?"ON":"OFF"}),t.delay(function(){this.setState({visualFocusTootlipOpen:!1})}.bind(this),4e3)},render:o})}),define("panels/focusPanels/mobileEditorFirstTimeVideoPanel.rt",["react","lodash","panels/focusPanels/welcomeVideoPanel","util","baseUI"],function(e,t,n,a,s){"use strict";return function(){return e.createElement(n,{ref:"frame",title:a.translate("Intro_video_mobile_user_dialog_title"),subtitle:a.translate("Intro_video_mobile_user_dialog_subtitle"),linkedVideoData:this.videoUrl,content:this.getContent(),panelName:this.props.panelName,shouldNotCloseOnBlur:!0,onCloseByX:this.sendBIEventWhenClosedByX,onCloseByESC:this.sendBIEventWhenClosedByESC},e.createElement("div",{className:"buttons"},e.createElement(s.button,{label:"Intro_video_mobile_user_dialog_button",onClick:function(){this.startNow()}.bind(this)})))}}),define("panels/focusPanels/mobileEditorFirstTimeVideoPanel",["create-react-class","lodash","core","panels/focusPanels/mobileEditorFirstTimeVideoPanel.rt","coreBi","prop-types"],function(e,t,n,a,s,i){"use strict";var o="www.youtube.com/embed/CCFWEJ6r3NA";return e({displayName:"mobileEditorFirstTimeVideoPanel",mixins:[n.mixins.editorAPIMixin],propTypes:{panelName:i.string.isRequired},videoUrl:"//"+o+"?modestbranding=1;rel=0&frameborder=0;allowfullscreen=0;autoplay=1;controls=1;autohide=1;showinfo=0",close:function(){this.getEditorAPI().panelManager.closePanelByName(this.props.panelName)},startNow:function(){this.sendBIEvent("startNow"),this.close()},sendBIEventWhenClosedByX:function(){this.sendBIEvent("xButton"),this.close()},sendBIEventWhenClosedByESC:function(){this.sendBIEvent("ESC"),this.close()},getContent:function(){var e={};return e.line1="Intro_video_mobile_user_dialog_text1",e.line2="Intro_video_mobile_user_dialog_text2",e},sendBIEvent:function(e){var t=this.getEditorAPI(),n={origin:e,site_id:t.documentServices.generalInfo.getSiteId(),duration:Date.now()-this.displayTime,video_url:o,panel_name:this.constructor.displayName};t.bi.event(s.events.newUserIntroVideoPanel.INTRO_VIDEO_CLOSE,n)},componentDidMount:function(){this.displayTime=Date.now()},render:a})}),define("panels/focusPanels/mobileEditorFirstTimePanel.rt",["react","lodash","panels/focusPanels/popupTemplate","constants"],function(e,t,n,a){"use strict";return function(){return e.createElement(n,{panelName:this.props.panelName,className:"mobile-editor-first-time",h1text:"Notification_Box_Mobile_FirstTime_Title",imageClassName:"check-your-mobile-site-image",bodyText:"Notification_Box_Mobile_FirstTime_Text",dontShowAgainKey:a.USER_PREFS.MOBILE_EDITOR.FIRST_TIME_PANEL.DONT_SHOW_AGAIN,shouldNotCloseOnBlur:!0,userPrefType:"site"})}}),define("panels/focusPanels/mobileEditorFirstTimePanel",["create-react-class","prop-types","core","panels/focusPanels/mobileEditorFirstTimePanel.rt"],function(e,t,n,a){"use strict";return e({displayName:"mobileEditorFirstTimePanel",propTypes:{panelName:t.string.isRequired},mixins:[n.mixins.editorAPIMixin],render:a})}),define("panels/focusPanels/appInstallerPanel.rt",["react","lodash","panels/frames/focusPanelFrame","util","baseUI"],function(e,t,n,a,s){"use strict";return function(){return e.createElement(n,{panelName:"appInstallerPanel",shouldHideHelp:!0,shouldHideHeader:!0,className:"appInstaller-panel"},e.createElement("div",{className:"appInstaller-panel-inner"},e.createElement("div",{className:"header"},"\n            ",a.translate("SITE_APPINSTALLER_PANEL_TITLE"),"\n        "),e.createElement("div",{className:"progress"},e.createElement("div",{className:"progress-bar"},e.createElement("div",{className:"filled",style:this.getProgressBarStyle()})),this.props.done?null:e.createElement("div",{key:"counter",className:"counter"},"\n                ",this.props.finishedCounter+1,"/",this.props.totalApps,"\n            "),this.props.done?e.createElement("div",{key:"checkmark",className:"checkmark"},e.createElement(s.symbol,{name:"check"})):null),this.props.done?null:e.createElement("div",{key:"description",className:"description"},"\n            ",a.translate("SITE_APPINSTALLER_PANEL_SUBTITLE"),"\n            "," ","\n            ",this.props.installingAppName,"\n        "),this.props.done?e.createElement("div",{key:"description",className:"description"},"\n            ",a.translate("SITE_APPINSTALLER_PANEL_DONE"),"\n        "):null))}}),define("panels/focusPanels/appInstallerPanel",["create-react-class","prop-types","lodash","stateManagement","higherOrderComponents","panels/focusPanels/appInstallerPanel.rt"],function(e,t,n,a,s,i){"use strict";var o=e({displayName:"AppInstallerPanel",propTypes:{installingAppName:t.string,finishedCounter:t.number,done:t.bool},getProgressBarStyle:function(){if(this.props.done)return{width:"100%",animation:"progressBarDone 0.8s"};return{width:"90%",animation:"progressBar "+this.props.totalApps*Number(this.props.progressBarPace)+"s"}},render:i});return s.connect(function(e){return a.appInstaller.selectors.getAppsInstallerPanelData(e)},n.noop)(s.renderWhenMutated(o))}),define("panels/focusPanels/backToADIPanel.rt",["react","lodash","baseUILib","baseUI","util","panels/frames/focusPanelFrame"],function(e,t,n,a,s,i){"use strict";return function(){return e.createElement(i,{key:"backToADIPanel",shouldHideHelp:!0,className:"back-to-adi-panel",onClose:this.onPanelClose,title:s.translate("TOPBAR_BacktoADI_MSG_TITLE"),panelName:"back-to-adi"},e.createElement("div",{className:"back-to-adi-panel-content"},e.createElement("div",{className:"svg-container"},e.createElement(a.symbol,{name:"BackToADIPopUp"})),e.createElement("div",{className:"description-container"},e.createElement("div",{className:"description-top"},e.createElement("span",{className:"description-text"},s.translate("TOPBAR_BacktoADI_MSG_BODY1"))),e.createElement("div",{className:"description-bottom"},e.createElement("span",{className:"description-text"},s.translate("TOPBAR_BacktoADI_MSG_BODY2")),e.createElement(n.Button,{className:"description-text btn-text description-link",onClick:this.openSiteHistory},s.translate("TOPBAR_BacktoADI_MSG_LINK")))),e.createElement("div",{className:"footer-buttons"},e.createElement(a.button,{onClick:this.backToEditorButton,className:"btn-confirm-secondary btn-md footer-button",label:"TOPBAR_BacktoADI_MSG_BUTTON2"}),e.createElement(a.button,{onClick:this.backToADI,className:"btn-confirm-primary btn-md footer-button",label:"TOPBAR_BacktoADI_MSG_BUTTON1"}))))}}),define("panels/focusPanels/backToADIPanel",["create-react-class","lodash","util","core","coreBi","panels/focusPanels/backToADIPanel.rt"],function(e,t,n,a,s,i){"use strict";return e({propTypes:{},displayName:"backToADIPanel",mixins:[a.mixins.editorAPIMixin],openSiteHistory:function(){this.getEditorAPI().account.openSiteHistory(),this.sendBI("Site history")},close:function(){var e=this.getEditorAPI();this.sendBI("Stay in the editor"),e.panelManager.closePanelByName(this.props.panelName)},closeByXButton:function(){this.close("X")},backToEditorButton:function(){this.close("backToEditor")},redirectToADI:function(){this.getEditorAPI().panelManager.closeAllPanels(),window.location=n.editorModel.onboardingEditorUrl},backToADI:function(){var e=this.getEditorAPI();this.sendBI("Back to Wix ADI"),e.saveManager.saveInBackground(this.redirectToADI.bind(this),t.noop,"",{getBackToADI:!0})},onConfirm:function(){this.props.onButtonClick&&this.props.onButtonClick(!0)},sendBI:function(e){var t=this.getEditorAPI();t.bi.event(s.events.backToADIFromEditor.backToWixADIPanelClicked,{category:e,esi:n.editorModel.editorSessionId,site_id:t.documentServices.generalInfo.getSiteId()})},onPanelClose:function(e){this.close(e)},render:i})}),define("panels/focusPanels/propertyTypes",[],function(){"use strict";return{TEXT:{value:"text",label:"Text (String)"},NUMBER:{value:"number",label:"Number"},BOOLEAN:{value:"boolean",label:"Boolean"},IMAGE:{value:"image",label:"Image"},DATE:{value:"date",label:"DateTime"},URL:{value:"url",label:"URL"},COLOR:{value:"color",label:"Color"}}}),define("panels/focusPanels/apiDefinitionProperty.rt",["react","lodash","baseUILib","panels/frames/focusPanelFrame","panels/focusPanels/propertyTypes"],function(e,t,n,a,s){"use strict";return function(){return e.createElement(a,{panelName:"appStudioBuilder.apiDefinitionProperty",title:this.props.title,className:"api-definition-property"},e.createElement(n.Composites.TextInputLabeled,{},e.createElement(n.InfoIcon,{shouldTranslate:!1,text:"more info about display name"}),e.createElement(n.TextLabel,{value:"Display Name",shouldTranslate:!1}),e.createElement(n.TextInput,{value:this.state.displayName,placeholder:"display name",onChange:function(e){this.setState({displayName:e})}.bind(this)})),e.createElement(n.Composites.TextInputLabeled,{},e.createElement(n.InfoIcon,{shouldTranslate:!1,text:"more info about name"}),e.createElement(n.TextLabel,{value:"Name",shouldTranslate:!1}),e.createElement(n.TextInput,{value:this.state.name,placeholder:"name",onChange:function(e){this.setState({name:e})}.bind(this)})),e.createElement(n.Composites.DropDownLabeled,{},e.createElement(n.InfoIcon,{shouldTranslate:!1,text:"more info about type"}),e.createElement(n.TextLabel,{value:"Type",shouldTranslate:!1}),e.createElement(n.DropDown,{value:this.state.type,shouldTranslate:!1,options:s,onChange:function(e){this.setState({type:e})}.bind(this),placeholder:"choose type"})),this.state.type===s.NUMBER.value?e.createElement(n.Composites.TextInputLabeled,{key:"minInput"},e.createElement(n.InfoIcon,{shouldTranslate:!1,text:"more info about min value"}),e.createElement(n.TextLabel,{value:"Min Value",shouldTranslate:!1}),e.createElement(n.NumericInput,{value:this.state.min,min:-99999,max:this.state.max,onChange:function(e){this.setState({min:e})}.bind(this)})):null,this.state.type===s.NUMBER.value?e.createElement(n.Composites.TextInputLabeled,{key:"maxInput"},e.createElement(n.InfoIcon,{shouldTranslate:!1,text:"more info about max value"}),e.createElement(n.TextLabel,{value:"Max Value",shouldTranslate:!1}),e.createElement(n.NumericInput,{value:this.state.max,min:this.state.min,max:99999,onChange:function(e){this.setState({max:e})}.bind(this)})):null,this.state.type===s.NUMBER.value?e.createElement(n.Composites.TextInputLabeled,{key:"stepInput"},e.createElement(n.InfoIcon,{shouldTranslate:!1,text:"more info about step"}),e.createElement(n.TextLabel,{value:"Step",shouldTranslate:!1}),e.createElement(n.NumericInput,{value:this.state.step,min:-99999,max:99999,step:.001,onChange:function(e){this.setState({step:e})}.bind(this)})):null,this.state.type===s.TEXT.value?e.createElement(n.Composites.TextInputLabeled,{key:"maxLengthInput"},e.createElement(n.InfoIcon,{shouldTranslate:!1,text:"more info about max length"}),e.createElement(n.TextLabel,{value:"Max Length",shouldTranslate:!1}),e.createElement(n.NumericInput,{value:this.state.maxLength,min:0,max:99999,onChange:function(e){this.setState({maxLength:e})}.bind(this)})):null,e.createElement(n.Composites.TextInputLabeled,{},e.createElement(n.InfoIcon,{shouldTranslate:!1,text:"more info about default value"}),e.createElement(n.TextLabel,{value:"Default Value",shouldTranslate:!1}),e.createElement(n.TextInput,{value:this.state.defaultValue,placeholder:"default value",onChange:function(e){this.setState({defaultValue:e})}.bind(this)})),e.createElement(n.Composites.TextInputMultilineWithButtonLabeled,{},e.createElement(n.InfoIcon,{shouldTranslate:!1,text:"more info about description"}),e.createElement(n.TextLabel,{value:"Description",shouldTranslate:!1}),e.createElement(n.TextInputMultiline,{value:this.state.description,buttonLabel:"Set",placeholder:"description",onChange:function(e){this.setState({description:e})}.bind(this)})),e.createElement(n.Composites.ButtonMedium,{},e.createElement(n.Button,{className:"btn-md",onClick:this.handleClickCTA},e.createElement("span",{},this.props.ctaLabel))))}}),define("panels/focusPanels/apiDefinitionProperty",["lodash","react","prop-types","panels/focusPanels/apiDefinitionProperty.rt"],function(e,t,n,a){"use strict";var s=function(n){function s(t){_classCallCheck(this,s);var n=_possibleConstructorReturn(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,t));return n.state={displayName:t.property.displayName,name:t.property.name,type:t.property.type,min:e.get(t.property.validations,"min"),max:e.get(t.property.validations,"max"),step:e.get(t.property.validations,"step"),maxLength:e.get(t.property.validations,"maxLength"),defaultValue:t.property.defaultValue,description:t.property.description},n.handleClickCTA=function(){return n.props.onChange({displayName:n.state.displayName,name:n.state.name,type:n.state.type,validations:{min:n.state.min,max:n.state.max,step:n.state.step,maxLength:n.state.maxLength},defaultValue:n.state.defaultValue,description:n.state.description})},n}return _inherits(s,t.Component),_createClass(s,[{key:"render",value:function(){return a.call(this)}}]),s}();return s.displayName="apiDefinitionProperty",s.propTypes={property:n.object.isRequired,title:n.string.isRequired,ctaLabel:n.string.isRequired,onChange:n.func.isRequired},s.defaultProps={property:{}},s}),define("panels/focusPanels/focusPanels",["panels/focusPanels/welcomeVideoPanel","panels/focusPanels/exampleFocusPanel","panels/focusPanels/blogManagerPanel","panels/focusPanels/shoutOutTemplatesPanel","panels/focusPanels/aviaryPanel","panels/focusPanels/organizeImagesPanel","panels/focusPanels/outOfGridMobilePanel","panels/focusPanels/outOfGridDesktopPanel","panels/focusPanels/outOfContainerGridPanel","panels/focusPanels/dragToHeaderPanel","panels/focusPanels/attachToSOSPPanel","panels/focusPanels/detachedFromSOSPPanel","panels/focusPanels/spotifySearchFocusPanel","panels/focusPanels/iTunsLinkMaker","panels/focusPanels/pageAppInstalling","panels/focusPanels/howToVideoGalleryPanel","panels/focusPanels/feedbackPanel","panels/focusPanels/getTrafficPanel","panels/focusPanels/promotionModalPanel","panels/focusPanels/sizeRestrictionPanel","panels/focusPanels/newEditorWelcomeScreenPanel","panels/focusPanels/editorMigrationFailedPanel","panels/focusPanels/newUserIntroVideoPanel","panels/focusPanels/cameFromADIVideoPanel","panels/focusPanels/howToVideoPlayer","panels/focusPanels/newEditorListWelcomeScreenPanel","panels/focusPanels/createNewTextBoxPanel","panels/focusPanels/popupTemplate","panels/focusPanels/siteImageOptimizationPanel","panels/focusPanels/siteMembersSettingsPanel","panels/focusPanels/newFeaturesVideoPanel","panels/focusPanels/accessibilityPanel","panels/focusPanels/mobileEditorFirstTimeVideoPanel","panels/focusPanels/mobileEditorFirstTimePanel","panels/focusPanels/appInstallerPanel","panels/focusPanels/backToADIPanel","panels/focusPanels/apiDefinitionProperty"],function(e,t,n,a,s,i,o,r,l,c,p,u,d,m,h,g,f,P,_,E,b,C,N,I,y,T,S,v,k,L,A,O,D,x,M,w,R){"use strict";return{welcomeVideoPanel:e,exampleFocusPanel:t,blogManagerPanel:n,shoutOutTemplatesPanel:a,aviaryPanel:s,organizeImagesPanel:i,outOfGridMobilePanel:o,outOfGridDesktopPanel:r,outOfContainerGridPanel:l,dragToHeaderPanel:c,attachToSOSPPanel:p,detachedFromSOSPPanel:u,spotifySearchFocusPanel:d,iTunsLinkMaker:m,howToVideoGalleryPanel:g,pageAppInstallingPanel:h,feedbackPanel:f,getTrafficPanel:P,promotionModalPanel:_,sizeRestrictionPanel:E,newEditorWelcomeScreenPanel:b,editorMigrationFailedPanel:C,newUserIntroVideoPanel:N,cameFromADIVideoPanel:I,howToVideoPlayer:y,newEditorListWelcomeScreenPanel:T,createNewTextBoxPanel:S,popupTemplate:v,siteImageOptimizationPanel:k,siteMembersSettingsPanel:L,newFeaturesVideoPanel:A,accessibilityPanel:O,mobileEditorFirstTimeVideoPanel:D,mobileEditorFirstTimePanel:x,appInstallerPanel:M,backToADIPanel:w,apiDefinitionProperty:R}}),define("panels/messagePanels/changeStyleMessage/changeStyleMessage.rt",["react","lodash","panels/frames/messagePanelFrame","util","baseUI","constants"],function(e,t,n,a,s,i){"use strict";return function(){return e.createElement(n,{panelName:this.props.panelName,className:"change-style",confirmLabel:"Notification_Box_Got_It",dontShowAgainKey:i.USER_PREFS.MULTILINGUAL.STYLING_COMPONENT.DONT_SHOW_AGAIN,userPrefType:"site",panelTitle:a.translate("Notification_Box_Multilingual_Design_Change_Title"),onDontShowAgainChange:this.onDontShowAgainChange,onConfirm:this.onConfirm,onCancel:this.onCancel},e.createElement("div",{className:"icon"},e.createElement(s.symbol,{name:"plaster"})),e.createElement("div",{},e.createElement("p",{},a.translate("Notification_Box_Multilingual_Design_Change_Text"))))}}),define("panels/messagePanels/changeStyleMessage/changeStyleMessage",["lodash","create-react-class","core","coreBi","util","panels/messagePanels/changeStyleMessage/changeStyleMessage.rt"],function(e,t,n,a,s,i){"use strict";var o=a.events.multilingual;return t({displayName:"changeStyleMessage",mixins:[n.mixins.editorAPIMixin],render:i,sendBI:function(t,n){var a=this.getEditorAPI();a.bi.event(t,e.assign({esi:s.editorModel.editorSessionId,site_id:a.documentServices.generalInfo.getSiteId()},n))},onDontShowAgainChange:function(e){this.sendBI(o.styling_dont_show,{toggle_state:e})}})}),define("panels/messagePanels/deleteLastPageMessage/deleteLastPageMessage.rt",["react","lodash","panels/frames/messagePanelFrame","util","baseUI"],function(e,t,n,a,s){"use strict";return function(){return e.createElement(n,{panelName:this.props.panelName,confirmLabel:"Pages_Settings_Delete_Last_Page_Message_Confirmation",className:"delete-page-confirmation",panelTitle:a.translate("Pages_Settings_Delete_Last_Page_Message_Title")},e.createElement("div",{className:"icon"},e.createElement(s.symbol,{name:"plaster"})),e.createElement("div",{},e.createElement("p",{},a.translate("Pages_Settings_Delete_Last_Page_Message")),e.createElement("p",{},a.translate("Pages_Settings_Delete_Last_Page_Message2")),e.createElement("p",{},a.translate("Pages_Settings_Delete_Last_Page_Message3"),"\n            ",e.createElement("a",{key:"page-settings-tab-privacy-member-url",href:"https://www.wix.com/support/html5/",target:"_blank"},e.createElement(s.button,{label:"Pages_Settings_Delete_Last_Page_Message_Link",className:"btn-text"})),".\n        ")))}}),define("panels/messagePanels/deleteLastPageMessage/deleteLastPageMessage",["create-react-class","core","lodash","panels/messagePanels/deleteLastPageMessage/deleteLastPageMessage.rt"],function(e,t,n,a){"use strict";return e({displayName:"deleteLastPageMessage",mixins:[t.mixins.editorAPIMixin],render:a})}),define("panels/messagePanels/deletePageMessage/deletePageMessage.rt",["react","lodash","panels/frames/messagePanelFrame","util","baseUI"],function(e,t,n,a,s){"use strict";return function(){return e.createElement(n,{panelName:this.props.panelName,onConfirm:this.props.onConfirm,onCancel:this.props.onCancel,confirmLabel:"Pages_Settings_Delete_Page_Delete",cancelLabel:"Pages_Settings_Delete_Page_Cancel",className:"important delete-page-message",panelTitle:a.translate(this.props.isPopup?"Pages_Settings_Delete_Popup_Title":"Pages_Settings_Delete_Page_Title")},e.createElement("div",{className:"delete-page-message"},e.createElement("div",{className:"icon"},e.createElement(s.symbol,{name:"deleteGeneralIcon"})),e.createElement("div",{className:"message"},a.translate(this.props.isPopup?"Pages_Settings_Delete_Popup_Message":"Pages_Settings_Delete_Page_Message")+" "+this.props.pageTitle+a.translate("Pages_Settings_Delete_Page_Message_End"))))}}),define("panels/messagePanels/deletePageMessage/deletePageMessage",["create-react-class","lodash","panels/messagePanels/deletePageMessage/deletePageMessage.rt"],function(e,t,n){"use strict";return e({displayName:"deletePageMessage",render:n})}),define("panels/messagePanels/exampleMessagePanel.rt",["react","lodash","panels/frames/messagePanelFrame"],function(e,t,n){"use strict";return function(){return e.createElement(n,{panelName:this.props.panelName,width:"500",height:"500",onConfirm:this.onConfirm,confirmLabel:"OK",title:"Hello"},e.createElement("div",{},"content here"))}}),define("panels/messagePanels/exampleMessagePanel",["create-react-class","lodash","panels/messagePanels/exampleMessagePanel.rt","coreUtilsLib"],function(e,t,n,a){"use strict";return e({displayName:"exampleMessage",onConfirm:function(){a.log.info("onConfirm called")},render:n})}),define("panels/messagePanels/siteRevisionsPanel.rt",["react","lodash","baseUI","util","panels/frames/messagePanelFrame"],function(e,t,n,a,s){"use strict";return function(){return e.createElement(s,{ref:"frame",panelName:this.props.panelName,panelTitle:a.translate("TOPBAR_SITE_HISTORY_MSG_TITLE"),confirmLabel:"TOPBAR_SITE_HISTORY_MSG_BUTTON",onConfirm:this.onConfirm,className:"site-revisions-panel",onCancel:this.onCloseFrame},e.createElement("div",{className:"content-wrapper"},e.createElement("div",{className:"image-container"},e.createElement(n.symbol,{name:"siteHistoryClipart"})),e.createElement("div",{className:"description-container"},e.createElement("p",{},a.translate("TOPBAR_SITE_HISTORY_MSG_BODY1")),e.createElement("p",{},a.translate("TOPBAR_SITE_HISTORY_MSG_BODY2")))))}}),define("panels/messagePanels/siteRevisionsPanel",["react","create-react-class","panels/messagePanels/siteRevisionsPanel.rt"],function(e,t,n){"use strict";return t({displayName:"siteRevisionsPanel",mixins:[e.addons.LinkedStateMixin],onConfirm:function(){this.props.onButtonClick&&this.props.onButtonClick(!0)},onCloseFrame:function(){this.props.onButtonClick&&this.props.onButtonClick(!1)},render:n})}),define("panels/messagePanels/switchToOldEditorConfirmationPanel.rt",["react","lodash","util","baseUI","panels/frames/messagePanelFrame"],function(e,t,n,a,s){"use strict";return function(){return e.createElement(s,{ref:"frame",panelName:this.props.panelName,className:"switch-to-old-editor",panelTitle:n.translate(this.props.title),confirmLabel:"Notification_Box__ToOldEditor_Button_ToOldEditor",onConfirm:this.handleBackToOld,cancelLabel:"Notification_Box__ToOldEditor_Button_Cancel",onCancel:this.close},e.createElement("div",{className:"content-wrapper"},e.createElement("div",{className:"logo"},e.createElement(a.symbol,{name:"switchToOldEditorPanel"})),e.createElement("div",{className:"text"},e.createElement("div",{className:"message"},n.translate("Notification_Box__ToOldEditor_Text1")),e.createElement("div",{className:"message"},e.createElement("p",{},n.translate("Notification_Box__ToOldEditor_Text2"),"\n                    ",e.createElement("a",{onClick:function(){this.linkClick()}.bind(this)},n.translate("Notification_Box__ToOldEditor_link")))))))}}),define("panels/messagePanels/switchToOldEditorConfirmationPanel",["create-react-class","prop-types","lodash","core","util","panels/messagePanels/switchToOldEditorConfirmationPanel.rt"],function(e,t,n,a,s,i){"use strict";return e({displayName:"switchToOldEditorConfirmationPanel",mixins:[a.mixins.editorAPIMixin],propTypes:{title:t.string.isRequired,messageBody:t.string.isRequired},handleBackToOld:function(){s.cookie.setUserPetriOverrideCookie("SantaEditorUserOverride","old"),window.onbeforeunload=null,window.location.reload(!0)},close:function(){this.getEditorAPI().panelManager.closePanelByName(this.props.panelName)},linkClick:function(){if(window){var e=this.getEditorAPI().getLanguageCode(),t="https://{$lang}.wix.com/support/html5/new-wix-editor-june-2015/using-your-editor/kb/suggestions-and-feedback-new-wix-editor-2015".replace("{$lang}","en"===e?"www":e);window.open(t)}},render:i})}),define("panels/messagePanels/concurrentUsers/concurrentUserPanel.rt",["react","lodash","util","symbols","panels/frames/confirmationPanelFrame"],function(e,t,n,a,s){"use strict";return function(){return e.createElement(s,{panelName:this.props.panelName,className:"concurrent-user-panel",onConfirm:this.onOk,confirmLabel:this.text().ok,shouldHideCancelButton:!0,type:this.props.isFirstUser?"normal":"important",panelTitle:n.translate(this.text().title)},e.createElement("div",{className:"panel-inner"},e.createElement("div",{className:"concurrent-users-panel-img"},e.createElement(a.symbol,{name:this.props.isFirstUser?this.symbols.firstUser:this.symbols.secondUser})),e.createElement("div",{className:"textual-content"},e.createElement("div",{className:"sub-title"},e.createElement("span",{className:"concurrent-user"},this.getConcurrentUserToDisplay()),"\n          ",n.translate(this.text().description),"\n        "),e.createElement.apply(this,["ul",{className:"recommendation-list"},t.map(this.getRecommendations(),function(t,a){return e.createElement("li",{},e.createElement("span",{className:"number"},a+1,"."),e.createElement("span",{className:"description"},n.translate(t)))}.bind(this))]))))}}),define("panels/messagePanels/concurrentUsers/concurrentUserPanel",["create-react-class","prop-types","lodash","core","util","coreBi","panels/messagePanels/concurrentUsers/concurrentUserPanel.rt"],function(e,t,n,a,s,i,o){"use strict";var r=["CONCURRENT_EDITING_SOMEBODY_JOINED_OPT_1","CONCURRENT_EDITING_SOMEBODY_JOINED_OPT_2"],l=["CONCURRENT_EDITING_ALREADY_OPEN_OPT_1","CONCURRENT_EDITING_ALREADY_OPEN_OPT_2"],c={first:{title:"CONCURRENT_EDITING_SOMEBODY_JOINED_TITLE",description:"CONCURRENT_EDITING_SOMEBODY_JOINED_DESCRIPTION",ok:"CONCURRENT_EDITING_SOMEBODY_JOINED_OK_BUTTON"},second:{title:"CONCURRENT_EDITING_ALREADY_OPEN_TITLE",description:"CONCURRENT_EDITING_ALREADY_OPEN_DESCRIPTION",ok:"CONCURRENT_EDITING_ALREADY_OPEN_OK_BUTTON"}},p=0;return e({displayName:"ConcurrentUserPanel",mixins:[a.mixins.editorAPIMixin],symbols:{firstUser:"concurrentUsersPopupsBlue",secondUser:"concurrentUsersPopupsRed"},propTypes:{isFirstUser:t.bool.isRequired,concurrentUsers:t.arrayOf(t.string).isRequired,concurrentUserToDisplay:t.string},componentDidMount:function(){p=0===p?1:2},text:function(){return this.props.isFirstUser?c.first:c.second},getRecommendations:function(){return this.props.isFirstUser?r:l},getConcurrentUserToDisplay:function(){var e=this.props.concurrentUserToDisplay||n.head(this.props.concurrentUsers);return"wixStaff"===e&&(e=s.translate("CONCURRENT_EDITING_SOMEBODY_JOINED_DESCRIPTION_WIX_STAFF")),e},onOk:function(){var e=i.events.concurrentUsers.CONCURRENT_USERS_POPUP_OK_CLICK,t={user:this.props.isFirstUser?"first":"second",count:this.props.concurrentUsers.length,is_first:1===p};this.getEditorAPI().bi.event(e,t)},render:o})}),define("panels/frames/dangerMessagePanelFrame.rt",["react","lodash","baseUI","symbols","baseUILib","panels/frames/panelCloseOrigin"],function(e,t,n,a,s,i){"use strict";return function(){var t=this;return e.createElement("div",{className:"panel-frame-container screen-centered-frame general-panel-frame-z-index"},e.createElement(s.Composites.PopupSmallSize,{className:"popup-small-size-danger danger"},e.createElement(s.PanelHeader,{noHelpBtn:!0,onClose:function(){this.props.close(i.HEADER_CLOSE_BUTTON)}.bind(this)},e.createElement(s.TextLabel,{type:"T11",value:this.props.title})),e.createElement(s.Composites.PanelContent,{},e.createElement(s.Composites.RichTextWithIllustration,{},e.createElement(s.Illustration,{},e.createElement(a.symbol,{name:this.props.iconName})),this.props.contentLabel?e.createElement(s.Composites.RichTextLabeled,{key:"danger-message-content-labeled"},e.createElement(s.TextLabel,{type:"T11",value:this.props.contentLabel}),e.createElement(s.RichText,{type:"T11"},this.props.children)):null,this.props.contentLabel?null:e.createElement(s.Composites.RichText,{key:"danger-message-content"},e.createElement(s.RichText,{type:"T11"},this.props.children)))),e.createElement(s.Composites.ActionSetHorizontal,{},e.createElement(s.Button,{className:"secondary",onClick:function(){return t.props.close(i.DONE_BUTTON)}},e.createElement(s.TextLabel,{automationId:"danger-message-secondary-button",type:"T11",value:this.props.cancelLabel})),e.createElement(s.Button,{className:"primary",onClick:function(){return t.closeAndCall(i.CONFIRM_BUTTON)}},e.createElement(s.TextLabel,{automationId:"danger-message-primary-button",type:"T11",value:this.props.confirmLabel})))),e.createElement("div",{className:"dark-frame-overlay"}))}}),define("panels/frames/dangerMessagePanelFrame",["create-react-class","lodash","higherOrderComponents","prop-types","util","constants","panels/mixins/disableKeyboardShortcutsMixin","panels/frames/dangerMessagePanelFrame.rt"],function(e,t,n,a,s,i,o,r){"use strict";var l=e({displayName:i.PANEL_TYPES.DANGER,mixins:[s.propTypesFilterMixin,o],propsTypes:{panelName:a.string.isRequired,close:a.func.isRequired,onConfirm:a.func,title:a.string.isRequired,contentLabel:a.string,confirmLabel:a.string.isRequired,cancelLabel:a.string.isRequired,iconName:a.string.isRequired},closeAndCall:function(e){this.props.close(e),this.props.onConfirm&&this.props.onConfirm()},render:r}),c=n.panelFrame(i.PANEL_TYPES.DANGER)(l);return c.pure=l,c}),define("panels/messagePanels/deleteWidgetMessage/deleteWidgetMessage.rt",["react","lodash","panels/frames/dangerMessagePanelFrame"],function(e,t,n){"use strict";return function(){return e.createElement(n,{panelName:this.props.panelName,onConfirm:this.props.onConfirm,confirmLabel:"Pages_Settings_Delete_Page_Delete",cancelLabel:"Pages_Settings_Delete_Page_Cancel",title:"Delete Widget",iconName:"deleteGeneralIcon"},"Are you sure you want to delete - ",this.props.widgetName)}}),define("panels/messagePanels/deleteWidgetMessage/deleteWidgetMessage",["create-react-class","lodash","prop-types","panels/messagePanels/deleteWidgetMessage/deleteWidgetMessage.rt"],function(e,t,n,a){"use strict";return e({displayName:"deleteDangerMessage",propsTypes:{onConfirm:n.func.isRequired,widgetName:n.string.isRequired},closeAndCall:function(e){this.props.close(e),this.props.onConfirm&&this.props.onConfirm()},render:a})}),define("panels/messagePanels/messagePanels",["panels/messagePanels/changeStyleMessage/changeStyleMessage","panels/messagePanels/deleteLastPageMessage/deleteLastPageMessage","panels/messagePanels/deletePageMessage/deletePageMessage","panels/messagePanels/exampleMessagePanel","panels/messagePanels/siteRevisionsPanel","panels/messagePanels/switchToOldEditorConfirmationPanel","panels/messagePanels/concurrentUsers/concurrentUserPanel","panels/messagePanels/deleteWidgetMessage/deleteWidgetMessage"],function(e,t,n,a,s,i,o,r){"use strict";return{changeStyleMessage:e,deleteLastPageMessage:t,deletePageMessage:n,exampleMessage:a,siteRevisionsPanel:s,switchToOldEditorConfirmationPanel:i,concurrentUserPanel:o,deleteWidgetMessage:r}}),define("panels/toolPanels/pagesSelector/pageItem.rt",["react","lodash","baseUI","baseUILib","symbols","core"],function(e,t,n,a,s,i){"use strict";return function(){return function(){var o=this.props.dataSource,r=this.getEditorAPI(),l=this.validatePage();return e.createElement("div",{className:t(this.getItemClassNames(o)).transform(function(e,t,n){t&&e.push(n)},[]).join(" ")},e.createElement(n.tooltip,{disabled:l.valid,shouldTranslate:!1,value:l.message},e.createElement("label",{className:"item-label"},o.pageData?e.createElement(a.Checkbox,{key:"toggle",disabled:!l.valid,value:this.isSelected(),onChange:this.handleToggleChanged}):null,e.createElement("span",{className:"page-name"},o.label),o.pageData&&r.pages.isHomePage(o.pageData.id)?e.createElement(s.symbol,{name:"pageItemHomeIcon",key:"isHome"}):null,o.pageData&&i.utils.tpaTypeUtils.isTPA(o.pageData)&&!i.utils.tpaTypeUtils.isTPASpecialPage(r.dsRead,o.pageData)?e.createElement(s.symbol,{name:"actionButtonSpecialPages",key:"isTpaPage"}):null,o.pageData&&i.utils.blogTypeUtils.isBlogSectionPage(r,o.pageData)?e.createElement(s.symbol,{name:"actionButtonBlogPages",key:"isBlogPage"}):null,o.type.isLink?e.createElement(s.symbol,{name:"pageItemLinkIcon",key:"isLink"}):null,o.type.isDropdown?e.createElement(s.symbol,{name:"pageItemDropdownIcon",key:"isDropDown"}):null,o.isVisible?null:e.createElement(s.symbol,{name:"pageItemHideIcon",key:"isHidden"}))))}.apply(this,[])}}),define("panels/toolPanels/pagesSelector/pageItem",["react","create-react-class","prop-types","core","lodash","panels/toolPanels/pagesSelector/pageItem.rt"],function(e,t,n,a,s,i){"use strict";return t({mixins:[a.mixins.editorAPIMixin,e.addons.LinkedStateMixin],displayName:"pageSelectorPageItem",propTypes:{isSubMenu:n.bool,isSubMenuLast:n.bool,validatePage:n.func,selectedPageIds:n.array.isRequired,dataSource:n.object.isRequired,toggleSelection:n.func},handleToggleChanged:function(e){this.props.toggleSelection&&this.props.toggleSelection(this.getPageId(),e)},getItemClassNames:function(e){var t=this.validatePage().valid;return{"pages-selector-item":!0,"current-page":!1,"item-hidden":!e.isVisible,"item-disabled":!t,"item-first-level":!this.props.isSubMenu,"item-second-level":this.props.isSubMenu,"item-second-level-last":this.props.isSubMenuLast,"item-is-page":e.type.isPage}},isSelected:function(){return s.includes(this.props.selectedPageIds,this.getPageId())},validatePage:function(){var e=this.getPageId(),t=[this.props.validatePage||s.noop,s.constant({valid:!0})];return s.reduce(t,s.bind(function(t,n){return t||n(e,this)},this),void 0)},getPageId:function(){return this.props.dataSource.pageData&&this.props.dataSource.pageData.id},render:i})}),define("panels/toolPanels/pagesSelector/treeNode.rt",["react","lodash"],function(e,t){"use strict";return function(){return function(){var n=this.getTreeViewClass(),a=this.props.nodeContent,s=this.getChildren().length;return this.hasChildren(),e.createElement("li",{"data-numofchildren":s,className:t({"has-children":this.hasChildren(),"pages-tree-node":!0}).transform(function(e,t,n){t&&e.push(n)},[]).join(" ")},e.createElement(a,this.passNodeContentProps(this.props.dataSource)),e.createElement(n,t.assign({},{isCollapsed:this.state.collapsed},this.passNodeProps())))}.apply(this,[])}}),define("panels/toolPanels/pagesSelector/pagesSelectorPanel.rt",["react","lodash","util","baseUI","baseUILib","symbols","popups","panels/toolPanels/pagesSelector/pageItem","panels/toolPanels/pagesSelector/treeNode.rt","panels/frames/toolPanelFrame"],function(e,t,n,a,s,i,o,r,l,c){"use strict";return function(){function i(){var i=o.mappers.pagesSelectorPanel(this.getEditorAPI());return e.createElement(c,t.assign({},{contentStyle:this.getFrameStyle(),key:"pages-selector-panel",keyboardShortcuts:this.getKeyboardShortcuts(),contentWrapperClass:"pages-selector-panel",headerTitle:n.translate("Popups_Settings_Pages_Panel_Header")},t.omit(this.props,"children")),i.selectAll.visible?e.createElement("div",{className:"description-block",key:"selectAll_description"},"\n        ",n.translate("Popups_Settings_Pages_Panel_Text"),"\n    "):null,i.selectAll.visible?e.createElement("div",{className:"select-all-block",key:"selectAll_control"},e.createElement(s.Checkbox,{disabled:i.selectAll.disabled,labelAfterSymbol:!0,value:i.selectAll.checked,indeterminate:i.selectAll.indeterminate,onChange:this.toggleOpenOnAllPages,label:"Popups_Settings_Pages_All_Toggle"})):null,e.createElement(s.CustomScroll,{},function(n){var s=this.getEditorAPI();return e.createElement("div",{className:"pages-selector-scrollbox"},e.createElement(a.treeView,{className:"pages-tree ",dataSource:this.getTreeDataSource(),editorAPI:s,nodeContent:r,nodeTemplate:l,validatePage:t.partial(this.validatePage,n),selectedPageIds:n.selectedPageIds,toggleSelection:this.toggleOpenOnPage,isRoot:!0}))}.apply(this,[i])))}return this.getEditorAPI().pages.popupPages.getCurrentPopup()?i.apply(this,[]):null}}),define("panels/toolPanels/pagesSelector/pagesSelectorPanel",["create-react-class","lodash","util","core","popups","panels/toolPanels/pagesSelector/pagesSelectorPanel.rt"],function(e,t,n,a,s,i){"use strict";return e({displayName:"pagesSelectorPanel",mixins:[a.mixins.editorAPIMixin,n.translationMixin],getFrameStyle:function(){return t.pick(this.props,["top","left","width"])},toggleOpenOnPage:function(e,t){var n=this.getEditorAPI();t?s.actions.openBehaviors.assignOpenBehaviorToPage(n,e):s.actions.openBehaviors.removeOpenBehaviorFromPage(n,e)},toggleOpenOnAllPages:function(e){var t=this.getEditorAPI();e?s.actions.openBehaviors.assignOpenBehaviorToAllPages(t):s.actions.openBehaviors.removeOpenBehaviorFromAllPages(t)},validatePage:function(e,n){if(t.has(e.occupiedPages,n))return{valid:!1,message:this.translateTemplate("Popups_Settings_Triggers_Page_Has_Popup_Tooltip",{POPUP_NAME:'"'+e.occupiedPages[n]+'"'},this.getEditorAPI())}},getKeyboardShortcuts:function(){var e={},t=n.browserUtil.getKeyboardSpecialKey().value;return e[t+" + z"]=this.getEditorAPI().history.undo,e[[t+" + y",t+" + shift + z"].join(",")]=this.getEditorAPI().history.redo,e},getTreeDataSource:function(){var e=this.getEditorAPI(),n=e.pages.dynamicPages.getMenuItems(),a=e.mainMenu.getMenuItemsTreeForPagesFixed(),s=t.flatMap(n,"items");return a.concat(s)},render:i})}),define("panels/toolPanels/exampleToolPanel.rt",["react","lodash","panels/frames/toolPanelFrame"],function(e,t,n){"use strict";return function(){return e.createElement(n,{panelName:this.props.panelName,headerTitle:"Tools Panel",contentStyle:this.getFrameStyle()},e.createElement("div",{},"content here"))}}),define("panels/toolPanels/exampleToolPanel",["create-react-class","lodash","panels/toolPanels/exampleToolPanel.rt"],function(e,t,n){"use strict";return e({displayName:"exampleToolPanel",getDefaultProps:function(){return{top:"200px",left:"300px"}},getFrameStyle:function(){return t.defaults({width:500,height:200},t.pick(this.props,["top","left"]))},render:n})}),define("panels/toolPanels/linkPanel/linkPanel.rt",["react","lodash","panels/frames/toolPanelFrame","baseUI","baseUILib","util","symbols","experiment"],function(e,t,n,a,s,i,o,r){"use strict";return function(){function l(n,r){var l=this.getPagesWithAnchors();return e.createElement(a.tabs.tab,{name:"AnchorLink",className:"anchor",key:"anchorLinkTab"},t.isEmpty(l)?e.createElement("div",{key:"noAnchorsWrapper",className:"no-anchors"},e.createElement("div",{className:"symbol-container"},e.createElement(o.symbol,{name:"noLink"})),e.createElement("h3",{},this.translateIfNeeded("LINK_PANEL_NO_ANCHOR_TITLE")),e.createElement("p",{},this.translateIfNeeded("LINK_PANEL_NO_ANCHOR_TEXT")),e.createElement(a.button,{className:"btn-text",label:"Anchor_Settings_How_Link_Text",onClick:this.openLearnMoreOnAnchor})):null,t.isEmpty(l)?null:e.createElement("label",{className:"dropdown-title",key:"pagesDropDownAnchorTabLabel"},i.translate(this.props.anchorTabPageDropDownTitle?this.props.anchorTabPageDropDownTitle:"LINK_PANEL_PAGE_DROP_DOWN_LABEL")),t.isEmpty(l)?null:e.createElement.apply(this,[s.DropDown,{shouldTranslate:!1,value:this.linkToPage().value,searchBox:!0,onChange:this.linkToPage().requestChange,key:"pagesDropDownAnchorTab",optionsContainerClassName:"link-panel-options-container"},t.map(this.getPagesWithAnchors(),function(t,n,a,i,o){return e.createElement(s.DropDownOption,{className:i.level?"level"+i.level:"",key:i.id,value:i.id,label:i.title+this.getCurrentPageThisTranslate(i.id)+" "+this.getRouterTypeForPageId(i.id),shouldTranslate:!1})}.bind(this,n,r,l))]),t.isEmpty(l)?null:e.createElement(s.Divider,{long:!0,key:"anchorDivider",className:"dropdown-link-separator"}),t.isEmpty(l)||!this.isDynamicPage(this.state.page.id)||this.isCollectionPageOrHasOneRoute()?null:e.createElement("label",{className:"dropdown-title",key:"innerRouteDropDownLabel"},i.translate("LINK_PANEL_PAGE_INNER_ROUTES_DROP_DOWN_LABEL")),t.isEmpty(l)||!this.isDynamicPage(this.state.page.id)||this.isCollectionPageOrHasOneRoute()?null:e.createElement.apply(this,[s.DropDown,{shouldTranslate:!1,searchBox:!0,disabled:!this.shouldShowInnerRoutesDropDown(),key:"innerRouteDropDown",value:this.linkToInnerRoute().value,optionsContainerClassName:"link-panel-options-container",onChange:this.linkToInnerRoute().requestChange},this.shouldShowPrevButton()?e.createElement(s.Button,{className:"btn-text",key:"prevButton",onClick:this.decreaseRange},e.createElement("span",{key:"preButtonText"},i.translate("dynamic_pages_routes_navigation_button_back"))):null,t.map(this.getInnerRoutesDropDown(),function(t,n,a,i,o){return e.createElement(s.DropDownOption,{shouldTranslate:!1,key:i.url,value:i.url,label:i.title})}.bind(this,n,r,l)),this.shouldShowNextButton()?e.createElement(s.Button,{className:"btn-text",key:"nextButton",onClick:this.increaseRange},e.createElement("span",{key:"nextButtonText"},i.translate("dynamic_pages_routes_navigation_button_next"))):null]),this.shouldShowInnerRoutesDropDown()?e.createElement(s.Divider,{key:"innerRouteDropDownDivider",long:!0,className:"dropdown-link-separator"}):null,t.isEmpty(l)?null:e.createElement("label",{className:"dropdown-title",key:"anchorNameLabel"},i.translate("LINK_PANEL_PAGE_ANCHOR_DROP_DOWN_LABEL")),t.isEmpty(l)?null:e.createElement.apply(this,[s.DropDown,{key:"anchorDropDown",shouldTranslate:!1,value:this.linkToAnchor().value,searchBox:!0,onChange:this.linkToAnchor().requestChange,optionsContainerClassName:"link-panel-options-container",disabled:!Boolean(this.state.link)||!Boolean(this.hasAnchors())||this.isDynamicPage(this.state.page.id)&&!this.shouldShowInnerRoutesDropDown()&&!this.isCollectionPageOrHasOneRoute()},t.map(this.getDropDownOptions(),function(t,n,a,i,o){return e.createElement(s.DropDownOption,{shouldTranslate:!1,key:i.value,value:i.value,label:i.label})}.bind(this,n,r,l))]))}function c(n,r){var l=this.popupList;return e.createElement(a.tabs.tab,{name:"PopupLink",key:"popupLinkTab",className:"popup"},l.length?null:e.createElement("div",{key:"popups-not-exist"},e.createElement("div",{className:"symbol-container"},e.createElement(o.symbol,{name:"noPopup"})),e.createElement("h3",{},this.translateIfNeeded("LINK_PANEL_TAB_POP-UP_TITLE")),e.createElement("p",{},this.translateIfNeeded("LINK_PANEL_TAB_POP-UP_TEXT")),e.createElement(a.button,{className:"btn-text",label:"LINK_PANEL_TAB_ADD_NEW_POP-UP_LINK",onClick:this.goToAddPanelPopup})),l.length?e.createElement("div",{key:"popups-exist",className:"popup-list"},e.createElement.apply(this,[a.dropDown.select,{label:"LINK_PANEL_TAB_POP-UP_DROP_DOWN_LABEL",valueLink:this.linkTo("pageId")},t.map(l,function(t,n,s,i,o){return e.createElement(a.dropDown.option,{shouldTranslate:!1,key:i.id,value:"#"+i.id},i.title,"\n                        ")}.bind(this,n,r,l))]),e.createElement(s.Divider,{long:!0,className:"popup-divider"}),e.createElement("div",{className:"popup-footer"},this.isMobileEditor()?null:e.createElement("div",{className:"popup-footer-content",key:"isMobileEditor"},e.createElement("span",{className:"popup-want-to-add-link"},i.translate("LINK_PANEL_TAB_ADD_NEW_POP-UP_TEXT")),e.createElement(a.button,{className:"btn-text",label:"LINK_PANEL_TAB_ADD_NEW_POP-UP_LINK",onClick:this.goToAddPanelPopup})))):null)}function p(){var p=this.isSectionVisible("PageLink"),u=this.isSectionVisible("NoLink");return e.createElement(n,{helpId:this.getHelpId(),panelName:this.props.panelName,selectedComponentType:this.props.bi.selectedComponentType,headerTitle:i.translate("LINK_PANEL_HEADER_PANE_LABEL"),ref:"frame",onClose:this.props.onCancelCallback&&this.props.onCancelCallback.bind(null,this.props.link),contentWrapperClass:"link-panel"},e.createElement(a.tabs.holder,{valueLink:this.linkSelectedTab(),className:"left radio",ref:"tabs"},e.createElement(a.tabs.header,{},this.isSectionVisible("NoLink")?e.createElement(a.tabs.label,{htmlFor:"NoLink",key:"noLinkTabLabel"},"\n                ",this.translateIfNeeded("LINK_PANEL_TAB_NONE"),"\n            "):null,this.isSectionVisible("PageLink")&&this.shouldShowPageSection()?e.createElement(a.tabs.label,{htmlFor:"PageLink",key:"pageLinkTabLabel"},this.translateIfNeeded("LINK_PANEL_TAB_PAGE"),"\n            "):null,this.isSectionVisible("AnchorLink")?e.createElement(a.tabs.label,{htmlFor:"AnchorLink",key:"anchorLinkTabLabel"},"\n                ",this.translateIfNeeded("LINK_PANEL_TAB_ANCHOR"),"\n            "):null,this.isSectionVisible("ExternalLink")?e.createElement(a.tabs.label,{htmlFor:"ExternalLink",key:"externalLinkTabLabel"},this.translateIfNeeded("LINK_PANEL_TAB_WEB_ADDRESS"),"\n            "):null,this.isSectionVisible("EmailLink")?e.createElement(a.tabs.label,{htmlFor:"EmailLink",key:"emailLinkTabLabel"},"\n                ",this.translateIfNeeded("LINK_PANEL_TAB_EMAIL"),"\n            "):null,this.isSectionVisible("PhoneLink")?e.createElement(a.tabs.label,{htmlFor:"PhoneLink",key:"phoneLinkTabLabel"},"\n                ",this.translateIfNeeded("LINK_PANEL_TAB_PHONE"),"\n            "):null,this.isSectionVisible("DocumentLink")?e.createElement(a.tabs.label,{htmlFor:"DocumentLink",key:"docLinkTabLabel"},"\n                ",this.translateIfNeeded("LINK_PANEL_TAB_DOCUMENT"),"\n            "):null,this.isSectionVisible("EdgeAnchorLinks")?e.createElement(a.tabs.label,{htmlFor:"EdgeAnchorLinks",key:"edgeAnchorLinksLabel"},this.translateIfNeeded("LINK_PANEL_TAB_TOPandBOTTOM"),"\n            "):null,this.isSectionVisible("PopupLink")?e.createElement(a.tabs.label,{htmlFor:"PopupLink",key:"popupLinkTabLabel"},"\n                ",this.translateIfNeeded("LINK_PANEL_TAB_POP-UP"),"\n            "):null,r.isOpen("wixstaff")&&this.isSectionVisible("LoginToWixLink")?e.createElement(a.tabs.label,{htmlFor:"LoginToWixLink",key:"homePageLoginTabLabel"},this.translateIfNeeded("LINK_PANEL_HOME_PAGE_LOGIN"),"\n            "):null),e.createElement(a.tabs.content,{},u?e.createElement(a.tabs.tab,{name:"NoLink",className:"none",key:"NoLinkTab"},e.createElement("div",{className:"symbol-container"},e.createElement(o.symbol,{name:"noLink"})),e.createElement("h3",{},this.translateIfNeeded("LINK_PANEL_PAGE_DROP_DOWN_Title")),e.createElement("p",{},this.translateIfNeeded("LINK_PANEL_PAGE_DROP_DOWN_Text"))):null,this.isPagesDropDownReady()?e.createElement(a.tabs.tab,{name:"PageLink",className:"page",key:"pageLinkTab"},e.createElement("label",{className:"dropdown-title"},i.translate(this.props.pageTabPageDropDownTitle?this.props.pageTabPageDropDownTitle:"LINK_PANEL_PAGE_DROP_DOWN_LABEL")),e.createElement.apply(this,[s.DropDown,{shouldTranslate:!1,value:this.linkToPage().value,searchBox:!0,onChange:this.linkToPage().requestChange,optionsContainerClassName:"link-panel-options-container"},t.map(this.getPagesListToShow(),function(t,n,a,i){return e.createElement(s.DropDownOption,{shouldTranslate:!1,className:a.level?"level"+a.level:"",key:a.id,value:a.id,label:a.title+this.getCurrentPageThisTranslate(a.id)+" "+this.getRouterTypeForPageId(a.id)})}.bind(this,p,u))]),e.createElement(s.Divider,{long:!0,className:"dropdown-link-separator"}),this.shouldShowInnerRoutesDropDown()?e.createElement("label",{className:"dropdown-title",key:"innerRouteDropDownLabel"},i.translate("LINK_PANEL_PAGE_INNER_ROUTES_DROP_DOWN_LABEL")):null,this.shouldShowInnerRoutesDropDown()?e.createElement.apply(this,[s.DropDown,{shouldTranslate:!1,searchBox:!0,key:"innerRouteDropDown",value:this.linkToInnerRoute().value,onChange:this.linkToInnerRoute().requestChange,optionsContainerClassName:"link-panel-options-container"},this.shouldShowPrevButton()?e.createElement(s.Button,{className:"btn-text",key:"prevButton",onClick:this.decreaseRange},e.createElement("span",{},i.translate("dynamic_pages_routes_navigation_button_back"))):null,t.map(this.getInnerRoutesToRender()||[],function(t,n,a,i){return e.createElement(s.DropDownOption,{shouldTranslate:!1,key:a.url,value:a.url,label:a.title})}.bind(this,p,u)),this.shouldShowNextButton()?e.createElement(s.Button,{className:"btn-text",key:"nextButton",onClick:this.increaseRange},e.createElement("span",{},i.translate("dynamic_pages_routes_navigation_button_next"))):null]):null):null,this.isPagesDropDownReady()?l.apply(this,[p,u]):null,e.createElement(a.tabs.tab,{name:"ExternalLink",className:"web"},e.createElement(s.Composites.TextInputLabeled,{},e.createElement(s.TextLabel,{"<baseUILib.TextLabel":!0,value:"LINK_PANEL_WEB_ADDRESS_INPUT_LABEL",automationId:"link-panel-web-address-label"}),e.createElement(s.TextInput,{key:"webAddress",validator:this.isValidUrl,invalidMessage:"Validation_V2_URL",placeholder:"LINK_PANEL_WEB_ADDRESS_DEFAUL",validateInitialValue:!1,onChange:function(e,t,n){this.updateLinkValue("url",n)}.bind(this,p,u),value:this.state.link&&this.state.link.url,onValidationStatus:function(e,t,n){this.validationStatusChanged(n,"url")}.bind(this,p,u),focus:!0})),e.createElement(s.Divider,{}),e.createElement(s.Composites.RadioButtonsLabeled,{},e.createElement(s.TextLabel,{value:"LINK_PANEL_WEB_ADDRESS_OPTIONS_LABEL"}),function(t,n){var a=this.linkTo("target");return e.createElement(s.RadioButtons,{className:"open-target-radio-buttons",value:a.value,onChange:a.requestChange,options:[{value:"_blank",label:"LINK_PANEL_WEB_ADDRESS_OPTION1"},{value:"_self",label:"LINK_PANEL_WEB_ADDRESS_OPTION2"}]})}.apply(this,[p,u]))),e.createElement(a.tabs.tab,{name:"EmailLink",className:"email"},e.createElement(s.Composites.TextInputLabeled,{},e.createElement(s.TextLabel,{value:"LINK_PANEL_EMAIL_INPUT_LABEL",automationId:"link-panel-email-address-label"}),e.createElement(s.TextInput,{key:"emailAddress",validator:this.isValidEmail,invalidMessage:"Validation_V1_Email",placeholder:"LINK_PANEL_EMAIL_INPUT_DEFAULT",validateInitialValue:!1,onChange:function(e,t,n){this.updateLinkValue("recipient",n)}.bind(this,p,u),value:this.state.link&&this.state.link.recipient,onValidationStatus:function(e,t,n){this.validationStatusChanged(n,"recipient")}.bind(this,p,u),focus:!0})),e.createElement(s.Divider,{}),e.createElement(s.Composites.TextInputLabeled,{},e.createElement(s.TextLabel,{value:"LINK_PANEL_EMAIL_SUBJUCT",automationId:"link-panel-email-address-subject-label"}),e.createElement(s.TextInput,{key:"emailAddressSubject",validator:this.isValidSubject,invalidMessage:"Validation_V21_InvalidInput",placeholder:"LINK_PANEL_EMAIL_SUBJECT_DEFAULT",validateInitialValue:!1,onChange:function(e,t,n){this.updateLinkValue("subject",n)}.bind(this,p,u),value:this.state.link&&this.state.link.subject,onValidationStatus:function(e,t,n){this.validationStatusChanged(n,"subject")}.bind(this,p,u)}))),e.createElement(a.tabs.tab,{name:"PhoneLink",className:"phone"},e.createElement(s.Composites.TextInputLabeled,{},e.createElement(s.InfoIcon,{text:"LINK_PANEL_PHONE_DESCRIPTION_TOOLTIP"}),e.createElement(s.TextLabel,{value:"LINK_PANEL_PHONE_INPUT_LABEL",automationId:"link-panel-phone-number-label"}),e.createElement(s.TextInput,{key:"phoneNumber",validator:this.isValidPhone,invalidMessage:"Validation_V1_Phone",placeholder:"LINK_PANEL_PHONE_INPUT_DEFAULT",validateInitialValue:!1,onChange:function(e,t,n){this.updateLinkValue("phoneNumber",n)}.bind(this,p,u),value:this.state.link&&this.state.link.phoneNumber,onValidationStatus:function(e,t,n){this.validationStatusChanged(n,"phoneNumber")}.bind(this,p,u),focus:!0})),e.createElement(s.Divider,{}),e.createElement("p",{className:"extra-info"},this.translateIfNeeded("LINK_PANEL_PHONE_DESCRIPTION"),"\n                    ",e.createElement(a.button,{className:"btn-text inline-link-button",label:"LINK_PANEL_PHONE_DESCRIPTION_LINK",onClick:this.openLearnMoreOnPhoneLink}))),e.createElement(a.tabs.tab,{name:"DocumentLink",className:"document"},e.createElement(s.Composites.RichText,{},e.createElement(s.RichText,{},this.translateIfNeeded("LINK_PANEL_DOCUMENT_LABEL"))),e.createElement(a.changeMediaInput,{buttonLabelWithItems:"LINK_PANEL_DOCUMENT_BUTTON",buttonLabelWithoutItems:"LINK_PANEL_DOCUMENT_BUTTON",selectionType:"single",value:this.state.link?this.state.link.name:"",onChange:this.documentChanged}),this.isPDF()?e.createElement(s.Divider,{key:"indexableSeparator"}):null,this.isPDF()?e.createElement(s.Composites.ToggleSwitch,{key:"indexableToggle"},e.createElement(s.ToggleSwitch,{value:!!this.state.link.indexable,label:"Document_Settings_Allow_Bots",onChange:this.pdfIndexableChanged})):null),e.createElement(a.tabs.tab,{key:"edge-anchors",name:"EdgeAnchorLinks",className:"edge-anchors"},e.createElement(s.Composites.Thumbnails,{},e.createElement(s.TextLabel,{value:"LINK_PANEL_TAB_TOPandBOTTOM_LABEL",enableEllipsis:!1}),e.createElement(s.Thumbnails,{value:this.linkToAnchor().value,onChange:this.linkToAnchor().requestChange,maxThumbsPerRow:2,borderType:"thumbnailAndLabel",options:this.getEdgeAnchors()}))),c.apply(this,[p,u]),r.isOpen("wixstaff")?e.createElement(a.tabs.tab,{name:"LoginToWixLink",className:"home-page-link",key:"homePageLoginTab"},e.createElement(a.textInput,{ref:"postLogin",key:"postLogin",label:"LINK_PANEL_POST_LOGIN_INPUT",valueLink:this.linkToAndTrim("postLoginUrl"),validator:this.isEmptyStringOrFullUrl,invalidMessage:"Validation_V2_URL",onChangeInValidationStatus:function(e,t,n){this.setState({isValid:n})}.bind(this,p,u)}),e.createElement(a.textInput,{ref:"postSignup",key:"postSignup",label:"LINK_PANEL_POST_SIGNUP_INPUT",valueLink:this.linkToAndTrim("postSignupUrl"),validator:this.isEmptyStringOrFullUrl,invalidMessage:"Validation_V2_URL",onChangeInValidationStatus:function(e,t,n){this.setState({isValid:n})}.bind(this,p,u)}),e.createElement.apply(this,[a.dropDown.select,{label:"LINK_PANEL_VIEW_DROPDOWN",valueLink:this.linkTo("dialog")},t.map([{label:"LINK_PANEL_VIEW_SHOW_LOGIN",value:"showLogin"},{label:"LINK_PANEL_VIEW_LOGIN",value:"login"},{label:"LINK_PANEL_VIEW_SIGNUP",value:"createUser"}],function(t,n,s,i){return e.createElement(a.dropDown.option,{key:s.value,value:s.value},s.label,"\n                    ")}.bind(this,p,u))]),e.createElement(s.ToggleSwitch,{ref:"sendMail",key:"sendMail",value:this.linkLoginToWixLinkSendEmailProperty().value,label:"LINK_PANEL_SEND_MAIL_TOGGLE",onChange:this.linkLoginToWixLinkSendEmailProperty().requestChange}),e.createElement(a.textInput,{ref:"welcomeEmail",key:"welcomeEmail",label:"LINK_PANEL_WELCOME_EMAIL_INPUT",valueLink:this.linkTo("mailTemplate")}),e.createElement(a.textInput,{ref:"color",key:"color",label:"LINK_PANEL_USER_COLOR_INPUT",valueLink:this.linkTo("userColor")}),e.createElement(a.textInput,{ref:"name",key:"name",label:"LINK_PANEL_BUTTON_NAME",valueLink:this.linkTo("loginCompName")})):null)),e.createElement("footer",{},e.createElement(a.button,{label:"LINK_PANEL_CANCEL_BUTTON",ref:"cancelButton",onClick:this.cancel,className:"btn-confirm-secondary"}),e.createElement(a.button,{label:"LINK_PANEL_DONE_BUTTON",ref:"okButton",onClick:this.done,className:"btn-confirm-primary",disabled:this.isOkDisabled()})))}return p.apply(this,[])}}),define("panels/toolPanels/linkPanel/linkPanel",["react","symbols","create-react-class","prop-types","core","lodash","util","stateManagement","panels/toolPanels/linkPanel/linkPanel.rt","coreBi","constants","experiment"],function(e,t,n,a,s,i,o,r,l,c,p,u){"use strict";function d(e,t){if("SCROLL_TO_TOP"===e.anchorDataId||"SCROLL_TO_BOTTOM"===e.anchorDataId)return!0;var n=i.has(e.anchorDataId,"id")?"#"+i.get(e.anchorDataId,"id"):e.anchorDataId;return i.some(t,{anchorDataId:n})}function m(e,t){if(e){i.has(e,"id")&&(e=e.id),"#"===e.charAt(0)&&(e=e.substr(1));for(var n=0;n<t.length;n++){var a=t[n];if(e===a.id)return i.assign({},a,{pageId:"#"+e})}}return{pageId:""}}function h(e){return"SCROLL_TO_TOP"===e}function g(e){return"SCROLL_TO_BOTTOM"===e}function f(e,t){return Boolean(m(e.pageId,t).pageId)}function P(e,t){var n=i.clone(this.state.link);n[e]=t,this.setState({link:n})}function _(){var e=this.state.link;if(!e)return!1;switch(e.type){case"DynamicPageLink":return function(e,t){return t?!i.isEmpty(e.routerId):!i.isEmpty(e.routerId)&&!i.isEmpty(e.innerRoute)}(e,this.isCollectionPageOrHasOneRoute());case"PageLink":return function(e){return!!e.pageId}(e);case"AnchorLink":return function(e){return!!e.pageId&&!!e.anchorDataId}(e);case"ExternalLink":return this.isValidUrl(e&&e.url);case"EmailLink":return this.isValidEmail(e&&e.recipient);case"PhoneLink":return this.isValidPhone(e&&e.phoneNumber);case"DocumentLink":return function(e){return e.docId}(e)}return!0}var E=100,b=/\.pdf$/i;return n({displayName:"linkPanel",propTypes:{data:a.shape({pages:a.arrayOf(a.shape({id:a.string,title:a.string})),popups:a.arrayOf(a.shape({id:a.string,title:a.string})),menuItems:a.arrayOf(a.shape({title:a.string,items:a.array,link:a.shape({pageId:a.string,type:a.string})})),anchors:a.arrayOf(a.shape({id:a.string,name:a.string,pageId:a.string})),currentPageId:a.string}),bi:a.shape({selectedComponentType:a.string}),link:a.object,createDefaultData:a.func.isRequired,currentPage:a.string,callback:a.func,onCancelCallback:a.func,visibleSections:a.object,defaultLinkType:a.string,hideExternalLinkTarget:a.bool},mixins:[e.addons.LinkedStateMixin,o.translationMixin,s.mixins.editorAPIMixin],render:l,getInitialState:function(){var e=i.cloneDeep(this.props.link)||null;e=this.updateLinkIfPageWasConvertedToDynamicPage(e),this.gotPageIdFromInnerRoute=!(e&&"DynamicPageLink"===e.type);var t=this.getEditorAPI();e&&"AnchorLink"===e.type&&!d(e,this.props.data.anchors)&&(e=function(e,t){if(e.pageId){var n=i.has(e.pageId,"id")?e.pageId.id:e.pageId.replace("#","");if(i.some(t,{id:n}))return{type:"PageLink",pageId:e.pageId}}return null}(e,this.props.data.pages));var n=void 0;if(e&&"DynamicPageLink"===e.type&&(d(e,this.props.data.anchors)||(e.anchorDataId=null),function(e,t){return!!e.documentServices.routers.get.byId(t.routerId)}(t,e)||(e=null)),this.pagesList=this.cachePagesList(this.props.data.menuItems),this.popupList=this.getPopupLinkOptions(),!e){var a=this.getDefaultLink();e=a.link,n=a.page}if(!e||"PageLink"!==e.type&&"AnchorLink"!==e.type)n||(n=this.props.createDefaultData("PageLink"));else{var s=i.isString(e.pageId)?e.pageId:"#"+i.get(e.pageId,"id");n=m(s!=="#"+t.documentServices.siteSegments.getSiteStructureId()?s:this.props.data.currentPageId,this.props.data.pages)}return this.routers=t.documentServices.routers.get.all(),{selectedTab:this.getDefaultSelectedTab(e),link:e,page:n,routerInnerRoutes:null,innerRoutesRangeStartIndex:0,isClosing:!1,isValid:!0}},updateLinkIfPageWasConvertedToDynamicPage:function(e){if(e&&e.type&&("PageLink"===e.type||"AnchorLink"===e.type)){var t=i.isString(e.pageId)?e.pageId:"#"+i.get(e.pageId,"id"),n=this.getEditorAPI().documentServices.routers.getRouterDataForPageIfExist(t);if(n)return{type:"DynamicPageLink",routerId:n.routerId,innerRoute:"",anchorDataId:e.anchorDataId||""}}return e},componentDidMount:function(){this.state.link&&"DynamicPageLink"===this.state.link.type&&this.getPageFromInnerRoute()},getPageFromInnerRoute:function(){var e=this.getEditorAPI();if("CURRENT_INNER_ROUTE"===this.state.link.innerRoute){var t=m(this.props.data.currentPageId,this.props.data.pages);return this.gotPageIdFromInnerRoute=!0,void this.setState({page:t})}e.documentServices.routers.getPageFromInnerRoute(this.state.link.routerId,this.state.link.innerRoute,function(e){if(this.gotPageIdFromInnerRoute=!0,e){var t=m(e,this.props.data.pages);this.setState({page:t})}else{var n=this.getDefaultLink();this.setState({selectedTab:this.getDefaultSelectedTab(n.link),link:n.link,page:n.page})}}.bind(this))},isPagesDropDownReady:function(){return!this.state.link||"DynamicPageLink"!==this.state.link.type||this.state.link&&"DynamicPageLink"===this.state.link.type&&this.gotPageIdFromInnerRoute},getDefaultLink:function(){var e=m(this.pagesList[0].id,this.props.data.pages);if(this.props.defaultLinkType)return{link:this.props.createDefaultData(this.props.defaultLinkType),page:e};if(this.shouldHidePageLinkPossibilty()){var t=this.getDefaultDataForAnchorTab();return t||{link:this.props.createDefaultData("ExternalLink"),page:e}}return{link:this.getDefaultDataForPageLinkTab(this.pagesList[0].id),page:e}},needToGetInnerRoutes:function(e){return e.link&&this.state.link&&("DynamicPageLink"!==this.state.link.type&&"DynamicPageLink"===e.link.type&&!e.routerInnerRoutes||"DynamicPageLink"===this.state.link.type&&"DynamicPageLink"===e.link.type&&(!e.routerInnerRoutes||this.state.link.routerId!==e.link.routerId)||"DynamicPageLink"===this.state.link.type&&"DynamicPageLink"===e.link.type&&(!e.routerInnerRoutes||this.state.page.id!==e.page.id))},componentWillUpdate:function(e,t){this.needToGetInnerRoutes(t)&&this.getRouterInnerRoutes(t)},componentWillReceiveProps:function(e){this.pagesList=this.cachePagesList(e.data.menuItems),this.popupList=this.getPopupLinkOptions()},setIsValidLink:function(){var e=!this.state.link||_.call(this);this.state.isValid!==e&&this.setState({isValid:e})},componentDidUpdate:function(){this.state.isClosing?(_.call(this)?this.saveLink=this.state.link:this.shouldHidePageLinkPossibilty()||(this.saveLink=null),this.getEditorAPI().panelManager.closePanelByName(this.props.panelName)):this.setIsValidLink()},componentWillUnmount:function(){i.isUndefined(this.saveLink)||(this.save(this.saveLink),delete this.saveLink)},getDefaultProps:function(){return{title:"Link Panel",panelName:"Link Panel",bi:{selectedComponentType:""}}},getDefaultSelectedTab:function(e){var t=e?e.type:null,n=["PageLink",void 0,null];return(i.includes(n,t)||"DynamicPageLink"===t&&!e.anchorDataId)&&(t="PageLink"),("AnchorLink"===t||"DynamicPageLink"===t&&e.anchorDataId)&&(t="AnchorLink"),e&&(h(e.anchorDataId)||g(e.anchorDataId)?t="EdgeAnchorLinks":"PageLink"===t&&f(e,this.props.data.popups)&&(t="PopupLink")),t},shouldShowPrevButton:function(e){if(i.isEmpty(this.state.routerInnerRoutes))return!1;e=e||this.state.innerRoutesRangeStartIndex;var t=this.state.routerInnerRoutes.length<E;return!(0===e)&&!t},shouldShowNextButton:function(){if(i.isEmpty(this.state.routerInnerRoutes))return!1;var e=this.state.routerInnerRoutes.length<E;return!(this.state.innerRoutesRangeStartIndex+E>=this.state.routerInnerRoutes.length)&&!e},getInnerRoutesToRender:function(){return i.slice(this.state.routerInnerRoutes,this.state.innerRoutesRangeStartIndex,this.state.innerRoutesRangeStartIndex+E)},increaseRange:function(){var e=this.state.innerRoutesRangeStartIndex+E,t=this.shouldShowPrevButton(e)?this.state.routerInnerRoutes[e].url:this.state.routerInnerRoutes[e-1].url;this.setState({innerRoutesRangeStartIndex:e,link:{type:"DynamicPageLink",innerRoute:t,routerId:this.state.link.routerId}})},decreaseRange:function(){var e=this.state.innerRoutesRangeStartIndex-E,t=this.state.routerInnerRoutes[e].url;this.setState({innerRoutesRangeStartIndex:e,link:{type:"DynamicPageLink",innerRoute:t,routerId:this.state.link.routerId}})},linkSelectedTab:function(){return{value:this.state.selectedTab,requestChange:function(e){var t={selectedTab:e},n=void 0;if(this.state.selectedTab!==e){if(this.state.routerInnerRoutes&&(t.routerInnerRoutes=null,t.innerRoutesRangeStartIndex=0),"EdgeAnchorLinks"===e){var a=this.getAnchorLink("SCROLL_TO_TOP");a.page&&(t.page=a.page),t.link=a.link}else if("PopupLink"===e)t.link=this.props.createDefaultData("PageLink"),this.popupList.length>0&&(t.link.pageId="#"+this.popupList[0].id);else{if(t.link=this.props.createDefaultData(e),"PageLink"===e){var s=this.getDefaultPageId();t.link=this.getDefaultDataForPageLinkTab(s),t.page=m(s,this.props.data.pages)}"AnchorLink"===e&&(n=this.getDefaultDataForAnchorTab())&&(t.link=n.link,t.page=n.page)}this.setState(t)}}.bind(this)}},getDefaultPageId:function(){if(this.shouldHidePageLinkPossibilty()){var e=this.getEditorAPI().documentServices.routers.pages.getDynamicPagesList();return i.flatMap(e,"pages")[0].id}return this.pagesList[0].id},getDefaultDataForPageLinkTab:function(e){var t=this.getRouterDataForPageIfExist(e);return t?{routerId:t.routerId,type:"DynamicPageLink"}:{type:"PageLink",pageId:e}},getDefaultDataForAnchorTab:function(){var e=this.getPagesWithAnchors();return!e||i.isEmpty(e)?null:{link:this.getDefaultDataForPageAnchorLinkTabWithDynamicPages(e[0].id),page:m(e[0].id,this.props.data.pages)}},getDefaultDataForPageAnchorLinkTab:function(e){var t=void 0,n=this.getAnchorOptions(this.props.data.anchors,e.substring(1));return this.shouldHidePageLinkPossibilty()?n.length>0&&(t={type:"AnchorLink",anchorDataId:n[0].anchorDataId,pageId:e,anchorName:n[0].anchorName}):t={type:"PageLink",pageId:e},t},getDefaultDataForPageAnchorLinkTabWithDynamicPages:function(e){var t=this.getAnchorOptions(this.props.data.anchors,e.substring(1)),n=this.getRouterDataForPageIfExist(e);if(t.length>0)return n?{type:"DynamicPageLink",routerId:n.routerId,anchorDataId:t[0].anchorDataId}:{type:"AnchorLink",pageId:e,anchorDataId:t[0].anchorDataId,anchorName:t[0].anchorName}},linkToAndTrim:function(e){var t=this.state.link;return{value:t?t[e]:"",requestChange:i.flow(i.trim,P.bind(this,e))}},linkTo:function(e){var t=this.state.link;return{value:t?t[e]:"",requestChange:P.bind(this,e)}},isValidUrl:function(e){return!!e&&o.validate.url(e)},isValidEmail:function(e){return!!e&&o.validate.email(e)&&o.validate.notEmpty(e)},isValidSubject:function(e){return o.validate.noHTMLTags(e)},isValidPhone:function(e){return!!e&&o.validate.phone(e)&&o.validate.notEmpty(e)},updateLinkValue:function(e,t){var n=i.clone(this.state.link);n[e]=t,this.setState({link:n})},validationStatusChanged:function(e,t){var n={isValid:e};if(!e){var a=i.clone(this.state.link);a[t]=void 0,n.link=a}this.setState(n)},linkLoginToWixLinkSendEmailProperty:function(){var e=this.state.link;return{value:e?e.sendMail:"",requestChange:function(t){e.sendMail=t,e.metaData={schemaVersion:"2.0",isPreset:!0,isHidden:!1},this.setState({link:e})}.bind(this)}},save:function(e){e&&"ExternalLink"===e.type&&(e.url=function(e,t){return e&&!/^\s*\w+:\/\//.test(e)?t+"://"+e.trim():e}(e.url,"http")),this.props.callback&&this.props.callback(e),e&&function(e){var t="";"AnchorLink"===e.type&&(t=i.includes(["SCROLL_TO_BOTTOM","SCROLL_TO_TOP"],e.anchorDataId)?"SCROLL_TO_TOP"===e.anchorDataId?"top":"bottom":"anchor"),this.getEditorAPI().bi.event(c.events.linkPanel.link_panel_done_click,{category:this.state.selectedTab,anchor_where_on_page:t})}.call(this,e)},cancel:function(){this.props.onCancelCallback&&this.props.onCancelCallback(this.props.link),this.getEditorAPI().panelManager.closePanelByName(this.props.panelName)},done:function(){this.logLinkCreationBI(),this.setState({isClosing:!0})},getPageOptions:function(){return i.map(this.pagesList,i.bind(function(e){return{value:e.id,label:e.title+this.getCurrentPageThisTranslate(e.id)}},this))},linkToPage:function(){return{value:this.state.page.pageId,requestChange:function(e){this.setState({routerInnerRoutes:null,innerRoutesRangeStartIndex:0,link:"PageLink"===this.state.selectedTab?this.getDefaultDataForPageLinkTab(e):this.getDefaultDataForPageAnchorLinkTabWithDynamicPages(e),page:m(e,this.props.data.pages)})}.bind(this)}},getRouterInnerRoutes:function(e){var t="CURRENT_INNER_ROUTE"===e.link.innerRoute?this.props.data.currentPageId:e.page.id;this.getEditorAPI().documentServices.routers.getRouterInnerRoutes(e.link.routerId,t,function(t){var n=i.isEmpty(t)?[]:t[0].url;if(e.link.innerRoute&&(i.find(t,{url:e.link.innerRoute})||"CURRENT_INNER_ROUTE"===e.link.innerRoute)&&(n=e.link.innerRoute),i.isEmpty(t))this.setState({routerInnerRoutes:[],innerRoutesRangeStartIndex:0},function(){this.setIsValidLink()}.bind(this));else{var a=i.findIndex(t,["url",n]);a=-1===a?0:a,this.setState({routerInnerRoutes:i.isEmpty(t)?[]:t,innerRoutesRangeStartIndex:function(e){for(var t=0;t+E<=e;)t+=E;return t}(a),link:{type:"DynamicPageLink",routerId:e.link.routerId,anchorDataId:e.link.anchorDataId,innerRoute:n}},function(){this.setIsValidLink()}.bind(this))}}.bind(this))},isCollectionPageOrHasOneRoute:function(){var e=this.state.routerInnerRoutes;return!!e&&1===e.length},linkToInnerRoute:function(){return{value:this.state.link?this.state.link.innerRoute:null,requestChange:function(e){var t={type:"DynamicPageLink",routerId:this.state.link.routerId,innerRoute:e};this.state.link.anchorDataId&&(t.anchorDataId=this.state.link.anchorDataId),this.setState({link:t})}.bind(this)}},hasInnerRoutes:function(){return!!this.state.routerInnerRoutes&&!i.isEmpty(this.state.routerInnerRoutes)},getRouterDataForPageIfExist:function(e){return this.getEditorAPI().documentServices.routers.getRouterDataForPageIfExist(e)},isDynamicPage:function(e){return!!this.getRouterDataForPageIfExist(e)},shouldShowInnerRoutesDropDown:function(){return this.isDynamicPage(this.state.page.id)&&this.hasInnerRoutes()&&!this.isCollectionPageOrHasOneRoute()},getInnerRoutesDropDown:function(){var e=[];return this.state.page.id!==this.props.data.currentPageId||this.shouldHidePageLinkPossibilty()||e.push({url:"CURRENT_INNER_ROUTE",title:o.translate("Platform_Link_Menu_Anchor_Item_Option_Any_Item")}),this.state.routerInnerRoutes&&!i.isEmpty(this.state.routerInnerRoutes)?e.concat(this.getInnerRoutesToRender()):[{value:"NO_INNER_ROUTES",title:o.translate("LINK_PANEL_NO_INNER_ROUTES"),url:"no_inner_routes"}]},getCurrentPageThisTranslate:function(e){return e==="#"+this.props.data.currentPageId?" "+o.translate("LINK_PANEL_PAGE_THIS"):""},getRouterTypeForPageId:function(e){var t=this.getEditorAPI().pages.dynamicPages.getRouterPageType(e);return t?"("+t+")":""},linkToAnchor:function(){return{value:(i.has(this.state.link,"anchorDataId.id")?"#"+this.state.link.anchorDataId.id:i.get(this.state.link,"anchorDataId"))||"SCROLL_TO_TOP",requestChange:function(e){var t=this.getAnchorLink(e),n={link:t.link};t.page&&(n.page=t.page),this.setState(n)}.bind(this)}},getAnchorLink:function(e){var t=this.getEditorAPI(),n={};if("TOP_OF_SELECTED_PAGE"===e){var a=this.state.page.pageId;n={link:this.getDefaultDataForPageAnchorLinkTabWithDynamicPages(a),page:m(a,this.props.data.pages)}}else{var s=this.props.data.anchors,i=void 0;if(this.state.link&&this.state.link.routerId)n={link:{type:"DynamicPageLink",anchorDataId:e,routerId:this.state.link.routerId,innerRoute:this.state.link.innerRoute}};else{var r={type:"AnchorLink",anchorDataId:e,pageId:this.state.page.pageId},l="#"+t.documentServices.siteSegments.getSiteStructureId();if(h(e))r.anchorName=o.translate("LINK_PANEL_PAGE_ANCHOR_SCROLL_TO_TOP_NAME"),r.pageId=l;else if(g(e))r.anchorName=o.translate("LINK_PANEL_PAGE_ANCHOR_SCROLL_TO_BOTTOM_NAME"),r.pageId=l;else for(i=0;i<s.length;i++){var c=s[i];if(c.anchorDataId===e){r.anchorName=c.anchorName;break}}n.link=r}}return n},cachePagesList:function(e,t){t=t||0;var n=0,a=[];return e.forEach(function(e){var s=e.link||{},o=e.items,r="PageLink"===s.type,l=i.has(s.pageId,"id")?s.pageId.id:s.pageId;if(!r||function(e,t){return m(e,t).repeaterPage}(l,this.props.data.pages)||f(s,this.props.data.popups))n=t;else{var c={id:l,type:s.type,title:e.label,level:t};n=t+1,a.push(c)}o&&o.length&&(a=a.concat(this.cachePagesList(o,n)))},this),a},getAnchorOptions:function(e,t){var n=[];return e.forEach(function(e){("#"===e.pageId.charAt(0)?e.pageId.substring(1):e.pageId)===t&&n.push(e)}),n.sort(function(e,t){return e.y-t.y}),n},documentChanged:function(e){var t=e[0];this.setState({link:{type:"DocumentLink",docId:t.fileName,name:t.title}})},isPDF:function(){return u.isOpen("indexablePDF")&&b.test(i.get(this.state,"link.docId")||"")},isMobileEditor:function(){return this.getEditorAPI().isMobileEditor()},pdfIndexableChanged:function(e){this.setState({link:i.defaults({indexable:e},this.state.link)})},isSectionVisible:function(e){var t=this.props.visibleSections;return!t||!1!==t[e]},shouldHidePageLinkPossibilty:function(){return this.props.hidePageLinks},hasAnchors:function(e){var t=e||this.state.page.id;return!!t&&(t="#"===t.charAt(0)?t.substring(1):t,0!==this.getAnchorOptions(this.props.data.anchors,t).length)},getPagesWithAnchors:function(){return i.filter(this.pagesList,i.bind(function(e){return this.hasAnchors(e.id)},this))},openLearnMoreOnAnchor:function(){var e={panel_name:this.props.panelName,origin:p.BI.HELP.ORIGIN.PANEL,learn_more:!0};this.getEditorAPI().panelManager.openHelpCenter("4932c49c-7282-48f0-8fa2-42d929981c40",null,e)},openLearnMoreOnAddingInnerRoutes:function(){var e={panel_name:this.props.panelName,origin:p.BI.HELP.ORIGIN.PANEL,learn_more:!0};this.getEditorAPI().panelManager.openHelpCenter("0a1de6d7-3f69-4d30-8ddc-7aa99bd12edc",null,e)},openLearnMoreOnPhoneLink:function(){var e={panel_name:this.props.panelName,origin:p.BI.HELP.ORIGIN.PANEL,learn_more:!0};this.getEditorAPI().panelManager.openHelpCenter("269ee4ca-ac26-40a4-b982-b120e84c75d4",null,e)},getPagesListToShow:function(){if(this.shouldHidePageLinkPossibilty()){var e=this.getEditorAPI().documentServices.routers.pages.getDynamicPagesList(),t=i(e).flatMap("pages").map("id").value();return i.filter(this.pagesList,function(e){return i.includes(t,e.id.slice(1))})}return this.pagesList},shouldShowPageSection:function(){if(!this.shouldHidePageLinkPossibilty())return!0;var e=this.getEditorAPI().routers.pages.getDynamicPagesList(),t=i.flatMap(e,"pages");return!i.isEmpty(t)},getDropDownOptions:function(){var e=[],t=this.getAnchorOptions(this.props.data.anchors,this.state.page.id);return t.length>0&&i.forEach(t,function(t){e.push({value:t.anchorDataId,label:t.anchorName})}),e},getPopupLinkOptions:function(){var e=i.clone(this.props.data.popups),t=this.getEditorAPI(),n=t.documentServices.pages.getFocusedPageId(),a=t.documentServices.pages.popupPages.isPopup(n);return!this.props.showAllPopups&&a&&i.remove(e,{id:n}),e},getAnchorTooltipValue:function(){return{classPath:"baseUI.popoverTemplates.imageAndTextTooltip",props:{image:"linkPanelAnchorTooltip",title:"Anchor_Settings_tooltip_title",text:"Anchor_Settings_tooltip_text",learnMoreText:"mobile_refreshlayout_link",linkAction:this.openLearnMoreOnAnchor,imageContainerStyle:{backgroundColor:"#5fcef5"}}}},isOkDisabled:function(){return!this.state.isValid},getAnchorType:function(e){switch(e){case"SCROLL_TO_TOP":return"page-top";case"SCROLL_TO_BOTTOM":return"page-bottom";default:return"anchor"}},logLinkCreationBI:function(){var e=this.state.link;if(e){var t={site_id:this.getEditorAPI().documentServices.generalInfo.getSiteId(),component_type:i.get(this.props,"bi.selectedComponentType","")};switch(e&&e.type){case"PageLink":i.assign(t,{field_type:"page",data:""});break;case"AnchorLink":i.assign(t,{field_type:this.getAnchorType(e.anchorDataId),data:""});break;case"ExternalLink":i.assign(t,{field_type:"url",data:e.url});break;case"EmailLink":i.assign(t,{field_type:"mail",data:""});break;case"PhoneLink":i.assign(t,{field_type:"phone",data:e.phoneNumber});break;case"DocumentLink":i.assign(t,{field_type:"document",data:""});break;default:return}this.getEditorAPI().bi.event(c.events.linkPanel.LINK_PANEL_ADD_CLICK_TO_ACTION,t)}},getEdgeAnchors:function(){return[{value:"SCROLL_TO_TOP",label:"LINK_PANEL_TAB_TOPandBOTTOM_ TOP",illustration:e.createElement(t.symbol,{name:"anchorTop"})},{value:"SCROLL_TO_BOTTOM",label:"LINK_PANEL_TAB_TOPandBOTTOM_ BOTTOM",illustration:e.createElement(t.symbol,{name:"anchorBottom"})}]},isEmptyStringOrFullUrl:function(e){return""===e||o.validate.fullUrl(e)},goToAddPanelPopup:function(){var e=this.getEditorAPI();e.store.dispatch(r.editorPlugins.userPreferences.actions.setSessionUserPreferences("addPanelCategoryIdOnClose","popup")),e.store.dispatch(r.editorPlugins.leftBar.actions.openAddPanel())},getHelpId:function(){return this.getEditorAPI().developerMode.isEnabled()?"049671da-19be-4453-8f1e-a53d949a0110":"650e4ba4-4aa8-4484-957a-cc9db36be6d9"}})}),define("panels/toolPanels/colorPicker/constants",[],function(){"use strict";return{NO_COLOR:"noColor"}}),define("panels/toolPanels/colorPicker/siteCustomColors.rt",["react","lodash","baseUI","panels/toolPanels/colorPicker/constants","util"],function(e,t,n,a,s){"use strict";return function(){function a(){var a=s.valueLink.getValueFromProps(this.props);return e.createElement.apply(this,["div",function(e,n){var a=t.assign({},e,n);return e.hasOwnProperty("style")&&(a.style=t.defaults(a.style,e.style)),e.hasOwnProperty("className")&&n.hasOwnProperty("className")&&(a.className=n.className+" "+e.className),a}({className:"site-custom-colors"},this.filteredProps()),this.props.isEditable?e.createElement("label",{key:"addColorButton",ref:"addColorButton",className:"color-option first-color-in-row"},e.createElement("div",{className:"add-color-button",onClick:this.addCustomColor},e.createElement(n.symbol,{name:"add-custom-color-plus"}))):null,t.map(this.getFilteredColors(),function(n,a,s){return e.createElement("label",{className:"color-option",key:"colorOption-"+s,onMouseEnter:function(e,t,n){this.props.onPreview(t)}.bind(this,n,a,s),onMouseLeave:function(e,t,n){this.props.onPreview(e)}.bind(this,n,a,s)},e.createElement("input",{type:"radio",name:this.getRadioGroupId(),value:a,checked:s===this.state.selectedIndex,onChange:function(e,t,n){this.selectColor(t,n)}.bind(this,n,a,s)}),e.createElement("div",{className:t(this.getColorOptionClasses(a)).transform(function(e,t,n){t&&e.push(n)},[]).join(" "),style:{backgroundColor:a}}))}.bind(this,a)),t.isEmpty(this.getFilteredColors())?t.map(t.range(this.NUM_OF_EMPTY_SLOTS),function(t,n,a){return e.createElement("div",{key:"emptyColorOptions",className:"empty-color-option"})}.bind(this,a)):null])}return a.apply(this,[])}}),define("panels/toolPanels/colorPicker/siteCustomColors",["create-react-class","prop-types","lodash","core","util","baseUI","higherOrderComponents","coreBi","constants","panels/toolPanels/colorPicker/siteCustomColors.rt"],function(e,t,n,a,s,i,o,r,l,c){"use strict";var p=["#000000","#FFFFFF"],u=e({displayName:"siteCustomColors",mixins:[a.mixins.editorAPIMixin,i.radioButtonsMixin],propTypes:{customColors:t.arrayOf(t.string).isRequired,userAddedColors:t.array,isEditable:t.bool,onPreview:t.func,openAddColorPanel:t.func},NUM_OF_EMPTY_SLOTS:36,getInitialState:function(){return{selectedIndex:this.getSelectedColorIndex(s.valueLink.getValueFromProps(this.props),this.props.userAddedColors||[])}},getFilteredColors:function(e){e=e||this.props.userAddedColors;var t=n.difference(this.props.customColors,p,e);return p.concat(e,t)},selectColor:function(e,t){this.getEditorAPI().bi.event(r.events.colorPicker.CUSTOM_COLOR_SELECT,{}),this.setState({selectedIndex:t},s.valueLink.callOnChangeIfExists(this.props,e))},getSelectedColorIndex:function(e,t){return this.getFilteredColors(t||this.props.userAddedColors).indexOf(e)},getColorBrightnessClass:function(e){var t=s.colors.hexToRgb(e),n=s.colors.rgbToHsb(t);return n.brightness>=80&&n.saturation<50?"bright":"dark"},getColorOptionClasses:function(e){var t={"color-displayer":!0,"white-option":s.colors.getDistanceToWhite(e)<3};return t[this.getColorBrightnessClass(e)+"-color"]=!0,t},componentWillReceiveProps:function(e){var t=s.valueLink.getValueFromProps(this.props),n=s.valueLink.getValueFromProps(e);t!==n&&this.setState({selectedIndex:this.getSelectedColorIndex(n)})},addCustomColor:function(){this.getEditorAPI().bi.event(r.events.colorPicker.ADD_COLOR_BUTTON_CLICKED,{}),this.props.openAddColorPanel()},render:c}),d=[{type:"session",key:l.USER_PREFS.THEME.COLORS.CUSTOM.USER_ADDED,propName:"userAddedColors",updatePropName:"setUserAddedColors"}];return o.withUserPreferences(d)(u)}),define("panels/toolPanels/colorPicker/colorPickerPanelMainContent.rt",["react","lodash","util","baseUI","baseUILib","panels/toolPanels/colorPicker/siteCustomColors","symbols"],function(e,t,n,a,s,i,o){"use strict";return function(){return e.createElement("div",{className:"main-content"},e.createElement("div",{className:"panel-section color-picker-header",onMouseDown:this.startContentDrag},e.createElement("div",{className:"color-picker-header-content"},e.createElement("span",{key:"color-picker-title"},"\n                    ",n.translate("ColorPicker_MainPanel_Header"),"\n                ")),e.createElement("span",{className:"close-panel-button",onClick:this.close},e.createElement(o.symbol,{name:"headerCloseButton"}))),this.state.content===this.Content.CHOOSE_COLOR?e.createElement("div",{key:"color-picker-content-color",className:"choose-color-content"},e.createElement("div",{className:"panel-section site-colors-section"},e.createElement("div",{className:"section-left"},n.translate("ColorPicker_MainPanel_SitePalette")),e.createElement("div",{className:"section-gap"}),this.isPaletteChangeAllowed()?e.createElement("div",{key:"color-picker-edit-palette-button",className:"section-right"},e.createElement("a",{onClick:this.switchContent.bind(this,this.Content.CHANGE_PALETTE)},"\n                    ",n.translate("ColorPicker_MainPanel_ChangeSiteColors"),"\n                ")):null),e.createElement(a.paletteDisplayer,{palette:this.getPaletteColors(),isSelectable:!0,onPreview:this.previewColor,valueLink:{value:this.getColorInHex(this.state.selectedColor),requestChange:this.selectColor}}),e.createElement("div",{className:"panel-section custom-colors-title-section"},"\n            ",n.translate("ColorPicker_MainPanel_MoreColors"),"\n        "),e.createElement(s.CustomScroll,{},e.createElement(i,{className:"custom-colors-section",customColors:this.siteCustomColors,isEditable:!0,onPreview:this.previewColor,paletteColors:this.state.paletteColors,openAddColorPanel:this.openAddColorPanel,valueLink:{value:this.getColorInHex(this.state.selectedColor),requestChange:this.selectColor}})),e.createElement("div",{className:"panel-section footer"},e.createElement("div",{className:"section-left"},e.createElement("span",{},"+"),e.createElement("a",{onClick:this.addColorLinkClicked},"\n                    ",n.translate("ColorPicker_MainPanel_AddColor"),"\n                ")),e.createElement("div",{className:"section-right"},"\n                ",this.isThemeColor(this.state.colorToPreview)?this.getPaletteColors()[this.state.colorToPreview]:this.state.colorToPreview,"\n            "))):null,this.state.content===this.Content.CHANGE_PALETTE?e.createElement("div",{key:"color-picker-content-palettes",className:"content-change-palette"},e.createElement("div",{className:"panel-section change-palette-section"},n.translate("ColorPicker_ChangeEditPalette_Title"),"\n        "),e.createElement(a.paletteDisplayer,{palette:this.getPaletteColors(),isSelectable:!0,valueLink:{value:null,requestChange:this.openChangePaletteColor}}),e.createElement.apply(this,["div",{className:"root-colors-wrapper"},t.map(this.getRootColors(),function(n,a){return e.createElement("div",{className:t(this.getRootColorBoxClasses(n)).transform(function(e,t,n){t&&e.push(n)},[]).join(" "),key:"rootColor-"+a},e.createElement("div",{className:"root-color-arrow",style:{borderBottomColor:n}}),e.createElement("div",{className:"root-color-circle",style:{backgroundColor:n},onClick:function(e,t){this.openChooseRootColorPanel(e,t)}.bind(this,n,a)},e.createElement(o.symbol,{name:"recycle"+this.getColorBrightness(n)})))}.bind(this))]),e.createElement("div",{className:"help-text"},e.createElement("span",{},n.translate("ColorPicker_ChangeEditPalette_HelpText")),e.createElement("a",{onClick:function(){this.openHelpCenter(this.EDIT_PALETTE_LEARN_MORE_HELP_ID)}.bind(this)},n.translate("ColorPicker_ChangeEditPalette_LearnMore"))),e.createElement("div",{className:"footer"},e.createElement(a.button,{className:"cancel-button btn-md btn-confirm-secondary",label:"ColorPicker_ChangeEditPalette_CancelButton",onClick:this.handleCancelEditingPaletteClicked}),e.createElement(a.button,{className:"confirm-button btn-md",label:"ColorPicker_ChangeEditPalette_DoneButton",onClick:this.handleDoneEditingPaletteClicked}))):null)}}),define("panels/toolPanels/colorPicker/colorPickerPanelSecondaryContent.rt",["react","lodash","util","baseUI","baseUILib"],function(e,t,n,a,s){"use strict";return function(){return this.state.content===this.Content.CHANGE_PALETTE?e.createElement("div",{className:"secondary-content palette-list-section",key:"colorPickerPaletteListSection"},e.createElement("div",{className:"palette-list-title"},n.translate("ColorPicker_ChangeEditPalette_PalettesStrip")),e.createElement("div",{className:"palette-list-comp-wrapper"},e.createElement(s.CustomScroll,{heightRelativeToParent:"100%"},e.createElement(a.palettesList,{palettes:this.getPaletteList(),valueLink:{value:this.state.selectedPalette,requestChange:this.setSelectedPalette},onPreview:this.handlePaletteListPreview,className:"change-palette-palette-list"})))):null}}),define("panels/toolPanels/colorPicker/colorPickerPanel",["create-react-class","react","prop-types","lodash","core","coreBi","util","stateManagement","higherOrderComponents","panels/frames/toolPanelFrame","panels/toolPanels/colorPicker/constants","panels/toolPanels/colorPicker/colorPickerPanelMainContent.rt","panels/toolPanels/colorPicker/colorPickerPanelSecondaryContent.rt","constants","experiment"],function(e,t,n,a,s,i,o,r,l,c,p,u,d,m,h){"use strict";function g(e){return e?(0===e.indexOf("{color")&&(e=e.replace("{","").replace("}","")),"transparent"===e?p.NO_COLOR:0!==e.indexOf("#")&&0!==e.indexOf("color")&&e!==p.NO_COLOR?0===e.indexOf("r")?e:"rgba("+e+")":e):null}function f(e){return{top:e.top-window.pageYOffset+15+"px",left:e.left-window.pageXOffset+204+"px"}}var P=r.editorPlugins.panels.actions,_=P.updatePanelAction,E=P.updateOrOpenPanel,b=P.openHelpCenter,C={color_13:["color_11","color_12","color_13","color_14","color_15"],color_18:["color_16","color_17","color_18","color_19","color_20"],color_23:["color_21","color_22","color_23","color_24","color_25"],color_28:["color_26","color_27","color_28","color_29","color_30"],color_33:["color_31","color_32","color_33","color_34","color_35"]},N=r.domMeasurements.selectors.getStageLayout,I=e({displayName:"colorPickerPanel",propTypes:{customInstanceColors:n.array,displayNoColor:n.bool,panelName:n.string,customCompsAddedColors:n.array,setCustomCompsAddedColors:n.func,customUserAddedColors:n.array,setCustomUserAddedColors:n.func,previewOnHover:n.bool,enableHistory:n.bool,palettePresets:n.array,updateSitePalette:n.func,top:n.oneOfType([n.string,n.number]),left:n.oneOfType([n.string,n.number]),isBlockingLayerFullScreen:n.bool,shouldBlockOuterScroll:n.bool,openHelpCenter:n.func.isRequired,updatePanelProps:n.func.isRequired,openPanel:n.func.isRequired,onClose:n.func,domMeasurements:n.object.isRequired,value:n.any,onChange:n.func,valueLink:o.valueLink.valueLinkPropType},mixins:[s.mixins.editorAPIMixin],getDefaultProps:function(){return{previewOnHover:!0}},getInitialState:function(){var e=this.getColorInHex(this.getColorFromProps()),t={selectedColor:e,colorToPreview:e,selectedPalette:this.getEditorAPI().theme.colors.getAll(),content:this.Content.CHOOSE_COLOR};return this.initialPalette=t.selectedPalette,this.siteCustomColors=this.getCustomColorsInOrderAndSaveOrder(),t},componentDidMount:function(){this.mounted=!0},componentWillReceiveProps:function(){this.setState({paletteColors:this.getEditorAPI().theme.colors.getAll()})},componentDidUpdate:function(e){if(this.state.content===this.Content.CHANGE_PALETTE&&this.props.top!==e.top||this.props.left!==e.left){var t=f(this.getContentElementOffset());this.props.updatePanelProps("panels.toolPanels.colorPicker.addColorPanel",{top:t.top,left:t.left})}},componentWillUnmount:function(){this.mounted=!1,this.props.onClose&&this.props.onClose(),this.resetPaletteIfPanelClosedWithoutPaletteConfirmation(),this.resetPreviewColor()},Content:{CHOOSE_COLOR:"CHOOSE_COLOR",CHANGE_PALETTE:"CHANGE_PALETTE"},getFrameContentStyle:function(){var e=a.pick(this.props,["top","left"]);return this.state.content===this.Content.CHANGE_PALETTE?a.defaults(this.adjustPanelPosition(),e):e},getPaletteColors:function(){var e=this.state.paletteColors;return a.omit(e,"paletteName","paletteTags")},getColorFromProps:function(){return g(o.valueLink.getValueFromProps(this.props))},getContentElementOffset:function(){var e=this.props.domMeasurements[this.measurementsStateKey];return e?e.contentOffset:{}},getCustomColorsInOrderAndSaveOrder:function(){var e=this.props.customCompsAddedColors,t=this.props.customUserAddedColors,n=void 0;if(e){var s=a.intersection(e,t),i=a.difference(t,e);n=s.concat(i)}else n=t;return this.props.setCustomCompsAddedColors(n),n.concat(a.difference(this.props.customInstanceColors,n))},getColorBrightness:function(e){var t=o.colors.hexToRgb(e),n=o.colors.rgbToHsb(t);return n.brightness>=80&&n.saturation<50?"Dark":"Bright"},isThemeColor:function(e){return a.includes(e,"color_")},isPaletteChangeAllowed:function(){return this.props.palettePresets&&!this.getEditorAPI().isMobileEditor()},getColorInHex:function(e){var t=o.colors.rgbToHex;return e=g(e),a.includes(e,"rgba")?t(o.colors.rgbaStringToObject(e)):a.includes(e,"rgb")?t(o.colors.rgbStringToObject(e)):e},getColorInOriginalFormat:function(e){var t=this.getColorFromProps();t=g(t);var n=o.colors.hexToRgb;if(e===p.NO_COLOR)return e;var s=this.isThemeColor(e)?this.getPaletteColors()[e]:e;if(a.includes(t,"rgba")){var i=n(s);return i.alpha=o.colors.rgbaStringToObject(t).alpha,o.colors.rgbaObjectToString(i)}return a.includes(t,"rgb")?o.colors.rgbObjectToString(n(s)):e},areColorsEqual:function(e,t){return a.includes(e,"color")&&a.includes(t,"color")?e===t:this.getColorInHex(e)===this.getColorInHex(t)},EDIT_PALETTE_LEARN_MORE_HELP_ID:"7b56b01e-1104-485d-8bcc-9690f8c9592a",getRootColors:function(){return a.pick(this.getPaletteColors(),a.keys(C))},getRootColorBoxClasses:function(e){return{"root-color-box":!0,"white-color":o.colors.getDistanceToWhite(e)<3}},getPaletteList:function(){return a.map(this.props.palettePresets,function(e){return a.omit(e,"paletteName","paletteTags")})},openChangePaletteColor:function(e){var t=this,n=f(this.getContentElementOffset()),s={valueLink:{value:this.getPaletteColors()[e],requestChange:function(n){var s=a.clone(t.state.selectedPalette);s[e]=n,t.setSelectedPalette(s)}},siteCustomColors:this.siteCustomColors,paletteColors:this.state.paletteColors,top:n.top,left:n.left,onPreview:function(n){var s=a.clone(t.state.selectedPalette);s[e]=n,t.setPaletteToDocument(s)},onCancel:this.setPaletteToDocument.bind(this,a.clone(this.state.selectedPalette))};this.props.openPanel("panels.toolPanels.colorPicker.addColorPanel",s,!0)},selectColor:function(e,t){if(e!==this.state.selectedColor){var n=this;this.setState({selectedColor:e},function(){n.handleChange(e),n.addColorHistoryEntryIfNeeded()})}else t&&this.close()},previewColor:function(e){h.isOpen("colorPickerChangeColorOnClickExp")||(this.mounted&&this.setState({colorToPreview:e}),this.props.previewOnHover&&this.handleChange(e,!0))},handleChange:function(e,t){o.valueLink.callOnChangeIfExists(this.props,this.getColorInOriginalFormat(e),t)},setSelectedPalette:function(e){this.mounted?this.setState({selectedPalette:e},this.setPaletteToDocument.bind(this,e)):this.setPaletteToDocument(e)},setPaletteToDocument:function(e){this.props.updateSitePalette(e)},computeNewPaletteFromRootColor:function(e,t){var n=this.getPaletteColors(),s=o.colors.createGradientColorsFromRoot(t,n,C[e]);return a.assign(n,s)},setSelectedPaletteFromRootColor:function(e,t){var n=this.computeNewPaletteFromRootColor(e,t);this.mounted?this.setState({selectedPalette:n},this.setPaletteToDocument.bind(this,n)):this.setPaletteToDocument(n)},setPaletteToDocumentFromRootColor:function(e,t){var n=this.computeNewPaletteFromRootColor(e,t);this.setPaletteToDocument(n)},addCustomColor:function(e){var t=a.cloneDeep(this.props.customUserAddedColors);t.unshift(e),this.props.setCustomUserAddedColors(t),this.selectColor(e)},openAddColorPanel:function(){var e=function(e){return{top:e.top-window.pageYOffset+115+"px",left:e.left+window.pageXOffset+48+"px"}}(this.getContentElementOffset());this.props.openPanel("panels.toolPanels.colorPicker.addColorPanel",{valueLink:{value:this.state.selectedColor,requestChange:this.addCustomColor},paletteColors:this.state.paletteColors,onPreview:a.debounce(this.previewColor,100),top:e.top,left:e.left,onCancel:this.previewColor.bind(this,this.state.selectedColor)},!0)},addColorLinkClicked:function(){this.getEditorAPI().bi.event(i.events.colorPicker.ADD_COLOR_LINK_CLICKED,{}),this.openAddColorPanel()},openChooseRootColorPanel:function(e,t){var n=f(this.getContentElementOffset());this.props.openPanel("panels.toolPanels.colorPicker.addColorPanel",{valueLink:{value:e,requestChange:this.setSelectedPaletteFromRootColor.bind(this,t)},siteCustomColors:this.siteCustomColors,paletteColors:this.state.paletteColors,top:n.top,left:n.left,onPreview:a.debounce(this.setPaletteToDocumentFromRootColor.bind(this,t),100),onCancel:this.setPaletteToDocument.bind(this,a.clone(this.state.selectedPalette))},!0)},handlePaletteListPreview:function(e){h.isOpen("colorPickerChangePaletteOnClickExp")||this.setPaletteToDocument(e)},handleDoneEditingPaletteClicked:function(){this.addPaletteHistoryEntryIfNeeded(),this.initialPalette=this.state.selectedPalette,this.setPaletteToDocument(this.state.selectedPalette),this.close()},handleCancelEditingPaletteClicked:function(){this.setSelectedPalette(this.initialPalette),this.setSelectedPalette(this.initialPalette),this.switchContent(this.Content.CHOOSE_COLOR)},handleBackEditingPaletteClicked:function(){this.setSelectedPalette(this.initialPalette),this.switchContent(this.Content.CHOOSE_COLOR)},arePalettesEqual:function(e,t){var n=a.intersection(a.keys(e),a.keys(t));return a.isEqual(a.pick(e,n),a.pick(t,n))},addPaletteHistoryEntryIfNeeded:function(){this.props.enableHistory&&(this.arePalettesEqual(this.state.selectedPalette,this.initialPalette)||this.getEditorAPI().history.add("palette colors updated"))},addColorHistoryEntryIfNeeded:function(){this.props.enableHistory&&(this.areColorsEqual(this.state.selectedColor,this.getColorFromProps())||this.getEditorAPI().history.add("new color chosen - "+this.state.selectedColor))},switchContent:function(e){e===this.Content.CHANGE_PALETTE&&this.getEditorAPI().bi.event(i.events.colorPicker.CHANGE_SITE_COLORS_LINK_CLICKED,{}),this.setState({content:e})},resetPaletteIfPanelClosedWithoutPaletteConfirmation:function(){this.state.content===this.Content.CHANGE_PALETTE&&this.setPaletteToDocument(this.initialPalette)},resetPreviewColor:function(){this.state.colorToPreview!==this.state.selectedColor&&this.previewColor(this.state.selectedColor)},adjustPanelPosition:function(){var e=this.getContentElementOffset(),t=N(this.getEditorAPI().store.getState()),n=t.right-424,a=this.props.domMeasurements[this.measurementsStateKey]?this.props.domMeasurements[this.measurementsStateKey].contentHeight:0,s=window.pageYOffset+(t.bottom-a);return{top:Math.min(e.top,s),left:Math.min(e.left,n)}},close:function(){this.state.content===this.Content.CHOOSE_COLOR?this.getEditorAPI().bi.event(i.events.colorPicker.MAIN_PANEL_CLOSED,{}):this.state.content===this.Content.CHANGE_PALETTE&&this.getEditorAPI().bi.event(i.events.colorPicker.CHANGE_SITE_COLOR_CLOSED,{}),this.getEditorAPI().panelManager.closePanelByName(this.props.panelName)},setMeasurementsStateKey:function(e){this.measurementsStateKey=e},openHelpCenter:function(e){var t={component:this.getEditorAPI().selection.getSelectedComponentType(),learn_more:!0,origin:m.BI.HELP.ORIGIN.PANEL,panel_name:this.props.panelName};this.props.openHelpCenter(e,null,t)},render:function(){var e=this;return t.createElement(c,{panelName:this.props.panelName,isSingleInstance:!0,contentWrapperClass:"color-picker-panel",isBlockingLayerFullScreen:this.props.isBlockingLayerFullScreen,shouldBlockOuterScroll:this.props.shouldBlockOuterScroll,reportMeasurementsStateKey:this.setMeasurementsStateKey,contentStyle:this.getFrameContentStyle(),contentClass:"color-picker-panel-content-wrapper",renderContent:function(t){return e.startContentDrag=t,[u.call(e),d.call(e)]}})}}),y=[{type:"session",key:m.USER_PREFS.THEME.COLORS.CUSTOM.COMPS_ADDED,propName:"customCompsAddedColors",updatePropName:"setCustomCompsAddedColors"},{type:"session",key:m.USER_PREFS.THEME.COLORS.CUSTOM.USER_ADDED,propName:"customUserAddedColors",updatePropName:"setCustomUserAddedColors"}],T=a.flowRight(l.reportBiEventOnUiChange,l.withUserPreferences(y),l.connect(function(e){return{domMeasurements:r.editorPlugins.domMeasurements.selectors.getDomMeasurements(e)}},function(e){return{openHelpCenter:function(t,n,a){e(b(t,n,a))},openPanel:function(t,n,a){e(E(t,n,a))},updatePanelProps:function(t,n){e(_(t,n))}}}))(I);return T.pure=I,T}),define("panels/toolPanels/colorPicker/addColorContent.rt",["react","lodash","util","baseUI","baseUILib","panels/toolPanels/colorPicker/siteCustomColors"],function(e,t,n,a,s,i){"use strict";return function(){return e.createElement("div",{className:"add-color-content"},e.createElement("div",{},e.createElement(a.colorSpace,{value:this.state.selectedColor,onChange:this.onHsbColorChanged})),e.createElement("div",{className:"color-indicator"},e.createElement("span",{className:"color-sample initial-color",onMouseDown:this.resetToInitialColor,style:{backgroundColor:this.resolveColor(this.initialColor)}}),e.createElement("span",{className:"color-sample current-color",style:{backgroundColor:n.colors.hsbToHex(this.state.selectedColor)}})),e.createElement("div",{className:"color-format"},e.createElement(a.colorFormat,{value:this.state.selectedColor,onChange:this.onHsbColorChanged,onChangeInValidationStatus:this.onChangeInValidationStatus})),this.props.siteCustomColors?e.createElement("div",{key:"addColorCustomColorsSeperator",className:"custom-colors-separator"}):null,this.props.siteCustomColors?e.createElement("div",{key:"customColorsSectionTitle",className:"custom-colors-section-title"},"\n        ",n.translate("ColorPicker_MainPanel_MoreColors"),"\n    "):null,e.createElement(s.CustomScroll,{},this.props.siteCustomColors?e.createElement("div",{key:"customColorsSection",className:"custom-colors-section"},e.createElement(i,{className:"custom-colors",onPreview:this.previewColor,customColors:this.props.siteCustomColors,paletteColors:this.props.paletteColors,value:n.colors.hsbToHex(this.state.selectedColor),onChange:this.onCustomColorSelected})):null),e.createElement("div",{className:"footer"},e.createElement(a.button,{className:"cancel-button btn-md btn-confirm-secondary",label:"ColorPicker_ColorSpace_CancelButton",onClick:this.handleCancel}),e.createElement(a.button,{className:"confirm-button btn-md",label:"ColorPicker_ColorSpace_AddButton",onClick:this.callOnChangeAndClose,disabled:!this.state.isValid})))}}),define("panels/toolPanels/colorPicker/addColorContent",["create-react-class","prop-types","lodash","util","panels/toolPanels/colorPicker/constants","panels/toolPanels/colorPicker/addColorContent.rt"],function(e,t,n,a,s,i){"use strict";return e({displayName:"addColorContent",propTypes:{valueLink:t.shape({value:t.string,requestChange:t.func}).isRequired,paletteColors:t.object.isRequired,closeHandler:t.func.isRequired,onPreview:t.func.isRequired,onCancel:t.func.isRequired,siteCustomColors:t.arrayOf(t.string)},getInitialState:function(){this.initialColor=a.valueLink.getValueFromProps(this.props);var e=this.resolveColor(this.initialColor);return{selectedColor:a.colors.hexToHsbExact(e),isValid:!0}},resolveColor:function(e){return n.includes(e,"color")?this.props.paletteColors[e]:e&&e!==s.NO_COLOR?e:"#ffffff"},onHsbColorChanged:function(e){this.setState({selectedColor:e},function(){var t=a.colors.hsbToHex(e);this.props.onPreview(t)})},onCustomColorSelected:function(e){this.setState({selectedColor:a.colors.hexToHsbExact(e)},function(){this.props.onPreview(e)})},resetToInitialColor:function(){var e=this.resolveColor(this.initialColor);this.setState({selectedColor:a.colors.hexToHsbExact(e)},function(){this.props.onPreview(this.initialColor)})},previewColor:function(e){this.props.onPreview(e)},componentDidMount:function(){this.mounted=!0},componentWillUnmount:function(){this.mounted=!1,this.wasConfirmClicked||this.props.onCancel()},callOnChangeAndClose:function(){a.valueLink.callOnChangeIfExists(this.props,a.colors.hsbToHex(this.state.selectedColor)),this.wasConfirmClicked=!0,this.close()},onChangeInValidationStatus:function(e){this.mounted&&this.setState({isValid:e})},handleCancel:function(){this.props.onCancel(),this.close()},close:function(){this.props.closeHandler()},render:i})}),define("panels/toolPanels/colorPicker/addColorPanel.rt",["react","lodash","panels/frames/toolPanelFrame","util","panels/toolPanels/colorPicker/addColorContent"],function(e,t,n,a,s){"use strict";return function(){return e.createElement(n,{ref:"frame",contentWrapperClass:"custom-color-picker-panel",panelName:this.props.panelName,title:this.props.title,contentStyle:t.pick(this.props,["top","left"])},e.createElement(s,{siteCustomColors:this.props.siteCustomColors,paletteColors:this.props.paletteColors,valueLink:this.props.valueLink,onPreview:this.props.onPreview,onCancel:this.props.onCancel,closeHandler:this.close}))}}),define("panels/toolPanels/colorPicker/addColorPanel",["create-react-class","prop-types","lodash","core","coreBi","panels/toolPanels/colorPicker/addColorPanel.rt"],function(e,t,n,a,s,i){"use strict";return e({displayName:"addColorPanel",mixins:[a.mixins.editorAPIMixin],propTypes:{valueLink:t.shape({value:t.string,requestChange:t.func}).isRequired,paletteColors:t.object.isRequired,top:t.string,left:t.string,onPreview:t.func.isRequired,onCancel:t.func.isRequired,siteCustomColors:t.arrayOf(t.string)},close:function(){this.getEditorAPI().bi.event(s.events.colorPicker.ADD_COLOR_PANEL_CLOSED,{}),this.getEditorAPI().panelManager.closePanelByName(this.props.panelName)},render:i})}),define("panels/toolPanels/colorPicker/colorPicker",["panels/toolPanels/colorPicker/colorPickerPanel","panels/toolPanels/colorPicker/addColorPanel","panels/toolPanels/colorPicker/addColorContent"],function(e,t,n){"use strict";return{colorPickerPanel:e,addColorPanel:t,addColorContent:n}}),define("panels/toolPanels/iconPicker/iconPickerPanel.rt",["react","lodash","util","baseUILib","symbols"],function(e,t,n,a,s){"use strict";return function(){function i(t,n,a){return function(t,n){var a=this.props.getCurrentIcon();return e.createElement(s.symbol,{className:"icon-picker-selection"+(a===t.value?" icon-current":""),onClick:function(e,t,n){this.props.onChange(e.value)}.bind(this,t,n,a),key:"icon"+t.value,ref:"icon"+t.value,name:t.symbolName})}.apply(this,[t,n])}return e.createElement("div",{className:"main-content"},e.createElement("div",{className:"panel-section icon-picker-header",onMouseDown:this.startContentDrag},e.createElement("div",{className:"icon-picker-header-content"},e.createElement("div",{className:"icon-picker-title",key:"icon-picker-title"},"\n                ",n.translate("mobile_quick_actions_choose_icon_title"),"\n            "),e.createElement("div",{className:"icon-picker-panel-close-button",onClick:this.close},e.createElement(s.symbol,{name:"headerCloseButton"})))),e.createElement(a.Divider,{long:!0}),e.createElement(a.CustomScroll,{},e.createElement.apply(this,["section",{className:"panel-section icon-picker-body"},t.map(this.props.options,i.bind(this))])),e.createElement(a.Divider,{long:!0}),e.createElement(a.Composites.ButtonMedium,{},e.createElement(a.Button,{className:"btn-md",onClick:this.close},e.createElement("span",{},n.translate("mobile_quick_actions_choose_icon_done_button_label")))))}}),define("panels/toolPanels/iconPicker/iconPickerPanel",["lodash","react","create-react-class","prop-types","higherOrderComponents","stateManagement","panels/frames/toolPanelFrame","panels/toolPanels/iconPicker/iconPickerPanel.rt"],function(e,t,n,a,s,i,o,r){"use strict";var l=n({displayName:"iconPickerPanel",propTypes:{top:a.number.isRequired,left:a.number.isRequired,panelName:a.string.isRequired,getCurrentIcon:a.func.isRequired,options:a.array.isRequired,onChange:a.func.isRequired,closePanelByName:a.func.isRequired},close:function(){this.props.closePanelByName(this.props.panelName)},render:function(){var n=this;return t.createElement(o,{panelName:"iconPickerPanel",isSingleInstance:!0,contentWrapperClass:"icon",isBlockingLayerFullScreen:!1,shouldBlockOuterScroll:!1,contentStyle:e.pick(this.props,["top","left"]),contentClass:"icon-picker-panel-content-wrapper",renderContent:function(e){return n.startContentDrag=e,r.call(n)}})}});return s.connect(function(){return{}},function(e){return{closePanelByName:function(t){e(i.editorPlugins.panels.actions.closePanelByNameAction(t))}}})(l)}),define("panels/toolPanels/languageSupport/languageSupport.rt",["react","lodash","panels/frames/toolPanelFrame","baseUI","baseUILib","constants"],function(e,t,n,a,s,i){"use strict";return function(){return e.createElement.apply(this,[n,{panelName:this.props.panelName,headerTitle:this.translateIfNeeded("add_languages_header_label"),isSingleInstance:!0,helpId:"147f770b-8d82-48b9-aea8-2f07d94c0743",ref:"frame",contentWrapperClass:"language-support-panel",contentStyle:t.pick(this.props,["top","left"]),contentClass:"language-support-panel-content-wrapper"},e.createElement("div",{className:"label"},this.translateIfNeeded("add_languages_text")),t.map(this.state.charsItems,function(n,o){return e.createElement("div",{className:t({"language-option":!0,disabled:n.disabled}).transform(function(e,t,n){t&&e.push(n)},[]).join(" "),key:n.label},e.createElement(a.tooltip,{value:n.tooltip,disabled:!n.tooltip,styleType:i.UI.TOOLTIP.STYLE_TYPE.SMALL},e.createElement(s.Checkbox,{label:n.label,disabled:n.disabled,value:n.value,onChange:function(e,t,n){this.update(t,n)}.bind(this,n,o),labelAfterSymbol:!0})),n.disabled?null:e.createElement("span",{className:"example-img",key:"example-img"},e.createElement("span",{style:n.style})))}.bind(this)),e.createElement("footer",{},e.createElement("div",{className:"copy-right-text"},e.createElement("span",{},this.translateIfNeeded("add_languages_copyright_text"),e.createElement("a",{className:"copy-right-link",onClick:this.openCopyright},this.translateIfNeeded("add_languages_copyright_text_link")))),e.createElement(a.button,{label:"add_languages_save_button",onClick:this.setLanguages,className:"btn-confirm-primary"}))])}}),define("panels/toolPanels/languageSupport/languageSupport",["create-react-class","lodash","core","util","higherOrderComponents","coreBi","panels/toolPanels/languageSupport/languageSupport.rt"],function(e,t,n,a,s,i,o){"use strict";var r=[{characterSet:"latin",position:"0px 0px",label:"add_languages_english",tooltip:"add_languages_english_tooltip",disabled:!0},{characterSet:"latin-ext",position:"-15px -46px",label:"add_languages_eastern_european",tooltip:"add_languages_eastern_european_tooltip"},{characterSet:"cyrillic",position:"-15px -19px",label:"add_languages_cyrillic",tooltip:"add_languages_cyrillic_tooltip"},{characterSet:"japanese",position:"-15px -123px",label:"add_languages_japanese"},{characterSet:"korean",position:"-15px -96px",label:"add_languages_korean"},{characterSet:"arabic",position:"-15px -150px",label:"add_languages_arabic"},{characterSet:"hebrew",position:"-15px -70px",label:"add_languages_hebrew"}],l=e({displayName:"languageSupport",mixins:[a.translationMixin,n.mixins.editorAPIMixin],render:o,getBackground:function(){return"url("+a.media.getMediaUrl("textEditor/langs.v1.png")+")"},getInitialState:function(){return{charsItems:this.getCharacterSetsArray()}},setLanguages:function(){this.getEditorAPI().bi.event(i.events.textControls.text_languages_support_dialog_save_click);var e=[];t.forEach(this.state.charsItems,function(t){t.value&&e.push(t.characterSet)}),this.getEditorAPI().documentServices.theme.fonts.updateCharacterSet(e),this.close()},close:function(){this.getEditorAPI().panelManager.closePanelByName(this.props.panelName)},update:function(e,n){var a=t.clone(this.state.charsItems),s=t.clone(a[e]);s.value=n,a[e]=s,this.setState({charsItems:a})},getCharactersSets:function(){return this.getEditorAPI().documentServices.theme.fonts.getCharacterSet()},openHelpPanelFrame:function(){this.getEditorAPI().bi.event(i.events.textControls.text_languages_support_learn_more_click),this.getEditorAPI().panelManager.openHelpCenter("147f770b-8d82-48b9-aea8-2f07d94c0743",{},{panel_name:"languageSupport",origin:"languageSupport"})},getCharacterSetsArray:function(){var e=r,n=[],a=this.getCharactersSets(),s=this.getBackground();return t.forEach(e,function(e){var i={label:e.label,characterSet:e.characterSet,tooltip:e.tooltip,value:t.includes(a,e.characterSet),disabled:e.disabled,style:{backgroundImage:s,backgroundPosition:e.position,height:"18px",width:"72px",display:"inline-block"}};n.push(i)}),n},openCopyright:function(){var e=a.translate("add_languages_copyright_link");window&&window.open(e,"_blank")}}),c=s.reportBiEventOnUiChange(l);return c.pure=l,c}),define("panels/toolPanels/mobileActionBarSubPanel/mobileActionBarSubPanel.rt",["react","lodash","panels/frames/toolPanelFrame","baseUI","baseUILib","util"],function(e,t,n,a,s,i){"use strict";return function(){return e.createElement(n,{ref:"frame",headerTitle:i.translate("mobile_action_bar_social_title"),panelName:this.props.panelName,isSingleInstance:!0,contentWrapperClass:"actionbar-sub-panel",isBlockingLayerFullScreen:this.props.isBlockingLayerFullScreen,shouldBlockOuterScroll:this.props.shouldBlockOuterScroll,contentStyle:t.pick(this.props,["top","left"]),contentClass:"actionbar-sub-panel-content-wrapper"},e.createElement(s.CustomScroll,{ref:"customScroll",heightRelativeToParent:"100%",addScrolledClass:!0},e.createElement.apply(this,["ul",{},t.map(this.getSocialLinks(),function(t,n){return e.createElement("li",{key:t.id,className:"social-link-item"},e.createElement(a.tooltip,{value:this.getSocialLinkTooltip(t.id)},e.createElement("span",{},e.createElement(a.symbol,{className:t.symbol+" symbol",name:t.symbol}))),e.createElement(a.textInput,{validator:this.validateUrlWithEmptyState,invalidMessage:"mobile_action_bar_social_error_message",placeholder:this.getSocialLinkPlaceholder(t.id),valueLink:this.getValueLink(t.id)}))}.bind(this))])))}}),define("panels/toolPanels/mobileActionBarSubPanel/mobileActionBarSubPanel",["create-react-class","lodash","core","util","panels/toolPanels/mobileActionBarSubPanel/mobileActionBarSubPanel.rt"],function(e,t,n,a,s){"use strict";return e({displayName:"mobileActionBarSubPanel",mixins:[n.mixins.editorAPIMixin],render:s,getSocialLinks:function(){return[{id:"blogger",symbol:"mba_social_panel_google_blogger"},{id:"facebook",symbol:"mba_social_panel_facebook"},{id:"flickr",symbol:"mba_social_panel_youtube_flickr"},{id:"google_plus",symbol:"mba_social_panel_google_plus"},{id:"linkedin",symbol:"mba_social_panel_google_linkdin"},{id:"pinterest",symbol:"mba_social_panel_pinterest"},{id:"tumblr",symbol:"mba_social_panel_google_tumblr"},{id:"twitter",symbol:"mba_social_panel_twitter"},{id:"vimeo",symbol:"mba_social_panel_youtube_vimeo"},{id:"youtube",symbol:"mba_social_panel_youtube"}]},getSocialLinkPlaceholder:function(e){return"mobile_action_bar_"+(e="google_plus"===e?"google":e)+"_placeholder"},getValueLink:function(e){var n=this.getEditorAPI().mobile.actionBar.actions,a=n.get().socialLinks;return{value:a[e],requestChange:function(e,s){var i={};a[e]=s,i.socialLinks=a;var o=t(a).values().compact().value().length>0;n.update(i),n.enable({socialLinks:o})}.bind(this,e)}},getSocialLinkTooltip:function(e){return"mobile_action_bar_"+(e="google_plus"===e?"google":e)+"_tooltip"},validateUrlWithEmptyState:function(e){return a.validate.url(e)||""===e}})}),define("panels/toolPanels/fontsManager/fontItem.rt",["react","lodash","baseUI","symbols","util","constants"],function(e,t,n,a,s,i){"use strict";return function(){return e.createElement("div",{className:"font-item "+(this.shouldShowActions()?"with-actions ":"")+" "+(this.shouldShowCancel()?"cancelable":"")+" "+(this.props.status&&!this.props.fontFamily?"queue":"list")+" "+(this.props.errorCode?"error":"")+" "+(this.props.finished?"animated":"")},e.createElement("div",{className:"font-description "+(this.props.fontFamily?"uploaded":"")},e.createElement("span",{className:"font-title display-name "+(this.props.fontFamily?"uploaded":""),style:this.getStyle()},this.props.name),e.createElement("span",{className:"font-title file-name"},this.props.fileName),e.createElement("span",{className:"font-status-msg"},s.translate(this.getStatusMessage()))),e.createElement("div",{className:"indicator"},this.getStatusSymbol()?e.createElement(a.symbol,{name:this.getStatusSymbol(),className:this.props.status||"",key:"status-symbol"}):null),this.props.finished?e.createElement("div",{className:"indicator finished",key:"finished-symbol"},e.createElement(a.symbol,{name:"inputValidationSuccess"})):null,e.createElement("div",{className:"cancel-icon"},e.createElement(a.symbol,{name:"headerCloseButton",onClick:this.props.onCancelClick,className:"cancel-btn"})),e.createElement("div",{className:"actions"},e.createElement(n.tooltip,{value:"Upload_Fonts_Download_Tooltip",styleType:i.UI.TOOLTIP.STYLE_TYPE.SMALL},e.createElement("div",{className:"action-btn-container"},this.props.downloadable?e.createElement("a",function(e,n){var a=t.assign({},e,n);return e.hasOwnProperty("style")&&(a.style=t.defaults(a.style,e.style)),e.hasOwnProperty("className")&&n.hasOwnProperty("className")&&(a.className=n.className+" "+e.className),a}({className:"action-btn download",href:this.props.downloadUrl,onClick:this.props.onDownloadClick,key:"download-btn"},this.getDownloadProps()),e.createElement(a.symbol,{name:"font-download"})):null)),e.createElement(n.tooltip,{value:"Upload_Fonts_Delete_Tooltip",styleType:i.UI.TOOLTIP.STYLE_TYPE.SMALL},e.createElement("div",{className:"action-btn-container"},this.props.removeable?e.createElement("a",{className:"action-btn",onClick:this.props.onRemoveClick,key:"remove-btn"},e.createElement(a.symbol,{name:"font-delete"})):null))))}}),define("panels/toolPanels/fontsManager/fontItem",["create-react-class","prop-types","lodash","util","panels/toolPanels/fontsManager/fontItem.rt"],function(e,t,n,a,s){"use strict";return e({displayName:"fontItem",propTypes:{fontFamily:t.string,name:t.string,status:t.string,onDownloadClick:t.func,onRemoveClick:t.func,onCancelClick:t.func,downloadable:t.bool,removeable:t.bool,cancelable:t.bool,isStillUploading:t.bool,errorCode:t.string},getStyle:function(){if(this.props.fontFamily){return{fontFamily:this.props.fontFamily+",HelveticaNeueW01-45Ligh, HelveticaNeueW02-45Ligh, HelveticaNeueW10-45Ligh, Helvetica Neue, Helvetica, Arial, メイリオ, meiryo, ヒラギノ角ゴ pro w3, hiragino kaku gothic pro, sans-serif"}}return{}},shouldShowActions:function(){return this.props.downloadable||this.props.removeable},shouldShowCancel:function(){return this.props.cancelable},getStatusSymbol:function(){return{uploading:"font-uploading-loader",waiting:"font-uploading-loader",processing:"font-uploading-loader",succeeded:"inputValidationSuccess",failed:"inputValidationError"}[this.props.status]},getDownloadProps:function(){var e={};return a.browserUtil.isChrome()?e.download=this.props.fileName:e.target="_blank",e},getStatusMessage:function(){return this.props.errorCode?a.fontsManagerUtils.getErrorMessage(this.props.errorCode).translate_msg:this.props.isStillUploading?"Upload_Fonts_Status_Still_Uploading":a.fontsManagerUtils.constants.FONT_STATUS_MSG[this.props.status]||""},render:s})}),define("panels/toolPanels/fontsManager/fontsUploadPanel.rt",["react","lodash","panels/frames/focusPanelFrame","baseUI","baseUILib","symbols","panels/toolPanels/fontsManager/fontItem"],function(e,t,n,a,s,i,o){"use strict";return function(){return e.createElement(n,{ref:"frame",panelName:this.props.panelName,className:"fonts-upload-panel",shouldNotCloseOnBlur:!0,onClose:this.handlePanelCloseClick,title:this.translateIfNeeded("UPLOAD_FONTS_Panel_Header"),helpId:"96323a82-c61a-4ac1-90ac-10aecb37cbf8",width:"600",onContextMenu:function(e){e.preventDefault()}.bind(this)},e.createElement("div",{className:"fonts-upload-header"},e.createElement("span",{className:"general-explanation-text"},this.shouldFilterOtfFiles()?this.translateIfNeeded("Upload_Fonts_Panel_Header_Text_CJK"):this.translateIfNeeded("Upload_Fonts_Panel_Header_Text")),e.createElement(a.fileInput,{className:"font-upload-button",label:"Upload_Fonts_Upload_Button",onChange:function(e){this.handleUpload(e,!1)}.bind(this),fileTypes:this.getFileTypes()})),this.shouldShowFontsList()?null:e.createElement(a.filesDrop,{onChange:function(e){this.handleUpload(e,!0)}.bind(this),key:"empty-fonts-list",className:"empty-msg"},e.createElement("div",{className:"empty-message-container"},e.createElement("div",{className:"empty-symbol-container"},e.createElement(i.symbol,{name:"fonts-manager-clipart"})),e.createElement("span",{className:"empty-text-title"},this.translateIfNeeded("Upload_Fonts_Empty_State_Title")),e.createElement("br",{}),e.createElement("span",{className:"empty-text"},this.shouldFilterOtfFiles()?this.translateIfNeeded("Upload_Fonts_Empty_State_Text_CJK"):this.translateIfNeeded("Upload_Fonts_Empty_State_Text")),e.createElement(a.fileInput,{className:"font-upload-link",label:"Upload_Fonts_Empty_State_Text_Link",onChange:function(e){this.handleUpload(e,!1)}.bind(this),onlyText:!0,fileTypes:this.getFileTypes()}))),this.shouldShowFontsList()?e.createElement(a.filesDrop,{key:"fonts-list",hasBorder:!1,className:"list",onChange:function(e){this.handleUpload(e,!0)}.bind(this)},e.createElement(s.CustomScroll,{ref:"customScroll"},e.createElement.apply(this,["div",{className:"font-list-container"},t.map(this.state.invalidFiles,function(n,a){return e.createElement(o,t.assign({},{key:n.name},this.getInvalidFilesProps(n)))}.bind(this)),t.map(this.getFontsList(),function(n,a){return e.createElement(o,t.assign({},{key:n.fontFamily||n.fileName+a},n))}.bind(this))]))):null,e.createElement("div",{className:"fonts-upload-footer"},this.shouldShowFooterMsg()?e.createElement("span",{key:"upload-text",className:"footer-msg"},this.translateIfNeeded("Upload_Fonts_Footer_Text")):null,this.shouldShowErrorMsg()?e.createElement("span",{key:"error-text",className:"footer-error-msg"},this.translateIfNeeded("Upload_Fonts_Footer_Error_Text")):null,e.createElement(a.button,{className:"default btn-md close-panel",label:this.getButtonLabel(),disabled:this.isUploadInProcess(),onClick:this.handleDoneClick})))}}),define("panels/toolPanels/fontsManager/fontsUploadPanel",["create-react-class","prop-types","lodash","stateManagement","util","higherOrderComponents","coreBi","panels/toolPanels/fontsManager/fontsUploadPanel.rt"],function(e,t,n,a,s,i,o,r){"use strict";var l=a.editorPlugins.uploadedFonts.selectors,c=l.getList,p=l.getQueue,u=l.getUploadedItems,d=a.editorPlugins.uploadedFonts.actions,m=d.setUploadedItems,h=d.assignFlagToQueueItem,g=d.cancelUpload,f=d.prepareUploadedFontsData,P=d.removeFonts,_=d.clearUploadQueue,E=d.uploadItems,b=a.editorPlugins.panels.actions,C=b.updateOrOpenPanel,N=b.closePanelByName,I=e({displayName:"fontsUploadPanel",mixins:[s.translationMixin],propTypes:{panelName:t.string,geoLocation:t.string.isRequired,uploadedFontsList:t.object,uploadedFontsQueue:t.object,uploadedFontsItems:t.object,setUploadedFontsItems:t.func.isRequired,assignFlagToQueueItem:t.func.isRequired,cancelUpload:t.func.isRequired,clearUploadQueue:t.func.isRequired,prepareUploadedFontsData:t.func.isRequired,removeFonts:t.func.isRequired,uploadItems:t.func.isRequired,closePanelByName:t.func.isRequired,updateOrOpenPanel:t.func.isRequired,reportBi:t.func.isRequired},render:r,getInitialState:function(){return{invalidFiles:[],isUploadStarted:!1,isUploadError:!1}},handleUpload:function(e,t){var a=this,i=this.shouldFilterOtfFiles();if(e.length>20)this.setState({isUploadError:!0});else{this.sendUploadBIEvents(e,t);var o=n.reduce(e,function(e,t){return s.fontsManagerUtils.isFolder(t)?(t.errorCode="999998",e.push(t)):s.fontsManagerUtils.isFontExt(t,i)||(t.errorCode="-7751",e.push(t)),e},[]),r=n.difference(e,o);n.forEach(o,function(e){a.sendUploadFailedBi(e.errorCode,e)}),this.setState({isUploadError:!1,invalidFiles:o,isUploadStarted:!0}),this.props.uploadItems(r)}},sendUploadBIEvents:function(e,t){var a=this,s=t?o.events.fontsUploadPanel.Fonts_Dragged:o.events.fontsUploadPanel.Upload_Fonts_Click;this.props.reportBi(s,{count:e.length}),n.forEach(e,function(e){a.props.reportBi(o.events.fontsUploadPanel.Upload_Fonts_Try_Upload,{name:e.name})})},sendUploadFailedBi:function(e,t){var n=s.fontsManagerUtils.getErrorMessage(e).bi_msg;this.props.reportBi(o.events.fontsUploadPanel.Upload_Failed,{message:n,name:t.name})},getFontProps:function(e){var t=!!e.status&&!e.fontFamily,a="";t?t&&(a=e.status):a=s.fontsManagerUtils.constants.FONT_STATUS.FINISHED;return{fileName:e.name,name:e.displayName,fontFamily:e.fontFamily,status:a,errorCode:e.error_code,downloadable:!t,downloadUrl:e.downloadUrl,removeable:!t,finished:e.status===s.fontsManagerUtils.constants.FONT_STATUS.SUCCEEDED||this.isUploadedItem(e),onRemoveClick:n.partial(this.handleRemoveClick,e),onDownloadClick:n.partial(this.handleDownloadClick,e),cancelable:e.status===s.fontsManagerUtils.constants.FONT_STATUS.WAITING,isStillUploading:e.stillUploading,onCancelClick:t?n.partial(this.handleCancleClick,e):null}},isUploadedItem:function(e){return e.id&&!!n.get(this.props.uploadedFontsItems,e.id)},getFontsList:function(){var e=this.getQueueItems().concat(this.getExistingItems());return n.map(e,this.getFontProps)},getInvalidFilesProps:function(e){return{fileName:e.name,status:s.fontsManagerUtils.constants.FONT_STATUS.FAILED,errorCode:e.errorCode}},getExistingItems:function(){var e=this.props.uploadedFontsQueue;return n.reject(this.props.uploadedFontsList,function(t){return n.find(e,{id:t.id})})},getQueueItems:function(){var e=this.props.uploadedFontsQueue;return n.reject(e,function(e){return e.removed||e.isAborted||e.canceled})},componentWillUnmount:function(){this.cancelAllUpload(),this.props.prepareUploadedFontsData()},shouldShowFontsList:function(){return!n.isEmpty(this.getExistingItems())||!n.isEmpty(this.getQueueItems())||!n.isEmpty(this.state.invalidFiles)},handleRemoveClick:function(e){this.props.reportBi(o.events.fontsUploadPanel.Delete_File,{}),this.openDeleteConfirmationPanel(e)},handleDownloadClick:function(){this.props.reportBi(o.events.fontsUploadPanel.Download_File_Click,{})},openDeleteConfirmationPanel:function(e){var t=this,a=n.partial(this.removeItem,e);this.props.updateOrOpenPanel("panels.toolPanels.deleteFontMsg",{panelName:"deleteFontConfirmation",onConfirm:a,onCancel:function(){t.props.reportBi(o.events.fontsUploadPanel.Approve_Delete_File,{text:"cancel"})}},!0)},removeItem:function(e){this.props.reportBi(o.events.fontsUploadPanel.Approve_Delete_File,{text:"delete"});var t=this.props.uploadedFontsQueue,a=n.findIndex(t,{id:e.id}),s=this.props.uploadedFontsItems;-1!==a&&(this.props.assignFlagToQueueItem(a,{removed:!0}),s[e.id]&&delete(s=n.clone(s))[e.id],this.props.setUploadedFontsItems(s)),this.props.removeFonts([e.id])},handleCancleClick:function(e){e.status===s.fontsManagerUtils.constants.FONT_STATUS.WAITING&&(this.props.reportBi(o.events.fontsUploadPanel.Cancel_Upload,{name:e.name}),this.cancelUpload(n.indexOf(this.props.uploadedFontsQueue,e)))},cancelUpload:function(e){this.props.cancelUpload(e)},cancelAllUpload:function(){var e=this,t=this,a=n.filter(this.props.uploadedFontsQueue,{status:s.fontsManagerUtils.constants.FONT_STATUS.WAITING}),i=n.map(a,function(t){return n.indexOf(e.props.uploadedFontsQueue,t)});this.isUploadInProcess()&&a&&n.forEach(i,function(e){t.cancelUpload(e)}),this.props.clearUploadQueue()},handlePanelCloseClick:function(){return!this.isUploadInProcess()||(this.openCancelConfirmationPanel(),!1)},openCancelConfirmationPanel:function(){var e=this;this.props.updateOrOpenPanel("panels.toolPanels.cancelFontUploadMsg",{panelName:"cancelUploadConfirmation",onConfirm:function(){e.props.reportBi(o.events.fontsUploadPanel.Approve_Stop_Upload,{}),e.closePanel()},onCancel:function(){return!1}},!0)},isAnyInQueueProcessing:function(){return n.some(this.props.uploadedFontsQueue,{status:s.fontsManagerUtils.constants.FONT_STATUS.PROCESSING})},isAnyInQueueWaiting:function(){return n.some(this.props.uploadedFontsQueue,{status:s.fontsManagerUtils.constants.FONT_STATUS.WAITING})},isAnyInQueueUploading:function(){return n.some(this.props.uploadedFontsQueue,{status:s.fontsManagerUtils.constants.FONT_STATUS.UPLOADING})},closePanel:function(){this.props.closePanelByName(this.props.panelName)},handleDoneClick:function(){this.props.reportBi(o.events.fontsUploadPanel.Closed_Button_Click,{}),this.closePanel()},getButtonLabel:function(){return this.state.isUploadStarted?"Upload_Fonts_Close_Button_2":"Upload_Fonts_Close_Button_1"},isUploadInProcess:function(){return this.isAnyInQueueProcessing()||this.isAnyInQueueWaiting()||this.isAnyInQueueUploading()},shouldShowFooterMsg:function(){return!this.state.isUploadError&&!n.isEmpty(this.props.uploadedFontsItems)&&!this.isUploadInProcess()},shouldShowErrorMsg:function(){return this.state.isUploadError},getFileTypes:function(){var e=this.shouldFilterOtfFiles()?s.fontsManagerUtils.constants.CONVERTED_EXTENTIONS:s.fontsManagerUtils.constants.ACCEPTABLE_EXTENTIONS;return n.map(e,function(e){return"."+e}).join(",")},shouldFilterOtfFiles:function(){var e=s.languages.getLanguageCode();return s.fontsManagerUtils.shouldFilterOtfFiles(e,this.props.geoLocation)}}),y={setUploadedItems:m,assignFlagToQueueItem:h,cancelUpload:g,prepareUploadedFontsData:f,removeFonts:P,uploadItems:E,clearUploadQueue:_,updateOrOpenPanel:C,closePanelByName:N,reportBi:function(){var e;return(e=a.editorPlugins.bi.actions).event.apply(e,arguments)}},T=n.flow(i.renderWhenMutated,i.connect(function(e,t,n){return{uploadedFontsList:c(e),uploadedFontsQueue:p(e),uploadedFontsItems:u(e),geoLocation:n.generalInfo.getGeo()}},y))(I);return T.pure=I,T}),define("panels/toolPanels/fontsManager/deleteFontMsg.rt",["react","lodash","panels/frames/messagePanelFrame","util"],function(e,t,n,a){"use strict";return function(){return e.createElement(n,{panelName:this.props.panelName,onConfirm:this.props.onConfirm,onCancel:this.props.onCancel,confirmLabel:"Upload_Fonts_Delete_Pop_Up_Button_1",cancelLabel:"Upload_Fonts_Delete_Pop_Up_Button_2",className:"important delete-font-message",panelTitle:a.translate("Upload_Fonts_Delete_Pop_Up_Header")},e.createElement("div",{className:"delete-font-message"},e.createElement("div",{className:"message"},a.translate("Upload_Fonts_Delete_Pop_Up_Text"))))}}),define("panels/toolPanels/fontsManager/deleteFontMsg",["create-react-class","prop-types","lodash","panels/toolPanels/fontsManager/deleteFontMsg.rt"],function(e,t,n,a){"use strict";return e({displayName:"deleteFontMsg",propTypes:{panelName:t.string.isRequired,onConfirm:t.func.isRequired,onCancel:t.func.isRequired},render:a})}),define("panels/toolPanels/fontsManager/cancelFontUploadMsg.rt",["react","lodash","panels/frames/messagePanelFrame","util","experiment"],function(e,t,n,a,s){"use strict";return function(){return e.createElement(n,{panelName:this.props.panelName,onConfirm:this.props.onConfirm,onCancel:this.props.onCancel,confirmLabel:"Upload_Fonts_Close_Panel_Pop_Up_Button_1",cancelLabel:"Upload_Fonts_Close_Panel_Pop_Up_Button_2",className:"important close-font-message",panelTitle:a.translate("Upload_Fonts_Close_Panel_Pop_Up_Header")},e.createElement("div",{className:"cancel-font-message"},e.createElement("div",{className:"message"},a.translate("Upload_Fonts_Close_Panel_Pop_Up_Text"))))}}),define("panels/toolPanels/fontsManager/cancelFontUploadMsg",["create-react-class","lodash","panels/toolPanels/fontsManager/cancelFontUploadMsg.rt"],function(e,t,n){"use strict";return e({displayName:"cancelFontUploadMsg",render:n})}),define("panels/toolPanels/packageImportPanel/packageImportPanel.rt",["react","lodash","panels/frames/toolPanelFrame","baseUILib","util"],function(e,t,n,a,s){"use strict";return function(){return e.createElement(n,{panelName:"platform.panels.packageImportPanel",onClose:this.props.onClose.bind(this),lightHeader:!0,contentStyle:this.props.contentStyle,headerTitle:s.translate("AppStudio_ImportDialog_Header")},e.createElement(a.Divider,{long:!0}),this.props.isLoading?e.createElement(a.Composites.Preloader,{automationId:"import-panel-loader",key:"importPanelLoader",height:157},e.createElement(a.Preloader,{className:"small import-loader"}),e.createElement(a.TextLabel,{className:"loading-text",value:"Fetching your packages..."})):null,this.props.isLoading?null:e.createElement("div",{key:"not-loading-mode"},this.hasApps()?e.createElement(a.Composites.DropDownLabeled,{key:"dropDownPackage"},e.createElement(a.TextLabel,{value:"AppStudio_ImportDialog_Title",shouldTranslate:!0}),e.createElement.apply(this,[a.DropDown,{automationId:"available-apps-drop-down",onChange:this.onSelectedChange,value:this.state.appDefinitionId,placeholder:s.translate("AppStudio_ImportDialog_Placeholder"),shouldTranslate:!1},t.map(this.props.apps,function(t,n){return e.createElement(a.DropDownOption,{key:t.appDefinitionId,value:t.appDefinitionId,label:t.appDefinitionName,shouldTranslate:!1})}.bind(this))])):null,this.hasApps()?null:e.createElement(a.Composites.RichText,{key:"emptyImport"},e.createElement(a.RichText,{automationId:"empty-state-text"},s.translate("AppStudio_ImportDialog_EmptyState"))),e.createElement(a.Composites.ButtonMedium,{},e.createElement(a.Button,{automationId:"import-button",onClick:this.onImportClick,disabled:!this.state.appDefinitionId},e.createElement("span",{},s.translate("AppStudio_ImportDialog_Button"))))))}}),define("panels/toolPanels/packageImportPanel/packageImportPanel",["react","prop-types","lodash","panels/toolPanels/packageImportPanel/packageImportPanel.rt","higherOrderComponents","util","stateManagement"],function(e,t,n,a,s,i,o){"use strict";var r=function(t){function n(e){_classCallCheck(this,n);var t=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.state={appDefinitionId:null},t.props.fetchAvailableApps(),t.hasApps=function(){return t.props.apps.length>0},t.onSelectedChange=function(e){t.setState({appDefinitionId:e})},t.onImportClick=function(){t.props.onImport(t.state.appDefinitionId),t.props.onClose()},t}return _inherits(n,e.Component),_createClass(n,[{key:"render",value:function(){return a.call(this)}}]),n}();r.propTypes={apps:t.array.isRequired,contentStyle:t.shape({top:t.number,left:t.number,width:t.string}),onClose:t.func.isRequired,fetchAvailableApps:t.func.isRequired,onImport:t.func.isRequired};var l=s.connect(function(e,t,a){var s=o.editorPlugins.applicationStudio.selectors.getAvailableApps(e),r=i.appStudioUtils.getInstalledPackages(a);return{apps:n.differenceBy(s,r,function(e){return e.appDefinitionId}),isLoading:o.editorPlugins.applicationStudio.selectors.getIsLoading(e)}},function(e){return{fetchAvailableApps:function(){return e(o.editorPlugins.applicationStudio.actions.fetchAvailableApps())},onClose:function(){e(o.editorPlugins.panels.actions.closePanelByNameAction("panels.toolPanels.packageImportPanel"))},onImport:function(t){return e(o.editorPlugins.platform.actions.installApp(t))}}})(r);return l.pure=r,l}),define("panels/toolPanels/grid/gridAddColumnPanel.rt",["react","lodash","util","baseUI","panels/frames/toolPanelFrame","baseUILib"],function(e,t,n,a,s,i){"use strict";return function(){return e.createElement(s,{ref:"frame",panelName:"panels.toolPanels.gridAddColumnPanel",contentWrapperClass:"grid-add-column-toolbar",contentStyle:t.pick(this.props,["top","left"]),onClose:this.onClose},e.createElement("div",{className:"grid-add-column-panel"},e.createElement(i.PanelHeader,{className:"header light",ref:"panelHeader",onClose:this.onCloseButtonClick,noHelpBtn:!0},e.createElement("span",{className:"panel-title"},n.translate(this.panelTitle))),e.createElement("div",{className:"header-separator"}),e.createElement("div",{className:"grid-add-column-toolbar-content"},e.createElement(a.textInput,{label:"TABLE_ADD_PANEL_COL_TITLE_LABEL",value:this.state.label,onChange:this.onLabelChange}),e.createElement("hr",{className:"divider-long"}),e.createElement(a.textInput,{label:"TABLE_ADD_PANEL_FIELD_NAME_LABEL",ref:"fieldNameInput",value:this.state.fieldName,validator:this.fieldNameValidator,invalidMessage:"FIELD_NAME_CANNOT_BE_EMPTY",onValidation:this.onFieldNameValidation,onChange:this.onFieldNameChange}),e.createElement("hr",{className:"divider-long"}),e.createElement.apply(this,[a.dropDown.select,{label:"TABLE_ADD_PANEL_TYPE_LABEL",valueLink:this.linkState("type")},t.map(this.typeOptions,function(t,n){return e.createElement(a.dropDown.option,{key:t.value,value:t.value},"\n                                ",t.label,"\n                            ")}.bind(this))]),e.createElement("hr",{className:"divider-long"}),e.createElement("div",{className:"button-row"},e.createElement(a.button,{disabled:!this.state.isFormValid,className:"button",label:"TABLE_ADD_PANE_DONE_BTN",onClick:this.onAddButtonClick})))))}}),define("panels/toolPanels/grid/gridAddColumnPanel",["react","create-react-class","lodash","core","panels/toolPanels/grid/gridAddColumnPanel.rt","panels/frames/panelCloseOrigin","coreBi","util"],function(e,t,n,a,s,i,o,r){"use strict";var l=Object.freeze({STRING:"string",DATE:"date",NUMBER:"number",IMAGE:"image",BOOLEAN:"bool",RICH_TEXT:"richText"});return t({displayName:"gridAddColumnPanel",mixins:[a.mixins.editorAPIMixin,e.addons.LinkedStateMixin],panelTitle:"TABLE_ADD_PANEL_TITLE",getInitialState:function(){return{label:this.props.labelPrefix+this.props.nextIndex,fieldName:this.props.fieldNamePrefix+this.props.nextIndex,type:l.STRING,fieldNameWasEdited:!1,isFormValid:!0}},render:s,onCloseButtonClick:function(){this.reportPanelClosed(i.HEADER_CLOSE_BUTTON),this.getEditorAPI().panelManager.closePanelByName(this.props.panelName)},onAddButtonClick:function(){this.state.isFormValid&&(this.props.addColumnCallback(this.state.label,this.state.fieldName,this.state.type),this.reportPanelClosed(i.DONE_BUTTON),this.getEditorAPI().panelManager.closePanelByName(this.props.panelName))},onLabelChange:function(e){var t={label:e};if(!this.state.fieldNameWasEdited){var n=e.toLowerCase().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,"");0!==n.length&&(t.fieldName=n)}this.setState(t)},fieldNameValidator:function(e){return e.length>0},onFieldNameChange:function(e){this.setState({fieldName:e,fieldNameWasEdited:!0})},onFieldNameValidation:function(e){this.setState({isFormValid:e})},typeOptions:[{value:l.STRING,label:r.translate("TABLE_ADD_PANEL_TYPE_OPT1")},{value:l.IMAGE,label:r.translate("TABLE_ADD_PANEL_TYPE_OPT2")},{value:l.NUMBER,label:r.translate("TABLE_ADD_PANEL_TYPE_OPT3")},{value:l.BOOLEAN,label:r.translate("TABLE_ADD_PANEL_TYPE_OPT4")},{value:l.DATE,label:r.translate("TABLE_ADD_PANEL_TYPE_OPT5")},{value:l.RICH_TEXT,label:r.translate("TABLE_ADD_PANEL_TYPE_OPT6")}],onClose:function(e){this.reportPanelClosed(e)},getSelectedComponentId:function(){var e=this.props.selectedComponents;return n.isArray(e)?n.head(e).id:e.id},reportPanelClosed:function(e){var t=this.getEditorAPI();t.bi.event(o.events.grid.GRID_ADD_COLUMN_DONE,{siteId:t.documentServices.generalInfo.getSiteId(),componentId:this.getSelectedComponentId(),panelName:this.panelTitle,columnType:this.state.type,fieldName:this.state.fieldName,columnTitle:this.state.label,origin:e})}})}),define("panels/toolPanels/toolPanels",["panels/toolPanels/pagesSelector/pagesSelectorPanel","panels/toolPanels/exampleToolPanel","panels/toolPanels/linkPanel/linkPanel","panels/toolPanels/colorPicker/colorPicker","panels/toolPanels/iconPicker/iconPickerPanel","panels/toolPanels/languageSupport/languageSupport","panels/toolPanels/mobileActionBarSubPanel/mobileActionBarSubPanel","panels/toolPanels/fontsManager/fontsUploadPanel","panels/toolPanels/fontsManager/deleteFontMsg","panels/toolPanels/fontsManager/cancelFontUploadMsg","panels/toolPanels/packageImportPanel/packageImportPanel","panels/toolPanels/grid/gridAddColumnPanel"],function(e,t,n,a,s,i,o,r,l,c,p,u){"use strict";return{pagesSelectorPanel:e,exampleTool:t,linkPanel:n,languageSupport:i,colorPicker:a,iconPickerPanel:s,mobileActionBarSubPanel:o,fontsUploadPanel:r,deleteFontMsg:l,cancelFontUploadMsg:c,packageImportPanel:p,gridAddColumnPanel:u}}),define("panels/commonControls/linkTo/linkToMixin",["lodash","core","baseUI","util"],function(e,t,n,a){"use strict";return{mixins:[n.inputMixin,t.mixins.editorAPIMixin],ValidationStatus:{NONE:"none",SUCCESS:"success",ERROR:"error"},getInitialState:function(){return{validationStatus:this.ValidationStatus.NONE}},componentDidMount:function(){this.mounted=!0},componentWillUnmount:function(){this.mounted=!1},openLinkDialogFromPanel:function(){this.openLinkDialog(!0)},openLinkDialog:function(e){this.getEditorAPI().openLinkPanel({link:a.valueLink.getValueFromProps(this.props),visibleSections:this.props.visibleSections,callback:this.linkUpdated},!e)},linkUpdated:function(e){this.setState({validationStatus:this.ValidationStatus.SUCCESS}),a.valueLink.callOnChangeIfExists(this.props,e),window.setTimeout(function(){this.mounted&&this.setState({validationStatus:this.ValidationStatus.NONE})}.bind(this),1e3)}}}),define("panels/commonControls/linkTo/linkTo.rt",["react","lodash","baseUI","experiment"],function(e,t,n,a){"use strict";return function(){return e.createElement(n.labelWithCircleButton,{key:"labelWithCircleButton",className:"input-link-to",isDisabled:this.isDisabled(),label:this.props.label,displayedValue:this.getTranslatedLink(),onClick:this.openLinkDialogFromPanel,buttonIcon:"linkBtnThin",showButton:this.shouldShowButton(),showSuccessSymbol:this.shouldShowSuccessSymbol(),infoIconText:this.props.infoText,infoIconTitle:this.props.infoTitle})}}),define("panels/commonControls/linkTo/linkTo",["create-react-class","prop-types","lodash","util","panels/commonControls/linkTo/linkToMixin","panels/commonControls/linkTo/linkTo.rt"],function(e,t,n,a,s,i){"use strict";return e({displayName:"linkTo",mixins:[s],propTypes:{label:t.string,placeholder:t.string,showButton:t.bool,infoText:t.string,infoTitle:t.string},getDefaultProps:function(){return{label:"",placeholder:"Link_To_Control_Label_Placeholder",showButton:!0}},shouldShowButton:function(){return this.props.showButton&&this.state.validationStatus===this.ValidationStatus.NONE},shouldShowSuccessSymbol:function(){return this.state.validationStatus===this.ValidationStatus.SUCCESS},getTranslatedLink:function(){var e=a.link.getLinkValueAsString(this.getEditorAPI(),a.valueLink.getValueFromProps(this.props));return e=e||a.translate(this.props.placeholder)},render:i})}),define("panels/commonControls/linkTo/linkToButton.rt",["react","lodash","baseUI"],function(e,t,n){"use strict";return function(){return e.createElement(n.button,function(e,n){var a=t.assign({},e,n);return e.hasOwnProperty("style")&&(a.style=t.defaults(a.style,e.style)),e.hasOwnProperty("className")&&n.hasOwnProperty("className")&&(a.className=n.className+" "+e.className),a}({icon:"link",className:"link-to-button",onClick:this.openLinkDialog},this.filteredProps()))}}),define("panels/commonControls/linkTo/linkToButton",["create-react-class","lodash","panels/commonControls/linkTo/linkToMixin","panels/commonControls/linkTo/linkToButton.rt"],function(e,t,n,a){"use strict";return e({displayName:"linkToButton",mixins:[n],render:a})}),define("panels",["panels/panelManager/panelManager","panels/frames/frames","panels/mixins/mixins","panels/helpPanels/helpPanels","panels/errorPages/errorPagesPanels","panels/focusPanels/focusPanels","panels/messagePanels/messagePanels","panels/toolPanels/toolPanels","panels/commonControls/linkTo/linkTo","panels/commonControls/linkTo/linkToButton","panels/commonControls/linkTo/linkToMixin"],function(e,t,n,a,s,i,o,r,l,c,p){"use strict";return{PanelManager:e,frames:t,mixins:n,helpPanels:a,errorPages:s,focusPanels:i,messagePanels:o,toolPanels:r,commonControls:{linkTo:l,linkToButton:c},linkToMixin:p}});
//# sourceMappingURL=panels.min.js.map