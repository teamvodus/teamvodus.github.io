define("wixBookings/common/dataProvider",["tpa","constants","addPanelDataConsts"],function(e,n,i){"use strict";function t(){return o}var o="13d21c63-b5ec-5912-8397-c3a5ddb27a97";return{getAppDefID:t,superAppPanelName:n.SUPER_APPS.BOOKINGS_PANEL_NAME,superAppButtonLabel:"SiteApp_WixBookings_Button_Hover_Caption",superAppPanelClassName:"wix-bookings-panel",superAppSymbolName:"leftBarWixBookingsPanel",getAddElementCategoryId:function(){return i.CATEGORIES_ID.BOOKINGS},superAppId:"wixBookings",hasPremium:function(){return e.superApps.isPremium(t())}}}),define("wixBookings/common/sitePrefsService",["lodash"],function(e){"use strict";function n(e){return function(e){return fetch("//editor.wix.com/_api/wix-bi-profile-webapp/siteprofile/"+e+"?fields=category&accept=json",{credentials:"include"}).then(function(e){return e.json()})}(e).then(i)}function i(n){return function(n){return e.includes(t,n)}(function(e){return e.payload.fields[0].value}(n))?Promise.resolve():Promise.reject()}var t=["business","photography","design","events","beauty-wellness","other","all",null];return{ifPostRegRelevant:n}}),define("wixBookings/common/bi/wixBookingsEvents",[],function(){"use strict";var e={TABS_CLICK:{evid:204,src:38,endpoint:"editor",fields:{app_id:"string",panel:"string"}},MANAGE_PANEL_BUTTON_CLICK:{evid:205,src:38,endpoint:"editor",fields:{app_id:"string",button_name:"string"}},LEARN_MORE_CLICK:{evid:209,src:38,endpoint:"editor",fields:{app_id:"string",category:"string"}},UPGRADE_POPUP_CLICK:{evid:156,src:16,endpoint:"editor",fields:{biToken:"string",businessId:"string",referral_info:"string"}}};return{wixBookingsEvents:e,registerEvents:function(n){n.documentServices.bi.register("components","event",e)}}}),define("wixBookings/common/bi/wixBookingsBi",["wixBookings/common/bi/wixBookingsEvents"],function(e){"use strict";return{events:e.wixBookingsEvents,registerEvents:e.registerEvents}}),define("wixBookings/common/editorActionsService",["tpa","superAppMenuInfra","helpIds","experiment","wixBookings/common/dataProvider","wixBookings/common/sitePrefsService","constants","wixBookings/common/bi/wixBookingsBi"],function(e,n,i,t,o,p,a,s){"use strict";function r(){return v.documentServices.tpa.app.isInstalled(o.getAppDefID())}function l(){e.superApps.refreshAppCompsForAppDefId(o.getAppDefID())}function u(n,i,t,o){e.superApps.addWidget(n,i,t,{presetId:o,origin:e.constants.BI.type.ADD_WIDGET}),v.panelManager.closePanelByName(a.SUPER_APPS.BOOKINGS_PANEL_NAME)}function g(){n.button.registerButton(v,_,r(),P,x,w,I,S)}function d(){r()?g():p.ifPostRegRelevant(v.documentServices.generalInfo.getMetaSiteId()).then(g).catch(function(){})}function c(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";(n=n||{to:"dd"}).onClose=l,i&&(n.state=i);var t={type:e.constants.BI.type.APP_MANAGE_BUTTON};return e.superApps.openDashboardUrl(o.getAppDefID(),B,k,n,t)}function m(){n.button.unRegisterButton(v,P)}function f(){var n=o.getAppDefID(),i=function(e){return function(e){var n=e&&e.instance.split(".")[1];return n&&JSON.parse(window.atob(n))}(A())[e]}("biToken"),t=A().instanceId;v.bi.event(s.events.UPGRADE_POPUP_CLICKs,{biToken:i,businessId:t,referral_info:"editor_button"}),e.superApps.upgrade(n,!0,"edhtml_TOP_PANEL")}function A(){return v.documentServices.tpa.app.getDataByAppDefId(o.getAppDefID())}var B="100%",k="100%",_=o.superAppId,P=o.superAppPanelName,x=o.superAppButtonLabel,w=o.superAppButtonLabel,S=o.superAppSymbolName,I=o.superAppPanelClassName,v=void 0;return{init:function(e){v=e},isBizMgrImprovementEnabled:function(){if(t.isOpen("se_wixBooking_bizMgrImprovement")){var n=A();return e.dashboardApps.appHasBusinessManager(v,n.appDefinitionId)}return!1},isAppInstalled:r,isAppProvisioned:function(){var e=!v.documentServices.generalInfo.isFirstSave(),n=A().demoMode;return e&&v.documentServices.tpa.app.isAppProvisionedOnServer(o.getAppDefID())&&!n},addAppToSite:function(){e.superApps.addApp(o.getAppDefID(),{callback:function(n){n.page&&v.pages.navigateTo(n.page.id,function(){var i=e.superApps.getSectionRefByPageId(n.page.id);v.selection.selectComponentByCompRef(i)})},origin:e.constants.BI.type.ADD_APP_APP_BUTTON})},onWidgetDrop:function(e,n){e.width=n.structure.layout.width,e.height=n.structure.layout.height,u(o.getAppDefID(),n.structure.data.widgetId,e,n.itemId)},onWidgetClick:function(e,n,i,t){u(o.getAppDefID(),e.data.widgetId,void 0,t)},onAppInstalled:function(){n.button.onAppInstalled(v,_,P,x,I,S)},openBackOfficeInEditor:c,manageBookings:function(){c(null,arguments.length>0&&void 0!==arguments[0]?arguments[0]:""),v.bi.event(s.events.MANAGE_PANEL_BUTTON_CLICK,{app_id:o.getAppDefID(),button_name:"manage"})},goToContainingPage:function(){var e=o.getAppDefID(),n=v.documentServices.tpa.app.getFirstAppCompPageId(e);n&&v.pages.navigateTo(n.pageId)},registerButtonIfRequired:d,openHelp:function(){var e={origin:a.BI.HELP.ORIGIN.LEFTBAR,panel_name:P,learn_more:!0};v.panelManager.openHelpCenter(i.WIX_BOOKINGS,null,e)},onAppDeleted:m,handelUpgrade:f}}),define("wixBookings/appMenu/panels/firstTimeTour/promotionalFlow/promotionalStep1.rt",["react","lodash","superAppMenuInfra","wixBookings/common/dataProvider"],function(e,n,i,t){"use strict";return function(){return e.createElement(i.firstTimeTourPanels.installAppSlide,n.assign({},{installApp:this.installApp,origin:"promotionalPanel",appWasManuallyInstalled:this.props.appWasManuallyInstalled,superAppPanelName:t.superAppPanelName,superAppButtonLabel:t.superAppButtonLabel,superAppPanelClassName:t.superAppPanelClassName,superAppSymbolName:t.superAppSymbolName,title:"SiteApp_WixBookings_PromotionalFTUE_Step1_Title",subTitle:"SiteApp_WixBookings_PromotionalFTUE_Step1_SubTitle",pros:["SiteApp_WixBookings_PromotionalFTUE_Step1_Bullet1","SiteApp_WixBookings_PromotionalFTUE_Step1_Bullet2","SiteApp_WixBookings_PromotionalFTUE_Step1_Bullet3"],nextButtonLabel:"SiteApp_WixBookings_PromotionalFTUE_Step1_NextButton_Caption",openAppMarketLabel:"SiteApp_Blog_PromotionalFTUE_Step1_SeeInAppMarket_LinkCaption",openAppMarket:this.openHelp,loadingLabel:"SiteApp_WixBookings_PromotionalFTUE_Step2_Loader_Caption",sliderImages:this.getSliderImages(),installImage:"bookingsInstallBtnPromotional"},this.filteredProps()))}}),define("wixBookings/appMenu/panels/firstTimeTour/promotionalFlow/promotionalStep1",["create-react-class","util","wixBookings/common/editorActionsService","wixBookings/appMenu/panels/firstTimeTour/promotionalFlow/promotionalStep1.rt"],function(e,n,i,t){"use strict";return e({displayName:"promotionalStep1Bookings",mixins:[n.propTypesFilterMixin],installApp:function(e){i.addAppToSite(),e()},openHelp:function(){i.openHelp()},getSliderImages:function(){return[n.media.getMediaUrl("wixBookings/appMenuPanel/gallery/bookingsGallery01.png"),n.media.getMediaUrl("wixBookings/appMenuPanel/gallery/bookingsGallery02.png"),n.media.getMediaUrl("wixBookings/appMenuPanel/gallery/bookingsGallery03.png")]},render:t})}),define("wixBookings/appMenu/panels/firstTimeTour/templateFlow/templateStep1.rt",["react","lodash","superAppMenuInfra"],function(e,n,i){"use strict";return function(){return e.createElement(i.firstTimeTourPanels.getStartedSlide,n.assign({},{nextSlide:this.openBackOffice,superApp:this.props.superApp,appWasManuallyInstalled:this.props.appWasManuallyInstalled,title:"SiteApp_WixBookings_TemplateFTUE_Step1_Title",subTitle:"SiteApp_WixBookings_TemplateFTUE_Step1_SubTitle",pros:[],nextButtonLabel:"SiteApp_WixBookings_TemplateFTUE_Step1_NextButton_Caption",mainImage:"bookingsManager"},this.filteredProps()))}}),define("wixBookings/appMenu/panels/firstTimeTour/templateFlow/templateStep1",["create-react-class","prop-types","lodash","util","wixBookings/common/editorActionsService","wixBookings/appMenu/panels/firstTimeTour/templateFlow/templateStep1.rt"],function(e,n,i,t,o,p){"use strict";return e({displayName:"templateStep1Bookings",propTypes:{nextSlide:n.func},mixins:[t.propTypesFilterMixin],componentDidMount:function(){o.isAppProvisioned()?this.props.nextSlide():o.goToContainingPage()},openBackOffice:function(){o.openBackOfficeInEditor(),this.props.nextSlide()},render:p})}),define("wixBookings/appMenu/panels/manageBookings/manageBookingsPanel.rt",["react","lodash","superAppMenuInfra","util","baseUI","baseUILib"],function(e,n,i,t,o,p){"use strict";return function(){return e.createElement("div",{className:"wix-bookings-manage-panel"},e.createElement(p.CustomScroll,{heightRelativeToParent:"100%"},e.createElement("div",{className:"manage-bookings"}),e.createElement("p",{className:"manage-panel-description"},e.createElement("span",{},t.translate("SiteApp_WixBookings_Manage_Instructor"))),e.createElement("div",{className:"buttons-container"},e.createElement("div",{},e.createElement(o.button,{className:"btn-confirm-primary manage-btn",label:this.getOpenBackofficeLabel(),onClick:function(){this.openBookingsManager()}.bind(this)})))))}}),define("wixBookings/appMenu/panels/manageBookings/manageBookingsPanel",["create-react-class","lodash","util","wixBookings/common/editorActionsService","wixBookings/appMenu/panels/manageBookings/manageBookingsPanel.rt"],function(e,n,i,t,o){"use strict";return e({displayName:"manageBookingsPanel",mixins:[i.propTypesFilterMixin],openBookingsManager:function(){t.isBizMgrImprovementEnabled()?t.manageBookings("scheduler/owner/offerings"):t.manageBookings()},getOpenBackofficeLabel:function(){return t.isBizMgrImprovementEnabled()?"SiteApp_WixBookings_Manage_Services":"SiteApp_WixBookings_Manage_OpenBackOffice"},render:o})}),define("wixBookings/addPanel/serviceWidget",["wixBookings/common/editorActionsService","addPanelDataConsts"],function(e,n){"use strict";var i=n;return{type:i.SECTIONS_TYPES.PRESET,hide:!1,title:"SiteApp_WixBookings_AddElement_Service",showSectionHeader:!0,additionalBehaviours:{labelMode:i.LABEL_BEHAVIOUR.ALWAYS,infoIcon:i.INFO_ICON_BEHAVIOUR.NONE,hoverImageAction:i.HOVER_IMAGE_ACTIONS.NONE,scaleProportion:i.DEFAULT_SCALE_FOR_PRESET,iconEnabledForComps:[]},props:{image:"wixBookings/addPanel/service_widget.png",imageHover:null,onDrop:e.onWidgetDrop,onClick:e.onWidgetClick,items:[{id:"Wix_Bookings_Service_Widget1",structure:{type:"Component",skin:"wysiwyg.viewer.skins.TPAWidgetSkin",layout:{width:850,height:360,scale:1,rotationInDegrees:0,fixedPosition:!1},componentType:"wysiwyg.viewer.components.tpapps.TPAWidget",data:{type:"TPAWidget",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},applicationId:"2269",tpaData:{type:"TPAData",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},content:'"{"buttonStyle":"border"}"'},widgetId:"14756c3d-f10a-45fc-4df1-808f22aabe80"},style:{type:"TopLevelStyle",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},style:{properties:{},propertiesSource:{},groups:{}},componentClassName:"wysiwyg.viewer.components.tpapps.TPAWidget",pageId:"",compId:"",styleType:"custom",skin:"wysiwyg.viewer.skins.TPAWidgetSkin"},mobileStructure:{layout:{width:280,height:583,x:20,y:10,scale:1,rotationInDegrees:0,fixedPosition:!1},isCustomPreset:!0}},preset:{rect:{width:324,height:164,x:0,y:0},label:"",tags:null}}],compTypes:["wysiwyg.viewer.components.tpapps.TPAWidget"]},help:{hide:!1,text:"SiteApp_WixBookings_AddElement_Info"}}}),define("wixBookings/addPanel/wixBookingsAddPanelSections",["wixBookings/addPanel/serviceWidget"],function(e){"use strict";return function(){return[e]}}),define("wixBookings/appMenu/superApp",["util","wixBookings/common/dataProvider","wixBookings/common/editorActionsService","wixBookings/appMenu/panels/firstTimeTour/promotionalFlow/promotionalStep1","wixBookings/appMenu/panels/firstTimeTour/templateFlow/templateStep1","wixBookings/appMenu/panels/manageBookings/manageBookingsPanel","wixBookings/addPanel/wixBookingsAddPanelSections","lodash"],function(e,n,i,t,o,p,a,s){"use strict";var r={id:n.superAppId,appDefId:n.getAppDefID(),appName:"WixBookings",firstTimeTour:{templateFlow:[o],manuallyInstalledFlow:[o],promotionalFlow:[t]},panel:{name:"wixBookings.panels.bookingsPanel",manage:{title:"SiteApp_WixBookings_Menu_ManageBookings",helpId:"bf44fdcd-7f35-41a2-a04a-93a0a821e55d",template:p},pages:{isHidden:!0},addElements:{title:"SiteApp_WixBookings_AddElement_Title",helpId:"fb8a363d-c55d-4a8e-bd0b-cb7d5bcb85d5",sections:a,categoryId:n.getAddElementCategoryId()},learnMore:{title:"SiteApp_WixBookings_Learn_Title",section2HeaderViewA:"SiteApp_WixBookings_Learn_Forum",section3HeaderViewA:"SiteApp_WixBookings_Learn_Blog",data:{viewA:{helpCenterPopUp:{isHidden:!0},supportForumsPopUp:{link:"https://support.wix.com/en/wix-bookings/setting-up-wix-bookings/?locale={{lang}}",image:e.media.getMediaUrl("superAppMenuInfra/ViewTheBlogHelpCenter.png")},wixTipsBlog:{link:"http://www.wix.com/blog/tag/wix-bookings/",image:e.media.getMediaUrl("superAppMenuInfra/OpenTheBlogSupportForum.png")}}}}},openAppPremiumPackagePicker:function(){i.handelUpgrade()},isAppInstalled:i.isAppInstalled},l=function(e){var n=e.getLanguageCode(),i=s.get(r,"panel.learnMore.data.viewA.supportForumsPopUp.link");r.panel.learnMore.data.viewA.supportForumsPopUp.link=i.replace("{{lang}}",n)};return{getWixBookingsSuperApp:function(e,i,t){return r.hasPremiumPlan=e,r.upgradeLinkText="SiteApp_WixBookings_Upgrade_link",r.tooltip={upgrade:{title:"SiteApp_WixBookings_UpgradeTooltip_Title",text:"SiteApp_WixBookings_UpgradeTooltip_Paragraph1",label:"SiteApp_WixBookings_UpgradeTooltip_Button_Label",image:"menubarUpgradePromotionDark"}},t.isOpen("se_wixBooking_UpgradeLink")?r.isPremium=function(e){return n.hasPremium(e)}:r.isPremium=function(){return!0},l(i),r}}}),define("wixBookings/appMenu/bookingsPanel.rt",["react","lodash","superAppMenuInfra","wixBookings/common/dataProvider","wixBookings/appMenu/superApp"],function(e,n,i,t,o){"use strict";return function(){return e.createElement(i.superAppPanel,n.assign({},{superApp:this.getSuperApp(),selectedTabName:this.props.selectedTabName,panelClass:t.superAppPanelClassName},this.filteredProps()))}}),define("wixBookings/appMenu/bookingsPanel",["create-react-class","core","lodash","util","experiment","wixBookings/appMenu/superApp","wixBookings/appMenu/bookingsPanel.rt"],function(e,n,i,t,o,p,a){"use strict";return e({displayName:"BookingsPanel",mixins:[t.propTypesFilterMixin,n.mixins.editorAPIMixin],getSuperApp:function(){var e=this.getEditorAPI(),n=this.getEditorAPI().account.isUserOwner();return p.getWixBookingsSuperApp(n,e,o)},render:a})}),define("wixBookings",["tpa","wixBookings/appMenu/bookingsPanel","wixBookings/common/dataProvider","wixBookings/common/editorActionsService","wixBookings/common/bi/wixBookingsEvents"],function(e,n,i,t,o){"use strict";return{onPreviewReady:function(n){n.documentServices&&(t.init(n),t.registerButtonIfRequired(),o.registerEvents(n),e.superApps.registerOnAppInstalled(i.getAppDefID(),t.onAppInstalled),e.superApps.registerOnAppDeleted(i.getAppDefID(),t.onAppDeleted))},panels:{bookingsPanel:n}}});
//# sourceMappingURL=wixBookings.min.js.map