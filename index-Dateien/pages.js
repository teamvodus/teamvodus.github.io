function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();define("pages/utils/pageCategories",["lodash","util"],function(e,t){"use strict";var n=t.translate;return{MAIN_MENU:{id:"CUSTOM_MAIN_MENU",title:n("NewPages_Panel_Left_SiteMenu_Label"),flatMenuTitle:n("NewPages_QuickNav_Site_Pages_Label"),helpId:"8278a5f6-119c-412e-8b01-4bd0955cb307",mobileHelpId:"1aeed4d9-19a1-44b7-beec-7bc38a9d4d99",group:"menus"},MEMBERS_MENU:{id:"MEMBERS_SUB_MENU",title:n("NewPages_Panel_Left_MembersMenu_Label"),helpId:"ab4d4af2-0a5a-4ad9-93fe-dbf42f22d2ca",mobileHelpId:"8fa70d57-3d09-4f0b-a966-7ef2475e3f1b",group:"menus"},MENUS:{id:"MENUS",group:"menus",helpId:"8278a5f6-119c-412e-8b01-4bd0955cb307",biCategory:"custom menu",getBiCategory:function(t){return e.includes(["CUSTOM_MAIN_MENU","MEMBERS_SUB_MENU"],t)?t:"CUSTOM_MENU"},titleAdd:n("NewPages_Panel_AddPage_Button")},SPECIAL_PAGES:{group:"special_pages",getBiCategory:function(e,t){if(e===t)return"members"}},APPLICATION_PAGES:{group:"application_pages"},MEMBERS_PAGES:{helpId:"7710f007-cbdb-4b77-bb8b-fd4d65424ab1"},TPA_PAGES:{id:"TPA_PAGES",group:"tpa_pages",titleAdd:n("NewPages_Panel_AddPage_Button"),getBiCategory:function(e){return"tpa_"+e}},DYNAMIC_PAGES_INTRO:{id:"DYNAMIC_PAGES_INTRO",helpId:"4d88ab53-0157-47aa-9c19-0d5762fcb82b",title:"NewPages_Panel_Left_DynamicPage_Label",group:"dynamic_pages",biCategory:"dynamic_page_intro"},DYNAMIC_PAGES:{id:"DYNAMIC_PAGES",helpId:"1e76f0cc-531a-45b3-bfe0-8907cf391fca",mobileHelpId:"4eda8656-f16f-4ddd-9c80-4b80eef09686",group:"dynamic_pages",biCategory:"router"},ROUTER_PAGES:{id:"ROUTER_PAGES",helpId:"aa6cebfb-a948-4767-bb0e-a60cb8fa9146",mobileHelpId:"4b873e86-b218-4589-b84b-8070c775f3c4",group:"dynamic_pages",biCategory:"router"},POPUPS:{id:"POPUPS",title:"POPUPS_SiteStructure_Panel_Popups",helpId:"24659a21-11c8-41e1-9752-5822677154a0",mobileHelpId:"05438eeb-262a-49e0-a59b-dfda242c5609",group:"popups",biCategory:"lightbox",titleAdd:n("POPUPS_SiteStructure_Panel_Button_Add")},TRANSITIONS:{id:"TRANSITIONS",title:"NewPages_Panel_Transitions_Title",group:"transitions",biCategory:"transitions"}}}),define("pages/panel/pagesView/editorAPIConnectors/getActions",["lodash","util","core","tpa","coreBi","platform"],function(e,t,n,a,i,s){"use strict";var o=["1380b703-ce81-ff05-f115-39571d94dfcd"],r="Pages_Actions_Page_Rename",l=["Pages_Actions_Page_Rename","page_rename"],p=function(e,t,n,a){e.bi.event(i.events.pages.pagesPanel.quick_actions_menu_select,{page_id:t,source:a,category:n})},u=function(e,t,n){e.bi.event(i.events.pages.pagesPanel.tab_clicked_an_item_at_settings_menu,{source:n,category:t})},c=function(t,n,a,i){return function(s){var o=e.defaults(i,{origin:"pagesPanel",publicUrl:t.documentServices.generalInfo.getPublicUrl(),pageRef:s?t.documentServices.pages.getReference(s):null});t.documentServices.platform.notifyApplication(n,{eventType:a,eventPayload:o})}},d=function(e,n,a){return{title:t.translate("Pages_Actions_Page_Settings"),symbolName:"settingsAction",onClick:function(t){e({pageId:t,tabType:"page"}),p(n,t,"tabPageInfo",a)},isSettings:!0}};return{dynamicPage:function(t,n,a,i,o,l,u){if(!l)return null;var d=[];if(t.developerMode.isEnabled()){var g=t.pages.dynamicPages.getDynamicPageActions(n,"pageActions");d=e.map(g,function(n){var s=n.title,o=n.icon,l=n.type,d=n.event,g=c(t,a,d,{routerRef:i});return{title:s,symbolName:l===r?"renameAction":o,onClick:function(n,a){if(l===r){t.pages.data.update(n,{title:a});var i=e.get(t.pages.data.get(n),"title");s!==i&&t.history.debouncedAdd("Rename Page")}else g(n);p(t,n,s,u||"router")},isRename:l===r}})}var m=t.pages.dynamicPages.getDynamicPageActions(n,"pageSettings",[s.constants.pages.page_settings.pageInfo.type,s.constants.pages.page_settings.seo.type]),f=e.map(m,function(e){return{title:e.title,symbolName:e.icon,onClick:function(a){o({pageId:n,tabType:e.type}),p(t,a,e.title,u||"router")},isSettings:!0}});return[].concat(_toConsumableArray(f),_toConsumableArray(d))},tpaPage:function(n,a,i){return i?[d(a,n,"tpa_pages"),{title:t.translate("Pages_Actions_Page_Rename"),symbolName:"renameAction",onClick:function(t,a){a!==e.get(n.pages.data.get(t),"title")&&(n.pages.data.update(t,{title:a}),n.history.debouncedAdd("Rename Page"),p(n,t,"rename","tpa_pages"))},isRename:!0},{title:t.translate("Pages_Actions_Page_Delete"),symbolName:"deleteAction",onClick:function(e){n.pages.remove(e,function(){return n.history.add("removing a page",{currentPage:e})}),p(n,e,"delete","tpa_pages")}}]:null},tpaSubPage:function(e,t,n){return n?[d(t,e,"tpa_pages")]:null},popup:function(a,s,o,r){return s?[{title:t.translate("Pages_Actions_Page_Settings"),symbolName:"settingsAction",onClick:function(e){var t=a.pages.popupPages.getPopupContainer();a.selection.selectComponentByCompRef(t),a.openComponentPanel("settingsPanel",{initiatorName:"quickActions"}),p(a,e,"open_popup_settings_panel","lightbox")},isSettings:!0},{title:t.translate("Pages_Actions_Page_Rename"),symbolName:"renameAction",onClick:function(t,n){n!==e.get(a.pages.data.get(t),"title")&&(a.pages.data.update(t,{title:n}),a.history.debouncedAdd("Rename Page"),p(a,t,"rename","lightbox")),r()},isRename:!0},{title:t.translate("Pages_Actions_Page_Duplicate"),symbolName:"duplicateAction",onClick:function(e,t){var i=a.pages.popupPages.duplicate(e),s=n.utils.pageTitleUtils.generateDuplicatedTitle(t),r=a.documentServices.generalInfo.urlFormat.isSlash()?a.pages.data.pageUriSEO.convertPageNameToUrl:n.utils.pageTitleUtils.convertPageNameToUrl;a.pages.data.update(i.id,{title:s,pageUriSEO:r(s)}),a.pages.navigateTo(i.id),a.history.add("popup page was duplicated",{currentPage:e}),o(i.id),p(a,e,"duplicate","lightbox")}},{title:t.translate("Pages_Actions_Page_Delete"),symbolName:"deleteAction",onClick:function(t,n){a.documentServices.waitForChangesApplied(function(){a.pages.remove(t,e.partial(a.history.add,"removed popup"))}),a.bi.event(i.events.topbar.pages.page_or_pop_up_deleted,{page_or_popup:"pop up",page_popup_string_id:t,page_popup_name:n}),p(a,t,"delete","lightbox")}}]:null},tpaTab:function(n,i,s){if(!e.includes(o,i)||!s)return null;return[{title:t.translate("NewPages_Panel_StorePages_Panel_Manage"),symbolName:"settingsAction",onClick:function(){a.superApps.openDashboardUrl(a.superApps.superAppsConstants.ECOM_APP_DEF_ID,"90%","100%"),u(n,"manage","tpa_pages")}}]},menuTab:function(t,n,a){if(!a||!n)return null;var i=t.pages.dynamicPages.getActionByAppDefId(n,"routerActions"),s=e.get(t.documentServices.platform.getAppDataByAppDefId(n),"applicationId");return e.map(i,function(e){return{title:e.title,symbolName:e.icon,onClick:e.callback||c(t,s,e.event)}})},router:function(t,n,a,i,s,o){if(!n||!t.developerMode.isEnabled()&&!o)return null;var r=t.documentServices.routers.getRouterRef.byPrefix(i),l=t.pages.dynamicPages.getRouterActionByPrefix(i);return e.map(l,function(e){var n=e.title,i=e.icon,o=e.event,l=e.type,p=e.callback,d=c(t,a,o,{routerRef:r});return{title:n,symbolName:i,type:l,event:o,onClick:function(e){p?p(e):d(e),u(t,n,s||"router")}}})},application:function(t,n,a,i){if(!a||!n)return null;var s=e.get(t.documentServices.platform.getAppDataByAppDefId(n),"applicationId"),o=t.pages.appPages.getApplicationActions(n);return e.map(o,function(e){var n=e.title,a=e.icon,o=e.event,r=e.callback,l=e.type,p=c(t,s,o);return{title:n,type:l,event:o,symbolName:a,onClick:function(e){r?r(e):p(e),u(t,n,i)}}})},applicationPage:function(t,n,a,i,o,u,d){if(!i)return null;var g=e.get(t.documentServices.platform.getAppDataByAppDefId(a),"applicationId"),m=t.pages.appPages.getPageActions(a),f=e.map(m,function(n){var a=n.title,i=n.icon,s=n.type,u=n.event,m=c(t,g,u),f=e.includes(l,s);return{title:a,symbolName:f?"renameAction":i,onClick:function(n,i){if(s===r){t.pages.data.update(n,{title:i}),d();var l=e.get(t.pages.data.get(n),"title");a!==l&&t.history.debouncedAdd("Rename Page")}else m(n);p(t,n,a,o||"router")},isRename:s===r}}),b=t.pages.appPages.getPageSettings(a,[s.constants.pages.page_settings.pageInfo.type,s.constants.pages.page_settings.seo.type]),y=e.map(b,function(e){return{title:e.title,symbolName:e.icon,onClick:function(a){u({pageId:n,tabType:e.type}),p(t,a,e.title,o)},isSettings:!0}});return[].concat(_toConsumableArray(y),_toConsumableArray(f))},getOnClickApplicationNotification:c}}),define("pages/panel/pagesView/page/page.rt",["react","lodash","util","baseUILib","symbols"],function(e,t,n,a,i){"use strict";return function(){function s(){var n=this.getActions(),s=this.getSettingsActions();return e.createElement.apply(this,[a.ContextMenu,{className:"context-menu flat page-actions",key:"page-context-menu",automationId:"page-context-menu",onToggle:this.handleContextMenuToggle},t.map(s,function(t,n,s,o){return e.createElement(a.ContextMenuAction,{onClick:function(e,t,n,a){this.handleClickAction(n)}.bind(this,t,n,s,o),key:"action-"+s.title,automationId:"action-"+s.title,className:"page-settings-action-pp"},e.createElement(i.symbol,{name:s.symbolName}),e.createElement("span",{},s.title))}.bind(this,n,s)),t.isEmpty(n)||t.isEmpty(s)?null:e.createElement(a.Divider,{key:"divider"}),t.map(n,function(t,n,s,o){return e.createElement(a.ContextMenuAction,{onClick:function(e,t,n,a){this.handleClickAction(n)}.bind(this,t,n,s,o),key:"action-"+s.title,automationId:"action-"+s.title},e.createElement(i.symbol,{name:s.symbolName}),e.createElement("span",{},s.title))}.bind(this,n,s))])}return e.createElement("div",{className:"page-pp "+t({selected:this.props.isSelected}).transform(function(e,t,n){t&&e.push(n)},[]).join(" ")},null===this.state.inputValue?e.createElement("div",{className:"title-container",key:"title-container-page-pp",onClick:function(){this.props.onClick(this.props.id)}.bind(this),onDoubleClick:this.onDoubleClick},e.createElement("div",{className:"left-container"},e.createElement(a.Tooltip,{disabled:!this.props.info,content:this.props.info,shouldTranslate:!1,arrowAlignment:"top",key:"tooltip-type-symbol-pp"},this.props.typeSymbol?e.createElement(i.symbol,{name:this.props.typeSymbol,key:"typeSymbol-pp"}):null),e.createElement(a.TooltipOnEllipsis,{marginTop:5,contentClassName:"title"},this.props.title)),e.createElement("div",{className:"right-container"},this.props.permissionSymbol?e.createElement(i.symbol,{name:this.props.permissionSymbol,key:"permissionSymbol-pp"}):null,this.props.actions&&this.props.actions.length>1?s.apply(this,[]):null,this.props.actions&&1===this.props.actions.length?function(){var t=this.props.actions[0];return e.createElement(a.Button,{className:"single-action page-actions",onClick:function(e){this.handleClickAction(e)}.bind(this,t),key:"page-single-action"},e.createElement(i.symbol,{name:t.symbolName}))}.apply(this,[]):null)):null,null!==this.state.inputValue?function(){var t=n.validate.pageNameValidator(this.state.inputValue);return e.createElement("div",{className:"input-button-container",key:"input-container-page-pp"},e.createElement(a.TextInput,{value:this.state.inputValue,onChange:this.handleChangeInput,isValid:!t,invalidMessage:n.translate(t),shouldTranslate:!1,selectOnFocus:!0,maxLength:40,onBlur:this.handleBlurInput,autoSelect:!0}),e.createElement(a.Button,{className:"done-button",disabled:t},"\n            ",n.translate("Pages_Actions_Rename_Button"),"\n        "))}.apply(this,[]):null)}}),define("pages/panel/pagesView/page/page",["react","prop-types","lodash","util","coreBi","pages/panel/pagesView/page/page.rt"],function(e,t,n,a,i,s){"use strict";var o=function(t){function o(e){_classCallCheck(this,o);var t=_possibleConstructorReturn(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e));return t.state={inputValue:e.mountInRenameMode?e.title:null},t.handleClickAction=function(e){e.isRename?t.openRenameMode():e.onClick(t.props.id,t.props.title)},t.handleContextMenuToggle=function(e){e&&t.props.biEvent(i.events.pages.pagesPanel.page_actions_click,{page_id:t.props.id,source:t.props.biCategory})},t.openRenameMode=function(){return t.setState({inputValue:t.props.title})},t.onDoubleClick=function(){n.filter(t.props.actions,"isRename")[0]&&t.props.renameEnabled&&t.openRenameMode()},t.handleChangeInput=function(e){return t.setState({inputValue:e})},t.handleBlurInput=function(){var e=!a.validate.pageNameValidator(t.state.inputValue)?t.state.inputValue:t.props.title;n.filter(t.props.actions,"isRename")[0].onClick(t.props.id,e),t.setState({inputValue:null})},t.getSettingsActions=function(){return n.filter(t.props.actions,"isSettings")},t.getActions=function(){return n.reject(t.props.actions,"isSettings")},t}return _inherits(o,e.Component),_createClass(o,[{key:"componentWillReceiveProps",value:function(e){var t=this.state.inputValue===this.props.title,n=e.title!==this.props.title,a=null!==this.state.inputValue;(t&&n||e.mountInRenameMode!==this.props.mountInRenameMode&&!a)&&this.setState({inputValue:e.title})}},{key:"render",value:function(){return s.call(this)}}]),o}();return o.displayName="Page",o.propTypes={id:t.string.isRequired,title:t.string.isRequired,onClick:t.func.isRequired,actions:t.arrayOf(t.shape({title:t.string.isRequired,onClick:t.func.isRequired,symbolName:t.string.isRequired,isRename:t.bool})),isSelected:t.bool,info:t.string,mountInRenameMode:t.bool,renameEnabled:t.bool.isRequired,typeSymbol:t.string,permissionSymbol:t.string,biEvent:t.func.isRequired,biCategory:t.string.isRequired},o}),define("pages/panel/pagesView/pagesView.rt",["react","lodash","util","baseUILib","symbols","pages/panel/pagesView/page/page","platformPanels"],function(e,t,n,a,i,s,o){"use strict";return function(){function n(){var n=this.props.onClickAdd&&!this.props.emptyStateUrl;return e.createElement("div",{className:"pages-view-pp"},e.createElement(a.PanelHeader,{onClose:this.props.onClose,onHelp:this.props.onHelp,className:"header light"},e.createElement("span",{className:"title-pages-view-pp"},this.props.title)),e.createElement("div",{className:t({"pages-container-outer":!0,"with-footer":n}).transform(function(e,t,n){t&&e.push(n)},[]).join(" ")},e.createElement(a.CustomScroll,{},this.props.pages.length>0?e.createElement.apply(this,["ul",{className:"pages-container-inner",key:"pages-container"},t.map(this.props.pages,function(t,n,a){return e.createElement("li",{className:"page-container",key:"li-"+n.id},e.createElement(s,{id:n.id,title:n.title,info:n.info,typeSymbol:n.typeSymbol,permissionSymbol:n.permissionSymbol,mountInRenameMode:this.props.renamedItemId===n.id,actions:n.actions,biEvent:this.props.biEvent,biCategory:this.props.biCategory,renameEnabled:this.props.renameEnabled,isSelected:this.props.selectedPageId===n.id,onClick:this.handleClickItem}))}.bind(this,n))]):null,this.props.emptyStateUrl?e.createElement(o.PlatformPanelApplicationFrame,{token:this.generatePanelToken(),key:"emptyStatePanel",url:this.props.emptyStateUrl,initialData:this.props.initialData,panelClass:"appEmptyState"}):null)),n?e.createElement("footer",{className:"add-container",key:"add-container"},e.createElement(a.Button,{className:"add-button",onClick:this.props.onClickAdd},e.createElement(i.symbol,{name:"addPagePagesPanel"}),e.createElement("span",{},this.props.titleAdd))):null)}return n.apply(this,[])}}),define("pages/panel/pagesView/pagesView",["lodash","react","prop-types","platform","pages/panel/pagesView/pagesView.rt"],function(e,t,n,a,i){"use strict";var s=function(e){function n(e){_classCallCheck(this,n);var t=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.handleClickItem=function(e){t.props.navigateTo(e)},t}return _inherits(n,t.Component),_createClass(n,[{key:"generatePanelToken",value:function(){return a.tokenService.generatePanelToken(this.props.appDefinitionId)}},{key:"render",value:function(){return i.call(this)}}]),n}();return s.displayName="PagesView",s.propTypes={title:n.string.isRequired,onClose:n.func.isRequired,onHelp:n.func.isRequired,navigateTo:n.func.isRequired,pages:n.arrayOf(n.shape({id:n.string.isRequired,title:n.string.isRequired,info:n.string,actions:n.arrayOf(n.shape({title:n.string.isRequired,onClick:n.func.isRequired,symbolName:n.string.isRequired,isRename:n.bool})),typeSymbol:n.string,permissionSymbol:n.string})).isRequired,selectedPageId:n.string,titleAdd:n.string,onClickAdd:n.func,onShowSettings:n.func,renamedItemId:n.string,renameEnabled:n.bool.isRequired,biEvent:n.func.isRequired,biCategory:n.string.isRequired},s}),define("pages/panel/pagesView/editorAPIConnectors/popupView",["lodash","util","higherOrderComponents","stateManagement","pages/utils/pageCategories","pages/panel/pagesView/editorAPIConnectors/getActions","coreBi","pages/panel/pagesView/pagesView"],function(e,t,n,a,i,s,o,r){"use strict";var l=function(n,a){var i=function(n,a){return e.template(t.translate(n))(a)},s=a.length,o=i("Pages_Menu_Popup_Tooltip_Start_Section",{$PAGE_NAME:e.truncate(e.head(a))}),r=i("Pages_Menu_Popup_Tooltip_End_Section",{$PAGE_NAME:e.truncate(e.last(a))}),l=void 0;if(1===s)l=o;else if(2===s)l=o+" "+r;else{l=e.reduce(e.slice(a,1,-1),function(t,n){return t+" "+i("Pages_Menu_Popup_Tooltip_Middle_Section",{$PAGE_NAME:e.truncate(n)})},o)+" "+r}return l};return n.connectEditorAPI(function(n,r){var p=r.popups,u=r.pagesData,c=r.onItemAdded,d=r.onRename,g=r.onHelp,m=r.isDesktop,f=r.biPanelName;return{pages:function(n,a,i,o,r,p){var u=s.popup(n,o,r,p),c=e.map(a,function(e){return{id:e.id,title:e.title,actions:u,typeSymbol:"popupPageType"}});return o?function(n,a,i){var s=n.pages.popupPages.getOpenBehaviorsForPopups(),o=e.zipObject(e.map(i,"id"),e.map(i,"title")),r=e.groupBy(s,"popupId"),p=n.documentServices.siteSegments.getSiteStructureId();return e.map(a,function(a){var i=r[a.id],s=!!i&&i[0].pageId===p,u=e.map(i,"pageId");if(s)return a.info=t.translate("Pages_Menu_Popup_Tooltip_Set_To_All"),a;var c=e.map(u,e.partial(e.get,o));return c.length>0&&(a.info=l(n,c)),a})}(n,c,i):c}(n,p,u,m,c,d),onClickAdd:function(e,t){return t?function(){e.store.dispatch(a.editorPlugins.userPreferences.actions.setSessionUserPreferences("addPanelCategoryIdOnClose","popup")),e.store.dispatch(a.editorPlugins.leftBar.actions.openAddPanel()),e.bi.event(o.events.pages.pagesPanel.add_page_selection_click,{category:"popup",source:"lightbox"})}:null}(n,m),navigateTo:function(e,t){return function(n){e.documentServices.pages.getFocusedPageId()!==n&&(e.pages.navigateTo(n,function(){e.selection.selectComponentByCompRef(e.pages.popupPages.getPopupContainer(n))}),e.bi.event(o.events.pages.navigate_to_page,{page_id:n,panel_name:t,category:i.POPUPS.biCategory}))}}(n,f),renameEnabled:m,onHelp:m?e.partial(g,i.POPUPS.helpId):e.partial(g,i.POPUPS.mobileHelpId),titleAdd:i.POPUPS.titleAdd,biEvent:n.bi.event,biCategory:i.POPUPS.biCategory}})(n.renderWhenMutated(r))}),define("pages/panel/menuView/utils/menuDataGetterUtil",["pages/utils/pageCategories"],function(e){"use strict";return{getMenuTabNameIfApplicable:function(t,n,a,i,s){return"CUSTOM_MAIN_MENU"===n?s?e.MAIN_MENU.flatMenuTitle:e.MAIN_MENU.title:a===t?e.MEMBERS_MENU.title:i},getHelpIdForMenu:function(t,n,a,i){return"CUSTOM_MAIN_MENU"===t?i?e.MAIN_MENU.helpId:e.MAIN_MENU.mobileHelpId:n===a?i?e.MEMBERS_MENU.helpId:e.MEMBERS_MENU.mobileHelpId:e.MENUS.helpId}}}),define("pages/panel/getPages",["lodash","util","core","pages/utils/pageCategories","experiment","pages/panel/menuView/utils/menuDataGetterUtil"],function(e,t,n,a,i,s){"use strict";var o="1380b703-ce81-ff05-f115-39571d94dfcd",r=[o],l=function(t){if(e.get(t,"pageSecurity.requireLogin"))return"membersPagePermission";return e.get(t,"pageSecurity.dialogLanguage")?"passwordPagePermission":null};return{dynamicPages:function(t,n){return e.map(n,function(e){var t=e.id,n=e.label,a=e.pageData;return{id:t,title:n,permissionSymbol:l(a)}})},popups:function(t){return e.map(t.pages.popupPages.getDataListOrdered(),function(e){return{id:e.id,title:e.title,biCategory:a.POPUPS.biCategory}})},tpas:function(s,p){var u=n.utils.tpaTypeUtils,c=e.filter(p,function(e){return e.tpaApplicationId>0}),d=e.groupBy(c,"tpaApplicationId"),g=function(a,i,r){return e(a).reject(function(e){return u.isPageNotVisibleInPagesMenu(s.dsRead,e)}).filter(function(e){return u.isTPASpecialPage(s.dsRead,e,!0)}).map(function(e){return{id:e.id,title:e.title,isSubPage:!0,permissionSymbol:l(e),biCategory:i,info:function(e,a){var i=n.utils.wixStoreTypeUtils;if(a===o){if(i.isWixStoreProductPage(e))return t.translate("Pages_Store_Product_Info_WhatisText");if(i.isWixStoreCartPage(e))return t.translate("Pages_Store_Cart_Info_WhatisText");if(i.isWixStoreThankYouPage(e))return t.translate("Pages_Store_Thankyou_Info_WhatisText")}}(e,r)}}).value()};return e(d).thru(Object.keys).map(function(n){var o=s.documentServices.tpa.app.getData(n),l=o.appDefinitionId,p=o.appDefinitionName,u=o.helpId,c=a.TPA_PAGES.getBiCategory(l);return e.includes(r,l)?{pagesData:g(d[n],c,l),id:l,typeSymbol:"storesPageType",title:t.translate("NewPages_Panel_Left_StorePages_Label"),helpId:"59a4a620-30b2-4c93-a27a-c9290141738c",mobileHelpId:"2d2d9e55-a955-4f45-97c4-76fc2436f297",biCategory:c}:i.isOpen("pagesAllTpas")?{pagesData:g(d[n],c,l),id:l,title:p,helpId:u,biCategory:c}:null}).compact().value()},routers:function(t){return e(t.pages.dynamicPages.getMenuItems()).reject(function(t){var n=t.items;return e.isEmpty(n)}).map(function(n){var i=n.id,s=n.label,o=n.items,r=n.prefix,l=t.documentServices.pages.getReference(o[0].id),p=t.documentServices.routers.getRouterRef.byPage(l),u=t.documentServices.routers.get.byRef(p).appDefinitionId,c=t.documentServices.platform.editorApps.SANTA_MEMBERS.appDefId,d=u===c,g=d?a.SPECIAL_PAGES.getBiCategory(u,c):a.DYNAMIC_PAGES.biCategory;return{id:i,title:s,pagesData:o,prefix:r,applicationId:e.get(t.documentServices.platform.getAppDataByAppDefId(u),"applicationId"),isSpecial:d,biCategory:g}}).compact().value()},pagesManagedByApps:function(t,n){var a=e.map(t.documentServices.platform.getInstalledEditorApps(),"appDefinitionId"),i=e.groupBy(n,"managingAppDefId");return e(a).map(function(n){var a=i[n]||[],s=t.pages.appPages.getApplicationSettings(n);return a.length>0?{id:n,title:e.get(s,"displayName"),pagesData:function(t){return e.map(t,function(e){return{id:e.id,title:e.title,permissionSymbol:l(e)}})}(a),biCategory:n,helpId:e.get(s,"helpId")}:s&&s.emptyState?{id:n,title:e.get(s,"displayName"),emptyStateUrl:e.get(s.emptyState,"url"),biCategory:n,helpId:e.get(s.emptyState,"helpId")||s.helpId}:null}).compact().value()},menus:function(t,n,a){var i=t.documentServices.platform.editorApps.SANTA_MEMBERS.appDefId,o=t.documentServices.menu.getAll();return e(o).filter(["id","CUSTOM_MAIN_MENU"]).map(function(e){var o=t.documentServices.platform.getAppDataByApplicationId(e.appId).appDefinitionId,r=t.menus.getExtendedMenuItemsTree(e,n);return{id:e.id,appDefId:o,menuItems:r.items,multiPageMenu:r.multiplePagesInMenu,title:s.getMenuTabNameIfApplicable(i,e.id,o,e.name,a)}}).value()}}}),define("pages/panel/pagesView/editorAPIConnectors/dynamicPagesView",["lodash","higherOrderComponents","pages/utils/pageCategories","pages/panel/pagesView/editorAPIConnectors/getActions","pages/panel/getPages","coreBi","pages/panel/pagesView/pagesView"],function(e,t,n,a,i,s,o){"use strict";var r={},l={},p=e.once(function(e){r[e.documentServices.platform.editorApps.SANTA_MEMBERS.appDefId]="membersAction",r[e.documentServices.platform.editorApps.DYNAMIC_PAGES.appDefId]="routerPageType",r[e.documentServices.platform.editorApps.DATA_BINDING.appDefId]="dynamicPageType"}),u=e.once(function(e){l[e.documentServices.platform.editorApps.DYNAMIC_PAGES.appDefId]=!0,l[e.documentServices.platform.editorApps.DATA_BINDING.appDefId]=!0});return t.connectEditorAPI(function(t,o){var c=o.router,d=c.title,g=c.pagesData,m=c.prefix,f=c.biCategory,b=c.actions,y=o.onShowSettings,P=o.isDesktop,h=o.onHelp,_=o.biPanelName;p(t),u(t);var I=t.documentServices.pages.getReference(g[0].id),v=t.documentServices.routers.getRouterRef.byPage(I),S=t.documentServices.routers.get.byRef(v).appDefinitionId,A=e.get(t.documentServices.platform.getAppDataByAppDefId(S),"applicationId"),C=function(t,n,i,o,r,p,u,c){if(!o||!t.developerMode.isEnabled()&&l[n])return{title:null,onClick:null};var d=e.find(r,["type","add_page"]);if(!d)return{title:null,onClick:null};var g=a.getOnClickApplicationNotification(t,i,d.event,{prefix:p,routerRef:u});return{title:d.title,onClick:function(e){t.bi.event(s.events.pages.pagesPanel.add_page_selection_click,{category:"dynamic page",source:c||"router"}),g(e)}}}(t,S,A,P,b,m,v,f);return{title:d,pages:function(t,n,s,o,l,p,u,c){var d=i.dynamicPages(t,n,s,o,l,p);return e.map(d,function(e){var n=e.id;return{id:n,title:e.title,permissionSymbol:e.permissionSymbol,typeSymbol:r[u],actions:a.dynamicPage(t,n,s,o,l,p,c)}})}(t,g,A,v,y,P,S,f),onHelp:function(t,a,i,s){return i===a.documentServices.platform.editorApps.DATA_BINDING.appDefId?t?e.partial(s,n.DYNAMIC_PAGES.helpId):e.partial(s,n.DYNAMIC_PAGES.mobileHelpId):i===a.documentServices.platform.editorApps.SANTA_MEMBERS.appDefId?e.partial(s,n.MEMBERS_PAGES.helpId):t?e.partial(s,n.ROUTER_PAGES.helpId):e.partial(s,n.ROUTER_PAGES.mobileHelpId)}(P,t,S,h),renameEnabled:P,navigateTo:function(e,t){return function(a){e.documentServices.pages.getFocusedPageId()!==a&&(e.pages.navigateTo(a),e.bi.event(s.events.pages.navigate_to_page,{page_id:a,panel_name:t,category:n.ROUTER_PAGES.biCategory}))}}(t,_),onClickAdd:C.onClick,titleAdd:C.title,biEvent:t.bi.event,biCategory:f||n.ROUTER_PAGES.biCategory}})(t.renderWhenMutated(o))}),define("pages/panel/pagesView/editorAPIConnectors/appPagesView",["lodash","platform","higherOrderComponents","pages/panel/pagesView/editorAPIConnectors/getActions","coreBi","pages/panel/pagesView/pagesView"],function(e,t,n,a,i,s){"use strict";return n.connectEditorAPI(function(n,s){var o=s.appData,r=o.id,l=o.title,p=o.pagesData,u=o.helpId,c=o.biCategory,d=o.emptyStateUrl,g=o.actions,m=s.onShowSettings,f=s.isDesktop,b=s.onHelp,y=s.biPanelName,P=s.onRename,h=r,_=n.platform.getAppDataByAppDefId(h),I=function(t,n,s,o,r,l){if(!o)return{title:null,onClick:null};var p=e.find(r,["type","add_page"]);if(!p)return{title:null,onClick:null};var u=a.getOnClickApplicationNotification(t,s,p.event);return{title:p.title,onClick:function(e){t.bi.event(i.events.pages.pagesPanel.add_page_selection_click,{category:"application page",source:l||"router"}),u(e)}}}(n,0,_.applicationId,f,g,c);return{title:l,emptyStateUrl:d?function(e,n,a){return t.utils.getFullApplicationUrl(a,e,n,a.applicationId)}(d,h,_):null,pages:function(t,n,i,s,o,r,l){return e.map(n,function(e){var n=e.id;return{id:n,title:e.title,permissionSymbol:e.permissionSymbol,typeSymbol:"",actions:a.applicationPage(t,n,o,s,r,i,l)}})}(n,p,m,f,h,c,P),onHelp:e.partial(b,u),renameEnabled:f,navigateTo:function(e,t,n){return function(a){e.documentServices.pages.getFocusedPageId()!==a&&(e.pages.navigateTo(a),e.bi.event(i.events.pages.navigate_to_page,{page_id:a,panel_name:t,category:n}))}}(n,y,c),biEvent:n.bi.event,biCategory:c,appDefinitionId:h,onClickAdd:I.onClick,titleAdd:I.title}})(n.renderWhenMutated(s))}),define("pages/panel/pagesView/editorAPIConnectors/tpaView",["lodash","higherOrderComponents","pages/panel/pagesView/editorAPIConnectors/getActions","pages/panel/pagesView/pagesView","coreBi","pages/utils/pageCategories"],function(e,t,n,a,i,s){"use strict";return t.connectEditorAPI(function(t,a){var o=a.tpa,r=o.pagesData,l=o.title,p=o.helpId,u=o.mobileHelpId,c=o.onClickAdd,d=o.typeSymbol,g=o.biCategory,m=a.onShowSettings,f=a.isDesktop,b=a.onHelp,y=a.biPanelName;return{title:l,pages:function(t,a,i,s,o){var r=n.tpaPage(t,i,s),l=n.tpaSubPage(t,i,s);return e.map(a,function(e){var t=e.id,n=e.title,a=e.isSubPage,i=e.permissionSymbol;return{id:t,title:n,info:e.info,typeSymbol:o,permissionSymbol:i,actions:a?l:r}})}(t,r,m,f,d),onHelp:f?e.partial(b,p):e.partial(b,u),titleAdd:s.TPA_PAGES.titleAdd,onClickAdd:c,renameEnabled:f,navigateTo:function(e,t,n){return function(a){e.documentServices.pages.getFocusedPageId()!==a&&(e.pages.navigateTo(a),e.bi.event(i.events.pages.navigate_to_page,{page_id:a,panel_name:t,category:n}))}}(t,y,g),biEvent:t.bi.event,biCategory:g}})(t.renderWhenMutated(a))}),define("pages/panel/menuView/utils/mainMenuTreeState",["lodash"],function(e){"use strict";function t(e,t){i[e]=Boolean(t)}function n(e,t){return i.hasOwnProperty(e)?i[e]:t||!1}function a(i){e.forEach(i,function(e){e.isCollapsed=n(e.id),e.items.length>0?a(e.items):e.isCollapsed&&(e.isCollapsed=!1,t(e.id,!1))})}var i={};return{setMenuItemCollapsed:t,reflectStateToMenuTree:a,reflectStateToMenuItem:function(a,i){return a.isCollapsed=n(a.id,i),e.get(a,"items.length",0)<=0&&a.isCollapsed&&(a.isCollapsed=!1,t(a.id,!1)),a}}}),define("pages/panel/menuView/editorAPIConnectors/menuViewUtils",["lodash"],function(e){"use strict";return{getMenuItemsWithInitialCollaptionData:function(t,n){return n&&e.forEach(t,function(e){e.isCollapsed=n[e.id]}),t},getMenuItemsWithsymbolIfApplicable:function(t,n,a){return n!==a?t:e.map(t,function(t){return e.defaults({symbol:"membersAction",items:e.map(t.items,function(t){return e.defaults({symbol:"membersAction"},t)})},t)})}}}),define("pages/panel/menuView/editorAPIConnectors/menuViewActions",["lodash","constants","util","coreBi","platform"],function(e,t,n,a,i){"use strict";function s(t,n,i,s,o){var r=s[e.findIndex(s,{id:i.id})-1],l=r.items.length;!function(t,n,a,i,s){e.forEachRight(a.items,function(e){t.menus.moveMenuItem(n,e.id,i,s,!1)})}(t,n,i,r.id,l),t.menus.moveMenuItem(n,i.id,r.id,l,!1),t.bi.event(a.events.topbar.pages.top_bar_PAGES_menu_sub_page_created,{origin:"quick actions",source:o}),t.history.add("subpaging a page")}var o=function(e,t,n,i){e.bi.event(a.events.pages.pagesPanel.quick_actions_menu_select,{page_id:t,source:i,category:n})},r=function(e,t,n,a,i){var s={};"boolean"==typeof a?s.hidePage=a:a=!n.isVisible,"boolean"==typeof i?s.mobileHidePage=i:i=!n.isVisibleMobile,n.pageData?e.pages.data.update(n.pageData.id,s):e.documentServices.menu.updateItem(t,n.id,{isVisible:!a,isVisibleMobile:!i}),e.history.add("hiding a page")},l=function(t,i,r,l,p,u){!function(e){var t=0===e.position;return!e.parent&&!t}(l)?function(t){return e.isObject(t.parent)}(l)&&r.push({title:n.translate("Pages_Actions_Page_MoveUp"),symbolName:"unsubpageAction",onClick:function(){!function(e,t,n,i){var s=n.parent.parent&&n.parent.parent.id,o=n.parent.position+1;e.menus.moveMenuItem(t,n.id,s,o,!1),e.bi.event(a.events.topbar.pages.top_bar_PAGES_menu_user_reverted_to_main_page,{origin:"quick actions",source:i}),e.history.add("moving a page out of its parent")}(t,i,l,u);var n=e.get(l,"pageData.id");o(t,n,"mainpage",u)}}):r.push({title:n.translate("Pages_Actions_Page_Subpage"),symbolName:"subpageAction",onClick:function(){s(t,i,l,p,u);var n=e.get(l,"pageData.id");o(t,n,"subpage",u)}})};return{getActionsForMenuItem:function(s,p,u,c,d,g,m,f,b,y){return p.appId?c?function(t,a,s,r,p,u,c){var d=function(t,n,a,s,r,l){if(s){var p=t.documentServices.platform.getAppDataByApplicationId(n.appId).appDefinitionId,u=t.pages.dynamicPages.getActionByAppDefId(p,"pageSettings",[i.constants.pages.page_settings.pageInfo.type,i.constants.pages.page_settings.seo.type]);return e.map(u,function(n){return{title:n.title,symbolName:n.icon,onClick:function(){var i=e.get(a,"pageData.id");r({pageId:i,routerId:e.get(a,"link.routerId"),innerRoute:e.get(a,"link.innerRoute"),tabType:n.type}),o(t,i,n.type,l)},isSettings:!0}})}return[]}(t,a,s,r,p,c);return function(t,a,s,r,l,p){var u=e.get(s,"pageData.id"),c=t.documentServices.platform.getAppDataByApplicationId(a.appId).appDefinitionId,d=t.pages.dynamicPages.getActionByAppDefId(c,"pageSettings",[i.constants.pages.page_settings.pageInfo.type])[0];d&&(s.isVisible?l.push({title:n.translate("Pages_Actions_Page_Hide"),symbolName:"hideAction",onClick:function(){r({tabType:d.type,pageId:u,routerId:e.get(s,"link.routerId"),innerRoute:e.get(s,"link.innerRoute")}),o(t,u,"hide",p)}}):l.push({title:n.translate("Pages_Actions_Page_Unhide"),symbolName:"unhideAction",onClick:function(){r({tabType:d.type,pageId:u,routerId:e.get(s,"link.routerId"),innerRoute:e.get(s,"link.innerRoute")}),o(t,u,"hide",p)}}),l.push({title:n.translate("Pages_Actions_Page_Rename"),symbolName:"renameAction",onClick:function(){r({tabType:d.type,pageId:u,routerId:e.get(s,"link.routerId"),innerRoute:e.get(s,"link.innerRoute")}),o(t,u,"rename",p)}}))}(t,a,s,p,d,c),l(t,a,d,s,u,c),d}(s,p,u,c,d,f,y):null:c?function(a,i,s,p,u,c,g,m,f,b){var y=[];return function(a,i,s,r,l,p){s.type.isPage&&r&&i.unshift({title:n.translate("Pages_Actions_Page_Settings"),symbolName:"settingsAction",onClick:function(){l({tabType:t.PAGE_SETTINGS_TABS.PAGE_INFO,pageId:s.pageData.id});var n=e.get(s,"pageData.id");o(a,n,"tabPageInfo",p)},isSettings:!0},{title:n.translate("Pages_Actions_Page_SEO"),symbolName:"seoSettingsAction",onClick:function(){l({tabType:t.PAGE_SETTINGS_TABS.SEO,pageId:s.pageData.id});var n=e.get(s,"pageData.id");o(a,n,"tabSEO",p)},isSettings:!0})}(a,y,s,p,d,b),function(e,t,a,i,s){i.type.isLink&&a.push({title:n.translate("Pages_Actions_Link_Change"),symbolName:"linkAction",onClick:function(){e.menus.updateLink(t,i,i.link),o(e,null,"change link",s)}})}(a,i.id,y,s,b),function(t,a,i,s,r,l){i.push({title:n.translate("Pages_Actions_Page_Rename"),symbolName:"renameAction",onClick:function(n){s.pageData?t.menus.renamePage(s.pageData.id,s.pageData.title,n):function(e,t,n,a){a&&n.label!==a&&(e.menu.updateItem(t,n.id,{label:a}),e.history.debouncedAdd("Rename Menu Item"))}(t,a,s,n);var i=e.get(s,"pageData.id");o(t,i,"rename",l),r()},isRename:!0})}(a,i.id,y,s,g,b),function(t,a,i,s,r,l){t.menus.canDuplicate(s)&&i.push({title:n.translate("Pages_Actions_Page_Duplicate"),symbolName:"duplicateAction",onClick:function(){t.menus.duplicateMenuItem(a,s,r);var n=e.get(s,"pageData.id");o(t,n,"duplicate",l)}})}(a,i.id,y,s,c,b),function(t,a,i,s,r){s.type.isPage&&t.developerMode.isEnabled()&&function(e,t){var n=t.pageData&&t.pageData.id;return!!n&&e.documentServices.routers.pages.isConnectablePage(n)}(t,s)&&i.push({title:n.translate("Platform_Page_Actions_Set_Dynamic_Page"),symbolName:"page_dynamic_icon",onClick:function(){!function(e,t){var n=s.pageData.id,a=e.documentServices.platform.getAppDataByAppDefId(e.documentServices.platform.editorApps.DATA_BINDING.appDefId);e.documentServices.platform.notifyApplication(a.applicationId,{eventType:"addDynamicPageClicked",eventPayload:{pageRef:e.documentServices.pages.getReference(n),origin:"quickActionsMenu"}})}(t);var n=e.get(s,"pageData.id");o(t,n,"Set Page Dynamic",r)}})}(a,i.id,y,s,b),function(t,a,i,s,l){s.isVisible?i.push({title:n.translate("Pages_Actions_Page_Hide"),symbolName:"hideAction",onClick:function(){r(t,a,s,!0);var n=e.get(s,"pageData.id");o(t,n,"hide",l)}}):i.push({title:n.translate("Pages_Actions_Page_Unhide"),symbolName:"unhideAction",onClick:function(){r(t,a,s,!1);var n=e.get(s,"pageData.id");o(t,n,"show",l)}})}(a,i.id,y,s,b),l(a,i,y,s,m,b),function(t,a,i,s,r,l){!l&&s.type.isPage||i.push({title:n.translate("Pages_Actions_Page_Delete"),symbolName:"deleteAction",onClick:function(){t.menus.removeMenuItem(a,s,l);var n=e.get(s,"pageData.id");o(t,n,"delete",r)}})}(a,i.id,y,s,b,f),y}(s,p,u,c,0,g,m,f,b,y):function(t,i,s,o){return s.isVisibleMobile?[{title:n.translate("MenuItem_Hide_Mobile_Action"),symbolName:"quickActionsHide",onClick:function(){r(t,i,s,void 0,!0);var n=e.get(s,"pageData.id");t.bi.event(a.events.pages.pagesPanel.quick_action_hide_show_mobile_click,{page_id:n,source:o,category:"hide"})}}]:[{title:n.translate("MenuItem_Show_Mobile_Action"),symbolName:"quickActionsShow",onClick:function(){r(t,i,s,void 0,!1);var n=e.get(s,"pageData.id");t.bi.event(a.events.pages.pagesPanel.quick_action_hide_show_mobile_click,{page_id:n,source:o,category:"show"})}}]}(s,p.id,u,y)}}}),define("pages/panel/menuView/editorAPIConnectors/menuViewMapper",["lodash","pages/panel/menuView/editorAPIConnectors/menuViewUtils","pages/panel/menuView/editorAPIConnectors/menuViewActions","pages/panel/menuView/utils/menuDataGetterUtil","pages/utils/pageCategories","coreBi","stateManagement"],function(e,t,n,a,i,s,o){"use strict";var r=function(e){return o.editorPlugins.userPreferences.selectors.getSessionUserPreferences("collapsedMenuItems")(e.store.getState())};return function(l,p){var u=p.onShowSettings,c=p.onItemAdded,d=p.onRename,g=p.isDesktop,m=p.onHelp,f=p.menu,b=p.selectedMenuItemId,y=p.biPanelName,P=l.documentServices.menu.getById(f.id),h=l.documentServices.platform.editorApps.SANTA_MEMBERS.appDefId,_=t.getMenuItemsWithInitialCollaptionData(f.menuItems,r(l)),I=t.getMenuItemsWithsymbolIfApplicable(_,f.appDefId,h),v=i.MENUS.getBiCategory(f.id);return{title:f.title,menuItems:I,isDraggable:g,renameEnabled:g,isMobile:!g,initialActions:!g&&f.appDefId?null:[],showAddOptions:g&&f.appDefId!==l.documentServices.platform.editorApps.SANTA_MEMBERS.appDefId,biEvent:l.bi.event,biCategory:v,onMoveMenuItem:function(e,t,n,a){return l.menus.moveMenuItem(P,e,t,n,!0,a)},navigateCallback:function(t){if(t.type.isPage)!function(e,t,n,a){e.documentServices.pages.getFocusedPageId()!==t&&(e.pages.navigateTo(t),e.bi.event(s.events.pages.navigate_to_page,{page_id:t,category:n,panel_name:a}))}(l,t.pageData.id,v,y);else if(t.type.isLink&&"AnchorLink"===t.type.raw){var n=t.link,a=n.pageId&&n.pageId.replace("#","");!function(e,t,n,a,i){(e.documentServices.pages.getFocusedPageId()!==t||i)&&(e.pages.navigateToAndScroll(t,i,e.applyPreviewScrollToEditorScroll),e.bi.event(s.events.pages.navigate_to_page,{page_id:t,category:n,panel_name:a}))}(l,a,v,y,n.anchorDataId)}else t.type.isLink&&"DynamicPageLink"===t.type.raw&&function(t,n,a,i,o){var r=e.assign(t.data.createItem("DynamicPageLink"),{innerRoute:a||"",routerId:n});t.pages.navigateTo(r),t.bi.event(s.events.pages.navigate_to_page,{category:i,panel_name:o})}(l,t.link.routerId,t.link.innerRoute,v,y)},titleAdd:i.MENUS.titleAdd,onHelpHeader:e.partial(m,a.getHelpIdForMenu(f.id,f.appDefId,h,g)),onHelp:m,onClickAddPage:function(e,t,n,a,i){return function(){e.menus.addPage(n,a,i),e.bi.event(s.events.pages.pagesPanel.add_page_selection_click,{category:"page",source:t})}}(l,v,f.id,b,c),onClickAddLink:function(e,t,n,a,i){return function(){e.menus.addLink(n,a,i),e.bi.event(s.events.pages.pagesPanel.add_page_selection_click,{category:"link",source:t})}}(l,v,f.id,b,c),onClickAddFolder:function(e,t,n,a,i){return function(){e.menus.addFolder(n,a,i),e.bi.event(s.events.pages.pagesPanel.add_page_selection_click,{category:"dropdown menu",source:t})}}(l,v,f.id,b,c),setInPrefIscollapsedMenuItems:function(e,t){return function(e,t,n){var a=r(e);a||(e.store.dispatch(o.editorPlugins.userPreferences.actions.setSessionUserPreferences("collapsedMenuItems",{})),a={}),a[t]=Boolean(n),e.store.dispatch(o.editorPlugins.userPreferences.actions.setSessionUserPreferences("collapsedMenuItems",a))}(l,e,t)},getMenuItemActions:function(e){return n.getActionsForMenuItem(l,P,e,g,u,c,d,_,f.multiPageMenu,v)}}}}),define("pages/panel/menuView/addTooltip.rt",["react","lodash","util","baseUILib"],function(e,t,n,a){"use strict";return function(t,i){return e.createElement("div",{className:"add-tooltip-pp",onMouseEnter:t.onMouseEnter,onMouseLeave:t.onMouseLeave},e.createElement(a.Composites.RichTextLabeled,{},e.createElement(a.TextLabel,{type:"T06",value:t.title}),e.createElement(a.RichText,{},e.createElement("p",{},n.translate(t.description),"\n            ",e.createElement("a",{onClick:t.onLearnMore},n.translate("NewPages_Panel_Add_Folder_Learnmore"))))))}}),define("pages/panel/menuView/addTooltip",["lodash","prop-types","pages/panel/menuView/addTooltip.rt"],function(e,t,n){"use strict";var a=n;return a.displayName="addTooltip",a.propTypes={title:t.string,description:t.string,onLearnMore:t.func,onMouseEnter:t.func,onMouseLeave:t.func},a}),define("pages/panel/menuView/menuItem/menuItem.rt",["react","lodash","baseUI","symbols","baseUILib","util","core","experiment"],function(e,t,n,a,i,s,o,r){"use strict";return function(){function n(n){var s=this.filterRegularActions(),o=this.filterSettingsActions();return e.createElement(i.ContextMenu,{className:"flat",isOpen:this.state.contextMenuOpened,key:"page-context-menu",onToggle:this.handleContextMenuToggle,automationId:"menu-item-context-menu"},e.createElement.apply(this,[i.ContextMenuContent,{key:"actions-"+this.state.actions.length},t.map(o,function(t,n,s,o,r){return e.createElement(i.ContextMenuAction,{onClick:function(e,t,n,a,i){this.handleClickAction(a)}.bind(this,t,n,s,o,r),key:"action-"+o.title,automationId:"action-"+o.title,className:"menu-item-settings-action-pp"},e.createElement(a.symbol,{name:o.symbolName}),e.createElement("span",{},o.title))}.bind(this,n,s,o)),t.isEmpty(s)||t.isEmpty(o)?null:e.createElement(i.Divider,{key:"actions-divider"}),t.map(s,function(t,n,s,o,r){return e.createElement(i.ContextMenuAction,{onClick:function(e,t,n,a,i){this.handleClickAction(a)}.bind(this,t,n,s,o,r),key:"action-"+o.title,automationId:"action-"+o.title},e.createElement(a.symbol,{name:o.symbolName}),e.createElement("span",{},o.title))}.bind(this,n,s,o))]))}return e.createElement("div",{className:"menu-item-pp "+t(this.getTopLevelClasses()).transform(function(e,t,n){t&&e.push(n)},[]).join(" "),onClick:this.props.setSelected,"data-aitemtype":this.getAutomationItemType()},null===this.state.inputValue?e.createElement("div",{className:"title-action-container",key:"pageInfo",onDoubleClick:this.onDoubleClick},e.createElement("div",{className:"left-container"},this.props.isDragAvailable?e.createElement(a.symbol,{name:"dragPage",key:"drag-icon",className:"page-item-drag",dataHintMyData:"hint_my_data"}):null,e.createElement(i.Tooltip,{disabled:!this.props.info,content:this.props.info,shouldTranslate:!1,arrowAlignment:"top",key:"tooltip-type-symbol-pp"},e.createElement(a.symbol,{name:this.getTypeSymbolName()})),e.createElement("span",{className:t(this.getTitleClass()).transform(function(e,t,n){t&&e.push(n)},[]).join(" ")},e.createElement(i.TooltipOnEllipsis,{marginTop:5,contentClassName:"menu-item-title-name"},this.props.dataSource.label))),function(){var t=this.getPagePermissionSymbol();return e.createElement("div",{className:"right-container"},t?e.createElement(a.symbol,{name:t,key:"pagePermissionSymbol"}):null,this.isHidden()?e.createElement(a.symbol,{name:"hiddenPageStatus",key:"hiddenPageStatus-symbol"}):null,this.state.actions?n.apply(this,[t]):null)}.apply(this,[])):null,null!==this.state.inputValue?function(){var t=s.validate.pageNameValidator(this.state.inputValue);return e.createElement("div",{className:"input-button-container",onMouseDown:function(e,t){t.stopPropagation()}.bind(this,t),key:"input-container-page-pp"},e.createElement(i.TextInput,{value:this.state.inputValue,onChange:this.handleChangeInput,isValid:!t,invalidMessage:s.translate(t),shouldTranslate:!1,selectOnFocus:!0,maxLength:40,onBlur:this.handleRenameDone,autoSelect:!0}),e.createElement(i.Button,{className:"done-button",disabled:t},"\n            ",s.translate("Pages_Actions_Rename_Button"),"\n        "))}.apply(this,[]):null)}}),define("pages/panel/menuView/menuItem/menuItem",["lodash","react","prop-types","pages/panel/menuView/menuItem/menuItem.rt","coreBi","util"],function(e,t,n,a,i,s){"use strict";var o=function(t){var n;return e.get((n={},_defineProperty(n,"1380b703-ce81-ff05-f115-39571d94dfcd","storesPageType"),_defineProperty(n,"13d21c63-b5ec-5912-8397-c3a5ddb27a97","bookingPageType"),_defineProperty(n,"14724f35-6794-cd1a-0244-25fd138f9242","forumPageType"),_defineProperty(n,"14bcded7-0066-7c35-14d7-466cb3f09103","blogPageType"),_defineProperty(n,"135aad86-9125-6074-7346-29dc6a3c9bcf","hotelsPageType"),_defineProperty(n,"13c1402c-27f2-d4ab-7463-ee7c89e07578","restaurantsPageType"),_defineProperty(n,"13e8d036-5516-6104-b456-c8466db39542","restaurantsPageType"),n),t,"tpaPageType")},r=function(t){return e.get({AnchorLink:"anchorPageType",ExternalLink:"urlPageType",EmailLink:"emailPageType",PhoneLink:"phonePageType",DocumentLink:"documentPageType"},t,"linkPageType")},l=function(n){function l(t){_classCallCheck(this,l);var n=_possibleConstructorReturn(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,t));return n.state={actions:n.props.initialActions,contextMenuOpened:!1,inputValue:function(){if(!(n.props.dataSource.id===n.props.renamedMenuItemId)||!n.props.renameEnabled)return null;var t=n.props.getMenuItemActions(n.props.dataSource);return e.head(e.filter(t,"isRename"))?n.props.dataSource.label:null}()},n.handleClickAction=function(e){e.isRename?n.openRenameMode():e.onClick(n.props.dataSource.id,n.props.dataSource.label)},n.openRenameMode=function(){n.getRenameAction()&&n.props.renameEnabled&&n.setState({inputValue:n.props.dataSource.label})},n.handleChangeInput=function(e){return n.setState({inputValue:e})},n.handleRenameDone=function(){var e=!s.validate.pageNameValidator(n.state.inputValue)?n.state.inputValue:n.props.dataSource.label;n.getRenameAction().onClick(e),n.props.setSelected(),n.setState({inputValue:null,contextMenuOpened:!1})},n.getRenameAction=function(){var t=n.state.actions;return e.isEmpty(t)&&(t=n.props.getMenuItemActions(n.props.dataSource)),e.head(e.filter(t,"isRename"))},n.onDoubleClick=function(){return n.openRenameMode()},n.handleContextMenuToggle=function(t){t?(n.setState({contextMenuOpened:!0,actions:n.getActionsForItem(n.props.dataSource)}),n.props.biEvent(i.events.pages.pagesPanel.page_actions_click,{page_id:e.get(n.props.dataSource,"pageData.id"),source:n.props.biCategory})):n.setState({contextMenuOpened:!1})},n.getActionsForItem=function(e){return n.props.getMenuItemActions(e)},n.isHidden=function(){return n.props.isMobile?!n.props.dataSource.isVisibleMobile:!n.props.dataSource.isVisible},n.getAutomationItemType=function(){var e=n.props.dataSource,t=e.parent?"subpage-":"";return e.isHomePage?t+"home":e.type.isPage?t+"page":e.type.isLink?t+"link":e.type.isDropdown?t+"folder":void 0},n.getTopLevelClasses=function(){return{"hidden-page":n.isHidden(),selected:n.props.isSelected}},n.getPagePermissionSymbol=function(){if(e.get(n.props.dataSource,"pageData.pageSecurity.requireLogin"))return"membersPagePermission";return e.get(n.props.dataSource,"pageData.pageSecurity.dialogLanguage")?"passwordPagePermission":null},n.getTitleClass=function(){var e=!!n.getPagePermissionSymbol(),t=!!n.isHidden(),a=!!n.props.dataSource.parent;return{"menu-item-title":!0,"page-without-attributes":!a&&!e&&!t,"subpage-without-attributes":a&&!e&&!t,"page-with-attribute":!a&&e&&!t||!a&&!e&&t,"subpage-with-attribute":a&&e&&!t||a&&!e&&t,"page-with-attributes":!a&&e&&t,"subpage-with-attributes":a&&e&&t}},n.filterSettingsActions=function(){return e.filter(n.state.actions,"isSettings")},n.filterRegularActions=function(){return e.reject(n.state.actions,"isSettings")},n.getTypeSymbolName=function(){var t=n.props.dataSource;return t.symbol?t.symbol:t.type.isPopupLink?"popupPageType":t.type.isLink?r(e.get(t,"link.type")):t.type.isDropdown?"folderPageType":t.isHomePage?"homePageType":t.isOldBlog?"oldBlogPageType":"members"===e.get(t,"pageData.tpaPageId")?"membersAction":e.get(t,"pageData.tpaApplicationId")>0?o(t.appDefinitionId):"regularPageType"},n}return _inherits(l,t.Component),_createClass(l,[{key:"componentWillReceiveProps",value:function(e){var t=e.dataSource,n=e.renamedMenuItemId,a=null!==this.state.inputValue;t.id!==n||a||this.openRenameMode()}},{key:"render",value:function(){return a.call(this)}}]),l}();return l.displayName="MenuItem",l.propTypes={renamedMenuItemId:n.string,dataSource:n.object.isRequired,isSelected:n.bool,setSelected:n.func.isRequired,isDragAvailable:n.bool.isRequired,isMobile:n.bool.isRequired,info:n.string,getMenuItemActions:n.func.isRequired,renameEnabled:n.bool,biEvent:n.func.isRequired,biCategory:n.string.isRequired,initialActions:n.oneOfType([n.array,n.object])},l}),define("pages/panel/menuView/menuView.rt",["react","lodash","baseUI","baseUILib","pages/panel/menuView/menuItem/menuItem","pages/panel/menuView/addTooltip","symbols"],function(e,t,n,a,i,s,o){"use strict";return function(){return e.createElement("div",{className:"menu-view-pp"},e.createElement(a.PanelHeader,{onClose:this.props.onClose,onHelp:this.props.onHelpHeader,className:"header light"},e.createElement("span",{className:"title-menu-view-pp"},this.props.title)),e.createElement("div",{className:t({"pages-tree-container":!0,"disable-drag":!this.props.isDraggable,"with-footer":this.props.showAddOptions}).transform(function(e,t,n){t&&e.push(n)},[]).join(" ")},e.createElement(n.treeDocker,{className:t({"pages-tree-docker":!0,"pages-tree-shrinked":this.isShrink()}).transform(function(e,t,n){t&&e.push(n)},[]).join(" "),onNodeMoved:this.handleMovePage,treeClass:"pages-tree",treeNodeClass:"pages-tree-node",treeNodeLabelClass:"menu-item-pp",draggedClass:"rotated",previewClass:"shadow",isDragAvailable:this.props.isDraggable,scrollTopGetter:this.getScrollTop,collapsedClass:"tree-collapsed"},e.createElement(a.CustomScroll,{ref:"customScroll"},e.createElement(n.treeView,{nodeContent:i,structureType:"tree",isDragAvailable:this.props.isDraggable,isMobile:this.props.isMobile,className:"pages-tree",dataSource:this.props.menuItems,collapsedSelector:"isCollapsed",onNodeToggled:this.onMenuItemToggled,isRoot:!0,onChange:this.handleSelectedItem,initialActions:this.props.initialActions,equalityComparer:this.equalityComparer,value:this.state.selectedMenuItemId,getMenuItemActions:this.props.getMenuItemActions,renameEnabled:this.props.renameEnabled,biEvent:this.props.biEvent,biCategory:this.props.biCategory,renamedMenuItemId:this.props.renamedItemId})))),this.props.showAddOptions?e.createElement("footer",{key:"add-container"},e.createElement("div",{className:"add-options-container"},e.createElement(a.Button,{className:"add-menu-page-button",onClick:this.props.onClickAddPage,automationId:"add-menu-page-button"},e.createElement(o.symbol,{name:"addPagePagesPanel"}),e.createElement("span",{className:"add-title"},this.props.titleAdd)),e.createElement("div",{className:"add-menu-link-button-container",onMouseEnter:this.handleMouseEnterAddLink,onMouseLeave:this.handleMouseLeaveAddLinkButton},e.createElement(a.Tooltip,{arrowAlignment:"top",isOpen:this.state.isAddLinkHovered,content:this.getAddLinkTooltipContent(),key:"tooltip-add-link"},e.createElement(a.Button,{onClick:this.props.onClickAddLink,automationId:"add-menu-link-button"},e.createElement(o.symbol,{name:"addLink"})))),e.createElement("div",{className:"add-menu-folder-button-container",onMouseEnter:this.handleMouseEnterAddFolder,onMouseLeave:this.handleMouseLeaveAddFolderButton},e.createElement(a.Tooltip,{arrowAlignment:"top",isOpen:this.state.isAddFolderHovered,content:this.getAddFolderTooltipContent(),key:"tooltip-add-folder"},e.createElement(a.Button,{onClick:this.props.onClickAddFolder,automationId:"add-menu-folder-button"},e.createElement(o.symbol,{name:"addFolder"})))))):null)}}),define("pages/panel/menuView/menuView",["react","prop-types","reactDOM","lodash","higherOrderComponents","pages/panel/menuView/utils/mainMenuTreeState","pages/panel/menuView/editorAPIConnectors/menuViewMapper","pages/panel/menuView/addTooltip","coreBi","pages/panel/menuView/menuView.rt"],function(e,t,n,a,i,s,o,r,l,p){"use strict";var u=17,c=700,d=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return a.reduce(t,function(t,n){return t+1+(n.isCollapsed?0:e(n.items))},0)},g=function(t){function a(t){_classCallCheck(this,a);var i=_possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,t));return i.state={selectedMenuItemId:i.props.selectedMenuItemId,isAddLinkHovered:!1,isAddFolderHovered:!1},i.scrollToSelectedNode=!1,i.componentWillReceiveProps=function(e){e.selectedMenuItemId&&i.props.selectedMenuItemId!==e.selectedMenuItemId&&i.setState({selectedMenuItemId:e.selectedMenuItemId}),e.renamedItemId&&i.setState({selectedMenuItemId:e.renamedItemId})},i.componentDidUpdate=function(){i.doScrollToSelectedNode()},i.componentDidMount=function(){i.scrollToSelectedNode=!0,i.doScrollToSelectedNode()},i.isShrink=function(){return d(i.props.menuItems)>u},i.getScrollTop=function(){return i.refs.customScroll.getScrollTop()},i.handleMovePage=function(e){var t={items:i.props.menuItems},n=e.from.findIn(t,"items"),a=n.id;if(a){var o=e.to.parent().findIn(t,"items").id||null,r=e.to.findIn(t,"items"),p=r?r.position:e.to.atRight();o&&s.setMenuItemCollapsed(o,!1),i.props.onMoveMenuItem(a,o,p,function(){o&&(i.scrollToSelectedNode=!0),i.handleSelectedItem(n)}),i.props.biEvent(l.events.topbar.pages.top_bar_PAGES_menu_drag,{source:i.props.biCategory}),o&&1===e.from.length()?i.props.biEvent(l.events.topbar.pages.top_bar_PAGES_menu_sub_page_created,{origin:"drag",source:i.props.biCategory}):!o&&e.from.length()>1&&i.props.biEvent(l.events.topbar.pages.top_bar_PAGES_menu_user_reverted_to_main_page,{origin:"drag",source:i.props.biCategory})}},i.onMenuItemToggled=function(e,t){var n=e.props.dataSource.id;i.props.setInPrefIscollapsedMenuItems(n,t)},i.handleSelectedItem=function(e){e.type.isDropdown||e.type.isLink?i.props.onSelectNonPageItem():i.props.onSelectPageItem(),i.setState({selectedMenuItemId:e.id}),i.props.navigateCallback(e)},i.equalityComparer=function(e,t){return e.id===t},i.doScrollToSelectedNode=function(){var e=void 0,t=void 0,a=NaN;if(i.scrollToSelectedNode){i.scrollToSelectedNode=!1;var s=n.findDOMNode(i),o=s.querySelector(".pages-tree-container"),r=s.querySelector(".menu-item-pp.selected");r&&(e=o.getBoundingClientRect(),(t=r.getBoundingClientRect()).top<e.top?a=i.getScrollTop()+(t.top-e.top):t.bottom>e.bottom&&(a=i.getScrollTop()+(t.bottom-e.bottom)),isNaN(a)||i.refs.customScroll.updateScrollPosition(Math.max(0,a)))}},i.clearTimeout=function(){return i.props.timeoutHandler.clearTimeout(i.tooltipTimeout)},i.getAddLinkTooltipContent=function(){return e.createElement(r,{title:"NewPages_Panel_Add_Link_Title",description:"NewPages_Panel_Add_Link_Text",onLearnMore:function(){i.props.onHelp("79f9b88c-f080-4acc-8195-d62d34583dc6"),i.clearTimeout(),i.setState({isAddLinkHovered:!1})},onMouseEnter:i.handleMouseEnterAddLink,onMouseLeave:function(){i.clearTimeout(),i.setState({isAddLinkHovered:!1})}})},i.getAddFolderTooltipContent=function(){return e.createElement(r,{title:"NewPages_Panel_Add_Folder_Title",description:"NewPages_Panel_Add_Folder_Text",onLearnMore:function(){i.props.onHelp("c29d5e56-186e-47c6-903a-7ee7908fc078"),i.clearTimeout(),i.setState({isAddFolderHovered:!1})},onMouseEnter:i.handleMouseEnterAddFolder,onMouseLeave:function(){i.clearTimeout(),i.setState({isAddFolderHovered:!1})}})},i.handleMouseEnterAddLink=function(){i.clearTimeout(),i.setState({isAddLinkHovered:!0,isAddFolderHovered:!1})},i.handleMouseLeaveAddLinkButton=function(){i.clearTimeout(),i.tooltipTimeout=i.props.timeoutHandler.setTimeout(function(){i.setState({isAddLinkHovered:!1})},c)},i.handleMouseEnterAddFolder=function(){i.clearTimeout(),i.setState({isAddFolderHovered:!0,isAddLinkHovered:!1})},i.handleMouseLeaveAddFolderButton=function(){i.clearTimeout(),i.tooltipTimeout=i.props.timeoutHandler.setTimeout(function(){i.setState({isAddFolderHovered:!1})},c)},i}return _inherits(a,e.Component),_createClass(a,[{key:"render",value:function(){return p.call(this)}}]),a}();g.displayName="MenuView",g.propTypes={selectedMenuItemId:t.string,setInPrefIscollapsedMenuItems:t.func.isRequired,navigateCallback:t.func.isRequired,isDraggable:t.bool.isRequired,isMobile:t.bool.isRequired,onMoveMenuItem:t.func.isRequired,menuItems:t.arrayOf(t.object).isRequired,title:t.string.isRequired,onClose:t.func.isRequired,onHelp:t.func.isRequired,onHelpHeader:t.func.isRequired,getMenuItemActions:t.func.isRequired,renamedItemId:t.string,initialActions:t.oneOfType([t.array,t.object]),renameEnabled:t.bool.isRequired,showAddOptions:t.bool.isRequired,onClickAddPage:t.func.isRequired,onClickAddLink:t.func.isRequired,onClickAddFolder:t.func.isRequired,titleAdd:t.string.isRequired,onSelectNonPageItem:t.func.isRequired,onSelectPageItem:t.func.isRequired,biEvent:t.func.isRequired,biCategory:t.string.isRequired,timeoutHandler:t.object},g.defaultProps={timeoutHandler:window};var m=i.connectEditorAPI(o)(i.renderWhenMutated(g));return m.pure=g,m}),define("pages/panel/transitionsView/transitionsView.rt",["react","lodash","util","baseUILib","symbols"],function(e,t,n,a,i){"use strict";return function(){return e.createElement("div",{className:"transitions-view-pp"},e.createElement(a.PanelHeader,{onClose:this.props.onClose,onHelp:function(){this.props.onHelp("000c9232-9321-4738-94c8-885f8633b35b")}.bind(this),className:"header light"},e.createElement("span",{},this.props.title)),e.createElement(a.Composites.Thumbnails,{},e.createElement(a.Thumbnails,{value:this.props.selectedTransition,onChange:this.props.onClickTransition,maxThumbsPerRow:3,options:this.getTransitions()})))}}),define("pages/panel/transitionsView/transitionsView",["lodash","react","prop-types","symbols","pages/panel/transitionsView/transitionsView.rt"],function(e,t,n,a,i){"use strict";var s=function(e){return t.createElement(a.symbol,{name:e})},o=[{value:"none",label:"Pages_Menu_Transitions_None",illustration:s("transition-none")},{value:"swipeHorizontalFullScreen",label:"Pages_Menu_Transitions_SwipeH_Selected",illustration:s("transition-pages-horizontal")},{value:"swipeVerticalFullScreen",label:"Pages_Menu_Transitions_SwipeV_Popup",illustration:s("transition-pages-vertical")},{value:"crossfade",label:"Pages_Menu_Transitions_CrossFade",illustration:s("transition-pages-crossfade")},{value:"outIn",label:"Pages_Menu_Transitions_OutIn",illustration:s("transition-pages-inout")}],r=function(e){function n(e){_classCallCheck(this,n);var t=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.getTransitions=function(){return o},t}return _inherits(n,t.Component),_createClass(n,[{key:"render",value:function(){return i.call(this)}}]),n}();return r.displayName="TransitionsView",r.propTypes={onClickTransition:n.func.isRequired,title:n.string.isRequired,onClose:n.func.isRequired,onHelp:n.func.isRequired,selectedTransition:n.string.isRequired},r}),define("pages/panel/dynamicPagesIntroView/dynamicPagesIntroView.rt",["react","lodash","util","baseUILib","pages/utils/pageCategories"],function(e,t,n,a,i){"use strict";return function(){return e.createElement("div",{className:"dynamic-pages-intro-view-pp"},e.createElement(a.PanelHeader,{onClose:this.props.onClose,onHelp:this.props.onHelp.bind(null,i.DYNAMIC_PAGES_INTRO.helpId),className:"header light"},e.createElement("span",{},this.props.title)),e.createElement("img",{className:"banner",src:n.media.getMediaUrl("panels/pages/add_dynamic_pages_intro.png")}),e.createElement(a.Composites.RichTextLabeled,{className:"composite-centered"},e.createElement(a.TextLabel,{type:"T16",value:"Platform_Pages_Menu_Add_Dynamic_Page_Member_Title"}),e.createElement(a.RichText,{type:"T06"},n.translate("Platform_Pages_Menu_Add_Dynamic_Page_Member_Text"))),e.createElement(a.Composites.ActionSetVertical,{},e.createElement(a.Button,{onClick:this.props.addDynamicPage},e.createElement("span",{},n.translate("Platform_Pages_Menu_Add_Dynamic_Page_Add_Button")))))}}),define("pages/panel/dynamicPagesIntroView/dynamicPagesIntroView",["lodash","react","prop-types","pages/panel/dynamicPagesIntroView/dynamicPagesIntroView.rt"],function(e,t,n,a){"use strict";var i=function(e){function n(){return _classCallCheck(this,n),_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return _inherits(n,t.Component),_createClass(n,[{key:"render",value:function(){return a.call(this)}}]),n}();return i.displayName="DynamicPagesIntroView",i.propTypes={title:n.string.isRequired,onClose:n.func.isRequired,onHelp:n.func.isRequired,addDynamicPage:n.func.isRequired},i}),define("pages/panel/pagesPanelMapper",["lodash","tpa","core","pages/utils/pageCategories","pages/panel/pagesView/editorAPIConnectors/getActions","coreBi","constants","pages/panel/getPages"],function(e,t,n,a,i,s,o,r){"use strict";var l=function(e,t){var n=e.documentServices.homePage.get(),a=c(t,n);return{selectedPageId:n,selectedMenuItemId:a.id,selectedTabId:a.menuId}},p=function(t,n,a){var i=e.find(a,function(t){var a=t.pagesData;return e.some(a,{id:n})}),s=e.get(i,"id");return s?{selectedPageId:n,selectedTabId:s,selectedPageIsDynamic:!0}:null},u=function(t,n,a){var i=e.find(a,function(t){var a=t.pagesData;return e.some(a,{id:n})}),s=e.get(i,"id");return s?{selectedPageId:n,selectedTabId:s}:null},c=function(t,n){var a=null;return e.some(t,function(t){var i=t.id,s=t.menuItems,o=e.flatMap(s,function(e){return[e].concat(_toConsumableArray(e.items))}),r=e.find(o,["pageData.id",n]);return a={id:e.get(r,"id"),menuId:i},r})?a:{}},d=function(t,n){return e.get(e.find(n,function(n){var a=n.pagesData;return e.some(a,{id:t})}),"id")};return function(g,m){var f=g.documentServices.pages.getPagesData(),b=g.documentServices.pages.data.get,y=g.isDesktopEditor(),P=function(t,n){return e.map(r.routers(t),function(e){return e.actions=i.router(t,n,e.applicationId,e.prefix,e.biCategory,e.isSpecial),e})}(g,y),h=e.filter(P,"isSpecial"),_=e.reject(P,"isSpecial"),I=function(t,n,a){return e.map(r.tpas(t,n),function(e){return e.actions=i.tpaTab(t,e.id,a),e})}(g,f,y),v=function(t,n,a){return e.map(r.menus(t,n),function(e){return e.actions=i.menuTab(t,e.appDefId,a),e})}(g,f,y),S=function(t,n,a){return e.map(r.pagesManagedByApps(t,n),function(e){return e.actions=i.application(t,e.id,a,e.biCategory),e})}(g,f,y),A=function(t,n,i,s,o){var r=t.pages.popupPages.getCurrentPopup();if(r)return{selectedPageId:r.id,selectedTabId:a.POPUPS.id};var g=t.pages.getCurrentUrlPageId();if(!g)return l(t,n);var m=u(t,g,o);if(e.get(m,"selectedTabId"))return m;var f=p(t,g,s);if(e.get(f,"selectedTabId"))return f;var b=c(n,g),y=b.menuId||d(g,i);return y?{selectedPageId:g,selectedMenuItemId:e.get(b,"id"),selectedTabId:y}:l(t,n)}(g,v,I,P,S),C=A.selectedPageId,E=A.selectedPageIsDynamic,T=A.selectedMenuItemId,k=A.selectedTabId,M=function(t,n,a,i,s){if(!t)return null;var o=e.map(n,"id");return e.includes(o,s)?a:i}(m.renameEnabled,v,T,C,k);return{selectedPageId:C,selectedMenuItemId:T,selectedPageIsDynamic:E,selectedTabId:k,initialTabId:function(t,n,a){if(n){if("CUSTOM_MAIN_MENU"===n)return"CUSTOM_MAIN_MENU";var i=t.documentServices.menu.getById(n).appId,s=e.find(a,["applicationId",i]);return e.get(s,"id")}return null}(g,m.menuId,P)||k,onHelp:function(e,t){return function(n){var a={panel_name:t,origin:o.BI.HELP.ORIGIN.PAGES_PANEL,learn_more:!0};e.panelManager.openHelpCenter(n,null,a)}}(g,m.panelName),onClose:function(e,t){return function(){e.panelManager.closePanelByName(t)}}(g,m.panelName),pagesData:f,menus:v,specialRouters:h,userRouters:_,tpas:I,appPages:S,isTPASubPage:function(e,t){return function(a){var i=t(a);return n.utils.tpaTypeUtils.isTPASpecialPage(e.dsRead,i)}}(g,b),popups:r.popups(g),getPageData:b,openStoreManager:function(){t.superApps.openDashboardUrl(t.superApps.superAppsConstants.ECOM_APP_DEF_ID,"90%","100%"),g.bi.event(s.events.topbar.pages.top_bar_PAGES_store_pages_store_manager_click)},isDesktop:y,renamedItemId:M,biEvent:g.bi.event,biPanelName:"pages_panel",addDynamicPage:function(e){return function(){var t=e.documentServices.platform.editorApps.DATA_BINDING.appDefId,n=e.documentServices.platform.getAppDataByAppDefId(t).applicationId;e.documentServices.platform.notifyApplication(n,{eventType:"addDynamicPageClicked",eventPayload:{origin:"pagesPanel"}}),e.bi.event(s.events.topbar.pages.top_bar_PAGES_Add_pages_expand_menu_selection_click,{category:"add_dynamic_page",origin:"dynamic_page_intro"})}}(g),isDeveloperModeEnabled:Boolean(g.developerMode.isEnabled()),selectedTransition:function(t){var n=t.pages.transitions.get();return e.get({outIn:"outIn",crossfade:"crossfade",shrinkfade:"crossfade",swipeHorizontal:"swipeHorizontalFullScreen",swipeHorizontalFullScreen:"swipeHorizontalFullScreen",swipeVertical:"swipeVerticalFullScreen",swipeVerticalFullScreen:"swipeVerticalFullScreen",none:"none"},n,"none")}(g),onClickTransition:function(t){return function(n){var a=function(t){return e.trim(t.link.pageId,"#")};t.pages.transitions.set(n),t.bi.event(s.events.pages.pagesPanel.page_transition_selected_click,{category:n});var i=t.documentServices.pages.getPrimaryPageId(),o=e(t.documentServices.mainMenu.getMenu(!0)).flatMap(function(e){return[e].concat(_toConsumableArray(e.items))}).filter(function(n){return"PageLink"===e.get(n,"link.type")&&!t.documentServices.pages.popupPages.isPopup(a(n))}).map(a).value(),r=o.indexOf(i),l=(r+1)%o.length;l!==r&&t.pages.navigateTo(o[l])}}(g),forceOpenPagesPanelCounter:g.getForceOpenPagesPanelEventCounter()}}}),define("pages/panel/tabs/panelTabs.rt",["react","lodash","util","baseUILib","symbols"],function(e,t,n,a,i){"use strict";return function(){function n(n,s){return e.createElement("li",{onClick:function(e,t){this.handleClick(e)}.bind(this,n,s),key:"li-"+n.id,"data-aid":"tab-"+n.title,className:"tab"},e.createElement("div",{className:"container-for-background "+t({selected:this.props.selectedTabId===n.id}).transform(function(e,t,n){t&&e.push(n)},[]).join(" ")},e.createElement(a.TooltipOnEllipsis,{marginTop:9},e.createElement("div",{className:"title"},n.title)),e.createElement(a.Tooltip,{marginTop:6,className:"actions-tooltip",content:"NewPages_Panel_Left_SiteMenu_Actions_Label",closeOnMouseClick:!0},t.isEmpty(n.actions)?null:e.createElement.apply(this,[a.ContextMenu,{customButton:this.getActionsButton(n.id),automationId:"context-menu-"+n.id,key:"tab-context-menu",onToggle:function(e,t,n){this.handleContextMenuToggle(e,n)}.bind(this,n,s)},t.map(n.actions,function(t,n,s,o){return e.createElement(a.ContextMenuAction,{onClick:s.onClick,key:"action-"+s.title},e.createElement(i.symbol,{name:s.symbolName}),e.createElement("span",{},s.title))}.bind(this,n,s))]))),n.separatorAfter?e.createElement(a.Divider,{key:"separator-after-"+n.id}):null)}return e.createElement("div",{className:"tabs-pp"},e.createElement.apply(this,["ul",{},t.map(this.getTabs(),n.bind(this))]))}}),define("pages/panel/tabs/panelTabs",["react","prop-types","lodash","util","symbols","pages/utils/pageCategories","coreBi","pages/panel/tabs/panelTabs.rt"],function(e,t,n,a,i,s,o,r){"use strict";var l=function(e){var t=e.id,n=e.title,i=e.group,s=e.biCategory;return{id:t,title:a.translate(n),group:i,biCategory:s}},p=function(e){return n(e).groupBy("group").forEach(function(e){n.last(e).separatorAfter=!0})},u=function(e){return e.group===s.MENUS.group?s.MENUS.getBiCategory(e.id):e.group===s.TPA_PAGES.group?s.TPA_PAGES.getBiCategory(e.id):e.biCategory},c=function(e,t,a){if(e&&t&&n.isEmpty(a))return[l(s.DYNAMIC_PAGES_INTRO)];var i=[];return n.forEach(a,function(e){var t=e.id,n=e.title,a=e.actions;i.push({id:t,title:n,actions:a,group:s.DYNAMIC_PAGES.group,biCategory:s.DYNAMIC_PAGES.biCategory})}),i},d=function(t){function a(t){_classCallCheck(this,a);var r=_possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,t));return r.getTabs=function(){var e=c(r.props.isDeveloperModeEnabled,r.props.isDesktop,r.props.userRouters),t=[];return n.forEach(r.props.menus,function(e){var n=e.id,a=e.title,i=e.actions;t.push({id:n,title:a,actions:i,group:s.MENUS.group})}),n.isEmpty(r.props.specialRouters)||n.forEach(r.props.specialRouters,function(e){var n=e.id,a=e.title,i=e.actions,o=e.biCategory;t.push({id:n,title:a,actions:i,group:s.SPECIAL_PAGES.group,biCategory:o})}),n.isEmpty(r.props.appPages)||n.forEach(r.props.appPages,function(e){var n=e.id,a=e.title,i=e.actions,o=e.biCategory;t.push({id:n,title:a,actions:i,group:s.APPLICATION_PAGES.group,biCategory:o})}),n.forEach(r.props.tpas,function(e){var n=e.id,a=e.title,i=e.actions;t.push({id:n,title:a,actions:i,group:s.TPA_PAGES.group})}),t=t.concat(e),n.isEmpty(r.props.popups)||t.push(l(s.POPUPS)),p(t),r.props.isDesktop?t.push(l(s.TRANSITIONS)):n.last(t).separatorAfter=!1,t},r.handleContextMenuToggle=function(e,t){t&&r.props.biEvent(o.events.pages.pagesPanel.tab_clicked_on_settings,{category:u(e)})},r.getActionsButton=function(t){return e.createElement("div",{key:"actions-button-"+t},e.createElement(i.symbol,{name:"settingsActionSmall"}))},r.handleClick=function(e){r.props.biEvent(o.events.pages.pagesPanel.category_click,{category:u(e)}),r.props.onClickTab(e.id)},r}return _inherits(a,e.Component),_createClass(a,[{key:"render",value:function(){return r.call(this)}}]),a}();return d.displayName="PanelTabs",d.propTypes={popups:t.arrayOf(t.object).isRequired,userRouters:t.arrayOf(t.object).isRequired,specialRouters:t.arrayOf(t.object).isRequired,appPages:t.arrayOf(t.object).isRequired,tpas:t.arrayOf(t.object).isRequired,menus:t.arrayOf(t.object).isRequired,onClickTab:t.func.isRequired,selectedTabId:t.string,biEvent:t.func.isRequired,isDeveloperModeEnabled:t.bool.isRequired,isDesktop:t.bool.isRequired},d}),define("pages/panel/pagesPanel.rt",["react","lodash","pages/panel/tabs/panelTabs","util","panels","pageSettingsPanel"],function(e,t,n,a,i,s){"use strict";return function(){return function(){var t=s.settingsPanels.main,a=s.settingsPanels.tpaSubPage;return e.createElement(i.frames.leftPanelFrame,{className:"left-panel-frame-pages-panel-pp",ref:"pagesPanel",panelName:this.props.panelName,panelIndex:this.props.panelIndex,panelClass:"pages-panel-pp"},e.createElement(n,{onClickTab:this.handleClickTab,selectedTabId:this.state.selectedTabId,popups:this.props.popups,isDeveloperModeEnabled:this.props.isDeveloperModeEnabled,userRouters:this.props.userRouters,specialRouters:this.props.specialRouters,tpas:this.props.tpas,appPages:this.props.appPages,isDesktop:this.props.isDesktop,menus:this.props.menus,biEvent:this.props.biEvent}),"\n    ",this.getView(),"\n        ",this.showRegularSettings()?e.createElement(t,{key:"page-settings-panel-main-pp",menuItem:this.getSettingsItem(),menuId:this.state.settingsData.menuId,activeTabType:this.state.settingsData.tabType,closeSettingsPanel:this.handleCloseSettings,token:"dffdfadsfa",actions:{closeSettingsPanel:this.handleCloseSettings}}):null,!this.showRegularSettings()&&this.showSettingsForTPASubPage()?e.createElement(a,{key:"page-settings-panel-tpa-pp",ref:"settingsPanel",menuItem:this.getSettingsItem(),closeSettingsPanel:this.handleCloseSettings,activeTabType:this.state.settingsData.tabType,actions:{openStoreManager:this.props.openStoreManager}}):null)}.apply(this,[])}}),define("pages/panel/pagesPanel",["react","prop-types","lodash","higherOrderComponents","util","pages/utils/pageCategories","pages/panel/pagesView/editorAPIConnectors/popupView","pages/panel/pagesView/editorAPIConnectors/dynamicPagesView","pages/panel/pagesView/editorAPIConnectors/appPagesView","pages/panel/pagesView/editorAPIConnectors/tpaView","pages/panel/menuView/menuView","pages/panel/transitionsView/transitionsView","pages/panel/dynamicPagesIntroView/dynamicPagesIntroView","pages/panel/pagesPanelMapper","pages/panel/pagesPanel.rt"],function(e,t,n,a,i,s,o,r,l,p,u,c,d,g,m){"use strict";var f=function(t){function a(t){_classCallCheck(this,a);var g=_possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,t));return g.getInitialSettingsData=function(){return t.initialSettingsTabType?{tabType:t.initialSettingsTabType,pageId:t.selectedPageId}:null},g.state={selectedTabId:g.props.initialTabId,nonPageItemSelected:!1,settingsData:g.getInitialSettingsData(),renamedItemId:g.props.renamedItemId||null},g.getView=function(){var t=void 0,a=g.state.selectedTabId;return a===s.TRANSITIONS.id?t=c:a===s.DYNAMIC_PAGES_INTRO.id?t=d:n.some(g.props.menus,{id:a})?t=u:a===s.POPUPS.id?t=o:n.some(g.props.tpas,{id:a})?t=p:n.some(g.props.userRouters,{id:a})||n.some(g.props.specialRouters,{id:a})?t=r:n.some(g.props.appPages,{id:a})&&(t=l),e.createElement(t,{pagesData:g.props.pagesData,onClose:g.props.onClose,onHelp:g.props.onHelp,selectedMenuItemId:g.props.selectedMenuItemId,selectedPageId:g.props.selectedPageId,renamedItemId:g.state.renamedItemId,title:i.translate(n.get(s[a],"title")),onShowSettings:g.handleShowSettings,onItemAdded:function(e){return g.setState({renamedItemId:e,settingsData:null})},onRename:function(){return g.setState({renamedItemId:null})},isDesktop:g.props.isDesktop,popups:g.props.popups,menu:n.find(g.props.menus,{id:a}),router:n.find(g.props.userRouters,{id:a})||n.find(g.props.specialRouters,{id:a}),appData:n.find(g.props.appPages,{id:a}),tpa:n.find(g.props.tpas,{id:a}),selectedTransition:g.props.selectedTransition,onClickTransition:g.props.onClickTransition,onSelectNonPageItem:function(){g.handleCloseSettings(),g.setState({nonPageItemSelected:!0})},onSelectPageItem:function(){g.setState({nonPageItemSelected:!1})},addDynamicPage:g.props.addDynamicPage,biPanelName:g.props.biPanelName})},g.handleClickTab=function(e){return g.setState({selectedTabId:e,settingsData:null})},g.handleChangeShownSettings=function(e){e?g.setState(function(t){return{settingsData:n.assign(t.settingsData,{tabType:e.tabType,pageId:e.pageId})}}):g.handleCloseSettings()},g.handleCloseSettings=function(){return g.setState({settingsData:null})},g.handleShowSettings=function(e){g.setState(function(t){return{settingsData:n.assign({},t.settingsData,e)}})},g.getSettingsItem=function(){var e=n.get(g.state.settingsData,"pageId")||g.props.selectedPageId,t=e&&g.props.getPageData(e);return{pageData:t,label:n.get(t,"title")}},g.updateSelectedTabIdIfDeleted=function(e){var t=g.state.selectedTabId;n.some(g.props.tpas,{id:t})&&!n.some(e.tpas,{id:t})&&g.setState({selectedTabId:e.selectedTabId,nonPageItemSelected:!1})},g.showSettingsForTPASubPage=function(){return g.state.settingsData&&n.get(g.state.settingsData,"pageId")&&g.props.isTPASubPage(g.state.settingsData.pageId)&&!g.props.selectedPageIsDynamic},g.showRegularSettings=function(){if(!g.state.settingsData)return!1;return g.state.settingsData.pageId&&!g.props.isTPASubPage(g.state.settingsData.pageId)||g.props.selectedPageIsDynamic},g}return _inherits(a,e.Component),_createClass(a,[{key:"componentWillReceiveProps",value:function(e){var t=this.props.selectedPageId!==e.selectedPageId,n=this.state.selectedTabId===s.TRANSITIONS.id;this.state.settingsData&&t&&this.handleChangeShownSettings({tabType:null,pageId:e.selectedPageId});var a=!t&&e.selectedTabId!==this.props.selectedTabId;(e.selectedTabId&&!n&&t&&!this.state.nonPageItemSelected||a)&&this.setState({selectedTabId:e.selectedTabId}),e.forceOpenPagesPanelCounter>this.props.forceOpenPagesPanelCounter&&(e.renamedItemId!==this.state.renamedItemId&&(this.setState({renamedItemId:e.renamedItemId}),e.selectedTabId!==this.state.selectedTabId&&this.setState({selectedTabId:e.selectedTabId})),e.initialSettingsTabType&&this.handleShowSettings({tabType:e.initialSettingsTabType,pageId:e.selectedPageId})),this.updateSelectedTabIdIfDeleted(e)}},{key:"render",value:function(){return m.call(this)}}]),a}();f.displayName="PagesPanel",f.propTypes={pagesData:t.arrayOf(t.object).isRequired,selectedPageId:t.string.isRequired,selectedPageIsDynamic:t.bool,selectedMenuItemId:t.string,selectedTabId:t.string,initialTabId:t.string,renamedItemId:t.string,menus:t.arrayOf(t.shape({id:t.string.isRequired,title:t.string.isRequired,applicationId:t.string})).isRequired,userRouters:t.arrayOf(t.shape({id:t.string.isRequired,title:t.string.isRequired,pagesData:t.arrayOf(t.object).isRequired,prefix:t.string.isRequired,biCategory:t.string.isRequired})).isRequired,specialRouters:t.arrayOf(t.shape({id:t.string.isRequired,title:t.string.isRequired,pagesData:t.arrayOf(t.object).isRequired,prefix:t.string.isRequired,isSpecial:t.bool.isRequired,biCategory:t.string.isRequired})).isRequired,tpas:t.arrayOf(t.shape({id:t.string.isRequired,title:t.string.isRequired,pagesData:t.arrayOf(t.object).isRequired})).isRequired,appPages:t.arrayOf(t.shape({id:t.string.isRequired,title:t.string.isRequired,pagesData:t.arrayOf(t.object),biCategory:t.string.isRequired,helpId:t.string.isRequired,emptyStateUrl:t.string})).isRequired,popups:t.arrayOf(t.object).isRequired,panelName:t.string,onClose:t.func.isRequired,onHelp:t.func.isRequired,getPageData:t.func.isRequired,isTPASubPage:t.func.isRequired,openStoreManager:t.func.isRequired,isDesktop:t.bool.isRequired,biEvent:t.func.isRequired,biPanelName:t.string.isRequired,selectedTransition:t.string.isRequired,onClickTransition:t.func.isRequired,isDeveloperModeEnabled:t.bool.isRequired,addDynamicPage:t.func.isRequired,initialSettingsTabType:t.string,forceOpenPagesPanelCounter:t.number},f.defaultProps={panelName:"pagesPanel"};var b=a.connectEditorAPI(g)(f);return b.pure=f,b}),define("pages/quickNavigation/quickNavigationMapper",["lodash","util","stateManagement","pages/utils/pageCategories","coreBi","pages/panel/getPages","experiment"],function(e,t,n,a,i,s,o){"use strict";var r=function(e,n){return n>0&&{title:t.translate(e.title)}},l=function(t){return e.flatMap(t,function(t){var n=t.title,a=t.pagesData,i=t.biCategory;return[{title:n}].concat(_toConsumableArray(e.map(a,function(e){return{id:e.id,title:e.label,biCategory:i}})))})},p=function t(n,i,s){var o=a.MENUS.getBiCategory(i);if(!e.isEmpty(n.items)){var r=e(n.items).flatMap(function(e){return t(e,i,!0)}).compact().value();if(!e.isEmpty(r))return[{id:e.get(n.pageData,"id",n.id),title:e.get(n.pageData,"title",n.label),isFolder:n.type.isDropdown,isLink:n.type.isLink,biCategory:o}].concat(_toConsumableArray(r))}return n.type.isPage?{id:n.pageData.id,title:n.pageData.title,isNested:s,biCategory:o}:null},u=function(t){return e.startsWith(t,"RECENTLY-")},c=function(t){return u(t)?e.trimStart(t,"RECENTLY-"):t},d=function(e){return(u(e)?"":"RECENTLY-")+e},g=function(e,t){return t<18?[]:n.editorPlugins.userPreferences.selectors.getSiteUserPreferences("recentlyViewedPages")(e.store.getState())||[]},m=function(t){return{getItems:function(t){return function(){var n=t.documentServices.pages.getPagesData(),i=s.popups(t),o=s.routers(t),u=function(t){return e.flatMap(t,function(t){var n=t.title,a=t.pagesData,i=t.biCategory;return a?[{title:n}].concat(_toConsumableArray(e.map(a,function(e){return{id:e.id,title:e.title,biCategory:i}}))):[]})}(s.pagesManagedByApps(t,n)),c=l(e.filter(o,"isSpecial")),d=l(e.reject(o,"isSpecial")),m=function(t,n){return e.flatMap(s.tpas(t,n),function(e){var t=e.title,n=e.pagesData;return[{title:t}].concat(_toConsumableArray(n))})}(t,n),f=e.flatMap([i,c,d,m,u]).length,b=s.menus(t,n,!0),y=function(t){return e.flatMap(t,function(t){var n=t.id,a=t.title,i=t.menuItems,s=e(i).flatMap(function(e){return p(e,n)}).compact().value();if(!e.isEmpty(s))return[{title:a}].concat(_toConsumableArray(s))})}(b),P=y.length-b.length,h=g(t,f+P);return function(e,t,n,a){t+n===0&&1===a&&(e[0]=null)}(y,f,h.length,b.length),e.compact([r({title:"NewPages_QuickNav_Pages_Recently_Viewed_Label"},h.length)].concat(_toConsumableArray(h),_toConsumableArray(y),_toConsumableArray(c),_toConsumableArray(u),_toConsumableArray(d),_toConsumableArray(m),[r(a.POPUPS,i.length)],_toConsumableArray(i)))}}(t),onClickItem:function(e){return function(t){var n=t.id,a=t.biCategory,s=c(n);e.pages.navigateTo(s),e.bi.event(i.events.pages.navigate_to_page,{page_id:s,panel_name:"quick_navigation",category:a})}}(t),selectedItem:function(t){var n=e.invoke(t,"documentServices.pages.getFocusedPageId");return n?{id:n,title:t.pages.getPageTitle(n),isHomePage:t.pages.isHomePage(n)}:null}(t),onClickManagePages:function(e){return function(){e.panelManager.openPanel("pages.pagesPanel"),e.bi.event(i.events.pages.click_on_pages_panel_open,{origin:"quick_navigation"})}}(t),biEvent:t.bi.event,closeAllPanels:t.panelManager.closeAllPanels,updateRecentlyViewedPages:function(t){return function(a){if(!a)return[];var i=a.id,s=a.title,o=a.isHomePage,r=e.cloneDeep(n.editorPlugins.userPreferences.selectors.getSiteUserPreferences("recentlyViewedPages")(t.store.getState()))||[];if(e.isEmpty(r)&&o)return[];var l=e.find(r,{id:d(i)}),p=Date.now();l?(l.time=p,l.title=s):r.push({time:p,id:d(i),title:s,biCategory:"recently_viewed"});var u=e(r).sortBy("time").filter(function(e){return t.pages.isPageExist(c(e.id))}).reverse().slice(0,3).value();t.store.dispatch(n.editorPlugins.userPreferences.actions.setSiteUserPreferences("recentlyViewedPages",u))}}(t),backToAdiTooltip:function(e){return o.isOpen("se_backToADIFromEditor")?{visibility:function(e){return n.editorPlugins.topBar.selectors.getBackToAdiTooltipVisibility(e.store.getState())}(e),close:function(e){return function(){e.store.dispatch(n.editorPlugins.topBarTooltip.actions.closeBackToAdiTooltip())}}(e)}:null}(t)}};return m.PANEL_NAME="quick_navigation",m}),define("pages/quickNavigation/quickNavigation.rt",["react","lodash","baseUILib","util"],function(e,t,n,a){"use strict";return function(){return e.createElement("div",{className:"quick-navigation-pp",onMouseEnter:this.handleMouseEnter,onClick:this.onClick},e.createElement(n.DropDown,{value:this.getSelectedItemId(),onChange:this.handleClickItem,shouldTranslate:!1,searchBox:!0,onToggle:this.handleToggle,forceOpen:this.state.forceOpen,dataLabel:a.translate("NewPages_QuickNav_Label"),optionsContainerClassName:"dropdown-quick-navigation-pp"},this.getContent(),e.createElement(n.DropDownStickyFooter,{closeOnClick:!0},e.createElement(n.Button,{className:"btn-text",onClick:this.props.onClickManagePages},e.createElement("span",{className:"manage-pages-text"},a.translate("NewPages_QuickNav_Pages_Manage_Button"))))),e.createElement(n.Bubble,{className:"bubble-quick-navigation-pp",arrowAlignment:"top",arrowStyle:{position:"relative",left:"104px",top:"-97px"}},e.createElement(n.TextLabel,{value:"TOPBAR_NEWPAGES_TOOLTIP_TITLE",type:"T03",className:"bubble-title-quick-navigation-pp",enableEllipsis:!1}),e.createElement(n.TextLabel,{value:"TOPBAR_NEWPAGES_TOOLTIP_BODY",enableEllipsis:!1})))}}),define("pages/quickNavigation/quickNavigation",["lodash","react","prop-types","higherOrderComponents","baseUILib","pages/quickNavigation/quickNavigationMapper","coreBi","pages/quickNavigation/quickNavigation.rt","experiment"],function(e,t,n,a,i,s,o,r,l){"use strict";var p=function(n){return[t.createElement(i.SectionDivider,{className:"upper",key:e.uniqueId("section-divider")},e.toUpper(n))]},u=function(n){return t.createElement(i.DropDownOption,{value:n.id,label:n.title,shouldTranslate:!1,disabled:n.isFolder||n.isLink,optionWrapperClassName:function(e){return e.isNested?"nested-page":e.isFolder?"folder":e.isLink?"link":void 0}(n),key:e.uniqueId("quick-navigation-option")})},c=function(n){function a(t){_classCallCheck(this,a);var n=_possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,t));return n.state={items:t.selectedItem?n.props.getItems():[],forceOpen:!1},n.handleMouseEnter=function(){n.setState({items:n.props.getItems()}),l.isOpen("se_backToADIFromEditor")&&n.props.backToAdiTooltip.visibility&&n.props.backToAdiTooltip.close()},n.getContent=function(){return e.flatMap(n.state.items,function(e){return e.id?u(e):p(e.title)})},n.getSelectedItemId=function(){return n.props.selectedItem?n.props.selectedItem.id:null},n.handleClickItem=function(t){return n.props.onClickItem(e.find(n.state.items,{id:t}))},n.onClick=function(){n.props.biEvent(o.events.topbar.top_bar_click,{category:s.PANEL_NAME}),n.props.biEvent(o.events.pages.quick_navigation_clicked,{origin:"top_bar"})},n.handleToggle=function(e){e?n.props.closeAllPanels():n.setState({forceOpen:!1})},n}return _inherits(a,t.Component),_createClass(a,[{key:"componentWillReceiveProps",value:function(e){(function(e,t){var n=!e&&t,a=e&&e.id!==t.id,i=e&&e.id===t.id&&e.title!==t.title;return n||a||i})(this.props.selectedItem,e.selectedItem)&&(this.props.updateRecentlyViewedPages(e.selectedItem),this.setState({items:e.getItems()}));e.forceOpenEventCounter>this.props.forceOpenEventCounter&&this.setState({items:e.getItems(),forceOpen:!0})}},{key:"render",value:function(){return r.call(this)}}]),a}();c.displayName="QuickNavigation",c.propTypes={onClickItem:n.func.isRequired,onClickManagePages:n.func.isRequired,getItems:n.func.isRequired,selectedItem:n.shape({id:n.string.isRequired,title:n.string.isRequired,isHomePage:n.bool.isRequired}),updateRecentlyViewedPages:n.func.isRequired,forceOpenEventCounter:n.number,biEvent:n.func,closeAllPanels:n.func,backToAdiTooltip:n.shape({visibility:n.bool,close:n.func}),currentPageId:n.string};var d=a.connectEditorAPI(s)(a.renderWhenMutated(c));return d.pure=c,d}),define("pages",["pages/panel/pagesPanel","pages/quickNavigation/quickNavigation"],function(e,t){"use strict";return{pagesPanel:e,quickNavigation:t}});
//# sourceMappingURL=pages.min.js.map