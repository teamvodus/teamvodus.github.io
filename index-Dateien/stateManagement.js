function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}define("stateManagement/applicationStudio/applicationStudioActionTypes",[],function(){"use strict";return{SET_AVAILABLE_APPS:"SET_AVAILABLE_APPS",SET_IS_LOADING:"SET_IS_LOADING"}}),define("stateManagement/topBar/topBarActionTypes",[],function(){"use strict";return{OVERRIDE_TOP_BAR:"override-top-bar",SET_ADI_TOOLTIP_VISIBILITY:"set-adi-tooltip-visibility"}}),define("stateManagement/topBar/topBarReducer",["lodash","constants","stateManagement/topBar/topBarActionTypes"],function(e,t,n){"use strict";var a=n.OVERRIDE_TOP_BAR,r=n.SET_ADI_TOOLTIP_VISIBILITY;return function(n,i){switch(i.type){case a:return e.assign({},n,{overridden:function(n){var a=i.overridden,r=t.OVERRIDDEN.TOP_BAR,o=r.BUTTONS,s=r.MENUS,u=r.MENU_ITEMS,c=function(t,n){return e(t).pick(e.map(n,"KEY")).mapValues(function(t,a){return e.pick(t,e.values(e.find(n,["KEY",a])))}).value()};return e.assign(c(a,t.OVERRIDDEN.TOP_BAR),{buttons:c(a.buttons,o),menus:c(a.menus,s),menuItems:c(a.menuItems,u)})}()});case r:return e.assign({},n,{adiTooltipVisibility:i.visibility});default:return n}}}),define("stateManagement/topBar/topBarSelectors",["constants"],function(e){"use strict";var t=e.OVERRIDDEN;return{getOverriddenButtons:function(e){return e.topBar.overridden.buttons},getOverriddenMenus:function(e){return e.topBar.overridden.menus},getOverriddenMenuItems:function(e){return e.topBar.overridden.menuItems},getOverriddenQuickNavigation:function(e){return e.topBar.overridden[t.TOP_BAR.QUICK_NAVIGATION.KEY]},getBackToAdiTooltipVisibility:function(e){return e.topBar.adiTooltipVisibility}}}),define("stateManagement/topBar/topBarActions",["stateManagement/topBar/topBarActionTypes"],function(e){"use strict";return{overrideItems:function(t){return{type:e.OVERRIDE_TOP_BAR,overridden:t}},setAdiTooltipVisibility:function(t){return{type:e.SET_ADI_TOOLTIP_VISIBILITY,visibility:t}}}}),define("stateManagement/topBar/topBar",["stateManagement/topBar/topBarReducer","stateManagement/topBar/topBarSelectors","stateManagement/topBar/topBarActions"],function(e,t,n){"use strict";return{reducer:e,selectors:t,actions:n}}),define("stateManagement/leftBar/leftBarData",["util","coreBi","constants","experiment"],function(e,t,n,a){"use strict";var r={panelName:n.ROOT_COMPS.LEFTBAR.MY_UPLOADS_PANEL_NAME,panelProps:{},label:"LEFTBAR_MY_UPLOADS_LABEL",className:"my-uploads-panel",symbolName:"leftBarMyUploadsPanel"};return{desktop:function(){var r=[{panelName:n.ROOT_COMPS.LEFTBAR.ADD_PANEL_NAME,panelProps:{},label:"LEFTBAR_ADD_LABEL",className:"add-panel",symbolName:"leftBarAddPanel",hintProps:{id:"AddPanel"}},{panelName:n.ROOT_COMPS.LEFTBAR.ADD_APPS_PANEL_NAME,panelProps:{urlParams:{openMarketOrigin:"market_button"},openPanelBiEvent:e.bi.events.OPEN_MARKET_CLICK,openPanelBiParams:{referral_info:"market_button"}},label:"app_market_button_text",className:"app-market-panel",symbolName:"leftBarAppMarketPanel",hintProps:{id:"AppMarket"}},{panelName:n.ROOT_COMPS.LEFTBAR.MY_UPLOADS_PANEL_NAME,panelProps:{},label:"LEFTBAR_MY_UPLOADS_LABEL",className:"my-uploads-panel",symbolName:"leftBarMyUploadsPanel"}];a.isOpen("removeBGButton")||(r=[{panelName:n.ROOT_COMPS.LEFTBAR.BACKGROUND_PANEL_NAME,panelProps:{},label:n.ROOT_COMPS.LEFTBAR.BACKGROUND_LABEL,className:"bg-panel",symbolName:"leftBarBackgroundPanel",hintProps:{id:"ChangeBackgrounds"}}].concat(r));return[{panelName:n.ROOT_COMPS.LEFTBAR.MENUS_AND_PAGES_PANEL_NAME,panelProps:{openPanelBiEvent:t.events.pages.click_on_pages_panel_open,openPanelBiParams:{origin:"left_bar"}},label:"LEFTBAR_PAGES_LABEL",className:"pages-panel-pp",symbolName:"leftBarPagesPanelManager"}].concat(r)}(),mobile:function(){var e=[{panelName:n.ROOT_COMPS.LEFTBAR.MENUS_AND_PAGES_PANEL_NAME,panelProps:{},label:"LEFTBAR_PAGES_LABEL",className:"pages-panel-pp",symbolName:"leftBarPagesPanelManager"}],t={panelName:n.ROOT_COMPS.LEFTBAR.BACKGROUND_PANEL_NAME,panelProps:{},label:n.ROOT_COMPS.LEFTBAR.BACKGROUND_LABEL,className:"bg-panel",symbolName:"leftBarBackgroundPanel",hintProps:{id:"ChangeBackgrounds"}};return a.isOpen("removeBGButton")||e.push(t),e=e.concat([{panelName:n.ROOT_COMPS.LEFTBAR.MOBILE_TOOLS_PANEL_NAME,panelProps:{},label:"mobile_features_section_title_mobile_tools",className:"mobile-elements-panel",symbolName:"mobileView",tooltips:[{id:"mobileElementsPanel_quickActionBar_afterRemove",value:"mobile_quick_actions_hide_tooltip",width:"240px"}]},{panelName:n.ROOT_COMPS.LEFTBAR.HIDDEN_ELEMENTS_PANEL_NAME,panelProps:{},label:"mobile_hidden_items_panel_title",className:"hidden-items-panel",symbolName:"hiddenComp",hintProps:{id:"MobileEditorHiddenElements"}},{panelName:n.ROOT_COMPS.LEFTBAR.PAGE_LAYOUT_OPTIMIZER_PANEL_NAME,panelProps:{},label:"mobile_layoutoptimizer_title",className:"layout-optimizer-panel",symbolName:"mobile_left_bar_optimize_layout",hintProps:{id:"MobileLayoutOptimizer"}}])}(),myUploadsButton:r}}),define("stateManagement/leftBar/leftBarSelectors",["lodash","reduxLibs","coreUtilsLib","stateManagement/leftBar/leftBarData","constants","experiment"],function(e,t,n,a,r,i){"use strict";var o=t.reselect.createSelector,s=function(e){return e.leftBar},u=function(e){return e.isMobileEditor},c=o(u,function(e){return e?"mobile":"desktop"}),l=o(s,u,function(t,n){return e.get(t,n&&i.isOpen("se_mobileLeftBarNotCollapsed")?"isMobileCollapsed":"isCollapsed")}),d=o(s,function(e){return e.collapseOnClick});return{getLeftBar:s,isCollapsed:l,getCollapseOnClick:d,isMobileEditor:u,getDeviceType:c,getDesktopSuperAppsCount:function(e){return e.leftBar.superApps.desktop.length},getMenuItems:function(t,o){var s=[],u=t.leftBar.superApps,c=[];return i.isOpen("enableMyUploadsButton")&&c.push(a.myUploadsButton),s=t.isMobileEditor?e.map(a.mobile,e.clone).concat(c,e.sortBy(n.objectUtils.cloneDeep(u.mobile),"order")):e.map(a.desktop,e.clone).concat(c,e.sortBy(n.objectUtils.cloneDeep(u.desktop),"order")),(s=o?function(t){var n=[r.ROOT_COMPS.LEFTBAR.BLOG_PANEL_NAME,r.ROOT_COMPS.LEFTBAR.BACKGROUND_PANEL_NAME];return e.filter(t,function(t){return!e.includes(n,t.panelName)})}(s):s).forEach(function(n,a){n.panelProps=n.panelProps||{},n.panelProps.panelIndex=a,n.collapseOnClick=function(t,n){return e.includes(t||[],n)}(d(t),n.panelName)}),e.compact(s).map(function(e){return"tpa.compPanels.appMarketPanel"===e.panelName&&(e.symbolName="leftBarAppMarketPanel-D",e.label="app_market_button_text_experiment_add_apps"),e})},getNotifications:function(e){return e.leftBar.notifications},getNotificationsCount:function(e,t){return e.leftBar.notifications[t]},getOverriddenItems:function(e){return e.leftBar.overridden}}}),define("stateManagement/userPreferences/constants",[],function(){"use strict";return{EDITOR_APP_ID:"editorAppId"}}),define("stateManagement/userPreferences/getKeyFromAppId",["lodash","stateManagement/userPreferences/constants"],function(e,t){"use strict";return function(n,a){return e.defaultTo(n,t.EDITOR_APP_ID)+"_"+a}}),define("stateManagement/userPreferences/userPreferencesSelectors",["lodash","coreUtilsLib","stateManagement/userPreferences/constants","stateManagement/userPreferences/getKeyFromAppId"],function(e,t,n,a){"use strict";var r=function(e){return e.userPreferences.site},i=function(e){return e.userPreferences.global},o=function(e){return e.userPreferences.session},s=function(t,i){return function(o){if(i=i||n.EDITOR_APP_ID,!e.isString(t))throw new Error("Getting a user preference for the site expects a key of type string but received: "+t);var s=a(i,t),u=r(o);return u[s]&&u[s].value}},u=function(n){return function(a){var r=i(a);if(null===r)return t.log.error("Global user preferences failed to load!"),null;if(!e.isString(n))throw new Error("Getting a global user preference expects a key of type string but received: "+n);return r[n]}},c=function(t){return function(n){if(!e.isString(t))throw new Error("Getting a session user preference expects a key of type string but received: "+t);return o(n)[t]}};return{getSiteId:function(e){return e.userPreferences.siteId},getPreferences:function(e){return function(t){return t.userPreferences[e]}},arePreferencesEmpty:function(t){return function(n){return e.isEmpty(n.userPreferences[t])}},dontSaveUserPrefs:function(e){return e.userPreferences.dontSaveUserPrefs},getAllGlobalUserPreferences:function(e){var n=i(e);return null===n?(t.log.error("Global user preferences failed to load!"),null):n},getGlobalUserPreferences:u,getAllSiteUserPreferences:function(t){return function(t){return function(n){return e.transform(r(n),function(e,n,a){var r=a.split("_");r[0]===t&&(e[r[1]]=n.value)},{})}}(n.EDITOR_APP_ID)(t)},getSiteUserPreferences:s,getAllSessionUserPreferences:function(e){return o(e)},getSessionUserPreferences:c,getUserPreferences:function(e){switch(e){case"site":return s;case"session":return c;case"global":return u}},getMediaPath:function(e){return function(t){return c("last_media_path_"+e)(t)||""}}}}),define("stateManagement/userPreferences/userPreferencesActionTypes",[],function(){"use strict";return{SET_SITE_ID:"set-site-id",SET_PREFERENCES:"set-preferences",SET_PREFERENCE:"set-preference",MARK_SITE_PREFERENCES_NOT_DIRTY:"mark-site-preferences-not-dirty",DONT_SAVE_USER_PREFERENCES:"dont-save-user-preferences"}}),define("stateManagement/userPreferences/userPreferencesActions",["lodash","coreUtilsLib","util","stateManagement/userPreferences/userPreferencesActionTypes","stateManagement/userPreferences/userPreferencesSelectors","stateManagement/userPreferences/constants","stateManagement/userPreferences/getKeyFromAppId"],function(e,t,n,a,r,i,o){"use strict";var s,u=i.EDITOR_APP_ID,c=n.serviceTopology.premiumStateApiUrl,l=c?c.replace(/\/getTpaPremiumState/,"-user-preferences-webapp/"):"https://editor.wix.com/_api/wix-user-preferences-webapp/",d="site",p="global",g=(s={},_defineProperty(s,d,{load:function(e){return l+"getVolatilePrefsForSite/htmlEditor/"+e},SAVE:l+"bulkSet",DELETE:l+"delete"}),_defineProperty(s,p,{load:function(){return l+"getVolatilePrefForKey/htmlEditor/global_preferences"},SAVE:l+"set"}),s),f=function(e,t){return{type:a.SET_PREFERENCES,typeId:e,preferences:t}},m=function(e,t,n){return{type:a.SET_PREFERENCE,typeId:e,key:t,value:n}},E=function(){return n.url.isTrue("fakeUserPrefs")},S=function(e){return r.getSiteId(e())},T=function(t,n,a){return e.mapValues(t,function(t){return{value:e.isUndefined(a)?t:a,isDirty:n}})},_=function(e,t){t===d&&e({type:a.MARK_SITE_PREFERENCES_NOT_DIRTY})},P=function(n,i,o,s,u){if(null!==r.getPreferences(o)(i())){if(E()){var c=function(n,a){switch(a){case p:return{global_preferences:r.getPreferences(p)(n())};case d:var i={};return e.forEach(r.getPreferences(d)(n()),function(e,t){i[t]=e.value}),i.version=3,i;default:return t.log.error("unknown type ID"),{}}}(i,o);return window.sessionStorage.setItem("user_prefs_"+o,JSON.stringify(c)),_(o),void(s&&s())}if(!r.dontSaveUserPrefs(i())){var l=function(t,n){switch(n){case p:return{nameSpace:"htmlEditor",key:"global_preferences",blob:r.getPreferences(p)(t())};case d:return function(t,n){var a={nameSpace:"htmlEditor",siteId:S(t),data:{}};return e.forEach(n,function(e,t){e.isDirty&&(a.data[t]=e.value)}),a.data.version=3,a}(t,r.getPreferences(d)(t()))}}(i,o);l?t.requestsUtil.fetch(g[o].SAVE,{method:"POST",credentials:"same-origin",headers:new Headers({"content-type":"application/json; charset=utf-8"}),body:JSON.stringify(l)}).then(function(){_(o),s&&s()}).catch(function(e){413===e.status&&n({type:a.DONT_SAVE_USER_PREFERENCES}),u&&u(e)}).catch(e.noop):s&&s()}}else u&&u("saving "+o+" preferences failed since they were not loaded")},M=function(a,i,s,c,l,m){a(f(s,c?function(n,a,r){switch(a){case p:return r.global_preferences;case d:return function(n,a){if(3===a.version)return T(a,!0);var r=e.assign({},e.omit(a,u,"version"),a[u]);return function(n,a){e.forEach(a,function(a,r){return function(n,a){E()||t.requestsUtil.fetch(g.site.DELETE,{method:"POST",credentials:"same-origin",headers:new Headers({"content-type":"application/json; charset=utf-8"}),body:JSON.stringify(function(e,t){return{nameSpace:"htmlEditor",key:t,siteId:S(e)}}(n,a))}).catch(e.noop)}(n,r)})}(n,a),r=e.transform(r,function(e,t,n){e[o(u,n)]=t},{}),r.version=3,T(r,!0)}(n,r);default:return t.log.error("unknown type ID"),{}}}(i,s,c):{})),function(e){var t=n.url.getParameterByName("resetUserPrefs").toLowerCase();return"all"===t||t===e}(s)?function(e,t,n,a,i){switch(n){case p:return function(e,t,n,a){e(f(p,{})),P(e,t,p,n,a)}(e,t,a,i);case d:(function(e,t,n,a){e(f(d,T(r.getPreferences(d)(t()),!0,null))),P(e,t,d,n,a)})(e,t,a,i)}}(a,i,s,l,m):l&&l()},A=function(n,a,r,i,o){if(E()){var s=window.sessionStorage.getItem("user_prefs_"+r);M(n,a,r,JSON.parse(s),i,o)}else{var u=g[r].load(S(a));t.requestsUtil.fetch(u,{contentType:"application/json",credentials:"same-origin",method:"GET"}).then(function(e){return e.json().catch()}).then(function(e){M(n,a,r,e,i,o)}).catch(o||e.noop)}},I=function(n,a){return function(i,o){if(!e.isString(n))throw new Error("Setting a global user preference expects a key of type string but received: "+n);return new Promise(function(s,u){null===r.getPreferences(p)(o())?(t.log.error("Global user preferences failed to load!"),u("Global user preferences failed to load!")):(e.isUndefined(a)&&(a=null),i(m(p,n,a)),P(i,o,p,s,u))})}},v=function(t,n,a){return function(r,i){if(!e.isString(t))throw new Error("Setting a user preference for the site expects a key of type string but received: "+t);return new Promise(function(s,c){a=a||u,e.isUndefined(n)&&(n=null);var l={value:n,isDirty:!0};t=o(a,t),r(m(d,t,l)),S(i)?P(r,i,d,s,c):s()})}},O=function(t,n){return function(a){if(!e.isString(t))throw new Error("Setting a session user preference expects a key of type string but received: "+t);return a(m("session",t,n)),n}};return{loadGlobalPreferences:function(){return function(e,n){return new Promise(function(a,r){A(e,n,p,a,function(n){var i=function(){e(f(p,null)),t.log.error("Global preferences failed to load!"),r("Global preferences failed to load!")};Promise.resolve().then(function(){return n.json()}).then(function(t){3001===t.errorCode?(e(f(p,{})),a()):i()}).catch(function(){return i()})})})}},loadSitePreferences:function(n,i){return function(o,s){return new Promise(function(u,c){var l=r.arePreferencesEmpty(d)(s());o(function(e){return{type:a.SET_SITE_ID,siteId:e}}(n));var p=e.partial(P,o,s,d,u,c);if(i)l||p();else if(l)A(o,s,d,p,function(){t.log.error("Site preferences failed to load!"),c("Site preferences failed to load!")});else{var g=r.getPreferences(d)(s());A(o,s,d,function(){o(f(d,e.merge(r.getPreferences(d)(s()),g))),p()},function(){t.log.error("Site preferences failed to load!"),p()})}})}},setGlobalUserPreferences:I,setSiteUserPreferences:v,setSessionUserPreferences:O,setSitePreferences:function(e){switch(e){case"site":return v;case"session":return O;case"global":return I}},setPreferences:f}}),define("stateManagement/store/initialEditorState",["constants"],function(e){"use strict";return{addPanel:{overridden:{categories:{},sections:{}}},componentsStore:{},gridLines:{overrides:_defineProperty({},e.GRID_LINES_TYPES.PAGE,null)},editorIsInit:!1,previewReady:!1,config:{topBarHeight:e.UI.TOPBAR_HEIGHT,previewHeight:null,previewWidth:null,languages:["latin"],extraSiteHeight:40},navControlsSize:null,editingAreaPosition:{top:0,left:0,height:0,width:0,right:0,bottom:0},wixCodeLoaded:!1,devModeContext:{type:e.DEVELOPER_MODE.CONTEXT_TYPES.PAGE,data:void 0},contextMenu:null,mouseActions:{performingMouseMoveAction:!1,usingWindowMouseEvents:!1},selection:{selectedComponents:[],compRestrictions:{},lastSelectionClickPos:null,focusedContainer:null},userProfile:{},stage:{highlights:[]},uploadedFonts:{list:[],queue:[],uploadedItems:{},timeOutTokens:[]},domMeasurements:{stageLayout:{bottom:0,height:0,left:0,right:0,top:0,width:0,x:0,y:0},scroll:{scrollLeft:0,scrollTop:0,scrollHeight:0,scrollWidth:0},stageRect:{top:0,bottom:0,left:0,right:0},previewPosition:{top:e.UI.TOPBAR_HEIGHT,left:0,height:0,width:0}},previewMode:!1,isMobileEditor:!1,snapData:null,lassoLayout:null,candidates:null,clipboard:{},site:{premiumPackage:void 0},topBar:{openedDropPanel:null,dropPanelDisabled:!1,shouldDropPanelRemainOpen:!1,overridden:{buttons:{},menus:{},menuItems:_defineProperty({},e.ROOT_COMPS.TOPBAR.TOOLS_MENU_ITEMS.WIDGET_PUBLIC_API,{isHidden:!0})},adiTooltipVisibility:!1},text:{isTextEditorOpen:!1},viewTools:{toolbarEnabled:void 0,developerToolBarEnabled:void 0,guidelinesEnabled:void 0,sectionsHandlesEnabled:void 0,snapToEnabled:void 0,rulersEnabled:void 0},rulers:{guidesState:{desktop:{verticalGuides:[],horizontalGuides:[]},mobile:{verticalGuides:[],horizontalGuides:[]}},selectedGuide:void 0,isHovered:void 0,isDragging:null,history:{stack:[],currentIndex:0}},hasDatabaseCollections:null,helpProps:null,attachCandidate:null,constraintArea:null,openPanels:[],previewingStatus:e.PROGRESS_STATUS.IDLE,savingStatus:e.PROGRESS_STATUS.IDLE,publishingStatus:e.PROGRESS_STATUS.IDLE,savePublish:{isSaveInProgress:!1,isPublishInProgress:!1,isDiffSaveInProgress:!1,publishPanelPromotionIndex:0},sitePremiumState:null,portalComps:{},mobile:{isHiddenItemsCounterVisible:!0,reAddedHiddenElement:{compRef:null,addingPhase:e.LEFT_BAR.MOBILE_HIDDEN_ELEMENTS.PROGRESS.IDLE},hiddenItems:{hoveredComponent:{},masterPageHiddenComponents:[],currentPageHiddenComponents:[]},mobileWizard:{enabled:!1,openingState:e.MOBILE.MOBILE_WIZARD.OPENING_STATE.BEFORE,currentStep:"",stepsToShow:[],userSelections:{tinyMenu:void 0,header:void 0,qab:void 0,backToTop:void 0},lastSaved:{tinyMenu:void 0,header:void 0,qab:void 0,backToTop:void 0},tinyMenu:{availableSkins:[],styleId:""},header:{animationInProgress:!1},qab:{availablePresets:[]}}},applyModeFromClipboardSuggestion:null,leftBar:{isCollapsed:!1,isMobileCollapsed:!1,notifications:{},superApps:{desktop:[],mobile:[]},buttonsBoundingRect:{},overridden:{}},leftTree:{overridden:{widgetsView:{isHidden:!0}}},dockedSections:[{sectionName:e.SECTIONS.PROPERTIES,isOpen:!1},{sectionName:e.SECTIONS.WIDGET_PUBLIC_API,isOpen:!1}],topBarPagesFilter:"",topBarCustomization:{tooltipOverrides:{UNDO:null,SAVE:null}},pageSections:{sections:null,selectedSection:null},siteScale:1,pinMode:{isOpen:!1,pinPreviewRectStyle:{opacity:0}},hideTools:!1,hideToolsAndMaintainStagePosition:!1,shouldHideToolsBtnBlink:!1,halfOpacityTools:!1,unreadComments:0,isOpenTextEditor:!1,imageCrop:{isOn:!1,cropArea:null,cropOriginArea:null},shouldOverlayUpdate:!0,tabIndicationState:{indication:"INACTIVE",activeMode:void 0},floatingBubble:{value:null,targetLayout:null,bubbleProps:{},shouldNotHideOnMouseLeaveTarget:!1},notifications:[],tpa:{appsIdsToRefreshOnDashboardClose:[]},scrollTo:null,animateScrollTo:null,eventCounters:{focus:0,clearTextSelection:0,forceOpenPagesQuickNavigation:0,forceOpenPagesPanel:0},viewerRendersCounter:0,userPreferences:{siteId:null,dontSaveUserPrefs:!1,session:{},site:{},global:null},dynamicPages:{innerRoutes:[],selectedInnerRoute:null,routerData:null,inInnerRoutesFetchProcess:!1},pages:{focusedPage:null,focusedPageTitle:""},easterEggs:{flyingMusa:null},siteDisplayName:null,multilingual:{supportedLanguages:[],loading:{isLoading:!1,producer:null},error:null},applicationStudio:{availableApps:[],isLoading:!1},appInstaller:{finishedCounter:0,totalApps:0,done:!1,installingAppName:""},__renderCounter:0}}),define("stateManagement/userPreferences/userPreferencesReducer",["lodash","stateManagement/userPreferences/userPreferencesActionTypes","stateManagement/store/initialEditorState"],function(e,t,n){"use strict";var a=t.SET_SITE_ID,r=t.SET_PREFERENCES,i=t.SET_PREFERENCE,o=t.MARK_SITE_PREFERENCES_NOT_DIRTY,s=t.DONT_SAVE_USER_PREFERENCES;return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.userPreferences,u=arguments[1];switch(u.type){case a:return e.assign({},t,{siteId:u.siteId});case r:return e.assign({},t,_defineProperty({},u.typeId,u.preferences));case i:return e.assign({},t,_defineProperty({},u.typeId,e.assign({},t[u.typeId],_defineProperty({},u.key,u.value))));case o:return e.assign({},t,{site:e.mapValues(t.site,function(t){return e.assign({},t,{isDirty:!1})})});case s:return e.assign({},t,{dontSaveUserPrefs:!0});default:return t}}}),define("stateManagement/userPreferences/userPreferences",["stateManagement/userPreferences/userPreferencesSelectors","stateManagement/userPreferences/userPreferencesActions","stateManagement/userPreferences/userPreferencesReducer"],function(e,t,n){"use strict";return{selectors:e,actions:t,reducer:n}}),define("stateManagement/panels/panelsSelectors",["lodash","reduxLibs"],function(e,t){"use strict";var n=function(e){return e.openPanels};return{selectOpenPanels:n,selectOpenPlatformPanels:t.reselect.createSelector(n,function(t){return e.filter(t,{type:"platform"})}),selectHelpProps:function(e){return e.helpProps},isColorPickerClosed:t.reselect.createSelector(n,function(t){return!e.some(t,{name:"panels.toolPanels.colorPicker.colorPickerPanel"})}),isLinkDialogClosed:t.reselect.createSelector(n,function(t){return!e.some(t,{name:"panels.toolPanels.linkPanel"})}),isMobileHiddenItemsPanelOpen:t.reselect.createSelector(n,function(t){return!!e.find(t,{name:"mobileEditor.hiddenItemsPanel"})})}}),define("stateManagement/devMode/devModeActionTypes",[],function(){"use strict";return{RESET_CONTEXT:"resetContext"}}),define("stateManagement/devMode/devModeActions",["stateManagement/devMode/devModeActionTypes"],function(e){"use strict";var t=e.RESET_CONTEXT;return{resetDevModeContext:function(){return{type:t}}}}),define("stateManagement/devMode/devModeSelectors",[],function(){"use strict";return{selectDevModeContext:function(e){return e.devModeContext}}}),define("stateManagement/devMode/devMode",["stateManagement/devMode/devModeActions","stateManagement/devMode/devModeSelectors"],function(e,t){"use strict";return{actions:e,selectors:t}}),define("stateManagement/helpPanel/helpPanelActionTypes",[],function(){"use strict";return{OPEN_HELP_CENTER:"openHelpCenter",CLOSE_HELP_CENTER:"closeHelpCenter"}}),define("stateManagement/helpPanel/helpPanelReducer",["lodash","stateManagement/helpPanel/helpPanelActionTypes"],function(e,t){"use strict";var n=t.OPEN_HELP_CENTER,a=t.CLOSE_HELP_CENTER;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments[1];switch(t.type){case n:return t.helpPanelProps;case a:return null;default:return e}}}),define("stateManagement/helpPanel/helpPanelActions",["stateManagement/helpPanel/helpPanelActionTypes"],function(e){"use strict";var t=e.OPEN_HELP_CENTER,n=e.CLOSE_HELP_CENTER;return{openHelpCenter:function(e){return{type:t,helpPanelProps:e}},closeHelpCenter:function(){return{type:n}}}}),define("stateManagement/helpPanel/helpPanel",["stateManagement/helpPanel/helpPanelReducer","stateManagement/helpPanel/helpPanelActions"],function(e,t){"use strict";return{reducer:e,actions:t}}),define("stateManagement/dynamicPages/dynamicPagesActionTypes",[],function(){"use strict";return{SET_INNER_ROUTES:"set-inner-routes",RESET_INNER_ROUTES:"reset-inner-routes",SET_ROUTER_DATA:"set-router-data",RESET_ROUTER_DATA:"reset-router-data",SET_SELECTED_INNER_ROUTE:"set-selected-inner-route",RESET_SELECTED_INNER_ROUTE:"reset-selected-inner-route",SET_INNER_ROUTES_FETCH_PROCESS:"set-inner-routes-fetch-process",RESET_INNER_ROUTES_FETCH_PROCESS:"reset-inner-routes-fetch-process"}}),define("stateManagement/dynamicPages/dynamicPagesSelectors",["lodash"],function(e){"use strict";return{getRouterData:function(e){return e.dynamicPages.routerData},getRouterId:function(t){return e.get(t.dynamicPages.routerData,"routerId")},getInnerRoutes:function(e){return e.dynamicPages.innerRoutes},getSelectedInnerRoute:function(e){return e.dynamicPages.selectedInnerRoute},isInInnerRoutesFetchProcess:function(e){return e.dynamicPages.inInnerRoutesFetchProcess}}}),define("stateManagement/dynamicPages/dynamicPagesActions",["lodash","stateManagement/dynamicPages/dynamicPagesActionTypes","stateManagement/dynamicPages/dynamicPagesSelectors"],function(e,t,n){"use strict";var a=function(e){return{type:t.SET_INNER_ROUTES,innerRoutes:e}},r=function(){return{type:t.RESET_INNER_ROUTES}},i=function(e){return{type:t.SET_ROUTER_DATA,routerData:e}},o=function(){return{type:t.RESET_ROUTER_DATA}},s=function(e){return{type:t.SET_SELECTED_INNER_ROUTE,selectedInnerRoute:e}},u=function(){return{type:t.RESET_SELECTED_INNER_ROUTE}},c=function(){return{type:t.SET_INNER_ROUTES_FETCH_PROCESS}},l=function(){return{type:t.RESET_INNER_ROUTES_FETCH_PROCESS}},d=function(){return function(e){e(r()),e(o()),e(u())}},p=function(t,a){return function(r,i){a=a||n.getRouterId(i()),r(function(t,n){return function(a,r,i){var o=i.dsWrite,s=function(t,n,a){var r=a.data.createItem("DynamicPageLink");return e.assign(r,{innerRoute:t||"",routerId:n})}(t,n,o);r().previewMode&&o.pages.navigateTo(s)}}(t,a)),r(s(t))}},g=function(t,n){return function(r,o,u){var g=u.dsRead,f=t||g.pages.getPrimaryPageId(),m=n||g.routers.getRouterDataForPageIfExist(f);m?(r(c()),g.routers.getRouterInnerRoutes(m.routerId,f,function(t){r(l()),t=e.sortBy(t,["title"]);var n=g.pages.getPrimaryPageId(),o=n!==f,u=g.routers.getRouterDataForPageIfExist(n);if(!o&&e.isEqual(m,u)){if(1===t.length&&"/"===t[0].url)return r(a([])),r(i(u)),void r(s(null));var c=g.routers.getCurrentInnerRoute(),E=e.get(c,"innerRoute"),S=E?function(t,n){var a=e.findIndex(n,["url",t]);return-1===a?0:a}(E,t):0,T=t[S]?t[S].url:null;r(a(t)),r(i(u)),r(E&&E===T?s(T):p(T,u.routerId))}else r(d())})):r(d())}};return{setInnerRoutes:a,resetInnerRoutes:r,setRouterData:i,resetRouterData:o,setSelectedInnerRoute:s,resetSelectedInnerRoute:u,setInnerRouteFetchProcess:c,resetInnerRouteFetchProcess:l,fetchInnerRoutes:g,resetAllDynamicPageData:d,updateDynamicPagesState:function(){return function(t,a,r){var i=r.dsRead,o=i.routers.getCurrentInnerRoute();if(o.isDynamic){var u=n.getRouterId(a());if(!n.isInInnerRoutesFetchProcess(a())&&o.routerId!==u||!o.innerRoute||function(t,a){var r=a.pages.getPrimaryPageId(),i=n.getRouterData(t()),o=a.routers.getRouterDataForPageIfExist(r);return!e.isEqual(i,o)}(a,i))t(g());else{var c=n.getSelectedInnerRoute(a());o.innerRoute!==c&&t(s(o.innerRoute))}}else t(d())}},setSelectedInnerRouteAndNavigate:p}}),define("stateManagement/dynamicPages/dynamicPagesReducer",["lodash","stateManagement/dynamicPages/dynamicPagesActionTypes","stateManagement/store/initialEditorState"],function(e,t,n){"use strict";var a=t.SET_INNER_ROUTES,r=t.RESET_INNER_ROUTES,i=t.SET_ROUTER_DATA,o=t.RESET_ROUTER_DATA,s=t.SET_SELECTED_INNER_ROUTE,u=t.RESET_SELECTED_INNER_ROUTE,c=t.SET_INNER_ROUTES_FETCH_PROCESS,l=t.RESET_INNER_ROUTES_FETCH_PROCESS;return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.dynamicPages,d=arguments[1];switch(d.type){case a:return e.assign({},t,{innerRoutes:d.innerRoutes});case r:return e.assign({},t,{innerRoutes:[]});case i:return e.assign({},t,{routerData:d.routerData});case o:return e.assign({},t,{routerData:null,innerRoutes:[],selectedInnerRoute:null});case s:return e.assign({},t,{selectedInnerRoute:d.selectedInnerRoute});case u:return e.assign({},t,{selectedInnerRoute:null});case c:return e.assign({},t,{inInnerRoutesFetchProcess:!0});case l:return e.assign({},t,{inInnerRoutesFetchProcess:!1});default:return t}}}),define("stateManagement/dynamicPages/dynamicPages",["stateManagement/dynamicPages/dynamicPagesActions","stateManagement/dynamicPages/dynamicPagesReducer","stateManagement/dynamicPages/dynamicPagesSelectors"],function(e,t,n){"use strict";return{actions:e,reducer:t,selectors:n}}),define("stateManagement/bi/biActions",["lodash","util"],function(e,t){"use strict";return{event:function(n,a){return function(r,i,o){var s=o.dsWrite;if(s){n=e.defaults({},n,{src:38,endpoint:"editor",sampleRatio:0,esi:t.editorModel.editorSessionId}),a=[].concat(a)||[{}];var u=t.editorModel.permissionsInfo;if(u){var c=u.ownerId,l=e.map(u.loggedInUserRoles,"role").join(",");a=e.map(a,function(t){return e.assign({},t,{ownerId:c,roles:l})})}e.forEach(a,function(e){s.bi.event(n,e)})}}},error:function(e,t){return function(n,a,r){r.dsWrite.bi.error(e,t)}}}}),define("stateManagement/bi/bi",["stateManagement/bi/biActions"],function(e){"use strict";return{actions:e}}),define("stateManagement/panels/panelsActionTypes",[],function(){"use strict";return{OPEN_PANEL:"openPanel",UPDATE_PANEL:"updatePanel",CLOSE_ALL_PANELS:"closeAllPanels",CLOSE_PANEL_BY_NAME:"closePanelByName",CLOSE_PANEL_BY_PROP:"closePanelByProp",STAGE_MOUSE_DOWN:"STAGE_MOUSE_DOWN"}}),define("stateManagement/panels/panelsActions",["lodash","util","stateManagement/panels/panelsSelectors","stateManagement/devMode/devMode","stateManagement/helpPanel/helpPanel","stateManagement/dynamicPages/dynamicPages","stateManagement/bi/bi","coreUtilsLib","constants","coreBi","stateManagement/panels/panelsActionTypes"],function(e,t,n,a,r,i,o,s,u,c,l){"use strict";function d(t,n){return e.defaults({},n,{panelName:t,key:t+e.uniqueId()})}function p(t,n){t&&e.isFunction(t.resolve)&&t.resolve(n)}var g=a.selectors,f=a.actions,m=r.actions,E=i.actions,S=l.OPEN_PANEL,T=l.UPDATE_PANEL,_=l.CLOSE_ALL_PANELS,P=l.CLOSE_PANEL_BY_NAME,M=l.CLOSE_PANEL_BY_PROP,A=l.STAGE_MOUSE_DOWN,I=function(e){return{type:S,panelDescriptor:e}},v=function(e){return{type:T,panelDescriptor:e}},O=function(){return{type:_}},R=function(e,t){return{type:M,prop:e,propValue:t}},h=g.selectDevModeContext,y=n.selectOpenPanels,N=n.selectOpenPlatformPanels,L=function(t){return function(n,a,r){var i=r.dsRead,o=a(),s=y(o),c=e.difference(t,s),l=e.filter(c,{name:"platformPanels.fullStagePanel"});e.isEmpty(l)||h(o).type!==u.DEVELOPER_MODE.CONTEXT_TYPES.COLLECTION||(n(f.resetDevModeContext()),i.routers.getCurrentInnerRoute().isDynamic&&n(E.fetchInnerRoutes()))}},D=function(t,n,a){return function(r,i){a||r(b()),e.includes(t,"help")&&s.log.error("openPanel method is deprecated for help panels. Use openHelpCenter instead");var o=y(i()),u=e.find(o,{name:t});r(u&&u.singleInstance?v({name:t,props:n}):C(t,n))}},C=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(a){var r={name:t,props:d(t,n)};e.get(n,"token")&&e.assign(r,{token:e.get(n,"token")}),a(I(r)),a(o.actions.event(c.events.panels.PANEL_OPENED,{panel_name:t}))}},b=function(){return function(t,n){var a=n(),r=y(a);e.forEach(r,function(e){t(o.actions.event(c.events.panels.PANEL_CLOSED,{panel_name:e.name}))}),function(t){e.forEach(t,function(e){p(e)})}(N(a)),t(O()),t(L(r))}},U=function(t,n,a){return function(r,i){var s=i(),u=y(s);e(s).thru(N).filter(function(e){return e.props[t]===n}).forEach(function(e){p(e)}),r(R(t,n));var l=y(i()),d=e.difference(u,l);e.forEach(d,function(e){r(o.actions.event(c.events.panels.PANEL_CLOSED,{panel_name:e.props.panelName,origin:a}))}),r(L(u))}},B=function(e,t){return function(n){n(U("panelName",e,t))}},w=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(a){a(b());var r={name:t,props:e.assign({},d(t,n),{useLastPanelPosition:!!n.useLastPanelPosition}),frameType:u.PANEL_TYPES.COMP};a(I(r)),a(o.actions.event(c.events.panels.PANEL_OPENED,{panel_name:t}))}};return{openPanelAction:I,updatePanelAction:v,closeAllPanels:O,closePanelByNameAction:function(e){return{type:P,panelName:e}},closePanelByPropKeyAction:R,stageMouseDown:function(){return{type:A}},setPanelType:function(e,t,n){return{type:T,panelDescriptor:{name:e,frameType:t,singleInstance:n}}},updateOrOpenPanel:D,openComponentPanel:w,openPlatformPanel:function(t){return function(n){var a=e.assign({name:t.panelName,props:d(t.panelName,t.panelProps),type:u.PANEL_TYPES.PLATFORM,token:t.panelProps.token},e.get(t,"panelMetaData",{}));n(D(a.name,a.props,!a.closeAllOtherPanels)),n(v(a))}},closeOpenedPanels:b,closePanelByPropKey:U,closePanelByName:B,openHelpCenter:function(n,a,r){return function(i){var s=[],l=function(){var n=t.editorModel.permissionsInfo;return n?"ownerId="+n.ownerId+"&roles="+e.map(n.loggedInUserRoles,"role").join(","):""}();l&&s.push(l),r&&r.component&&s.push("selectedCompType="+r.component);var d=n||u.GENERAL_HELP_KEY,p=s.length?d+"?"+s.join("&"):d,g=e.assign({},a,{helpUrl:p,biHelpParams:r,panelName:"panels.helpPanels.helpPanel"});i(m.openHelpCenter(g));var f=e.assign({learn_more:!1},r);i(o.actions.event(c.events.help.HELP_CLICK,f))}},closeAllPanelsOfType:function(t){return function(n,a){var r=y(a());e(r).filter({frameType:t}).map("name").map(B).forEach(n)}},closePlatformPanel:function(t,n){return function(a,r){var i=y(r()),o=e.find(i,{token:t});o&&(p(o,n),a(B(o.name)))}},openFirstTimePanel:function(t){return function(n){if(e.includes(u.FIRST_TIME_PANEL_COMPONENTS,t)){var a="compPanels.panels."+t+".firstTime";n(w(a,{panelName:a,title:"firstTime"}))}}},updatePanel:function(e,t){return function(n){n(v({name:e,props:t}))}}}}),define("stateManagement/panels/panelsReducer",["lodash","stateManagement/panels/panelsActionTypes","constants"],function(e,t,n){"use strict";var a=t.OPEN_PANEL,r=t.UPDATE_PANEL,i=t.CLOSE_ALL_PANELS,o=t.CLOSE_PANEL_BY_NAME,s=t.CLOSE_PANEL_BY_PROP,u=t.STAGE_MOUSE_DOWN,c=[n.PANEL_TYPES.LEFT,n.PANEL_TYPES.TPA_SETTINGS];return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments[1];switch(n.type){case a:return t.concat(n.panelDescriptor);case r:return e.map(t,function(t){return t.name===n.panelDescriptor.name?e.assign({},t,n.panelDescriptor,{props:e.assign({},t.props,n.panelDescriptor.props)}):t});case o:return e.reject(t,{name:n.panelName});case s:return e.reject(t,function(e){return e.props[n.prop]===n.propValue});case i:return t.length?[]:t;case u:return e.reject(t,function(t){return e.includes(c,t.frameType)});default:return t}}}),define("stateManagement/panels/panels",["stateManagement/panels/panelsActions","stateManagement/panels/panelsReducer","stateManagement/panels/panelsSelectors"],function(e,t,n){"use strict";return{actions:e,reducer:t,selectors:n}}),define("stateManagement/leftBar/leftBarActionTypes",[],function(){"use strict";return{COLLAPSE_DESKTOP_MENU:"collapse-desktop-menu",COLLAPSE_MOBILE_MENU:"collapse-mobile-menu",EXPAND_BUTTON:"expand-button",COLLAPSE_BUTTON:"collapse-button",UPDATE_BUTTONS_BOUNDING_RECT:"update-buttons-bounding-rect",SET_NOTIFICATION_COUNT:"set-notification-count",INCREASE_NOTIFICATION_COUNT:"increase-notification-count",DECREASE_NOTIFICATION_COUNT:"decrease-notification-count",REMOVE_PANEL_NOTIFICATIONS:"removePanelNotifications",UPDATE_DESKTOP_SUPERAPP_BUTTON:"updateDesktopSuperappButton",UPDATE_MOBILE_SUPERAPP_BUTTON:"updatemobileSuperappButton",REMOVE_SUPERAPP_BUTTON:"removeSuperAppButton",OVERRIDE_LEFT_BAR:"override-left-bar"}}),define("stateManagement/leftBar/leftBarActions",["lodash","coreBi","constants","experiment","stateManagement/leftBar/leftBarSelectors","stateManagement/userPreferences/userPreferences","stateManagement/panels/panels","stateManagement/bi/bi","stateManagement/leftBar/leftBarActionTypes"],function(e,t,n,a,r,i,o,s,u){"use strict";var c=o.actions,l=function(){return{type:u.COLLAPSE_DESKTOP_MENU}},d=function(){return{type:u.COLLAPSE_MOBILE_MENU}},p=function(e){return{type:u.EXPAND_BUTTON,panelName:e}},g=function(e){return{type:u.REMOVE_PANEL_NOTIFICATIONS,panelName:e}},f=function(e){return{type:u.UPDATE_DESKTOP_SUPERAPP_BUTTON,buttonParams:e}},m=function(e){return{type:u.UPDATE_MOBILE_SUPERAPP_BUTTON,buttonParams:e}},E=s.actions.event,S=function(){return function(e,t){e(r.isMobileEditor(t())&&a.isOpen("se_mobileLeftBarNotCollapsed")?d():l())}},T={collapseDesktopMenu:l,collapseMobileMenu:d,expandButton:p,updateButtonsBoundingRect:function(e){return{type:u.UPDATE_BUTTONS_BOUNDING_RECT,boundingRect:e}},setNotificationsCount:function(e,t){return{type:u.SET_NOTIFICATION_COUNT,panelName:e,count:t}},increaseNotificationsCount:function(e,t){return{type:u.INCREASE_NOTIFICATION_COUNT,panelName:e,count:t}},decreaseNotificationsCount:function(e,t){return{type:u.DECREASE_NOTIFICATION_COUNT,panelName:e,count:t}},removePanelNotifications:g,updateDesktopSuperAppButton:f,updateMobileSuperAppButton:m,removeSuperAppButton:function(e){return{type:u.REMOVE_SUPERAPP_BUTTON,panelName:e}},overrideItems:function(e){return{type:u.OVERRIDE_LEFT_BAR,overridden:e}},collapseMenu:S,collapseButton:function(e){return function(t){t(function(e){return{type:u.COLLAPSE_BUTTON,panelName:e}}(e)),t(i.actions.setSiteUserPreferences(e+n.LEFT_BAR.WAS_BUTTON_CLICKED_KEY,!0))}},openAddPanel:function(){return function(e){e(S()),e(c.updateOrOpenPanel("addPanelInfra.addPanel"))}},sendBIButtonsCount:function(a){return function(i,o,s){var u=s.dsRead,c=r.getMenuItems(o(),a),l=u&&u.generalInfo.getSiteId();if(l){var d=e.map(c,"panelName"),p={count:c.length,site_id:l,shoutout_bool:e.includes(d,n.SUPER_APPS.SHOUTOUT_PANEL_NAME),blog_bool:e.includes(d,n.SUPER_APPS.BLOG_PANEL_NAME),social_blog_bool:e.includes(d,n.SUPER_APPS.NEW_BLOG_PANEL_NAME),booking_bool:e.includes(d,n.SUPER_APPS.BOOKINGS_PANEL_NAME),ecomm_bool:e.includes(d,n.SUPER_APPS.WIX_STORE_PANEL_NAME),rest_bool:!1};i(E(t.events.leftBar.LEFT_BAR_NUMBER_OF_BUTTONS,p))}}},addSuperAppsButton:function(t,r,o,s,u,c,l,d){return function(g,E){var S=function(t,r,i,o,s,u){return{panelName:t,panelProps:r,label:i,className:o,symbolName:s,order:function(t){return t===n.SUPER_APPS.NEW_BLOG_PANEL_NAME&&a.isOpen("changeNewBlogButtonBehaviour")?n.LEFT_BAR.SUPER_APPS_ORDER.DESKTOP.length:e.indexOf(n.LEFT_BAR.SUPER_APPS_ORDER.DESKTOP,t)}(t),isButtonOpen:u}}(t,r,o,s,u,d);g(f(S)),c&&g(m(S));var T=i.selectors.getSiteUserPreferences(t+n.LEFT_BAR.WAS_BUTTON_CLICKED_KEY)(E());l&&!T&&g(p(t))}},removeSuperAppsButton:function(e){return function(t){t(T.removeSuperAppButton(e)),t(g(e)),t(c.closePanelByNameAction(e))}}};return T}),define("stateManagement/leftBar/leftBarReducer",["lodash","constants","stateManagement/leftBar/leftBarActionTypes"],function(e,t,n){"use strict";var a=n.COLLAPSE_DESKTOP_MENU,r=n.COLLAPSE_MOBILE_MENU,i=n.EXPAND_BUTTON,o=n.COLLAPSE_BUTTON,s=n.UPDATE_BUTTONS_BOUNDING_RECT,u=n.SET_NOTIFICATION_COUNT,c=n.INCREASE_NOTIFICATION_COUNT,l=n.DECREASE_NOTIFICATION_COUNT,d=n.REMOVE_PANEL_NOTIFICATIONS,p=n.UPDATE_DESKTOP_SUPERAPP_BUTTON,g=n.UPDATE_MOBILE_SUPERAPP_BUTTON,f=n.REMOVE_SUPERAPP_BUTTON,m=n.OVERRIDE_LEFT_BAR,E=function(t){return function(n,a){return e.defaults({superApps:e.defaults(_defineProperty({},t,a),n.superApps)},n)}},S=function(t){return function(n,a){var r=e.find(n.superApps[t],{panelName:a.panelName});if(r){var i=e.map(n.superApps[t],function(t){return t===r?e.defaults(a,t):t});return E(t)(n,i)}return E(t)(n,n.superApps[t].concat(a))}};return function(n,E){switch(E.type){case a:return e.assign({},n,{isCollapsed:!0});case r:return e.assign({},n,{isMobileCollapsed:!0});case i:return e.defaults({collapseOnClick:e.union(n.collapseOnClick,[E.panelName])},n);case o:return e.assign({},n,{collapseOnClick:e.without(n.collapseOnClick,E.panelName)});case s:var T=["left","right","top","bottom"],_=e.pick(n.buttonsBoundingRect,T),P=e.pick(E.boundingRect,T);return e.isEqual(_,P)?n:e.assign({},n,{buttonsBoundingRect:P});case u:return e.assign({},n,{notifications:e.assign({},n.notifications,_defineProperty({},E.panelName,E.count))});case c:return e.assign({},n,{notifications:e.assign({},n.notifications,_defineProperty({},E.panelName,n.notifications[E.panelName]+(E.count||1)))});case l:return e.assign({},n,{notifications:e.assign({},n.notifications,_defineProperty({},E.panelName,n.notifications[E.panelName]-(E.count||1)))});case f:var M={desktop:e.reject(n.superApps.desktop,{panelName:E.panelName}),mobile:e.reject(n.superApps.mobile,{panelName:E.panelName})};return e.defaults({superApps:M},n);case d:return e.defaults({notifications:e.omit(n.notifications,E.panelName)},n);case p:return S("desktop")(n,E.buttonParams);case g:return S("mobile")(n,E.buttonParams);case m:return e.assign({},n,{overridden:function(n){var a=E.overridden;return e(a).pick(e.map(t.OVERRIDDEN.LEFT_BAR,"PANEL_NAME")).mapValues(function(n,a){return e.pick(n,e.values(e.find(t.OVERRIDDEN.LEFT_BAR,["PANEL_NAME",a])))}).value()}()});default:return n}}}),define("stateManagement/leftBar/leftBar",["stateManagement/leftBar/leftBarActions","stateManagement/leftBar/leftBarReducer","stateManagement/leftBar/leftBarSelectors"],function(e,t,n){"use strict";return{actions:e,reducer:t,selectors:n}}),define("stateManagement/leftTree/leftTreeActionTypes",[],function(){"use strict";return{OVERRIDE_LEFT_TREE:"override-left-tree"}}),define("stateManagement/leftTree/leftTreeActions",["stateManagement/leftTree/leftTreeActionTypes"],function(e){"use strict";return{overrideItems:function(t){return{type:e.OVERRIDE_LEFT_TREE,overridden:t}}}}),define("stateManagement/leftTree/leftTreeReducer",["lodash","constants","stateManagement/leftTree/leftTreeActionTypes","stateManagement/store/initialEditorState"],function(e,t,n,a){"use strict";var r=n.OVERRIDE_LEFT_TREE;return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.leftTree,i=arguments[1];switch(i.type){case r:return e.assign({},n,{overridden:function(n){var a=i.overridden;return e(a).pick(e.map(t.OVERRIDDEN.LEFT_TREE,"KEY")).mapValues(function(n,a){return e.pick(n,e.values(e.find(t.OVERRIDDEN.LEFT_TREE,["KEY",a])))}).value()}()});default:return n}}}),define("stateManagement/leftTree/leftTreeSelectors",[],function(){"use strict";return{getOverriddenItems:function(e){return e.leftTree.overridden}}}),define("stateManagement/leftTree/leftTree",["stateManagement/leftTree/leftTreeActions","stateManagement/leftTree/leftTreeReducer","stateManagement/leftTree/leftTreeSelectors"],function(e,t,n){"use strict";return{actions:e,reducer:t,selectors:n}}),define("stateManagement/addPanel/addPanelActionTypes",[],function(){"use strict";return{OVERRIDE_ADD_PANEL:"override-add-panel"}}),define("stateManagement/addPanel/addPanelReducer",["lodash","stateManagement/addPanel/addPanelActionTypes","constants"],function(e,t,n){"use strict";var a=t.OVERRIDE_ADD_PANEL;return function(t,r){switch(r.type){case a:return e.assign({},t,{overridden:function(t){var a=r.overridden,i=n.OVERRIDDEN.ADD_PANEL,o=i.CATEGORIES,s=i.SECTIONS,u=function(t,n){return e(t).pick(e.map(n,"ID")).mapValues(function(t,a){return e.pick(t,e.values(e.find(n,["ID",a])))}).value()};return{categories:u(a.categories,o),sections:u(a.sections,s)}}()});default:return t}}}),define("stateManagement/addPanel/addPanelSelectors",[],function(){"use strict";return{getOverriddenCategories:function(e){return e.addPanel.overridden.categories},getOverriddenSections:function(e){return e.addPanel.overridden.sections}}}),define("stateManagement/addPanel/addPanelActions",["stateManagement/addPanel/addPanelActionTypes"],function(e){"use strict";return{overrideItems:function(t){return{type:e.OVERRIDE_ADD_PANEL,overridden:t}}}}),define("stateManagement/addPanel/addPanel",["stateManagement/addPanel/addPanelReducer","stateManagement/addPanel/addPanelSelectors","stateManagement/addPanel/addPanelActions"],function(e,t,n){"use strict";return{reducer:e,selectors:t,actions:n}}),define("stateManagement/componentsStore/componentsStoreActionTypes",[],function(){"use strict";return{UPDATE_COMPONENT_STORE:"update-component-store",REMOVE_COMPONENTS_STORE:"remove-components-store"}}),define("stateManagement/componentsStore/componentsStoreReducer",["lodash","stateManagement/componentsStore/componentsStoreActionTypes","stateManagement/store/initialEditorState"],function(e,t,n){"use strict";var a=t.UPDATE_COMPONENT_STORE,r=t.REMOVE_COMPONENTS_STORE;return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.componentsStore,i=arguments[1];switch(i.type){case a:return function(t,n){var a,r=n.comp,i=n.key,o=n.value;return e.defaultsDeep(_defineProperty({},r.id,(a={},_defineProperty(a,i,o),_defineProperty(a,"compRef",r),a)),t)}(t,i);case r:return e.omit(t,e.map(i.comps,"id"));default:return t}}}),define("stateManagement/componentsStore/componentsStoreSelectors",["lodash"],function(e){"use strict";return{getComponentStore:function(e,t){var n=t.comp;return n?e.componentsStore[n.id]:null},getComponentStoreData:function(t,n){var a=n.comp,r=n.key;return a?e.get(t,["componentsStore",a.id,r],null):null},getComponentsList:function(t){return e.map(t.componentsStore,"compRef")}}}),define("stateManagement/componentsStore/componentsStoreActions",["stateManagement/componentsStore/componentsStoreActionTypes"],function(e){"use strict";return{updateComponentStore:function(t,n,a){return{type:e.UPDATE_COMPONENT_STORE,comp:t,key:n,value:a}},removeComponentsStore:function(t){return{type:e.REMOVE_COMPONENTS_STORE,comps:t}}}}),define("stateManagement/componentsStore/componentsStore",["stateManagement/componentsStore/componentsStoreReducer","stateManagement/componentsStore/componentsStoreSelectors","stateManagement/componentsStore/componentsStoreActions"],function(e,t,n){"use strict";return{reducer:e,selectors:t,actions:n}}),define("stateManagement/gridLines/gridLinesActionTypes",[],function(){"use strict";return{SET_GRID_LINES_OVERRIDES:"set-grid-lines-overrides"}}),define("stateManagement/gridLines/gridLinesReducer",["lodash","stateManagement/gridLines/gridLinesActionTypes","stateManagement/store/initialEditorState"],function(e,t,n){"use strict";var a=t.SET_GRID_LINES_OVERRIDES;return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.gridLines,r=arguments[1];switch(r.type){case a:return e.defaultsDeep({overrides:_defineProperty({},r.gridLinesType,r.overrides)},t);default:return t}}}),define("stateManagement/gridLines/gridLinesSelectors",[],function(){"use strict";return{getGridLinesOverrides:function(e,t){var n=t.gridLinesType;return e.gridLines.overrides[n]}}}),define("stateManagement/gridLines/gridLinesActions",["stateManagement/gridLines/gridLinesActionTypes"],function(e){"use strict";return{setGridLinesOverrides:function(t,n){return{type:e.SET_GRID_LINES_OVERRIDES,gridLinesType:t,overrides:n}}}}),define("stateManagement/gridLines/gridLines",["stateManagement/gridLines/gridLinesReducer","stateManagement/gridLines/gridLinesSelectors","stateManagement/gridLines/gridLinesActions"],function(e,t,n){"use strict";return{reducer:e,selectors:t,actions:n}}),define("stateManagement/selection/selectionActionTypes",[],function(){"use strict";return{SELECT_COMPONENTS:"selectComponents",ADD_TO_SELECTION:"addToSelection",CLEAR_SELECTED_COMPONENTS:"clearSelectedComponents",SET_SELECTED_COMPS_RESTRICTIONS:"setSelectedCompsRestrictions",SET_LAST_SELECTION_CLICK_POS:"setLastSelectionClickPos",SET_FOCUSED_CONTAINER:"setFocusedContainer"}}),define("stateManagement/selection/selectionReducer",["lodash","coreUtilsLib","stateManagement/selection/selectionActionTypes"],function(e,t,n){"use strict";var a=n.SET_FOCUSED_CONTAINER,r=n.SET_LAST_SELECTION_CLICK_POS,i=n.SELECT_COMPONENTS,o=n.ADD_TO_SELECTION,s=n.CLEAR_SELECTED_COMPONENTS,u=n.SET_SELECTED_COMPS_RESTRICTIONS,c={selectedComponents:[],compRestrictions:{}};return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,l=arguments[1];switch(l.type){case i:return e.isArray(l.compRefs)?e.defaults({selectedComponents:l.compRefs},n):(t.log.error("selected comps must be an array"),n);case o:return e.isArray(l.compRefs)?e.defaults({selectedComponents:n.selectedComponents.concat(l.compRefs)},n):(t.log.error("selected comps must be an array"),n);case s:return e.defaults({selectedComponents:[]},n);case u:return e.defaults({compRestrictions:l.restrictions},n);case r:return e.defaults({lastSelectionClickPos:l.pos},n);case a:return e.defaults({focusedContainer:l.focusedContainer||null},n);default:return n}}}),define("stateManagement/platform/platformActions",[],function(){"use strict";return{installApp:function(e){return function(t,n,a){a.dsWrite.platform.provision(e)}}}}),define("stateManagement/components/componentsSelectors",["lodash","constants","util"],function(e,t,n){"use strict";var a=n.array.asArray,r=function(n,r){if(n&&(e.isArray(n)&&n.length||n.id)){var i=a(n);return i.length>1?t.MULTISELECT.TYPE:r.components.getType(e.head(i))}return null},i=function(e,t){var n=a(e);return t.components.getContainer(n[0])};return{getCompType:r,getCompTypeSuffix:function(e,t){var n=r(e,t);return n&&n.split(".").pop()},getContainer:i,isRepeaterItem:function(e,t){if(!e)return!1;var n=i(e,t);return"wysiwyg.viewer.components.Repeater"===r(n,t)},getCompsData:function(t,n){var r=a(t);return e.map(r,n.components.data.get)},getLayoutRelativeToScreen:function(t,n,r){var i=a(n);return i.length>1?t.components.layout.getSnugLayoutRelativeToScreen(i):t.components.layout.getRelativeToScreen(e.head(i),r)},getBehaviors:function(t,n){var r=a(t),i=e(r).map(n.components.behaviors.get).compact().value();return 1===i.length?e.head(i):i}}}),define("stateManagement/components/componentsActions",["lodash"],function(e){"use strict";return{updateFixedPosition:function(t,n){return function(a,r,i){var o=i.dsRead,s=i.editorAPI,u=e.set(o.components.layout.getRelativeToStructure(t),"fixedPosition",n);s.components.layout.updateRelativeToStructure(t,u)}},setPreviewState:function(e,t){return function(n,a,r){r.dsWrite.documentMode.setComponentPreviewState(e,t)}},updateComponentProperties:function(e,t){return function(n,a,r){return r.dsWrite.components.properties.update(e,t)}},updateComponentLayout:function(e,t){return function(n,a,r){return r.dsWrite.components.layout.update(e,t)}},updateComponentsStyle:function(e,t){return function(n,a,r){return r.dsWrite.components.style.update(e,t)}},setComponentsStyleId:function(e,t){return function(n,a,r){return r.dsWrite.components.style.setId(e,t)}}}}),define("stateManagement/components/components",["stateManagement/components/componentsSelectors","stateManagement/components/componentsActions"],function(e,t){"use strict";return{selectors:e,actions:t}}),define("stateManagement/platform/platformSelectors",["lodash","stateManagement/components/components"],function(e,t){"use strict";return{isConnectedToDataBindingController:function(n,a){return e(n).thru(a.platform.controllers.connections.get).map("controllerRef").thru(function(e){return t.selectors.getCompsData(e,a)}).some({applicationId:"dataBinding"})}}}),define("stateManagement/platform/platform",["stateManagement/platform/platformActions","stateManagement/platform/platformSelectors"],function(e,t){"use strict";return{actions:e,selectors:t}}),define("stateManagement/selection/selectionSelectors",["lodash","stateManagement/platform/platform","stateManagement/components/components"],function(e,t,n){"use strict";var a=n.selectors,r=t.selectors.isConnectedToDataBindingController,i=function(e){return e.selection.selectedComponents};return{getSelectedCompsRefs:i,getSelectedComponentType:function(e,t){var n=i(e);return a.getCompTypeSuffix(n,t)},getSelectedCompRestrictions:function(t){return e.isEmpty(i(t))?{}:t.selection.compRestrictions},getLastSelectionClickPos:function(e){return e.selection.lastSelectionClickPos},getFocusedContainer:function(e){return e.selection.focusedContainer},getSelectedCompsData:function(e,t){var n=i(e);return a.getCompsData(n,t)},isSelectedCompConnectedToDataBindingController:function(t,n){var a=i(t);return 1===a.length&&r(e.head(a),n)}}}),define("stateManagement/highlights/highlightsActionTypes",[],function(){"use strict";return{ADD_TO_HIGHLIGHTS:"addToHighlights",REMOVE_COMPS_FROM_HIGHLIGHTS:"removeCompsFromHighlights",SET_HIGHLIGHTS:"setHighlights",CLEAR_HIGHLIGHTS:"clearHighlights",REMOVE_FROM_HIGHLIGHTS_BY_HIGHLIGHT_TYPE:"removeFromHighlightsByHighlightType"}}),define("stateManagement/highlights/highlightsReducer",["lodash","coreUtilsLib","stateManagement/highlights/highlightsActionTypes"],function(e,t,n){"use strict";var a=n.ADD_TO_HIGHLIGHTS,r=n.REMOVE_COMPS_FROM_HIGHLIGHTS,i=n.SET_HIGHLIGHTS,o=n.CLEAR_HIGHLIGHTS,s=n.REMOVE_FROM_HIGHLIGHTS_BY_HIGHLIGHT_TYPE;return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],u=arguments[1];switch(u.type){case a:return e.isArray(u.highlightsDefs)?n.concat(u.highlightsDefs):(t.log.error("highlights must be an array"),n);case r:return e.isArray(u.compRefs)?e.reject(n,function(t){return e.find(u.compRefs,t.compRef)}):(t.log.error("highlights must be an array"),n);case s:return e.isArray(u.highlightTypes)?e.reject(n,function(t){return e.includes(u.highlightTypes,t.type)}):(t.log.error("highlightTypes must be an array"),n);case i:return e.isArray(u.highlightsDefs)?u.highlightsDefs:(t.log.error("highlights must be an array"),n);case o:return[];default:return n}}}),define("stateManagement/highlights/highlightsSelectors",[],function(){"use strict";return{getHighlights:function(e){return e.stage.highlights}}}),define("stateManagement/mouseActions/mouseActionsSelectors",[],function(){"use strict";return{isPerformingMouseMoveAction:function(e){return e.mouseActions.performingMouseMoveAction},isUsingWindowMouseEvents:function(e){return e.mouseActions.usingWindowMouseEvents}}}),define("stateManagement/mouseActions/mouseActionsActionTypes",[],function(){"use strict";return{SET_USING_WINDOW_MOUSE_EVENTS:"setUsingWindowMouseEvents",SET_PERFORMING_MOUSE_ACTION:"setPerformingMouseAction"}}),define("stateManagement/mouseActions/mouseActionsActions",["stateManagement/mouseActions/mouseActionsActionTypes"],function(e){"use strict";return{setUsingWindowMouseEvents:function(t){return{type:e.SET_USING_WINDOW_MOUSE_EVENTS,usingWindowMouseEvents:t}},setPerformingMouseAction:function(t){return{type:e.SET_PERFORMING_MOUSE_ACTION,performingMouseMoveAction:t}}}}),define("stateManagement/mouseActions/mouseActions",["stateManagement/mouseActions/mouseActionsSelectors","stateManagement/mouseActions/mouseActionsActions"],function(e,t){"use strict";return{selectors:e,actions:t}}),define("stateManagement/highlights/highlightsActions",["lodash","constants","stateManagement/highlights/highlightsSelectors","stateManagement/selection/selectionSelectors","stateManagement/mouseActions/mouseActions","stateManagement/highlights/highlightsActionTypes"],function(e,t,n,a,r,i){"use strict";function o(e,n,a){return{compRef:n,layout:e.components.layout.getRelativeToScreen(n),type:a?t.UI.HIGHLIGHTS.TYPES.THICK_WITH_OPACITY:t.UI.HIGHLIGHTS.TYPES.THICK}}var s=i.ADD_TO_HIGHLIGHTS,u=i.REMOVE_COMPS_FROM_HIGHLIGHTS,c=i.SET_HIGHLIGHTS,l=i.CLEAR_HIGHLIGHTS,d=i.REMOVE_FROM_HIGHLIGHTS_BY_HIGHLIGHT_TYPE,p=function(e){return{type:s,highlightsDefs:e}},g=function(e){return{type:c,highlightsDefs:e}},f=function(e){return{type:d,highlightTypes:e}},m=r.selectors.isPerformingMouseMoveAction;return{addToHighlights:p,removeCompsFromHighlights:function(e){return{type:u,compRefs:e}},removeFromHighlightsByHighlightType:f,setHighlights:g,clearHighlights:function(){return{type:l}},handleSelectionHighlights:function(){return function(n,r,i){var s=i.dsRead,u=[],c=a.getSelectedCompsRefs(r()),l=e.head(c);if(n(f([t.UI.HIGHLIGHTS.TYPES.THICK_WITH_OPACITY,t.UI.HIGHLIGHTS.TYPES.THICK])),l){var d=function(t,n){var a=t.platform.controllers.connections.get(n);if(e.isArray(a)){var r=e.find(a,function(n){var a=n.controllerRef,r=n.role,i=t.platform.controllers.getStageData(a);return e.get(i,["connections",r,"relatedToRole"])});if(r){var i=r.controllerRef,o=r.role,s=t.platform.controllers.connections.getConnectedComponents(i),u=t.platform.controllers.getStageData(i).connections[o];return e.filter(s,function(n){return e.head(t.platform.controllers.connections.get(n)).role===u.relatedToRole&&t.components.is.rendered(n)&&t.components.is.visible(n)})}}}(s,l);if(!e.isEmpty(d))return d.forEach(function(e){return u.push(o(s,e,!1))}),void n(p(u));if("wysiwyg.viewer.components.Repeater"===s.components.getType(s.components.getContainer(l)))return u.push(o(s,l,!1)),void n(p(u));var g=s.components.getAncestors(l),m=e.find(g,function(e){return"wysiwyg.viewer.components.Repeater"===s.components.getType(s.components.getContainer(e))});m&&(u.push(o(s,m,!0)),n(p(u)))}}},handleRepeaterManageItemsHighlights:function(e,n){return function(a,r,i){var o=i.dsRead,s=[],u=n?t.UI.HIGHLIGHTS.TYPES.OVERLAY_WITH_OPACITY:t.UI.HIGHLIGHTS.TYPES.OVERLAY;a(f([u])),s.push(function(e,t,n){return{compRef:t,layout:e.components.layout.getRelativeToScreen(t),type:n}}(o,e,u)),a(p(s))}},updateHighlights:function(){return function(t,a,r){var i=r.dsRead,o=a(),s=n.getHighlights(o);if(!e.isEmpty(s)&&!m(o)){var u=e.map(s,function(t){return e.defaults({layout:i.components.layout.getRelativeToScreen(t.compRef)},t)});t(g(u))}}}}}),define("stateManagement/highlights/highlights",["stateManagement/highlights/highlightsReducer","stateManagement/highlights/highlightsSelectors","stateManagement/highlights/highlightsActions"],function(e,t,n){"use strict";return{reducer:e,selectors:t,actions:n}}),define("stateManagement/selection/selectionActions",["lodash","stateManagement/selection/selectionSelectors","stateManagement/highlights/highlights","stateManagement/selection/selectionActionTypes"],function(e,t,n,a){"use strict";var r=n.actions,i=a.SET_FOCUSED_CONTAINER,o=a.SET_LAST_SELECTION_CLICK_POS,s=a.SELECT_COMPONENTS,u=a.ADD_TO_SELECTION,c=a.CLEAR_SELECTED_COMPONENTS,l=a.SET_SELECTED_COMPS_RESTRICTIONS,d=t.getSelectedCompsRefs,p=function(e){return{type:s,compRefs:e}},g=function(e){return{type:l,restrictions:e}};return{addToSelection:function(e){return{type:u,compRefs:e}},selectComponentsAction:p,clearSelectedComponents:function(){return{type:c}},setSelectedCompsRestrictions:g,selectComponents:function(t,n){return function(a,i){var o=d(i());e.isEqual(o,t)||(a(p(t)),a(r.handleSelectionHighlights()),a(g(n)))}},setLastSelectionClickPos:function(e){return{type:o,pos:e}},setFocusedContainer:function(e){return{type:i,focusedContainer:e}}}}),define("stateManagement/selection/selection",["stateManagement/selection/selectionReducer","stateManagement/selection/selectionSelectors","stateManagement/selection/selectionActions"],function(e,t,n){"use strict";return{reducer:e,selectors:t,actions:n}}),define("stateManagement/pages/pagesActionTypes",[],function(){"use strict";return{SET_FOCUSED_PAGE:"set-focused-page",SET_FOCUSED_PAGE_TITLE:"set-focused-page-title"}}),define("stateManagement/pages/pagesActions",["stateManagement/pages/pagesActionTypes"],function(e){"use strict";return{setFocusedPage:function(t){return function(n,a,r){var i=r.editorAPI.pages.getPageTitle(t.id);n({type:e.SET_FOCUSED_PAGE,focusedPage:t}),n({type:e.SET_FOCUSED_PAGE_TITLE,focusedPageTitle:i})}}}}),define("stateManagement/pages/pagesReducer",["lodash","stateManagement/pages/pagesActionTypes","stateManagement/store/initialEditorState"],function(e,t,n){"use strict";var a=t.SET_FOCUSED_PAGE,r=t.SET_FOCUSED_PAGE_TITLE;return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.pages,i=arguments[1];switch(i.type){case a:return e.assign({},t,{focusedPage:i.focusedPage});case r:return e.assign({},t,{focusedPageTitle:i.focusedPageTitle});default:return t}}}),define("stateManagement/pages/pagesSelectors",["lodash"],function(e){"use strict";var t=function(e){return e.pages.focusedPage};return{getFocusedPage:t,getFocusedPageId:function(n){return e.get(t(n),"id")},getFocusedPageTitle:function(e){return e.pages.focusedPageTitle}}}),define("stateManagement/pages/pages",["stateManagement/pages/pagesActions","stateManagement/pages/pagesReducer","stateManagement/pages/pagesSelectors"],function(e,t,n){"use strict";return{actions:e,reducer:t,selectors:n}}),define("stateManagement/applicationStudio/applicationStudioPresets.json",[],function(){return{DEFAULT_WIDGET_ROOT_STRUCTURE:{componentType:"wysiwyg.viewer.components.MediaBox",components:[],style:"mc1",type:"Container",layout:{docked:{top:{px:20},hCenter:{px:0}},x:0,y:0,width:600,height:400},design:{type:"MediaContainerDesignData",background:{type:"BackgroundMedia",color:"#FFF",alignType:"center",fittingType:"fill",scrollType:"none",colorOverlay:"",colorOverlayOpacity:0},cssStyle:{},themeMappings:{}}}}}),define("stateManagement/applicationStudio/applicationStudioActions",["lodash","constants","util","stateManagement/applicationStudio/applicationStudioActionTypes","stateManagement/topBar/topBar","stateManagement/leftBar/leftBar","stateManagement/leftTree/leftTree","stateManagement/addPanel/addPanel","stateManagement/componentsStore/componentsStore","stateManagement/gridLines/gridLines","stateManagement/selection/selection","stateManagement/pages/pages","stateManagement/applicationStudio/applicationStudioPresets.json"],function(e,t,n,a,r,i,o,s,u,c,l,d,p){"use strict";var g=r.actions,f=i.actions,m=o.actions,E=s.actions,S=u.actions,T=c.actions,_=l.actions,P=function(e){return{type:a.SET_AVAILABLE_APPS,apps:e}},M=function(e){return{type:a.SET_IS_LOADING,isLoading:e}},A=t.OVERRIDDEN,I=t.COMPONENTS_STORE_KEYS.META_DATA_OVERRIDES,v={setAvailableApps:P,setIsLoading:M,applyApplicationStudioBehaviors:function(n){return function(a,r,i){var o=i.dsRead,s=d.selectors.getFocusedPage(r());if(s&&o.pages.isWidgetPage(s.id)){var u=e.head(o.components.getChildren(s));a(function(e){return function(t,n,a){var r=a.dsRead;e&&t(S.updateComponentStore(e,I,function(e){return{movable:!1,verticallyMovable:!1,horizontallyMovable:!1,resizableWithAnchors:!1,duplicatable:!1,pinnable:!1,rotatable:!1,groupable:!1,alignable:!1,draggable:!1,multiselectable:!1,disabledKnobs:[e.components.layout.RESIZE_SIDES.TOP]}}(r)))}}(u)),a(function(e){e(T.setGridLinesOverrides(t.GRID_LINES_TYPES.PAGE,[]))}),n&&a(_.selectComponents([u]))}else a(function(e){e(T.setGridLinesOverrides(t.GRID_LINES_TYPES.PAGE,null))})}},createWidget:function(){return function(e,t,n){return n.dsWrite.appStudio.widgets.create(null,p.DEFAULT_WIDGET_ROOT_STRUCTURE)}},deleteWidget:function(e){return function(t,n,a){a.dsWrite.appStudio.widgets.remove(e)}},setProperties:function(e,t){return function(n,a,r){r.dsWrite.appStudio.widgets.properties.set(e,t)}},displayWidget:function(e,t){return function(n,a,r){r.dsWrite.appStudio.widgets.display(e,t)}},duplicateWidget:function(e){return function(t,n,a){a.dsWrite.appStudio.widgets.duplicate(e)}},fetchAvailableApps:function(){return function(e){e(M(!0)),v.fetchAvailableAppsFromDevCenter().then(function(t){e(P(t)),e(M(!1))})}},fetchAvailableAppsFromDevCenter:function(){return new Promise(function(e){window.setTimeout(e,1e3,[{appDefinitionName:"EditorTestApp",appDefinitionId:"14f48129-5a30-0864-c7b3-162db8b95cc3"},{appDefinitionName:"UEA1.5",appDefinitionId:"15205eec-c023-2f10-2aa9-704f9538c2a3"}])})},openApplicationStudio:function(){return function(t,n){var a=n();t(g.overrideItems(function(t){var n=A.TOP_BAR,a=n.BUTTONS,r=n.MENUS,i=n.MENU_ITEMS,o=n.QUICK_NAVIGATION,s=function(n,a){var r=n.KEY;return _defineProperty({},r,e.assign({},t.topBar.overridden.buttons[r],a))},u=e.assign({},t.topBar.overridden.buttons,s(a.PUBLISH,_defineProperty({},a.PUBLISH.LABEL,"Package")),s(a.ZOOM_OUT,_defineProperty({},a.ZOOM_OUT.IS_HIDDEN,!0))),c=function(n,a){var r=n.KEY;return _defineProperty({},r,e.assign({},t.topBar.overridden.menus[r],a))},l=e.assign({},t.topBar.overridden.menus,c(r.SITE,_defineProperty({},r.SITE.LABEL,"Package Menu")),c(r.UPGRADE,_defineProperty({},r.UPGRADE.IS_HIDDEN,!0))),d=function(n,a){var r=n.KEY;return _defineProperty({},r,e.assign({},t.topBar.overridden.menuItems[r],a))},p=function(e){var t=e.KEY,n=e.IS_HIDDEN;return d({KEY:t},_defineProperty({},n,!0))},g=e.assign({},t.topBar.overridden.menuItems,p(i.SITE_GET_FEEDBACK),p(i.SITE_VIEW_PUBLISHED_SITE),p(i.SITE_GET_FOUND_ON_GOOGLE),p(i.SITE_ACCESSIBILITY),p(i.SITE_CONNECT_DOMAIN),p(i.SITE_UPGRADE),p(i.SITE_IMAGE_SHARPENING),p(i.SITE_SITE_MANAGER),p(i.TOOLS_RULERS),p(i.TOOLS_GRID_LINES),p(i.TOOLS_GRID_LINES),p(i.TOOLS_DEVELOPER_TOOLS),p(i.TOOLS_HIDDEN_ELEMENTS),p(i.HELP_STEP_BY_STEP_VIDEOS_SEPARATOR),p(i.HELP_STEP_BY_STEP_VIDEOS),p(i.HELP_CONNECTING_A_DOMAIN),p(i.HELP_GETTING_FOUND_ONLINE),function(e){var t=e.KEY,n=e.IS_HIDDEN;return d({KEY:t},_defineProperty({},n,!1))}(i.TOOLS_WIDGET_PUBLIC_API),function(e){var t=e.KEY,n=e.SHOULD_OPEN_AS_SECTION;return d({KEY:t},_defineProperty({},n,!0))}(i.TOOLS_PROPERTIES_PANEL)),f=e.assign({},t.topBar.overridden[o.KEY],_defineProperty({},o.IS_HIDDEN,!0));return e.assign({},t.topBar.overridden,{buttons:u,menus:l,menuItems:g,quickNavigation:f})}(a))),t(f.overrideItems(function(t){var n=A.LEFT_BAR,a=function(n){var a=n.PANEL_NAME,r=n.IS_HIDDEN;return _defineProperty({},a,e.assign({},t.leftBar.overridden[a],_defineProperty({},r,!0)))};return e.assign({},t.addPanel.overridden,a(n.ADD_APPS),a(n.BACKGROUND),a(n.MENUS_AND_PAGES),a(n.MOBILE_TOOLS),a(n.HIDDEN_ELEMENTS),a(n.PAGE_LAYOUT_OPTIMIZER),a(n.OLD_BLOG),a(n.BLOG),a(n.STORES),a(n.SHOUTOUT),a(n.BOOKINGS))}(a))),t(m.overrideItems(function(t){var n=A.LEFT_TREE,a=function(n){var a=n.KEY,r=n.IS_HIDDEN;return _defineProperty({},a,e.assign({},t.leftTree.overridden[a],_defineProperty({},r,!0)))};return e.assign({},t.leftTree.overridden,a(n.PAGES_TREE),a(n.POPUPS_TREE),a(n.COLLECTIONS),a(n.PUBLIC_FILE_TREE),a(n.BACKEND_FILE_TREE),function(n){var a=n.KEY,r=n.IS_HIDDEN;return _defineProperty({},a,e.assign({},t.leftTree.overridden[a],_defineProperty({},r,!1)))}(n.WIDGETS_VIEW))}(a))),t(E.overrideItems(function(t){var n=A.ADD_PANEL,a=n.CATEGORIES,r=n.SECTIONS,i=function(n){var a=n.ID,r=n.IS_HIDDEN;return _defineProperty({},a,e.assign({},t.addPanel.overridden.categories[a],_defineProperty({},r,!0)))},o=e.assign({},t.addPanel.overridden.categories,i(a.GALLERY),i(a.STRIP),i(a.LIGHTBOX),i(a.BLOG_WELCOME),i(a.BLOG),i(a.OLD_BLOG),i(a.STORE),i(a.MEMBERS_WELCOME),i(a.MEMBERS)),s=function(n){var a=n.ID,r=n.IS_HIDDEN;return _defineProperty({},a,e.assign({},t.addPanel.overridden.sections[a],_defineProperty({},r,!0)))},u=e.assign({},t.addPanel.overridden.sections,s(r.TEXT_RELATED_APPS),s(r.IMAGE_RELATED_APPS),s(r.LISTS_AND_GRIDS_LISTS),s(r.VIDEO_WIX_VIDEO),s(r.VIDEO_RELATED_APPS),s(r.SHAPE_RELATED_APPS),s(r.MUSIC_WIX_MUSIC),s(r.MUSIC_RELATED_APPS),s(r.BUTTON_RELATED_APPS),s(r.SOCIAL_RELATED_APPS),s(r.CONTACT_RELATED_APPS),s(r.MORE_ANCHORS),s(r.MORE_RELATED_APPS));return e.assign({},t.addPanel.overridden,{categories:o,sections:u})}(a)))}},renameWidget:function(e,t){return function(n,a,r){r.dsWrite.appStudio.widgets.name.set(e,t)}},updateAppManifests:function(){return function(t,a,r){var i=r.dsRead;if(!e.isUndefined(i)){var o=n.appStudioUtils.getInstalledPackages(i);e.forEach(o,function(e){return n.appStudioUtils.notifyUpdateManifest(i,e.applicationId)})}}}};return v}),define("stateManagement/applicationStudio/applicationStudioReducer",["lodash","stateManagement/store/initialEditorState","stateManagement/applicationStudio/applicationStudioActionTypes"],function(e,t,n){"use strict";return function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.applicationStudio,r=arguments[1];switch(r.type){case n.SET_AVAILABLE_APPS:return e.defaults({availableApps:r.apps},a);case n.SET_IS_LOADING:return e.defaults({isLoading:r.isLoading},a);default:return a}}}),define("stateManagement/applicationStudio/applicationStudioSelectors",[],function(){"use strict";return{getAvailableApps:function(e){return e.applicationStudio.availableApps},getIsLoading:function(e){return e.applicationStudio.isLoading}}}),define("stateManagement/applicationStudio/applicationStudio",["stateManagement/applicationStudio/applicationStudioActions","stateManagement/applicationStudio/applicationStudioReducer","stateManagement/applicationStudio/applicationStudioSelectors"],function(e,t,n){"use strict";return{actions:e,reducer:t,selectors:n}}),define("stateManagement/store/combineReducers",["lodash","wixImmutable"],function(e,t){"use strict";return function(n,a){return a?function(n){var a=function(e){return t.Iterable.isIterable(e)}(n)?n:t.Map(n),r=a.map(function(){});return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r,n=arguments[1],i=!1,o=t.map(function(t,r){var o=(a.get(r)||e.identity)(t,n);return o!==t&&(i=!0),o});return i?o:t}}(n):function(t){return function(n,a){var r=!1,i=e.mapValues(n,function(n,i){var o=(t[i]||e.identity)(n,a);return o!==n&&(r=!0),o});return r?i:n}}(n)}}),define("stateManagement/userProfile/userProfileActionTypes",[],function(){"use strict";return{SET_USER_PROFILE:"setUserProfile"}}),define("stateManagement/userProfile/userProfileReducer",["stateManagement/userProfile/userProfileActionTypes"],function(e){"use strict";var t=e.SET_USER_PROFILE;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments[1];switch(n.type){case t:return n.userProfile;default:return e}}}),define("stateManagement/mobile/hiddenItems/hiddenItemsActionTypes",[],function(){"use strict";return{SET_HIDDEN_ITEMS_HOVERED_COMPONENT:"hidden-items-set-hidden-items-hovered-component",SET_HIDDEN_ITEMS_MASTER_PAGE_COMPS:"hidden-items-set-master-page-hidden-comps",SET_HIDDEN_ITEMS_CURRENT_PAGE_COMPS:"hidden-items-set-current-page-hidden-comps",REMOVE_HIDDEN_ITEM_FROM_MASTER_PAGE_LIST:"hidden-items-remove-component-from-master-page-list",REMOVE_HIDDEN_ITEM_FROM_CURRENT_PAGE_LIST:"hidden-items-remove-component-from-current-page-list"}}),define("stateManagement/mobile/hiddenItems/hiddenItemsReducer",["lodash","reduxLibs","stateManagement/store/initialEditorState","stateManagement/mobile/hiddenItems/hiddenItemsActionTypes"],function(e,t,n,a){"use strict";return t.redux.combineReducers({hoveredComponent:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.mobile.hiddenItems.hoveredComponent,t=arguments[1];switch(t.type){case a.SET_HIDDEN_ITEMS_HOVERED_COMPONENT:return t.hoveredComponent;default:return e}},masterPageHiddenComponents:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.mobile.hiddenItems.masterPageHiddenComponents,r=arguments[1];switch(r.type){case a.SET_HIDDEN_ITEMS_MASTER_PAGE_COMPS:return r.hiddenComponents;case a.REMOVE_HIDDEN_ITEM_FROM_MASTER_PAGE_LIST:return e.reject(t,{compId:r.compId});default:return t}},currentPageHiddenComponents:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.mobile.hiddenItems.currentPageHiddenComponents,r=arguments[1];switch(r.type){case a.SET_HIDDEN_ITEMS_CURRENT_PAGE_COMPS:return r.hiddenComponents;case a.REMOVE_HIDDEN_ITEM_FROM_CURRENT_PAGE_LIST:return e.reject(t,{compId:r.compId});default:return t}}})}),define("stateManagement/mobile/mobileWizard/mobileWizardActionTypes",[],function(){"use strict";return{SET_MOBILE_WIZARD_IS_ENABLED:"mobile-wizard-set-is-enabled",SET_MOBILE_WIZARD_IS_EXPANDED:"mobile-wizard-set-is-expanded",SET_MOBILE_WIZARD_OPENING_STATE:"mobile-wizard-set-opening-state",NEXT_STEP:"mobile-wizard-next-step",PREVIOUS_STEP:"mobile-wizard-previous-step",SET_TINY_MENU_AVAILABLE_SKINS:"mobile-wizard-set-tiny-menu-available-skins",SET_TINY_MENU_STYLE_ID:"mobile-wizard-set-tiny-menu-style-id",SET_HEADER_ANIMATION_PROGRESS:"mobile-wizard-set-header-animation-progress",SET_BACK_TO_TOP:"mobile-wizard-set-back-to-top",SET_CURRENT_STEP:"mobile-wizard-set-current-step",SET_STEPS_TO_SHOW:"mobile-wizard-set-steps-to-show",SET_USER_SELECTIONS:"mobile-wizard-set-user-selections",SET_LAST_SAVED:"mobile-wizard-set-last-saved",SET_QAB_AVAILABLE_PRESETS:"mobile-wizard-set-qab-available-presets"}}),define("stateManagement/mobile/mobileWizard/mobileWizardTinyMenuReducer",["lodash","stateManagement/store/initialEditorState","stateManagement/mobile/mobileWizard/mobileWizardActionTypes"],function(e,t,n){"use strict";return function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.mobile.mobileWizard.tinyMenu,r=arguments[1];switch(r.type){case n.SET_TINY_MENU_AVAILABLE_SKINS:return e.assign({},a,{availableSkins:r.availableSkins});case n.SET_TINY_MENU_STYLE_ID:return e.assign({},a,{styleId:r.styleId});default:return a}}}),define("stateManagement/mobile/mobileWizard/mobileWizardHeaderReducer",["lodash","stateManagement/store/initialEditorState","stateManagement/mobile/mobileWizard/mobileWizardActionTypes"],function(e,t,n){"use strict";return function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.mobile.mobileWizard.header,r=arguments[1];switch(r.type){case n.SET_HEADER_ANIMATION_PROGRESS:return e.assign({},a,{animationInProgress:r.animationInProgress});default:return a}}}),define("stateManagement/mobile/mobileWizard/mobileWizardQabReducer",["lodash","stateManagement/store/initialEditorState","stateManagement/mobile/mobileWizard/mobileWizardActionTypes"],function(e,t,n){"use strict";return function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.mobile.mobileWizard.qab,r=arguments[1];switch(r.type){case n.SET_QAB_AVAILABLE_PRESETS:return e.assign({},a,{availablePresets:r.availablePresets});default:return a}}}),define("stateManagement/mobile/mobileWizard/mobileWizardReducer",["lodash","reduxLibs","stateManagement/store/initialEditorState","stateManagement/mobile/mobileWizard/mobileWizardActionTypes","stateManagement/mobile/mobileWizard/mobileWizardTinyMenuReducer","stateManagement/mobile/mobileWizard/mobileWizardHeaderReducer","stateManagement/mobile/mobileWizard/mobileWizardQabReducer"],function(e,t,n,a,r,i,o){"use strict";return t.redux.combineReducers({enabled:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.mobile.mobileWizard.enabled,t=arguments[1];switch(t.type){case a.SET_MOBILE_WIZARD_IS_ENABLED:return t.enabled;default:return e}},openingState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.mobile.mobileWizard.openingState,t=arguments[1];switch(t.type){case a.SET_MOBILE_WIZARD_OPENING_STATE:return t.openingState;default:return e}},currentStep:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.mobile.mobileWizard.currentStep,t=arguments[1];switch(t.type){case a.SET_CURRENT_STEP:return t.currentStep;default:return e}},stepsToShow:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.mobile.mobileWizard.stepsToShow,t=arguments[1];switch(t.type){case a.SET_STEPS_TO_SHOW:return t.stepsToShow;default:return e}},userSelections:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.mobile.mobileWizard.userSelections,r=arguments[1];switch(r.type){case a.SET_USER_SELECTIONS:return e.assign({},t,_defineProperty({},r.stepName,r.stepValue));default:return t}},lastSaved:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.mobile.mobileWizard.lastSaved,r=arguments[1];switch(r.type){case a.SET_LAST_SAVED:return e.assign({},t,_defineProperty({},r.stepName,r.value));default:return t}},tinyMenu:r,header:i,qab:o})}),define("stateManagement/mobile/mobileReducer",["lodash","reduxLibs","stateManagement/store/initialEditorState","stateManagement/mobile/hiddenItems/hiddenItemsReducer","stateManagement/mobile/mobileWizard/mobileWizardReducer"],function(e,t,n,a,r){"use strict";return t.redux.combineReducers({isHiddenItemsCounterVisible:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.mobile.isHiddenItemsCounterVisible},reAddedHiddenElement:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.mobile.reAddedHiddenElement},hiddenItems:a,mobileWizard:r})}),define("stateManagement/pinMode/pinModeActionTypes",[],function(){"use strict";return{OPEN_PIN_MODE:"openPinMode",CLOSE_PIN_MODE:"closePinMode",SHOW_PIN_PREVIEW_RECT:"showPinPreviewRect",HIDE_COMPONENT_PREVIEW_RECT:"hideComponentPreviewRect"}}),define("stateManagement/pinMode/pinModeReducer",["lodash","stateManagement/pinMode/pinModeActionTypes"],function(e,t){"use strict";return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments[1];switch(a.type){case t.OPEN_PIN_MODE:return e.defaults({isOpen:!0},n);case t.CLOSE_PIN_MODE:return e.defaults({isOpen:!1},n);case t.SHOW_PIN_PREVIEW_RECT:return e.defaults({pinPreviewRectStyle:a.style},n);case t.HIDE_COMPONENT_PREVIEW_RECT:var r=e.defaults({opacity:0},n.pinPreviewRectStyle);return e.defaults({pinPreviewRectStyle:r},n);default:return n}}}),define("stateManagement/easterEggs/easterEggsActionTypes",[],function(){"use strict";return{SET_FLYING_MUSA_STYLE:"setFlyingMusaStyle",CLEAR_FLYING_MUSA_STYLE:"clearFlyingMusaStyle"}}),define("stateManagement/easterEggs/easterEggsActions",["lodash","stateManagement/easterEggs/easterEggsActionTypes"],function(e,t){"use strict";var n=function(e){return{type:t.SET_FLYING_MUSA_STYLE,musaData:e}},a=function(e){return{type:t.CLEAR_FLYING_MUSA_STYLE,id:e}};return{showFlyingMusa:function(t){return function(r){var i=e.uniqueId(),o=8+Math.floor(5*Math.random()),s=-200,u=72+Math.random()*(t.height-144),c=72+Math.random()*(t.height-144),l=Math.abs(u-c)*(o/t.width);c<u&&(l*=-1);var d=u,p=0,g={height:3608,width:143};r(n({id:i,style:{top:u+"px",right:s+"px",backgroundPosition:"0 "+p+"px;"}}));var f=setInterval(function(){r(n({id:i,style:{right:(s+=o)+"px",top:(d+=l)+"px",backgroundPosition:"0 -"+p+"px"}})),p=(p+82)%g.height,s>t.width+g.width&&(clearInterval(f),clearTimeout(E),r(a(i)))},33),m=33*(10+(t.width+g.width)/o),E=setTimeout(function(){clearInterval(f),r(a(i))},m)}}}}),define("stateManagement/easterEggs/easterEggsSelectors",[],function(){"use strict";return{getFlyingMusaStyle:function(e,t){return e.easterEggs.flyingMusa[t].style}}}),define("stateManagement/easterEggs/easterEggsReducer",["lodash","stateManagement/easterEggs/easterEggsActionTypes"],function(e,t){"use strict";return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments[1];switch(a.type){case t.SET_FLYING_MUSA_STYLE:var r=e.defaults(_defineProperty({},a.musaData.id,a.musaData),n.flyingMusa);return e.defaults({flyingMusa:r},n);case t.CLEAR_FLYING_MUSA_STYLE:return e.defaults({flyingMusa:e.omit(n.flyingMusa,[a.id])},n);default:return n}}}),define("stateManagement/easterEggs/easterEggs",["stateManagement/easterEggs/easterEggsActions","stateManagement/easterEggs/easterEggsSelectors","stateManagement/easterEggs/easterEggsReducer"],function(e,t,n){"use strict";return{actions:e,selectors:t,reducer:n}}),define("stateManagement/pinMode/pinModeSelectors",[],function(){"use strict";return{isOpen:function(e){return e.pinMode.isOpen},getPinnedCompType:function(e){return e.pinMode.pinnedCompType},getPinPreviewRectStyle:function(e){return e.pinMode.pinPreviewRectStyle}}}),define("stateManagement/pinMode/pinModeActions",["lodash","constants","stateManagement/panels/panelsActions","stateManagement/pinMode/pinModeActionTypes","stateManagement/pinMode/pinModeSelectors","stateManagement/selection/selection"],function(e,t,n,a,r,i){"use strict";var o=i.selectors,s={default:"compPanels.dynamicPanels.pinnedDockPanel",PopupContainer:t.COMP_PANELS.POPUP.CONTAINER.POPUP_GRID_LAYOUT_PANEL.NAME},u=function(){return{type:a.HIDE_COMPONENT_PREVIEW_RECT}},c=t.EDITOR_API.BLOCKING_LAYER_STYLE,l=function(e){return s[e]||s.default};return{open:function(r,i){return function(s,u,d){var p=d.dsRead,g=d.tooltipManager,f=u(),m=o.getSelectedComponentType(f,p),E="WRichText"===m?["LEFT","MIDDLE","RIGHT"]:["MIDDLE"];g.hide(t.ROOT_COMPS.TOOLTIPS.FIRST_TIME_EXIT_POPUP_MODE);var S=e.assign({origin:r,selectedComponents:o.getSelectedCompsRefs(f),disabledValues:E},i);s(n.openComponentPanel(l(m),S)),s(function(t,n,a){var r=a.dsWrite,i=n();r.renderPlugins.setCompsToShowOnTop(e.map(o.getSelectedCompsRefs(i),"id")),r.renderPlugins.setBlockingLayer(c)}),s({type:a.OPEN_PIN_MODE})}},close:function(){return function(e,t){var i=t();if(r.isOpen(i)){var o=r.getPinnedCompType(i);e(n.closePanelByName(l(o))),e(u()),e(function(e,t,n){var a=n.dsWrite;a.renderPlugins.setCompsToShowOnTop(null),a.renderPlugins.setBlockingLayer(null)}),e({type:a.CLOSE_PIN_MODE})}}},showPinPreviewRect:function(e){return{type:a.SHOW_PIN_PREVIEW_RECT,style:e}},hidePinPreviewRect:u}}),define("stateManagement/pinMode/pinMode",["stateManagement/pinMode/pinModeActions","stateManagement/pinMode/pinModeActionTypes","stateManagement/pinMode/pinModeReducer","stateManagement/pinMode/pinModeSelectors"],function(e,t,n,a){"use strict";return{actions:e,actionTypes:t,reducer:n,selectors:a}}),define("stateManagement/contextMenu/contextMenuActionTypes",[],function(){"use strict";return{OPEN_CONTEXT_MENU:"openContextMenu"}}),define("stateManagement/contextMenu/contextMenuReducer",["lodash","stateManagement/pinMode/pinMode","stateManagement/contextMenu/contextMenuActionTypes"],function(e,t,n){"use strict";var a=t.actionTypes;return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments[1];switch(r.type){case n.OPEN_CONTEXT_MENU:return e.defaults({editorMousePosition:{x:r.editorPositionX,y:r.editorPositionY},viewerPosition:{x:r.viewerPositionX,y:r.viewerPositionY}},t);case a.OPEN_PIN_MODE:return null;default:return t}}}),define("stateManagement/legacy/legacyActionTypes",[],function(){"use strict";return{SET_STATE:"set-state"}}),define("stateManagement/legacy/setStateReducer",["lodash","stateManagement/legacy/legacyActionTypes"],function(e,t){"use strict";var n=t.SET_STATE,a=e.assign;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];switch(t.type){case n:return a({},e,t.state);default:return e}}}),define("stateManagement/legacy/legacyReducer",["lodash","stateManagement/legacy/setStateReducer"],function(e,t){"use strict";return function(e){return function(n,a){var r=t(n,a);return e(r,a)}}}),define("stateManagement/devMode/devModeReducer",["lodash","constants","stateManagement/devMode/devModeActionTypes"],function(e,t,n){"use strict";var a={type:t.DEVELOPER_MODE.CONTEXT_TYPES.PAGE,data:void 0},r=n.RESET_CONTEXT;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a;switch(arguments[1].type){case r:return a;default:return e}}}),define("stateManagement/store/stateFreezer",["util"],function(e){"use strict";var t=e.deepFreeze;return function(e){return function(n,a){return t(e(n,a))}}}),define("stateManagement/sectionedPanel/sectionedPanelActionTypes",[],function(){"use strict";return{TOGGLE_SECTION:"toggleSection"}}),define("stateManagement/sectionedPanel/sectionedPanelReducer",["lodash","stateManagement/sectionedPanel/sectionedPanelActionTypes","stateManagement/store/initialEditorState"],function(e,t,n){"use strict";var a=t.TOGGLE_SECTION;return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.dockedSections,r=arguments[1];switch(r.type){case a:return function(t,n){return e.map(t,function(t){return n===t.sectionName?e.defaults({isOpen:!t.isOpen},t):t})}(t,r.sectionName);default:return t}}}),define("stateManagement/text/textActionTypes",[],function(){"use strict";return{OPEN_TEXT_EDITOR:"openTextEditor",CLOSE_TEXT_EDITOR:"closeTextEditor"}}),define("stateManagement/text/textReducer",["lodash","stateManagement/text/textActionTypes"],function(e,t){"use strict";var n=t.OPEN_TEXT_EDITOR,a=t.CLOSE_TEXT_EDITOR;return function(t,r){switch(r.type){case n:return e.assign({},t,{isTextEditorOpen:!0});case a:return e.assign({},t,{isTextEditorOpen:!1});default:return t}}}),define("stateManagement/mouseActions/mouseActionsReducer",["lodash","stateManagement/mouseActions/mouseActionsActionTypes"],function(e,t){"use strict";return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments[1];switch(a.type){case t.SET_USING_WINDOW_MOUSE_EVENTS:return e.defaults({usingWindowMouseEvents:a.usingWindowMouseEvents},n);case t.SET_PERFORMING_MOUSE_ACTION:return e.defaults({performingMouseMoveAction:a.performingMouseMoveAction});default:return n}}}),define("stateManagement/tpa/tpaActionTypes",[],function(){"use strict";return{ADD_APP_IDS_TO_REFRESH_ON_DASHBOARD_CLOSE:"ADD_APP_IDS_TO_REFRESH_ON_DASHBOARD_CLOSE",SET_APP_IDS_TO_REFRESH_ON_DASHBOARD_CLOSE:"SET_APP_IDS_TO_REFRESH_ON_DASHBOARD_CLOSE"}}),define("stateManagement/tpa/tpaReducer",["lodash","coreUtilsLib","stateManagement/tpa/tpaActionTypes"],function(e,t,n){"use strict";var a=n.ADD_APP_IDS_TO_REFRESH_ON_DASHBOARD_CLOSE,r=n.SET_APP_IDS_TO_REFRESH_ON_DASHBOARD_CLOSE,i=function(t){return e.reduce(t,function(e,t){return e[t]=!0,e},{})},o=function(e){return!s(e)},s=function(t){return e.isArray(t)&&t.every(function(t){return e.isNumber(t)&&t>0||e.isNumber(parseInt(t,10))&&parseInt(t,10)>0})};return function(n,s){switch(e.isNil(n)&&(n={appsIdsToRefreshOnDashboardClose:{}}),s.type){case a:if(o(s.appIds))return t.log.error("appIds found for appDefIds must be an array of numbers"),n;var u=n.appsIdsToRefreshOnDashboardClose,c=i(s.appIds),l=e.merge({},u,c);return e.assign({},n,{appsIdsToRefreshOnDashboardClose:l});case r:return o(s.appIds)?(t.log.error("appIds found for appDefIds must be an array of numbers"),n):e.assign({},n,{appsIdsToRefreshOnDashboardClose:i(s.appIds)});default:return n}}}),define("stateManagement/uploadedFonts/uploadedFontsActionTypes",[],function(){"use strict";return{SET_LIST:"setList",SET_QUEUE:"setQueue",SET_FLAG_TO_QUEUE_ITEM:"setFlagToQueueItem",SET_UPLOADED_ITEMS:"setUploadedItems",ADD_TIME_OUT_TOKEN:"addTimeOutToken",CLEAR_TIME_OUT_TOKENS:"clearTimeOutTokens"}}),define("stateManagement/uploadedFonts/uploadedFontsReducer",["lodash","stateManagement/uploadedFonts/uploadedFontsActionTypes"],function(e,t){"use strict";var n=t.SET_LIST,a=t.SET_QUEUE,r=t.SET_FLAG_TO_QUEUE_ITEM,i=t.SET_UPLOADED_ITEMS,o=t.ADD_TIME_OUT_TOKEN,s=t.CLEAR_TIME_OUT_TOKENS;return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{list:[],queue:[],uploadedItems:{},timeOutTokens:[]},u=arguments[1];switch(u.type){case n:return e.assign({},t,{list:u.list});case a:return e.assign({},t,{queue:u.queue});case r:var c=e.assign({},t.queue[u.queueItemIndex],u.flag),l=e.map(t.queue,function(e,t){return t===u.queueItemIndex?c:e});return e.assign({},t,{queue:l});case i:return e.assign({},t,{uploadedItems:u.uploadedItems});case o:var d=[].concat(_toConsumableArray(t.timeOutTokens),[u.timeOutToken]);return e.assign({},t,{timeOutTokens:d});case s:return e.assign({},t,{timeOutTokens:[]});default:return t}}}),define("stateManagement/siteDisplayName/siteDisplayNameActionTypes",[],function(){"use strict";return{SET_SITE_DISPLAY_NAME:"set-site-display-name"}}),define("stateManagement/siteDisplayName/siteDisplayNameReducer",["lodash","stateManagement/siteDisplayName/siteDisplayNameActionTypes","stateManagement/store/initialEditorState"],function(e,t,n){"use strict";var a=t.SET_SITE_DISPLAY_NAME;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.siteDisplayName,t=arguments[1];switch(t.type){case a:return t.siteDisplayName;default:return e}}}),define("stateManagement/domMeasurements/domMeasurementsActionTypes",[],function(){"use strict";return{SET_MEASURED_DOM:"setMeasuredDom",CLEAR_MEASURED_DOM:"clearMeasuredDom",SET_STAGE_LAYOUT:"setStageLayout",SET_MEASURED_SCROLL:"setMeasuredScroll",SET_STAGE_RECT:"setStageRect",SET_PREVIEW_POS:"setPreviewPos"}}),define("stateManagement/domMeasurements/domMeasurementsReducer",["lodash","stateManagement/store/initialEditorState","stateManagement/domMeasurements/domMeasurementsActionTypes"],function(e,t,n){"use strict";var a=n.SET_MEASURED_DOM,r=n.CLEAR_MEASURED_DOM,i=n.SET_STAGE_LAYOUT,o=n.SET_MEASURED_SCROLL,s=n.SET_STAGE_RECT,u=n.SET_PREVIEW_POS;return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.domMeasurements,c=arguments[1];switch(c.type){case a:return e.defaults(_defineProperty({},c.measureKey,c.measuredRes),n);case r:return e.omit(n,[c.measureKey]);case i:return e.defaults({stageLayout:c.stageLayout},n);case o:return e.defaults({scroll:c.scroll},n);case s:return e.defaults({stageRect:c.stageRect},n);case u:return e.defaults({previewPosition:c.previewPos},n);default:return n}}}),define("stateManagement/multilingual/multilingualActionTypes",["lodash"],function(e){"use strict";return e.mapKeys(["MULTILINGUAL_LOAD_START","MULTILINGUAL_LOAD_STOP","LOAD_SUPPORTED_LANGUAGES","LOAD_SUPPORTED_LANGUAGES_SUCCESS","LOAD_SUPPORTED_LANGUAGES_ERROR"])}),define("stateManagement/multilingual/multilingualConstants",["lodash","util"],function(e,t){"use strict";return{linguistLanguageUrl:t.serviceTopology.linguistUrl+"/languages",apiMethods:e.mapKeys(["POST","PUT","GET"]),appStates:e.mapKeys(["NEW","INSTALLED"]),dataLoadTypes:e.mapKeys(["LOAD_LANGUAGES","CHECK_LANGUAGE_STATUS","INITIALIZE_LANGUAGES","ADD_LANGUAGE","UPDATE_LANGUAGE_STATUS","UPDATE_LANGUAGE"])}}),define("stateManagement/multilingual/multilingualUtils",["zepto","lodash","stateManagement/multilingual/multilingualConstants"],function(e,t,n){"use strict";var a=n.apiMethods,r=a.POST,i=a.PUT;return{callAjax:function(n){return new Promise(function(a,o){return e.ajax(t.assign({dataType:"json",contentType:"application/json"},n,{data:n.type===r||n.type===i?JSON.stringify(n.data):n.data,success:a,error:function(e){var t=e.response,n=e.status;o({response:t,status:n})}}))})},addLanguageCode:function(e){return t.assign({},e,{languageCode:e.languageCode||e.code})},pickLanguageCode:function(e){var t=e.languageCode,n=e.code;return{languageCode:t||n}}}}),define("stateManagement/multilingual/multilingualDataConverters",["lodash","stateManagement/multilingual/multilingualUtils"],function(e,t){"use strict";return{supportedLanguages:function(n){var a=n.languages;return e.map(a,t.addLanguageCode)}}}),define("stateManagement/multilingual/multilingualReducer",["lodash","stateManagement/multilingual/multilingualActionTypes","stateManagement/multilingual/multilingualDataConverters","stateManagement/store/initialEditorState"],function(e,t,n,a){"use strict";var r=function(t){return function(n,a){var r=n.producer;return e.assign({},a,{loading:{isLoading:t,producer:r}})}},i=r(!0),o=r(!1),s=t.LOAD_SUPPORTED_LANGUAGES,u=t.LOAD_SUPPORTED_LANGUAGES_SUCCESS,c=t.LOAD_SUPPORTED_LANGUAGES_ERROR,l=t.MULTILINGUAL_LOAD_START,d=t.MULTILINGUAL_LOAD_STOP;return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.multilingual,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},p=r.type,g=r.payload,f=r.error;switch(p){case s:return i({producer:p},t);case l:return i(g,t);case d:return o(g,t);case u:return o({producer:p},e.assign({},t,{supportedLanguages:n.supportedLanguages(g)}));case c:return o({producer:p},e.assign({},t,{error:f}));default:return t}}}),define("stateManagement/appInstaller/appInstallerActionTypes",[],function(){"use strict";return{START_INSTALL_PROCESS:"start-install-process",START_APP_INSTALL:"start-app-install",DONE_APP_INSTALL:"done-app-install"}}),define("stateManagement/appInstaller/appInstallerReducer",["lodash","stateManagement/appInstaller/appInstallerActionTypes","stateManagement/store/initialEditorState"],function(e,t,n){"use strict";var a=t.START_INSTALL_PROCESS,r=t.START_APP_INSTALL,i=t.DONE_APP_INSTALL;return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.appInstaller,o=arguments[1];switch(o.type){case a:return e.assign({},t,{totalApps:o.totalApps});case r:return e.assign({},t,{installingAppName:o.installingAppName});case i:var s=t.finishedCounter+1;return e.assign({},t,{finishedCounter:s,done:s===t.totalApps});default:return t}}}),define("stateManagement/notifications/notificationsActionTypes",[],{ADD_NOTIFICATION:"ADD_NOTIFICATION",CLOSE_NOTIFICATION:"CLOSE_NOTIFICATION",CLOSE_ALL_NOTIFICATIONS:"CLOSE_ALL_NOTIFICATIONS"}),define("stateManagement/notifications/notificationsReducer",["lodash","stateManagement/notifications/notificationsActionTypes"],function(e,t){"use strict";return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments[1];switch(a.type){case t.ADD_NOTIFICATION:return n.concat([a.notification]);case t.CLOSE_NOTIFICATION:return e.reject(n,["id",a.id]);case t.CLOSE_ALL_NOTIFICATIONS:return[];default:return n}}}),define("stateManagement/rulers/rulersActionTypes",[],function(){"use strict";return{RESET_HISTORY:"rulers/reset-history",UNDO:"rulers/undo",REDO:"rulers/redo",UPDATE_HISTORY:"rulers/update-history",UPDATE_STATE:"rulers/update-state"}}),define("stateManagement/rulers/rulersReducer",["lodash","stateManagement/rulers/rulersActionTypes","stateManagement/store/initialEditorState"],function(e,t,n){"use strict";var a=t.RESET_HISTORY,r=t.UNDO,i=t.REDO,o=t.UPDATE_HISTORY,s=t.UPDATE_STATE;return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.rulers,u=arguments[1];switch(u.type){case a:return e.assign({},t,{history:{stack:[t.guidesState],currentIndex:0}});case r:return e.assign({},t,{history:e.assign({},t.history,{currentIndex:t.history.currentIndex-1})});case i:return e.assign({},t,{history:e.assign({},t.history,{currentIndex:t.history.currentIndex+1})});case o:return e.assign({},t,{history:e.assign({},t.history,{stack:e.concat(e.take(t.history.stack,t.history.currentIndex+1),t.guidesState),currentIndex:t.history.currentIndex+1})});case s:return u.state;default:return t}}}),define("stateManagement/store/createEditorStore",["lodash","reduxLibs","util","stateManagement/addPanel/addPanelReducer","stateManagement/applicationStudio/applicationStudioReducer","stateManagement/componentsStore/componentsStoreReducer","stateManagement/gridLines/gridLinesReducer","stateManagement/store/combineReducers","stateManagement/panels/panelsReducer","stateManagement/selection/selectionReducer","stateManagement/userProfile/userProfileReducer","stateManagement/highlights/highlightsReducer","stateManagement/mobile/mobileReducer","stateManagement/pinMode/pinModeReducer","stateManagement/easterEggs/easterEggs","stateManagement/contextMenu/contextMenuReducer","stateManagement/helpPanel/helpPanelReducer","stateManagement/legacy/legacyReducer","stateManagement/devMode/devModeReducer","stateManagement/store/initialEditorState","stateManagement/store/stateFreezer","stateManagement/leftBar/leftBarReducer","stateManagement/leftTree/leftTreeReducer","stateManagement/sectionedPanel/sectionedPanelReducer","stateManagement/text/textReducer","stateManagement/dynamicPages/dynamicPagesReducer","stateManagement/topBar/topBarReducer","stateManagement/mouseActions/mouseActionsReducer","stateManagement/userPreferences/userPreferencesReducer","stateManagement/tpa/tpaReducer","stateManagement/uploadedFonts/uploadedFontsReducer","stateManagement/siteDisplayName/siteDisplayNameReducer","stateManagement/domMeasurements/domMeasurementsReducer","stateManagement/pages/pagesReducer","stateManagement/multilingual/multilingualReducer","stateManagement/appInstaller/appInstallerReducer","stateManagement/notifications/notificationsReducer","stateManagement/rulers/rulersReducer"],function(e,t,n,a,r,i,o,s,u,c,l,d,p,g,f,m,E,S,T,_,P,M,A,I,v,O,R,h,y,N,L,D,C,b,U,B,w,G){"use strict";var F=t.redux,H=t.reduxThunk;return function(e,t){var k=S(s({addPanel:a,applicationStudio:r,componentsStore:i,gridLines:o,openPanels:u,helpProps:E,devModeContext:T,stage:s({highlights:d}),domMeasurements:C,mobile:p,contextMenu:m,pinMode:g,uploadedFonts:L,userProfile:l,selection:c,leftBar:M,leftTree:A,text:v,dynamicPages:O,topBar:R,mouseActions:h,tpa:N,userPreferences:y,easterEggs:f.reducer,siteDisplayName:D,pages:b,multilingual:U,appInstaller:B,notifications:w,rulers:G,dockedSections:I})),x=e?P(k):k,W=H.withExtraArgument(t),V=n.url.getParameterByName("debug")&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:F.compose;return F.createStore(x,_,V(F.applyMiddleware(W)))}}),define("stateManagement/store/throttledStore",["lodash","util"],function(e,t){"use strict";var n=function(e){return e()},a=t.animationFrameRenderer;return function(t,r,i){var o=[],s=function(){return e.forEach(o,n)},u=a(t,r,s),c=e.noop;i.subscribe(function(){c=u()});return e.defaults({subscribe:function(t){return o=e.concat(o,t),function(){o=e.without(o,t)}},dispatch:i.dispatch,getState:i.getState,flush:function(){c(),s()}},i)}}),define("stateManagement/preview/previewSelectors",[],function(){"use strict";return{isPreviewReady:function(e){return e.previewReady}}}),define("stateManagement/preview/preview",["stateManagement/preview/previewSelectors"],function(e){"use strict";return{selectors:e}}),define("stateManagement/popups/popupsSelectors",["stateManagement/preview/preview"],function(e){"use strict";var t=e.selectors.isPreviewReady;return{isPopUpMode:function(e,n){return Boolean(t(e)&&n.pages.popupPages.getCurrentPopupId())}}}),define("stateManagement/popups/popups",["stateManagement/popups/popupsSelectors"],function(e){"use strict";return{selectors:e}}),define("stateManagement/siteDisplayName/siteDisplayNameActions",["coreUtilsLib","stateManagement/siteDisplayName/siteDisplayNameActionTypes"],function(e,t){"use strict";var n=function(e){return{type:t.SET_SITE_DISPLAY_NAME,siteDisplayName:e}};return{fetchSiteDisplayName:function(t){return function(a){return e.requestsUtil.fetchJson("/_api/site-properties-service/properties?fields.paths=siteDisplayName",{contentType:"application/json",credentials:"same-origin",headers:new Headers({Authorization:"MSID."+t}),method:"GET"}).then(function(e){a(n(e.properties.siteDisplayName))})}},setSiteDisplayName:n}}),define("stateManagement/siteDisplayName/siteDisplayName",["stateManagement/siteDisplayName/siteDisplayNameActions","stateManagement/siteDisplayName/siteDisplayNameReducer"],function(e,t){"use strict";return{actions:e,reducer:t}}),define("stateManagement/dataFixers/dataFixersActions",["lodash","util","stateManagement/bi/bi","coreBi"],function(e,t,n,a){"use strict";return{runDataFixers:function(){return function(r){e.defer(function(){r(function(r,i,o){var s=o.dsRead,u=o.dsWrite,c=e.find(s.pages.getPagesData(),{appPageId:"7326bfbb-4b10-4a8e-84c1-73f776051e10"}),l=t.translate("Pages_Blog_Post_Title");c&&c.title!==l&&(u.pages.data.update(c.id,{title:l}),r(n.actions.event(a.events.dataFixers.blogSinglePostFix,{msid:s.generalInfo.getMetaSiteId()})))})})}}}}),define("stateManagement/dataFixers/dataFixers",["stateManagement/dataFixers/dataFixersActions"],function(e){"use strict";return{actions:e}}),define("stateManagement/store/dsPaths.json",[],function(){return{read:["appStudio.widgets.getByRootCompId","appStudio.widgets.properties.get","errors","generalInfo.getSiteId","generalInfo.getUserInfo","generalInfo.urlFormat.isSlash","generalInfo.isFirstSave","generalInfo.isHttpsEnabled","generalInfo.getPublicUrl","generalInfo.getMetaSiteId","generalInfo.getGeo","pages.isWidgetPage","pages.getReference","pages.getFocusedPage","pages.getFocusedPageId","pages.getPrimaryPageId","pages.getPagesData","pages.popupPages.getCurrentPopupId","pages.isContainsCompWithType","pages.getCurrentPageId","components.behaviors.get","behaviors.getDefinition","components.buildDefaultComponentStructure","components.isDescendantOfComp","components.getChildren","components.getPage","components.data.get","components.getRepeatedComponents","components.getContainer","components.getAncestors","components.design.get","components.properties.get","components.getType","components.layout.getSnugLayout","components.layout.getSnugLayoutRelativeToScreen","components.layout.getSnugLayoutRelativeToScreenConsideringScroll","components.layout.getSnugLayoutRelativeToStructure","components.layout.canBeFixedPosition","components.layout.get","components.layout.getDock","components.layout.getRelativeToScreen","components.layout.getRelativeToStructure","components.layout.isHorizontallyStretched","components.layout.isHorizontallyStretchedToScreen","components.layout.RESIZE_SIDES","components.skin.get","components.style.getId","components.is.horizontallyMovable","components.is.rendered","components.is.visible","appStudio.widgets.getAll","appStudio.widgets.getByRootCompId","appStudio.widgets.properties.get","site.getScroll","data.isItemValid","menu.getAll","platform.controllers.connections.get","platform.controllers.getStageData","platform.controllers.connections.getConnectedComponents","platform.controllers.getStageData","platform.editorApps","platform.getInstalledEditorApps","platform.getAppManifest","platform.notifyApplication","routers.getRouterDataForPageIfExist","routers.getRouterInnerRoutes","routers.getCurrentInnerRoute","routers.getRouterRef.byPage","routers.get.byRef","theme.skins.getComponentSkins","theme.styles.get","siteSegments.getPagesContainer","siteSegments.getHeader","tpa.app.getDataByAppDefId","tpa.app.isInstalled","tpa.appMarket.getDataAsync","tpa.constants","tpa.isPageMarkedAsHideFromMenu","language.original.get","language.getFull","language.get","selection.selectComponentByCompRef"],write:["waitForChangesApplied","components.add","components.layout.updateFixedPosition","components.properties.update","components.layout.update","components.style.setId","components.style.update","components.behaviors.update","components.behaviors.remove","components.alignment.alignComponents","components.alignment.alignInContainer","components.setContainer","components.reparentComponentToPage","components.multiComponents.distribute","components.multiComponents.matchSize","platform.provision","site.setScroll","site.animateScroll","bi.event","bi.error","appStudio.widgets.create","appStudio.widgets.duplicate","appStudio.widgets.display","appStudio.widgets.remove","appStudio.widgets.name.set","appStudio.widgets.properties.set","documentMode.setComponentPreviewState","documentMode.enableBackToTopButton","renderPlugins.hideComp","renderPlugins.showComp","renderPlugins.setCompsToShowOnTop","renderPlugins.allowSiteOverflow","renderPlugins.setBlockingLayer","pages.data.update","pages.navigateTo","pages.add","data.createItem","language.init","language.add","language.status.set","language.getFull","language.current.set","data.createItem"]}}),define("stateManagement/mobile/hiddenItems/hiddenItemsSelectors",[],function(){"use strict";return{getHoveredComponent:function(e){return e.mobile.hiddenItems.hoveredComponent},getMasterPageHiddenComponents:function(e){return e.mobile.hiddenItems.masterPageHiddenComponents},getCurrentPageHiddenComponents:function(e){return e.mobile.hiddenItems.currentPageHiddenComponents}}}),define("stateManagement/mobile/hiddenItems/hiddenItemsActions",["lodash","constants","coreBi","coreUtilsLib","stateManagement/highlights/highlightsActions","stateManagement/mobile/hiddenItems/hiddenItemsActionTypes","stateManagement/mobile/hiddenItems/hiddenItemsSelectors","stateManagement/panels/panelsSelectors","stateManagement/pages/pagesSelectors"],function(e,t,n,a,r,i,o,s,u){"use strict";var c=void 0,l=function(e){return"masterPage"===e},d=function(){return function(t,n,a){var r=a.editorAPI;if(c){var s=n(),d=u.getFocusedPageId(s),p=o.getHoveredComponent(s),g=c.getHiddenCompsForPage(r,"masterPage"),f=c.getHiddenCompsForPage(r,d),m=["desktopLayout.y","desktopLayout.x","compId"],E=l(p.pageId)?g:f;e.isEmpty(p)||e.find(E,p.hiddenComp)||E.push(p.hiddenComp),t({type:i.SET_HIDDEN_ITEMS_MASTER_PAGE_COMPS,hiddenComponents:e.sortBy(g,m)}),t({type:i.SET_HIDDEN_ITEMS_CURRENT_PAGE_COMPS,hiddenComponents:e.sortBy(f,m)})}}},p=function(e){return s.isMobileHiddenItemsPanelOpen(e)},g=function(){return function(e,t,n){n.editorAPI.mobile.hideHiddenItemsCounter()}},f=function(){return{type:i.SET_HIDDEN_ITEMS_HOVERED_COMPONENT,hoveredComponent:{}}},m=function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.noop;return function(e,i,o){var s=o.editorAPI;p(i())&&(s.documentServices.mobile.hiddenComponents.show(t,n),s.waitForChangesApplied(function(){var e=s.components.get.byId(t);if(e&&s.components.is.exist(e)){var n=s.components.layout.getRelativeToScreen(e).y-50,i=a.scrollUtils.calcScrollDuration(s.site.getScroll().y,n,!0);s.scroll.animateScrollTo({y:n},i,r)}}))}},E=function(e,t){return function(n,a,i){var o=i.editorAPI;n(r.clearHighlights());var s=o.components.get.byId(e,t);o.documentServices.mobile.hiddenComponents.hide(s)}},S=function(e,t,a,r){return function(i,o,s){var u=s.editorAPI,c={current_page_name:t,component_type:a,section:r};if(u.isTpa(a)){var l=u.components.get.byId(e,t,u.documentServices.viewMode.VIEW_MODES.DESKTOP),d=u.components.data.get(l),p=u.documentServices.tpa.app.getData(d.applicationId);c.app_id=p.appDefinitionId,c.app_site_id=p.instanceId,c.instance_id=e}u.bi.event(n.events.mobileEditor.hiddenElements.HIDDEN_ELEMENTS_SHOW,c)}};return{initHiddenItemsPanel:function(e){return function(t,n,a){var r=a.editorAPI;c=void 0!==c?c:e,t(d()),t(function(e,t,n){n.editorAPI.mobile.hideHiddenItemsCounter()}),r.selection.deselectComponents()}},clearHiddenItems:function(){return function(t,n){var a=o.getHoveredComponent(n()),i=e.get(a,["hiddenComp","compId"]),s=e.get(a,"pageId");i&&s&&t(E(i,s)),t(r.clearHighlights()),t(f())}},stopPreviewReAddComponent:E,previewReAddComponent:function(n,a){return function(s,u,c){var d=c.editorAPI;s(function(t,n){return function(a,r){var s=r(),u=o.getMasterPageHiddenComponents(s),c=o.getCurrentPageHiddenComponents(s),d=l(n)?u:c,p=e.find(d,{compId:t});a({type:i.SET_HIDDEN_ITEMS_HOVERED_COMPONENT,hoveredComponent:{hiddenComp:p,pageId:n}})}}(n,a)),d.selection.deselectComponents(),s(r.clearHighlights()),s(m(n,a,function(){var i=d.components.get.byId(n);if(d.components.is.exist(i)&&function(t,n,a){var r=o.getMasterPageHiddenComponents(t),i=o.getCurrentPageHiddenComponents(t),s=l(a)?r:i;return e.find(s,{compId:n})}(u(),n,a)){var c=d.components.layout.getRelativeToScreen(i);s(function(e,n){return function(a,i){if(p(i())){var o=[{compRef:e,layout:n,type:t.UI.HIGHLIGHTS.TYPES.OVERLAY}];a(r.setHighlights(o))}}}(i,c))}}))}},refreshMobileHiddenComponentsIfPanelIsOpen:function(){return function(e,t){p(t())&&e(d())}},reAddComponent:function(e,t,n,a){return function(o,s,u){var c=u.editorAPI,d=l(t)?i.REMOVE_HIDDEN_ITEM_FROM_MASTER_PAGE_LIST:i.REMOVE_HIDDEN_ITEM_FROM_CURRENT_PAGE_LIST;o(r.clearHighlights()),o(f()),o({type:d,compId:e}),o(m(e,t,function(){var n=c.components.get.byId(e,t);c.components.is.exist(n)&&c.selection.selectComponentByCompRef(n)})),c.history.add("unhide mobile component"),o(S(e,t,n,a))}},hideHiddenItemsCounter:g,sendReAddBiEvent:S}}),define("stateManagement/mobile/mobileWizard/mobileWizardSelectors",["lodash"],function(e){"use strict";var t=function(e){return e.mobile.mobileWizard.currentStep},n=function(e){return e.mobile.mobileWizard.userSelections},a=function(e){return n(e).tinyMenu},r=function(e){return n(e).header},i=function(e){return n(e).qab},o=function(e){return n(e).backToTop},s={TINY_MENU:a,SITE_HEADER:r,QUICK_ACTION_BAR:i,BACK_TO_TOP_BUTTON:o};return{getIsMobileWizardEnabled:function(e){return e.mobile.mobileWizard.enabled},getMobileWizardOpeningState:function(e){return e.mobile.mobileWizard.openingState},getCurrentStep:t,getCurrentStepSelectedValue:function(n){var a=t(n);return(s[a]||e.noop)(n)},getStepsToShow:function(e){return e.mobile.mobileWizard.stepsToShow},getUserSelections:n,getLastSaved:function(e,t){return e.mobile.mobileWizard.lastSaved[t]},tinyMenu:{getSelectedSkin:a,getAvailableSkins:function(e){return e.mobile.mobileWizard.tinyMenu.availableSkins},getStyleId:function(e){return e.mobile.mobileWizard.tinyMenu.styleId}},header:{getSelectedHeaderType:r,getAnimationProgress:function(e){return e.mobile.mobileWizard.header.animationInProgress}},qab:{getAvailablePresets:function(e){return e.mobile.mobileWizard.qab.availablePresets},getSelectedQab:i},backToTop:{getSelectedBackToTop:o}}}),define("stateManagement/siteSegments/siteSegmentsActions",["lodash","stateManagement/components/components"],function(e,t){"use strict";return{setHeaderScrollBehavior:function(n,a){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments[3];return function(o,s,u){var c=u.editorAPI,l=e.find(r,{name:"ScrubAnimation",viewMode:i});if(n.behaviorName){var d=function(t,n,a,r){var i=n.id,o=e(t).pick(["name","type","params"]).assign({targetId:i,action:"scrollScrub",viewMode:r}).value();return a&&e.isArray(e.get(o,["params","animations"]))&&o.params.animations.push({name:a}),o}(c.behaviors.getDefinition(n.behaviorName),a,n.animationName,i);c.components.behaviors.update(a,d,d.action,d.viewMode)}else l&&c.components.behaviors.remove(a,l);o(t.actions.updateFixedPosition(a,!!n.fixedPosition))}}}}),define("stateManagement/siteSegments/siteSegmentsReducer",[],function(){"use strict";return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return arguments[1].type,e}}),define("stateManagement/siteSegments/siteSegmentsSelectors",["stateManagement/components/components"],function(e){"use strict";var t=e.selectors;return{getPagesContainerAbsLayout:function(e){var n=e.siteSegments.getPagesContainer();return t.getLayoutRelativeToScreen(e,n)}}}),define("stateManagement/siteSegments/siteSegments",["stateManagement/siteSegments/siteSegmentsActions","stateManagement/siteSegments/siteSegmentsReducer","stateManagement/siteSegments/siteSegmentsSelectors"],function(e,t,n){"use strict";return{actions:e,reducer:t,selectors:n}}),define("stateManagement/mobile/mobileWizard/mobileWizardActions",["lodash","constants","util","coreUtilsLib","stateManagement/mobile/mobileWizard/mobileWizardSelectors","stateManagement/siteSegments/siteSegments","stateManagement/panels/panels","coreBi","stateManagement/bi/bi","stateManagement/mobile/mobileWizard/mobileWizardActionTypes"],function(e,t,n,a,r,i,o,s,u,c){"use strict";var l=o.actions,d=function(e){return{type:c.SET_MOBILE_WIZARD_IS_ENABLED,enabled:e}},p=function(e){return{type:c.SET_MOBILE_WIZARD_OPENING_STATE,openingState:e}},g=function(e){return{type:c.SET_HEADER_ANIMATION_PROGRESS,animationInProgress:e}},f=function(e){return{type:c.SET_CURRENT_STEP,currentStep:e}},m=function(e,t){return{type:c.SET_USER_SELECTIONS,stepName:e,stepValue:t}},E=function(e,t){return{type:c.SET_LAST_SAVED,stepName:e,value:t}},S=function(e){return e.push({id:"NONE",structure:{}}),{type:c.SET_QAB_AVAILABLE_PRESETS,availablePresets:e}},T=n.headerScrollTypes,_=t.MOBILE.MOBILE_WIZARD.OPENING_STATE,P={id:"TINY_MENU",type:"MOBILE"},M=["wysiwyg.viewer.skins.mobile.TinyMenuPullFromTopSkin","wysiwyg.viewer.skins.mobile.TinyMenuSkin"],A={id:"SITE_HEADER",type:"MOBILE"},I=void 0,v={id:"QUICK_ACTION_BAR",type:"MOBILE"},O=["QuickActionBar_Preset6","QuickActionBar_Preset4"],R=["QuickActionBar_Preset4"],h={id:"BACK_TO_TOP_BUTTON",type:"MOBILE"},y=["QuickActionBar_Preset4"],N=function(){return function(t,n,a){var r=a.editorAPI,i=e.get(r.addPanel.getSectionsByComponentType("wysiwyg.viewer.components.QuickActionBar")[0],"props.items"),o=e.filter(i,function(t){return e.includes(O,t.id)});t(S(o))}},L=function(){return function(e,t,n){n.editorAPI.mobile.qab.isEnabled()||e(E("qab","NONE"))}},D=function(t,n){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return function(i,o,s){var u=s.dsRead,c=s.editorAPI,l=o();i(F(v.id,void 0)),a&&(i(m("qab",t.id)),i(w(v.id,t.id))),"NONE"!==t.id?(c.mobile.qab.isEnabled()||c.mobile.actionBar.version.upgrade(),c.waitForChangesApplied(function(){var a=r.qab.getAvailablePresets(l),o=e.find(a,{id:t.id}),s=e.cloneDeep(o.structure),d=e.pick(u.components.layout.get(v),["x","y","width","height"]);c.components.layout.update(v,d,!0);var p=n.changeStyleHelper.getCompDefStyleId(s,c);c.components.style.setId(v,p);var g=n.changeStyleHelper.getCompDefStyle(s,c);c.components.style.update(v,g),c.components.properties.update(v,s.props),e.includes(R,t.id)&&i(F(v.id,"open"))})):c.mobile.actionBar.version.revert()}},C=function(){return function(e,t,n){return n.editorAPI.documentMode.enableRenderFixedPositionContainers(!0)}},b=function(){return function(e,t,n){return n.editorAPI.documentMode.enableRenderFixedPositionContainers(!1)}},U=function(){return function(t,n,a){var r=a.dsRead,i=r.components.layout.getRelativeToStructure(A),o=r.components.behaviors.get(A)||[],s=T.getSelectedHeaderType(i,o)||T.getDefaultHeaderType(),u=e.get(s,["value","scrollType"]);t(E("header",u)),t(x(function(){var n=e.get(s,["value","animationName"]);t(B(n))}))}},B=function(e){return function(t,n,a){var r=a.dsWrite,i=a.dsRead,o=a.editorAPI,s=function(){t(g(!1))};I&&o.components.behaviors.stopPreviewAnimation([I],0);var u=i.components.layout.get(A).height;if(r.site.animateScroll(0,0,0),e){var c=function(e,t){return{action:"",duration:1.5,name:e,params:{compMeasures:{height:t},yoyo:!0,repeat:1}}}(e,u);I=o.components.behaviors.previewAnimation(A,c)}r.site.animateScroll(0,2*u,1.5,function(){r.site.animateScroll(0,0,1.5,s)})}},w=function(e,t){return function(n){n(u.actions.event(s.events.mobileEditor.mobileWizard.MOBILE_WIZARD_CHOOSE_OPTION,{current_step:e,selected_value:t}))}},G=function(t){return function(n,a){var i=a(),o=r.getStepsToShow(i),c=r.getCurrentStep(i),l=e.indexOf(o,c),d=o[l+t]||o[l],p=r.getCurrentStepSelectedValue(i);n(f(d)),n(u.actions.event(s.events.mobileEditor.mobileWizard.MOBILE_WIZARD_NAVIGATE,{current_step:c,selected_value:p,next_or_previous:t>0?"NEXT":"PREVIOUS"}))}},F=function(e,t){return function(n,a,r){r.dsWrite.documentMode.setComponentPreviewState(e,t)}},H=function(e){return function(t,n){var a=n(),i=r.getCurrentStep(a),o=r.getUserSelections(a);t(u.actions.event(s.events.mobileEditor.mobileWizard.MOBILE_WIZARD_FINISH,{current_step:i,tiny_menu_option:o.tinyMenu,site_header_option:o.header,quick_action_bar_option:o.qab,back_to_top_button_option:o.backToTop,finish_method:e}))}},k=function(){return function(e,t,a){var i=a.editorAPI;r.getIsMobileWizardEnabled(t())&&(e(p(_.FINISH)),window.setTimeout(function(){e(d(!1)),i.toolsControl.toggleHideTools(!1,!1),n.keyboardShortcuts.enable()},1700),window.setTimeout(function(){e(p(_.BEFORE))},3400))}},x=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.noop;return function(e,n,r){var i=r.dsWrite,o=r.dsRead.site.getScroll().y,s=a.scrollUtils.calcScrollDuration(o,0,!0);i.site.animateScroll(0,0,s,t)}},W=function(e){return e?"open":"close"},V=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return function(a){e(t),n&&(a(m("tinyMenu",t)),a(w(P.id,t)))}};return{enableMobileWizard:function(){return function(t,a,i){var o=i.editorAPI,c=r.getIsMobileWizardEnabled(a()),l=o.isDesktopEditor(),g=o.preview.isInPreviewMode();l||c||g||function(t,n){if(t.isCurrentPageLandingPage()){var a=t.pages.getCurrentPageId(),r=e.reject(t.pages.getPagesData(),"isLandingPage"),i=t.homePage.get(),o=!!e.find(r,{id:i}),c=e.get(e.head(r),"id"),l=o?i:c;t.pages.navigateTo(l,n),t.store.dispatch(u.actions.event(s.events.mobileEditor.mobileWizard.MOBILE_WIZARD_NAVIGATE_TO_NONE_LANDING_PAGE,{current_page_id:a,next_page_id:l}))}else n()}(o,function(){n.keyboardShortcuts.disable(),t(d(!0)),o.toolsControl.toggleHideTools(!0,!1),window.setTimeout(function(){t(p(_.IN_PROGRESS))},100),t(u.actions.event(s.events.mobileEditor.mobileWizard.MOBILE_WIZARD_START))})}},disableMobileWizard:k,firstStepSkipClicked:function(){return function(e){e(k()),e(u.actions.event(s.events.mobileEditor.mobileWizard.MOBILE_WIZARD_FIRST_STEP_SKIP))}},scrollToTop:x,setCurrentStep:f,setNextStep:function(){return G(1)},setPreviousStep:function(){return G(-1)},skipWizard:function(){return function(e){e(H("SKIP")),e(k())}},setPreviewState:F,buildWizardSteps:function(){return function(e,t,n){var a=n.editorAPI,r=n.dsWrite,i=["MOBILE_WIZARD_FIRST_STEP","TINY_MENU","SITE_HEADER","QUICK_ACTION_BAR","BACK_TO_TOP_BUTTON","MOBILE_WIZARD_LAST_STEP"];e(function(e){return{type:c.SET_STEPS_TO_SHOW,stepsToShow:e}}(i)),e(f(i[0])),e(l.closeAllPanels()),a.panelManager.closeAllPanels(),a.selection.deselectComponents(),r.renderPlugins.allowSiteOverflow(!0)}},clearAfterMobileWizardCloses:function(){return function(e,t,n){n.dsWrite.renderPlugins.allowSiteOverflow(!1)}},setUserSelections:m,finishWizard:function(){return function(e){e(H("FINISH")),e(k())}},sendVideoCloseBiEvent:function(t){return function(n){var a=e.assign({origin:"go_to_mobile_editor",panel_name:"mobile_wizard_mobileEditorFirstTimeVideoPanel"},t);n(u.actions.event(s.events.mobileEditor.mobileWizard.MOBILE_WIZARD_VIDEO_CLOSE,a))}},setStepFromProgressBar:function(e){return function(t,n){var a=n(),i=r.getCurrentStep(a),o=r.getCurrentStepSelectedValue(a);t(f(e)),t(u.actions.event(s.events.mobileEditor.mobileWizard.MOBILE_WIZARD_PROGRESS_BAR_NAVIGATE,{current_step:i,next_step:e,selected_value:o}))}},wixLogoClick:function(){return function(e){e(u.actions.event(s.events.mobileEditor.mobileWizard.MOBILE_WIZARD_TOP_BAR_WIX_LOGO_CLICK))}},initTinyMenuStep:function(){return function(t,n){t(function(t,n,a){var i=a.dsRead,o=r.tinyMenu.getAvailableSkins(n());o.length||(o=i.theme.skins.getComponentSkins("wysiwyg.viewer.components.mobile.TinyMenu")),t(function(e){return{type:c.SET_TINY_MENU_AVAILABLE_SKINS,availableSkins:e}}(o=e.difference(o,M)))}),t(function(e,t,n){e(function(e){return{type:c.SET_TINY_MENU_STYLE_ID,styleId:e}}(n.editorAPI.components.style.getId(P)))}),t(function(e,t,n){var a=n.dsRead.components.skin.get(P);e(E("tinyMenu",a))}),t(x(function(){"TINY_MENU"===r.getCurrentStep(n())&&t(F(P.id,"open"))}))}},setSelectedTinyMenu:V,overrideDeprecatedTinyMenuSkinsIfNeeded:function(t){return function(n,a,r){var i=r.dsRead.components.skin.get(P);e.includes(M,i)&&(n(V(t,"wysiwyg.viewer.skins.mobile.TinyMenuFullScreenSkin",!1)),n(E("tinyMenu","wysiwyg.viewer.skins.mobile.TinyMenuFullScreenSkin")))}},initHeaderStep:function(){return function(e){e(U()),e(C())}},clearHeaderStep:function(){return function(e,t,n){var a=n.dsWrite,r=n.editorAPI;e(b()),a.site.animateScroll(0,0,0),I&&r.components.behaviors.stopPreviewAnimation([I],0)}},setSelectedHeaderType:function(t){return function(n,a,o){var s=o.dsRead,u=o.dsWrite,c=a(),l=r.header.getSelectedHeaderType(c),d=e.isEqual(l,t);if(!r.header.getAnimationProgress(c)||!d){n(g(!0));var p=function(t,n){return e.find(t,function(t){return e.get(t,"value.scrollType")===n})}(T.headerScrollTypesModel,t),f=s.components.behaviors.get(A)||[],E=e.get(p,["value","animationName"]);n(m("header",t)),n(i.actions.setHeaderScrollBehavior(p.value,A,f,"MOBILE")),n(w("SITE_HEADER",t)),u.waitForChangesApplied(function(){n(B(E))})}}},initQabStep:function(t){return function(n,a){var i=a();n(N()),n(L());var o=r.qab.getSelectedQab(i);o?e.includes(R,o)&&n(F(v.id,"open")):n(function(t){return function(n,a){var i=a(),o=r.qab.getAvailablePresets(i),s=e.find(o,{id:"QuickActionBar_Preset4"});s&&(n(D(s,t,!1)),n(E("qab",s.id)))}}(t))}},setSelectedQabPreset:D,setAvailableQabPresets:S,initBackToTopStep:function(){return function(t,n,a){var i=a.editorAPI,o=n(),s=r.backToTop.getSelectedBackToTop(o)||r.getLastSaved(o,"backToTop"),u=void 0;s?u="true"===s:(u=function(e){return!!e.mobile.mobileOnlyComponents.isMobileOnlyComponentExistOnStructure(h.id)}(i),t(E("backToTop",e.toString(u)))),t(F(h.id,W(u))),t(function(t,n,a){var i=a.dsWrite;i.documentMode.enableBackToTopButton(!0);var o=r.qab.getSelectedQab(n());e.includes(y,o)&&i.renderPlugins.hideComp(v)})}},clearBackToTopStep:function(){return function(e){e(F(h.id,void 0)),e(function(e,t,n){var a=n.dsWrite;a.documentMode.enableBackToTopButton(!1),a.renderPlugins.showComp(v)})}},setSelectedBackToTop:function(t){return function(n,a,r){var i=r.editorAPI,o=e.toString(t);n(m("backToTop",o)),i.mobile.mobileOnlyComponents.enableBackToTopButton(t),i.waitForChangesApplied(function(){n(F(h.id,W(t)))}),n(w(h.id,o))}}}}),define("stateManagement/mobile/mobileActions",["stateManagement/mobile/hiddenItems/hiddenItemsActions","stateManagement/mobile/mobileWizard/mobileWizardActions"],function(e,t){"use strict";return{hiddenItems:e,mobileWizard:t}}),define("stateManagement/mobile/mobileSelectors",["reduxLibs","stateManagement/mobile/hiddenItems/hiddenItemsSelectors","stateManagement/mobile/mobileWizard/mobileWizardSelectors"],function(e,t,n){"use strict";var a=function(e){return e.isMobileEditor};return{isMobileEditor:a,getDeviceType:(0,e.reselect.createSelector)(a,function(e){return e?"mobile":"desktop"}),hiddenItems:t,mobileWizard:n}}),define("stateManagement/mobile/mobile",["stateManagement/mobile/mobileActions","stateManagement/mobile/mobileReducer","stateManagement/mobile/mobileSelectors"],function(e,t,n){"use strict";return{actions:e,reducer:t,selectors:n}}),define("stateManagement/legacy/legacyActions",["lodash","stateManagement/popups/popups","stateManagement/leftBar/leftBar","stateManagement/mouseActions/mouseActions","stateManagement/siteDisplayName/siteDisplayName","stateManagement/dataFixers/dataFixers","stateManagement/store/dsPaths.json","stateManagement/legacy/legacyActionTypes","stateManagement/mobile/mobile"],function(e,t,n,a,r,i,o,s,u){"use strict";var c=i.actions,l=s.SET_STATE,d=t.selectors.isPopUpMode,p=a.selectors.isPerformingMouseMoveAction;return{setState:function(e){return{type:l,state:e}},loadDocumentServices:function(t){return function(n,a,r){var i=e.pick(t,o.read),s=e.pick(t,o.write);return e.assign(r,{dsRead:i,dsWrite:s}),{dsRead:i,dsWrite:s}}},loadSantaPreviewCreator:function(t){return function(n,a,r){e.assign(r,{createSantaPreview:t})}},createSantaPreview:function(e,t,n,a,r,i,o,s){return function(u,c,l){return l.createSantaPreview(e,t,n,a,r,i,o,s)}},loadEditorAPI:function(t){return function(n,a,r){return e.assign(r,{editorAPI:t})}},onPreviewReady:function(){return function(e,t,a){var i=a.dsRead,o=t(),s=i.generalInfo.getMetaSiteId();e(n.actions.sendBIButtonsCount(d(o,i))),e(r.actions.fetchSiteDisplayName(s)),e(c.runDataFixers())}},onViewerChanged:function(){return function(e,t){var n=t();p(n)||e(u.actions.hiddenItems.refreshMobileHiddenComponentsIfPanelIsOpen())}}}}),define("stateManagement/legacy/legacy",["stateManagement/legacy/legacyReducer","stateManagement/legacy/legacyActions"],function(e,t){"use strict";return{reducer:e,actions:t}}),define("stateManagement/sectionedPanel/sectionedPanelActions",["stateManagement/sectionedPanel/sectionedPanelActionTypes"],function(e){"use strict";return{toggleSection:function(t){return{type:e.TOGGLE_SECTION,sectionName:t}}}}),define("stateManagement/sectionedPanel/sectionedPanelSelectors",["lodash"],function(e){"use strict";return{dockedSections:function(e){return e.dockedSections},openDockedSections:function(t){return e.filter(t.dockedSections,{isOpen:!0})}}}),define("stateManagement/sectionedPanel/sectionedPanel",["stateManagement/sectionedPanel/sectionedPanelActions","stateManagement/sectionedPanel/sectionedPanelReducer","stateManagement/sectionedPanel/sectionedPanelSelectors"],function(e,t,n){"use strict";return{actions:e,reducer:t,selectors:n}}),define("stateManagement/userProfile/userProfileSelectors",[],function(){"use strict";return{getUserProfile:function(e){return e.userProfile}}}),define("stateManagement/userProfile/userProfileActions",["stateManagement/userProfile/userProfileActionTypes"],function(e){"use strict";var t=e.SET_USER_PROFILE;return{setUserProfile:function(e){return{type:t,userProfile:e}}}}),define("stateManagement/userProfile/userProfile",["stateManagement/userProfile/userProfileReducer","stateManagement/userProfile/userProfileSelectors","stateManagement/userProfile/userProfileActions"],function(e,t,n){"use strict";return{reducer:e,selectors:t,actions:n}}),define("stateManagement/domain/domainSelectors",["lodash","util"],function(e,t){"use strict";var n=function(e){return e.generalInfo.urlFormat.isSlash()?"wixsite.com":"wix.com"},a=function(e,t){return t.generalInfo.isHttpsEnabled()?"https":"http"};return{getSiteProtocol:a,isDomainConnected:function(t,a){var r=a.generalInfo.getPublicUrl();return!e.isNil(r)&&!e.includes(r,n(a))},getFreeDomainPrefix:function(e,t){return a(0,t)+"://"+t.generalInfo.getUserInfo().name+"."+n(t)+"/"},doesUserOwnGoogleDomain:function(){var e=t.cookie.getCookie("wixClient");return e.indexOf("GOOGLE_DOMAIN")>0||e.indexOf("REGRU")>0}}}),define("stateManagement/domain/domain",["stateManagement/domain/domainSelectors"],function(e){"use strict";return{selectors:e}}),define("stateManagement/text/textSelectors",[],function(){"use strict";return{isTextEditorOpen:function(e){return e.text.isTextEditorOpen}}}),define("stateManagement/text/textActions",["lodash","stateManagement/text/textActionTypes","stateManagement/selection/selection","stateManagement/components/components"],function(e,t,n,a){"use strict";var r=t.OPEN_TEXT_EDITOR,i=t.CLOSE_TEXT_EDITOR,o=n.selectors,s=a.selectors;return{invisibleTextEditor:{load:function(t){return function(n,a,r){e.assign(r,{invisibleTextManager:t})}},unload:function(){return function(t,n,a){e.assign(a,{invisibleTextManager:null})}},execCmd:function(t){return function(n,a,r){var i=r.invisibleTextManager,u=r.invisibleLinksHelper,c=r.textManager,l=r.dsRead,d=r.editorAPI,p=e.head(o.getSelectedCompsRefs(a())),g="wysiwyg.viewer.components.WRichText"===s.getCompType(p,l),f=l.components.getRepeatedComponents(p);if(g&&f.length>1){var m=e.difference(f,[p]),E=s.getCompsData(m,l),S=function(t,n){if("fontFamily"===t.commandName){var a=t.commandData.toLowerCase().replace(/['"\s]/g,"");return n.getFonts()[a].fontFamily}if("textShadow"===t.commandName){var r=n.getAvailableTextShadowEffects();return e.findKey(r,{cssData:t.commandData})}return t.commandData}(t.data,c);e.forEach(E,function(e,n){i.setData(e.text),u.setCurrentLinks(e.linkList),i.execCommand("selectAll"),i.execCommand(t.data.commandName,S,{execWithoutHistory:!0});var a=i.getData();e.text=a,e.linkList=u.getAllLinks();var r=m[n];d.components.data.update(r,e)}),c.focus()}}},loadLinksHelper:function(t){return function(n,a,r){e.assign(r,{invisibleLinksHelper:t})}},unloadLinksHelper:function(){return function(t,n,a){e.assign(a,{invisibleLinksHelper:null})}}},textEditor:{load:function(t){return function(n,a,r){e.assign(r,{textManager:t})}},unload:function(){return function(t,n,a){e.assign(a,{textManager:null})}}},openTextEditor:function(){return{type:r}},closeTextEditor:function(){return{type:i}}}}),define("stateManagement/text/text",["stateManagement/text/textReducer","stateManagement/text/textSelectors","stateManagement/text/textActions"],function(e,t,n){"use strict";return{reducer:e,selectors:t,actions:n}}),define("stateManagement/tpa/tpaActions",["lodash","stateManagement/tpa/tpaActionTypes"],function(e,t){"use strict";var n=t.ADD_APP_IDS_TO_REFRESH_ON_DASHBOARD_CLOSE,a=t.SET_APP_IDS_TO_REFRESH_ON_DASHBOARD_CLOSE,r=function(t){return e.map(t,i)},i=function(e){return parseInt(e,10)},o=function(t,n){return e(t).map(n.tpa.app.getDataByAppDefId).map("applicationId").compact().value()};return{addAppDefIdsToRefreshOnDashboardClose:function(e){return function(t,a,i){var s=i.dsRead,u=o(e,s);t(function(e){return{type:n,appIds:e}}(r(u)))}},setAppDefIdsToRefreshOnDashboardClose:function(e){return function(t,n,i){var s=i.dsRead,u=o(e,s);t(function(e){return{type:a,appIds:e}}(r(u)))}}}}),define("stateManagement/tpa/tpaSelectors",["lodash"],function(e){"use strict";return{getAppIdsToRefreshAfterDashboardClose:function(t){return e.map(e.keys(t.tpa.appsIdsToRefreshOnDashboardClose),function(e){return parseInt(e,10)})}}}),define("stateManagement/tpa/tpa",["stateManagement/tpa/tpaActions","stateManagement/tpa/tpaSelectors"],function(e,t){"use strict";return{actions:e,selectors:t}}),define("stateManagement/uploadedFonts/logic/fontsUploader",["lodash","util"],function(e,t){"use strict";return{upload:function(n,a,r){if(a){var i=e.map(r,function(e){return{uploadFn:a.item.upload,source:{file:e,name:e.name,size:e.size,folderId:null,folderName:"All Media",mediaType:t.fontsManagerUtils.constants.FONTS_MEDIA_TYPE}}});n.Uploader.upload(i)}},clearUploadQueue:function(e){e.Uploader.uploadIsInProgress||e.Uploader.clearQueue()},getUploadQueue:function(e){return e.Uploader.uploadQueue},cancelUpload:function(e){var t=!1;if(e.canAbort())try{e.abort(),t=!0}catch(e){t=!1}return t},retryUpload:function(t){!e.isEmpty(t.Uploader.uploadQueue)&t.Uploader.uploadIsInProgress&&t.Uploader.upload()}}}),define("stateManagement/uploadedFonts/logic/uploadedFontsLogicUtils",["lodash","util","coreUtilsLib"],function(e,t,n){"use strict";var a=function(t){return e.map(t,function(t){return e.assign(t,{name:t.source.name})})},r=function(n){return e.map(n,function(n){if(n.status===t.fontsManagerUtils.constants.FONT_STATUS.SUCCEEDED){var a=e.get(n,"serverResponse.data");return e.assign({},n,t.fontsManagerUtils.getUploadedFontData(a))}return n})};return{getFontObject:function(n){return n=e.reject(n,function(e){return!e.fileInput}),e.map(n,function(e){return t.fontsManagerUtils.getUploadedFontData(e)})},buildUploadedItems:function(n){return e.transform(n,function(e,n){n.status===t.fontsManagerUtils.constants.FONT_STATUS.SUCCEEDED&&(e[n.id]={finished:!0})},{})},buildQueueItemForStore:function(t){var a=e.pick(t,["canceled","cssFontFamily","displayName","downloadUrl","error_code","fileUrl","fontFace","fontFamily","id","isAborted","name","removed","status","stillUploading"]);return a.source=n.objectUtils.cloneDeep(t.source),a.fileInput=n.objectUtils.cloneDeep(t.fileInput),a.fileOutput=n.objectUtils.cloneDeep(t.fileOutput),a.serverResponse=n.objectUtils.cloneDeep(t.serverResponse),a},getInitialQueueWithData:function(t){return e.flow([a,r])(t)},getNewQueueData:a}}),define("stateManagement/uploadedFonts/uploadedFontsSelectors",[],function(){"use strict";return{getList:function(e){return e.uploadedFonts.list},getQueue:function(e){return e.uploadedFonts.queue},getUploadedItems:function(e){return e.uploadedFonts.uploadedItems},getTimeOutTokens:function(e){return e.uploadedFonts.timeOutTokens}}}),define("stateManagement/uploadedFonts/logic/uploadedFontsActions",["lodash","wixmp","coreBi","util","coreUtilsLib","stateManagement/bi/bi","stateManagement/uploadedFonts/logic/fontsUploader","stateManagement/uploadedFonts/logic/uploadedFontsLogicUtils","stateManagement/uploadedFonts/uploadedFontsActionTypes","stateManagement/uploadedFonts/uploadedFontsSelectors"],function(e,t,n,a,r,i,o,s,u,c){"use strict";var l=u.SET_LIST,d=u.SET_QUEUE,p=u.SET_FLAG_TO_QUEUE_ITEM,g=u.SET_UPLOADED_ITEMS,f=u.ADD_TIME_OUT_TOKEN,m=u.CLEAR_TIME_OUT_TOKENS,E=c.getQueue,S=c.getUploadedItems,T=c.getTimeOutTokens,_=a.fontsManagerUtils.constants,P=function(e){return{type:l,list:e}},M=function(e){return{type:d,queue:e}},A=function(e,t){return{type:p,queueItemIndex:e,flag:t}},I=function(e){return{type:g,uploadedItems:e}},v=function(e){return{type:f,timeOutToken:e}},O=function(){return{type:m}},R=function(e,t){var n={mediaType:_.FONTS_MEDIA_TYPE};return n.paging={cursor:null,size:500},t.wixmpSource.items.list(null,n).then(function(t){var n=r.objectUtils.cloneDeep(t.data);e(P(s.getFontObject(n)))})},h=function(t,n){return function(a,r,i){var o=i.wixmpFonts;n.id&&e.assign(o.uploadQueue[t],{id:n.id}),a(A(t,n))}},y=function(){return function(n,a){var r=s.getInitialQueueWithData(e.map(o.getUploadQueue(t),s.buildQueueItemForStore)),i=s.buildUploadedItems(S(a()));n(M(r)),n(I(i)),N(n,a)}},N=function(t,n){var a=T(n());e.forEach(a,function(e){window.clearTimeout(e)}),t(O())},L=function(n,a){t.events.on(t.events.ITEMS.REMOVE,function(t){e.forEach(t,function(e){e.then(function(){return R(n,a)}).catch(function(e){r.log.error(e)})})})},D=function(n,i,o){t.Uploader.on("fileStatusChanged",function(t){t.currentFileProgress.status===_.FONT_STATUS.SUCCEEDED&&R(n,o).catch(function(e){return r.log.error(e)});var s=E(i()),u={},c=t.currentFileQueueIdx,l=t.currentFileProgress.status;switch(u.status=l,l){case a.fontsManagerUtils.constants.FONT_STATUS.PROCESSING:C(n,s,c);break;case a.fontsManagerUtils.constants.FONT_STATUS.FAILED:var d=b(t,s,c);e.assign(u,d);break;case a.fontsManagerUtils.constants.FONT_STATUS.SUCCEEDED:var p=U(n,i,t,s,c);e.assign(u,p)}n(h(c,u))})},C=function(e,t,a){e(i.actions.event(n.events.fontsUploadPanel.Start_Font_Upload_Process,{name:t[a].name}));var r=window.setTimeout(function(){e(h(a,{stillUploading:!0}))},3e4);e(v(r))},b=function(t,n,a){var i=e.get(t,"currentFileProgress.file.serverResponse.data"),o=e.get(i,"error_code")||"unknown";if(!n[a].canceled){var s=r.objectUtils.cloneDeep(n[a]);s.error_code=o,G(o,s)}return{error_code:o}},U=function(t,r,o,s,u){var c=e.get(o,"currentFileProgress.file.serverResponse.data"),l=_defineProperty({},c.id,!0),d=e.assign(_defineProperty({},c.id,{finished:!1}),S(r()),l);return t(I(d)),i.actions.event(n.events.fontsUploadPanel.Fonts_Uploaded,{name:s[u].name}),a.fontsManagerUtils.getUploadedFontData(c)},B=function(n,a,r){t.Uploader.on("queueChanged",function(t){r.uploadQueue=t;var i=E(a()),o=s.getNewQueueData(e.map(t,s.buildQueueItemForStore)),u=e.map(o,function(t,n){return e.defaults({},i[n],t)});n(M(u))})},w=function(){t.Uploader.on("uploadQueueFinished",function(){o.clearUploadQueue(t)})},G=function(e,t){var r=a.fontsManagerUtils.getErrorMessage(e).bi_msg;i.actions.event(n.events.fontsUploadPanel.Upload_Failed,{message:r,name:t.name})};return{init:function(){return function(e,t,n){var a=n.wixmpFonts;R(e,a).catch(function(e){return r.log.error(e)}),e(y()),D(e,t,a),B(e,t,a),L(e,a),w()}},removeFonts:function(e){return function(t,n,a){a.wixmpFonts.wixmpSource.items.remove(e)}},assignFlagToQueueItem:h,cancelUpload:function(e){return function(t,n,a){var r=a.wixmpFonts;-1!==e&&o.cancelUpload(r.uploadQueue[e])&&t(h(e,{canceled:!0}))}},prepareUploadedFontsData:y,uploadItems:function(e){return function(n,a,r){var i=r.wixmpFonts;o.upload(t,i.wixmpSource,e)}},clearUploadQueue:function(){return function(){o.clearUploadQueue(t)}},setUploadedItems:I,setQueue:M,addTimeOutToken:v,setList:P,setFlagToQueueItem:A,clearTimeOutTokens:O}}),define("stateManagement/uploadedFonts/uploadedFonts",["stateManagement/uploadedFonts/logic/uploadedFontsActions","stateManagement/uploadedFonts/uploadedFontsReducer","stateManagement/uploadedFonts/uploadedFontsSelectors"],function(e,t,n){"use strict";return{actions:e,reducer:t,selectors:n}}),define("stateManagement/componentMetaData/componentMetaData",["lodash","constants"],function(e,t){"use strict";var n=e.curryRight(e.every),a=function(t){return function(n,a){return!e.isEmpty(n)&&e.every(n,function(e){return t(e,a)})}},r=function(t){return!e.isUndefined(t.docked)&&t.fixedPosition},i=function(e,t){var n=t.components.layout.get(e);return n.docked=t.components.layout.getDock(e),r(n)};return{isHorizontallyMovable:a(function(e,t){return t.components.is.horizontallyMovable(e)&&!i(e,t)&&!t.components.layout.isHorizontallyStretchedToScreen(e)}),isPinnedBySerializedLayout:n(r),isPinned:a(i),isPlatformShowFocusBox:function(t,n){var a=n.platform.controllers.connections.get(t);if(!e.isEmpty(a))return e(a).map(function(t){return function(t,n){var a=n.controllerRef,r=n.role,i=t.platform.controllers.getStageData(a);return e.get(i,["connections",r,"showFocusBox"])}(n,t)}).find(e.isBoolean)},getPlatformFocusBoxNavType:function(){return t.UI.NAVIGATION_TYPES.TABS},getPlatformFocusBoxNavContent:function(e,t,n){return{tabs:[{id:"platform-tab",label:n,active:!0}],onTabClick:function(){return t.selection.selectComponentByCompRef(e)},translate:!1}}}}),define("stateManagement/applyModeFromClipboard/applyModeFromClipboardSelectors",[],function(){"use strict";return{selectApplyModeFromClipboardSuggestion:function(e){return e.applyModeFromClipboardSuggestion}}}),define("stateManagement/applyModeFromClipboard/applyModeFromClipboard",["stateManagement/applyModeFromClipboard/applyModeFromClipboardSelectors"],function(e){"use strict";return{selectors:e}}),define("stateManagement/contextMenu/contextMenuActions",["stateManagement/contextMenu/contextMenuActionTypes"],function(e){"use strict";return{openContextMenu:function(t){var n=t.editorPositionX,a=t.editorPositionY,r=t.viewerPositionX,i=t.viewerPositionY;return{type:e.OPEN_CONTEXT_MENU,editorPositionX:n,editorPositionY:a,viewerPositionX:r,viewerPositionY:i}}}}),define("stateManagement/contextMenu/contextMenuSelectors",[],function(){"use strict";var e=function(e){return e.pinMode.pinnedCompType};return{isOpen:function(t){return Boolean(e(t))},getPinnedCompType:e}}),define("stateManagement/contextMenu/contextMenu",["stateManagement/contextMenu/contextMenuActions","stateManagement/contextMenu/contextMenuReducer","stateManagement/contextMenu/contextMenuSelectors"],function(e,t,n){"use strict";return{actions:e,reducer:t,selectors:n}}),define("stateManagement/multilingual/multilingualSelectors",["lodash"],function(e){"use strict";var t=function(t){return function(n){return e.get(n.multilingual,t)}};return{supportedLanguages:t("supportedLanguages"),loading:t("loading")}}),define("stateManagement/multilingual/multilingualRequestSignatures",["lodash","constants","stateManagement/multilingual/multilingualConstants"],function(e,t,n){"use strict";var a=t.MULTILINGUAL.sitePropertyServiceUrl,r=n.linguistLanguageUrl,i=n.apiMethods,o=i.GET,s=i.POST,u=i.PUT;return{loadLanguages:function(e){return{type:o,url:r+"/?instance-id="+e}},initLanguages:function(e,t){return{type:s,url:r+"/?instance-id="+e,data:{initialize:t}}},addNewLanguage:function(t,n){return{type:u,url:r+"/?instance-id="+t,data:{data:e.pick(n,["code","locale"])}}},updateLanguageStatus:function(e,t,n){return{type:u,url:r+"/"+t+"/status?instance-id="+e,data:{data:{status:n}}}},loadSupportedLanguages:function(){return{type:o,url:r+"/supported"}},checkLanguageAppStatus:function(e){return{url:a+"?fields.paths=multilingual",headers:{Authorization:"MSID."+e}}}}}),define("stateManagement/multilingual/multilingualActions",["lodash","constants","stateManagement/multilingual/multilingualActionTypes","stateManagement/multilingual/multilingualUtils","stateManagement/multilingual/multilingualSelectors","stateManagement/multilingual/multilingualConstants","stateManagement/multilingual/multilingualRequestSignatures"],function(e,t,n,a,r,i,o){"use strict";var s=n.LOAD_SUPPORTED_LANGUAGES,u=n.LOAD_SUPPORTED_LANGUAGES_SUCCESS,c=n.LOAD_SUPPORTED_LANGUAGES_ERROR,l=n.MULTILINGUAL_LOAD_START,d=n.MULTILINGUAL_LOAD_STOP,p=a.callAjax,g=a.addLanguageCode,f=a.pickLanguageCode,m=t.MULTILINGUAL,E=m.LANGUAGE_STATUSES,S=m.linguistDefId,T=i.appStates,_=T.NEW,P=T.INSTALLED,M=i.dataLoadTypes,A=M.LOAD_LANGUAGES,I=M.CHECK_LANGUAGE_STATUS,v=M.INITIALIZE_LANGUAGES,O=M.ADD_LANGUAGE,R=M.UPDATE_LANGUAGE_STATUS,h=r.supportedLanguages,y={loadSupportedLanguages:function(){return{type:s}},loadSupportedLanguagesSuccess:function(e){return{type:u,payload:e}},loadSupportedLanguagesError:function(e){return{type:c,error:e}},multilingualLoadStart:function(e){return{type:l,payload:e}},multilingualLoadStop:function(e){return{type:d,payload:e}}},N=function(e){return e.data},L=function(t){return e.get(t.app.getDataByAppDefId(S),"instanceId")},D=function(e){return function(t){var n=t.originalLanguage,a=t.translationLanguages;return e({originalLanguage:g(n[0]),translationLanguages:a.map(g)})}},C=function(e){return function(t){return e(t.payload),t}},b=e.curry(function(t,n,a){return t(e.assign({},a,{producer:n}))}),U=b(y.multilingualLoadStart),B=b(y.multilingualLoadStop),w=function(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.identity;return function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:N;return t(U(n,e)),p(e).then(r).then(B(n)).then(C(a)).catch(B(n)).then(t)}},G=function(e,t){return function(n,a,r){var i=r.dsRead.tpa,s=r.dsWrite.language.status.set,u=L(i);return w(n,R,function(e){return s(g(e),t)})(o.updateLanguageStatus(u,e,t))}};return e.assign(y,{initializeAppThunk:function(){return function(t,n,a){var r=a.editorAPI,i=r.saveManager,o=r.panelManager,s=r.history,u=r.tpa.services,c=a.dsRead,l=c.tpa,d=c.generalInfo,p=a.dsWrite.platform,g=function(){return s.add("before adding multilingual platform app")},f=void 0;return d.isFirstSave()?(g(),f=new Promise(function(e,t){return i.saveInBackground(e,t)}).then(function(){return!0})):f=Promise.resolve(!1),f.then(function(t){var n=void 0,a=L(l);return e.isUndefined(a)?(t||g(),n=Promise.all([_,p.provision(S).then(function(e){return e.instanceId})])):n=[P,a],n}).catch(function(e){throw s.undo(),u.tpaAlertsService.openProvisionFailedAlert(o.openPanel,S,!1),e})}},addLanguageSelectorToSiteHeaderThunk:function(e){return function(t,n,a){var r=a.dsRead,i=r.selection,o=r.siteSegments;a.dsWrite.components.add(o.getHeader(),e.structure,void 0,function(e){return i.selectComponentByCompRef(e)})}},addLanguageThunk:function(t){return function(n,a,r){var i=r.dsRead,s=r.dsWrite,u=i.language.getFull();return(e.find(u,e.pick(t,["languageCode","locale"]))?G(t.languageCode,E.INACTIVE):function(t){return function(n,a,r){var i=r.dsRead.tpa,s=r.dsWrite.language,u=L(i);return w(n,O,e.flow(g,s.add))(o.addNewLanguage(u,t))}}(t))(n,a,{dsRead:i,dsWrite:s})}},loadLanguagesThunk:function(){return function(e,t,n){var a=n.dsRead.tpa,r=n.dsWrite.language.init,i=L(a);return w(e,A,D(r))(o.loadLanguages(i))}},loadSupportedLanguagesThunk:function(){return function(e){return e(y.loadSupportedLanguages()),p(o.loadSupportedLanguages()).then(N).then(y.loadSupportedLanguagesSuccess,y.loadSupportedLanguagesError).then(e)}},updateLanguageStatusThunk:G,checkLanguageStatusThunk:function(){return function(e,t,n){var a=n.dsRead,r=a.tpa,i=a.generalInfo.getMetaSiteId,s=L(r);return w(e,I)(o.checkLanguageAppStatus(i()),function(e){return{status:!!s&&!!e.properties.multilingual}})}},initializeLanguagesThunk:function(t){return function(n,a,r){var i=r.dsWrite.language.init,s=r.dsRead.tpa,u=r.editorAPI,c=u.panelManager,l=u.tpa.services,d=L(s),g={primaryLang:f(t),additionalLang:f(function(t,n){var a=e.reject(h(t),{languageCode:n.languageCode});return a[e.random(a.length-1)]}(a(),t))},m=o.initLanguages(d,g);return n(U(v,m)),p(m).then(N).then(B(v)).then(C(D(i))).catch(function(e){return l.tpaAlertsService.openProvisionFailedAlert(c.openPanel,S,!1),B(v)(e)}).then(n)}},setCurrentLanguageThunk:function(e){return function(t,n,a){return a.dsWrite.language.current.set(e)}}})}),define("stateManagement/multilingual/multilingual",["stateManagement/multilingual/multilingualActions","stateManagement/multilingual/multilingualActionTypes","stateManagement/multilingual/multilingualReducer","stateManagement/multilingual/multilingualSelectors"],function(e,t,n,a){"use strict";return{actionTypes:t,actions:e,reducer:n,selectors:a}}),define("stateManagement/domMeasurements/domMeasurementsSelectors",["constants","util"],function(e,t){"use strict";var n=function(e){return e.domMeasurements.stageLayout},a=function(e){return e.domMeasurements.previewPosition},r=function(e){return e.domMeasurements.scroll},i=function(e){return e.siteScale};return{getDomMeasurements:function(e){return e.domMeasurements},getPreviewPosition:a,getSiteScale:i,getStageLayout:n,getScrollMeasurements:r,getStageRect:function(e){return e.domMeasurements.stageRect},getViewPort:function(t,a,i){var o={top:e.UI.VIEWPORT_VERTICAL_MARGINS,bottom:e.UI.VIEWPORT_VERTICAL_MARGINS,left:72,right:60},s=n(t);if(!s)return null;var u=r(t),c={y:o.top,minY:o.top,bottomY:s.height-o.bottom,maxBottomY:u.scrollHeight-o.bottom,marginBottom:o.bottom,x:o.left,rightX:s.width-o.right,height:s.height-(o.top+o.bottom),width:s.width-(o.left+o.right),scrollTop:u.scrollTop,scrollLeft:u.scrollLeft,stageLayout:s};a&&(c.y+=u.scrollTop,c.bottomY+=u.scrollTop,c.x+=u.scrollLeft,c.rightX+=u.scrollLeft);var l=i&&i.right+10;if(l&&l>c.x){var d=l-c.x;c.x=l,c.width-=d}return c},translateToViewerCoordinates:function(e,o){return t.mouseCoordinatesHandler.fitMouseCoordinatesToViewer(i(e),n(e),r(e),a(e),o)}}}),define("stateManagement/domMeasurements/domMeasurementsActions",["lodash","stateManagement/domMeasurements/domMeasurementsActionTypes","stateManagement/domMeasurements/domMeasurementsSelectors"],function(e,t,n){"use strict";var a=t.SET_MEASURED_DOM,r=t.CLEAR_MEASURED_DOM,i=t.SET_STAGE_LAYOUT,o=t.SET_MEASURED_SCROLL,s=t.SET_STAGE_RECT,u=t.SET_PREVIEW_POS,c=function(e){return{type:i,stageLayout:e}},l=function(e){return{type:o,scroll:e}},d=function(e){return{type:s,stageRect:e}};return{clearMeasuredDOM:function(e){return{type:r,measureKey:e}},initDomMeasurements:function(){return function(t){t(function(t,a){var r={top:0,right:0,bottom:0,left:0,x:0,y:0,width:0,height:0},i=window.document.getElementById("stageContainer");if(i){var o=i.getBoundingClientRect();r=e.pick(o,e.keys(r))}var s=n.getStageLayout(a());e.isEqual(s,r)||t(c(r))}),t(function(t,a){var r=window.document.getElementById("scrollableEditorStage"),i=e.pick(r,["scrollLeft","scrollTop","scrollHeight","scrollWidth"]);e.isEqual(i,n.getScrollMeasurements(a()))||t(l(i))}),t(function(t,a){var r=a(),i=n.getStageLayout(r),o=n.getScrollMeasurements(r),s={top:o.scrollTop,bottom:o.scrollTop+i.height,left:o.scrollLeft,right:o.scrollLeft+i.width};e.isEqual(s,n.getStageRect(r))||t(d(s))})}},setMeasuredDOM:function(e,t){return{type:a,measureKey:e,measuredRes:t}},setMeasuredScroll:l,setStageLayout:c,setStageRect:d,updatePreviewPos:function(t){return function(a,r){var i=r(),o=n.getPreviewPosition(i);e.isEqual(t,o)||a(function(e){return{type:u,previewPos:e}}(t))}}}}),define("stateManagement/domMeasurements/domMeasurements",["stateManagement/domMeasurements/domMeasurementsSelectors","stateManagement/domMeasurements/domMeasurementsActions"],function(e,t){"use strict";return{selectors:e,actions:t}}),define("stateManagement/leavePopup/leavePopupActions",["util"],function(e){"use strict";var t=function(t){var n=e.translate("GENERAL_Close_Warning_Message");return(t||window.event).returnValue=n,n};return{setLeavePopup:function(n){return function(){var a="false"===e.url.getParameterByName("leavePagePopUp");window.onbeforeunload=!a&&n?t:null}}}}),define("stateManagement/leavePopup/leavePopup",["stateManagement/leavePopup/leavePopupActions"],function(e){"use strict";return{actions:e}}),define("stateManagement/businessManager/businessManagerActions",["coreUtilsLib"],function(e){"use strict";return{prefetchBizMgr:function(){return function(){return e.requestsUtil.fetch("/_api/business-manager/prefetch",{credentials:"same-origin",method:"GET"})}}}}),define("stateManagement/businessManager/businessManager",["stateManagement/businessManager/businessManagerActions"],function(e){"use strict";return{actions:e}}),define("stateManagement/appInstaller/appInstallerSelectors",[],function(){"use strict";return{getAppsInstallerPanelData:function(e){return e.appInstaller}}}),define("stateManagement/appInstaller/appInstallerActions",["lodash","util","experiment","stateManagement/panels/panels","stateManagement/appInstaller/appInstallerActionTypes"],function(e,t,n,a,r){"use strict";var i=a.actions,o=function(e){return{type:r.START_INSTALL_PROCESS,totalApps:e}},s=function(e){return{type:r.START_APP_INSTALL,installingAppName:e}},u=function(){return{type:r.DONE_APP_INSTALL}},c="se_enableAppsInstaller",l="appInstallerApps",d="panels.focusPanels.appInstallerPanel";return{installChosenApps:function(){return function(a,r,p){function g(){var t=n.isOpen(c)&&E.generalInfo.isFirstSave()||"true"===T.runAppInstaller,r=function(){var e=T[l];return e?e.split(","):[]}(),p=e.uniq(e.reject(r,f));return t&&0!==p.length?(a(o(p.length)),function(e){a(i.updateOrOpenPanel(d,{appDefIds:e,progressBarPace:T.progressBarPace||5}))}(p),function(e){var t=Promise.resolve();return e.forEach(function(e){t=t.then(function(){return function(e){return E.tpa.appMarket.getDataAsync(e).then(function(t){var n=t.name,r={};if(!t.hasSection&&"Wix Chat"!==t.name){var i=n.replace("Wix ",""),o=S.pages.add(i);r.pageId=o.id}return a(s(n)),new Promise(function(t){S.waitForChangesApplied(function(){m.tpa.addApplication(e,r).then(t).catch(t)})})}).then(function(){a(u())})}(e)})}),t}(p).catch(function(){}).then(function(){return new Promise(function(e){var t=new Date,n=function(){var n=Math.max(0,3e3-(new Date-t));setTimeout(function(){try{a(i.closeAllPanels())}finally{e()}},n)};m.saveManager.saveInBackground(n,n)})})):Promise.resolve()}function f(e){return E.tpa.app.isInstalled(e)}var m=p.editorAPI,E=p.dsRead,S=p.dsWrite,T=t.url.parseUrl(window.location.href).query;return g()}}}}),define("stateManagement/appInstaller/appInstaller",["stateManagement/appInstaller/appInstallerReducer","stateManagement/appInstaller/appInstallerSelectors","stateManagement/appInstaller/appInstallerActions"],function(e,t,n){"use strict";return{reducer:e,selectors:t,actions:n}}),define("stateManagement/notifications/notificationsActions",["lodash","stateManagement/notifications/notificationsActionTypes"],function(e,t){"use strict";return{closeNotification:function(e){return{type:t.CLOSE_NOTIFICATION,id:e}},closeAllNotifications:function(){return{type:t.CLOSE_ALL_NOTIFICATIONS}},addNotification:function(n){return function(a){a({type:t.ADD_NOTIFICATION,notification:e.defaults({id:e.uniqueId("notification-")},n)})}}}}),define("stateManagement/notifications/notificationsSelectors",[],function(){"use strict";return{selectNotifications:function(e){return e.notifications}}}),define("stateManagement/notifications/notifications",["stateManagement/notifications/notificationsActions","stateManagement/notifications/notificationsSelectors"],function(e,t){"use strict";return{actions:e,selectors:t}}),define("stateManagement/rulers/rulersSelectors",["lodash","reduxLibs","stateManagement/mobile/mobile","stateManagement/siteSegments/siteSegments"],function(e,t,n,a){"use strict";var r=n.selectors,i=a.selectors,o=t.reselect.createSelector,s=function(e){return e.rulers.guidesState},u=o(s,r.isMobileEditor,function(e,t){return t?e.mobile:e.desktop}),c=function(e){return e.rulers.selectedGuide};return{getSelectedGuideId:c,getHistoryState:function(e){return e.rulers.history.stack[e.rulers.history.currentIndex]},getGuidesState:s,getCurrentViewModeGuides:u,getHorizontalGuides:o(u,function(e){return e.horizontalGuides}),getVerticalGuides:o(u,function(e){return e.verticalGuides}),getVerticalGuideRealPosition:function(e,t){return t+Math.round(i.getPagesContainerAbsLayout(e).x)},getSelectedGuideData:o(c,s,function(t,n){return function(t,n){if(!n)return null;var a=void 0;e.some(t.mobile.verticalGuides,["guideId",n])?a="mobile.verticalGuides":e.some(t.mobile.horizontalGuides,["guideId",n])?a="mobile.horizontalGuides":e.some(t.desktop.verticalGuides,["guideId",n])?a="desktop.verticalGuides":e.some(t.desktop.horizontalGuides,["guideId",n])&&(a="desktop.horizontalGuides");return{guideId:n,guidePosition:e.find(e.get(t,a),{guideId:n}).guidePosition,guidePath:a}}(n,t)}),isRulersEnabled:function(e){return e.viewTools.rulersEnabled},canUndo:function(e){return e.rulers.history.currentIndex>0},canRedo:function(e){return e.rulers.history.stack.length>e.rulers.history.currentIndex+1}}}),define("stateManagement/rulers/rulersActions",["lodash","constants","coreBi","util","stateManagement/leftBar/leftBar","stateManagement/bi/bi","stateManagement/rulers/rulersSelectors","stateManagement/rulers/rulersActionTypes","stateManagement/userPreferences/userPreferences"],function(e,t,n,a,r,i,o,s,u){"use strict";var c=u.actions,l=r.selectors,d=l.getDeviceType,p=l.isMobileEditor,g=s.RESET_HISTORY,f=s.UNDO,m=s.REDO,E=s.UPDATE_HISTORY,S=s.UPDATE_STATE,T=function(){return{type:g}},_=function(e){return{type:S,state:e}},P=function(t,a){return function(r,o){var s=n.events.rulers[t],u={editor_view_mode:d(o())};e.merge(u,a),r(i.actions.event(s,u))}},M=function(n){return function(a,r){var i=n.guidesState;a(c.setSiteUserPreferences(t.USER_PREFS.VIEW_TOOLS.GUIDES_STATE,i)),a(_(n));var s=o.getHistoryState(r());e.isEqual(s,n.guidesState)||a({type:E})}},A=function(t,n,a){return e.defaults(_defineProperty({},t,n),a)},I=function(t,n){return function(r,i,s){var u=s.editorAPI,c=e.cloneDeep(o.getGuidesState(i())),l=function(t){return{guideId:"GUIDE_"+e.uniqueId(Date.now().toString(36)),guidePosition:t}}(n);e.get(c,t).push(l);var d=A("guidesState",c,i().rulers);return u.selection.deselectComponents(),d.selectedGuide=l.guideId,a.keyboardShortcuts.setContext(a.keyboardShortcuts.CONTEXTS.RULERS),r(M(d)),l.guideId}},v=function(e,t){return(t?"mobile.":"desktop.")+e+"Guides"},O=function(t,n,a){var r=e.cloneDeep(t),i=e.reject(e.get(r,n),{guideId:a});return e.set(r,n,i),r},R=function(t,n,a){return function(r,i){var s=i(),u=v(t,p(s)),c=O(o.getGuidesState(s),u,n),l={guidePosition:a,guideId:n};e.get(c,u).push(l);var d=A("guidesState",c,s.rulers);r(M(d))}},h=function(t){return function(n,r){var i=r(),s=function(t,n){if(!n)return null;var a=void 0;e.some(t.mobile.verticalGuides,["guideId",n])?a="mobile.verticalGuides":e.some(t.mobile.horizontalGuides,["guideId",n])?a="mobile.horizontalGuides":e.some(t.desktop.verticalGuides,["guideId",n])?a="desktop.verticalGuides":e.some(t.desktop.horizontalGuides,["guideId",n])&&(a="desktop.horizontalGuides");return{guideId:n,guidePosition:e.find(e.get(t,a),{guideId:n}).guidePosition,guidePath:a}}(e.cloneDeep(o.getGuidesState(i)),t),u=O(o.getGuidesState(i),s.guidePath,s.guideId),c=A("guidesState",u,i.rulers);c.selectedGuide=null,a.keyboardShortcuts.setContext(i.previewMode?a.keyboardShortcuts.CONTEXTS.PREVIEW:a.keyboardShortcuts.CONTEXTS.EDITOR),n(M(c))}},y=function(){return function(e,t){e(h(t().rulers.selectedGuide))}},N=function(t,n){return function(a,r){a(_(e.defaults(_defineProperty({},t,n),r().rulers)))}},L=function(e){return function(n){n(c.setSiteUserPreferences(t.USER_PREFS.VIEW_TOOLS.GUIDES_STATE,e)),n(N("guidesState",e))}},D=function(e,t){return function(n,r,i){var o=i.editorAPI;t&&n(P("GUIDE_TOOLTIP_IN_EDIT_MODE",{origin:t})),e&&(o.selection.deselectComponents(),a.keyboardShortcuts.setContext(a.keyboardShortcuts.CONTEXTS.RULERS)),n(N("selectedGuide",e))}},C=function(){return function(e,t){e(D(null)),a.keyboardShortcuts.setContext(t().previewMode?a.keyboardShortcuts.CONTEXTS.PREVIEW:a.keyboardShortcuts.CONTEXTS.EDITOR)}};return{undo:function(){return function(e,t){if(o.canUndo(t())){e(C()),e({type:f});var n=o.getHistoryState(t());e(L(n))}}},redo:function(){return function(e,t){if(o.canRedo(t())){e(C()),e({type:m});var n=o.getHistoryState(t());e(L(n))}}},changeGuidePosition:R,changeGuidePositionByPixels:function(t,n){return function(a,r){var i=o.getSelectedGuideData(r());e.includes(i.guidePath,t)&&a(R(t,i.guideId,i.guidePosition+n))}},updateEditorRulersState:N,sendBIEvent:P,selectGuide:D,deselectGuide:C,setVerticalGuide:function(e){return function(t,n){var a=v("vertical",p(n()));return t(I(a,e))}},setHorizontalGuide:function(e){return function(t,n){var a=v("horizontal",p(n()));return t(I(a,e))}},updateStateOnDragEnd:function(t){return function(n,a){var r=e.clone(a().rulers);r.isDragging=!1,t||(r.isHovered=!1),n(_(r))}},toggleRulers:function(){return function(e,n,a){var r=a.editorAPI,i=!o.isRulersEnabled(n());r.updateEditorViewTools("rulersEnabled",i);var s=e(c.setSiteUserPreferences(t.USER_PREFS.VIEW_TOOLS.RULERS_ENABLED,i));return e(T()),s}},resetHistory:T,updateRulersAndHistory:M,setGuide:I,removeGuideViaDelBtn:function(){return function(e){e(P("GUIDE_DELETED",{origin:"delete_button"})),e(y())}},removeGuideById:h,removeSelectedGuide:y,updateGuides:L}}),define("stateManagement/rulers/rulers",["stateManagement/rulers/rulersReducer","stateManagement/rulers/rulersSelectors","stateManagement/rulers/rulersActions"],function(e,t,n){"use strict";return{reducer:e,selectors:t,actions:n}}),define("stateManagement/topBarTooltip/topBarTooltipActions",["lodash","stateManagement/topBar/topBar","stateManagement/userPreferences/userPreferences"],function(e,t,n){"use strict";var a=t.actions;return{showBackToAdiTooltip:function(){return function(t){t(a.setAdiTooltipVisibility(!0)),e.delay(function(){t(a.setAdiTooltipVisibility(!1)),t(n.actions.setSiteUserPreferences("hasSeenBackToAdiTooltip",!0))},1e4)}},closeBackToAdiTooltip:function(){return function(e){e(a.setAdiTooltipVisibility(!1)),e(n.actions.setSiteUserPreferences("hasSeenBackToAdiTooltip",!0))}}}}),define("stateManagement/topBarTooltip/topBarTooltip",["stateManagement/topBarTooltip/topBarTooltipActions"],function(e){"use strict";return{actions:e}}),define("stateManagement/window/windowActions",["stateManagement/applicationStudio/applicationStudio"],function(e){"use strict";return{onFocus:function(){return function(t){t(e.actions.updateAppManifests())}}}}),define("stateManagement/window/window",["stateManagement/window/windowActions"],function(e){"use strict";return{actions:e}}),define("stateManagement",["lodash","stateManagement/applicationStudio/applicationStudio","stateManagement/addPanel/addPanel","stateManagement/componentsStore/componentsStore","stateManagement/gridLines/gridLines","stateManagement/store/createEditorStore","stateManagement/store/throttledStore","stateManagement/legacy/legacy","stateManagement/panels/panels","stateManagement/helpPanel/helpPanel","stateManagement/leftBar/leftBar","stateManagement/leftTree/leftTree","stateManagement/sectionedPanel/sectionedPanel","stateManagement/topBar/topBar","stateManagement/mobile/mobile","stateManagement/siteSegments/siteSegments","stateManagement/dynamicPages/dynamicPages","stateManagement/selection/selection","stateManagement/userProfile/userProfile","stateManagement/domain/domain","stateManagement/highlights/highlights","stateManagement/text/text","stateManagement/tpa/tpa","stateManagement/uploadedFonts/uploadedFonts","stateManagement/componentMetaData/componentMetaData","stateManagement/applyModeFromClipboard/applyModeFromClipboard","stateManagement/bi/bi","stateManagement/pinMode/pinMode","stateManagement/easterEggs/easterEggs","stateManagement/contextMenu/contextMenu","stateManagement/components/components","stateManagement/mouseActions/mouseActions","stateManagement/store/combineReducers","stateManagement/userPreferences/userPreferences","stateManagement/siteDisplayName/siteDisplayName","stateManagement/multilingual/multilingual","stateManagement/domMeasurements/domMeasurements","stateManagement/pages/pages","stateManagement/leavePopup/leavePopup","stateManagement/businessManager/businessManager","stateManagement/appInstaller/appInstaller","stateManagement/platform/platform","stateManagement/notifications/notifications","stateManagement/rulers/rulers","stateManagement/leftBar/leftBarData","stateManagement/topBarTooltip/topBarTooltip","stateManagement/window/window"],function(e,t,n,a,r,i,o,s,u,c,l,d,p,g,f,m,E,S,T,_,P,M,A,I,v,O,R,h,y,N,L,D,C,b,U,B,w,G,F,H,k,x,W,V,z,Y,K){"use strict";var q={addPanel:n,appInstaller:k,applicationStudio:t,applyModeFromClipboard:O,bi:R,businessManager:H,componentMetaData:v,components:L,componentsStore:a,contextMenu:N,domain:_,domMeasurements:w,dynamicPages:E,easterEggs:y,gridLines:r,highlights:P,leftBar:l,leftTree:d,sectionedPanel:p,legacy:s,mobile:f,mouseActions:D,multilingual:B,notifications:W,pages:G,leavePopup:F,panels:u,helpPanel:c,topBarTooltip:Y,topBar:g,siteSegments:m,selection:S,userProfile:T,text:M,tpa:A,uploadedFonts:I,pinMode:h,userPreferences:b,siteDisplayName:U,platform:x,rulers:V,window:K};return e.defaults({editorPlugins:q,createEditorStore:i,throttledStore:o,leftBarData:z,combineReducers:C},q)});
//# sourceMappingURL=stateManagement.min.js.map