define("superAppMenuInfra/panels/firstTimeTour/slidesProvider",["lodash","stateManagement"],function(e,t){"use strict";function s(s,i,r,a){if(!e.includes(e.values(n),r))throw new Error("illegal flowName "+r);var p=i.id+"/first_time_tour_last_seen_slide",l=function(e,t){switch(t){case n.PROMOTIONAL:return e.firstTimeTour.promotionalFlow;case n.MANUALLY_INSTALLED:return e.firstTimeTour.manuallyInstalledFlow;case n.TEMPLATE:return e.firstTimeTour.templateFlow;default:return[]}}(i,r),o=void 0;if(void 0!==a)o=l[l.indexOf(a)+1];else{var u=t.editorPlugins.userPreferences.selectors.getSiteUserPreferences(p)(s.store.getState());o=function(e,t){return t?-1===t.index?void 0:e[t.index]:e[0]}(l,u&&u.flow!==r?e.assign({},u,{index:0}):u)}return s.store.dispatch(t.editorPlugins.userPreferences.actions.setSiteUserPreferences(p,{flow:r,index:l.indexOf(o)})),o}var n={PROMOTIONAL:"promotional",MANUALLY_INSTALLED:"manuallyInstalled",TEMPLATE:"template"};return{FLOW_NAMES:n,getNextSlide:s}}),define("superAppMenuInfra/utils/experiments",["experiment"],function(e){"use strict";return{isPromotionalExperimentOn:function(t){return{wixBookings:!0,blog:!0,newBlog:!0,wixStore:e.isOpen("PromotionalWixStore")}[t]},isLearnMoreExperimentOn:function(){return e.isOpen("SuperAppLearnMorePanelView")},isWaitForClickExperimentOn:function(t){return{newBlog:!e.isOpen("changeNewBlogButtonBehaviour"),blog:!0,wixStore:!0,shoutout:e.isOpen("WaitForClickShoutOut")}[t]}}}),define("superAppMenuInfra/panels/firstTimeTour/superAppFirstTimeTourPanel.rt",["react","lodash","baseUI","baseUILib"],function(e,t,s,n){"use strict";return function(){return e.createElement("div",{className:"super-app-first-time-tour-panel"},e.createElement(n.CustomScroll,{heightRelativeToParent:"100%"},void 0!==this.state.currentSlide?e.createElement(this.state.currentSlide,{key:"currentSlide",onClose:this.props.onClose,superApp:this.props.superApp,nextSlide:this.nextSlide,isFirstSlide:this.state.isFirstSlide,appWasManuallyInstalled:this.props.appWasManuallyInstalled}):null))}}),define("superAppMenuInfra/panels/firstTimeTour/superAppFirstTimeTourPanel",["lodash","create-react-class","prop-types","core","stateManagement","superAppMenuInfra/panels/firstTimeTour/slidesProvider","superAppMenuInfra/utils/experiments","superAppMenuInfra/panels/firstTimeTour/superAppFirstTimeTourPanel.rt"],function(e,t,s,n,i,r,a,p){"use strict";return t({displayName:"superAppFirstTimeTourPanel",propTypes:{superApp:s.object.isRequired,onClose:s.func.isRequired,onTourEnd:s.func.isRequired,appWasManuallyInstalled:s.bool,flowType:s.string},mixins:[n.mixins.editorAPIMixin],_getFlowName:function(){return!this.props.superApp.isAppInstalled(this.getEditorAPI())&&a.isPromotionalExperimentOn(this.props.superApp.id)?r.FLOW_NAMES.PROMOTIONAL:this._getUsualFlowName()},_getUsualFlowName:function(){var e=this._getUserFlowFromUserPreferences();return e&&e!==r.FLOW_NAMES.PROMOTIONAL?e:this.props.appWasManuallyInstalled||this.getEditorAPI().wixStores.isSiteInWixStoreTestDrive()?r.FLOW_NAMES.MANUALLY_INSTALLED:r.FLOW_NAMES.TEMPLATE},_getUserFlowFromUserPreferences:function(){var e=this.props.superApp.id+"/first_time_tour_last_seen_slide",t=i.editorPlugins.userPreferences.selectors.getSiteUserPreferences(e)(this.getEditorAPI().store.getState());return t&&t.flow},getInitialState:function(){return{currentSlide:r.getNextSlide(this.getEditorAPI(),this.props.superApp,this._getFlowName()),isFirstSlide:!0}},componentDidMount:function(){void 0===this.state.currentSlide&&this.props.onTourEnd()},nextSlide:function(){var e=r.getNextSlide(this.getEditorAPI(),this.props.superApp,this._getFlowName(),this.state.currentSlide);this.setState({currentSlide:e,isFirstSlide:!1}),void 0===e&&this.props.onTourEnd()},render:p})}),define("superAppMenuInfra/bi/superAppEvents",["core"],function(e){"use strict";var t={appButton:{MAIN_BUTTON_HOVER:{evid:"x",src:"x",endpoint:"editor",fields:{app_name:"string",app_id:"string",button_state:"string"}},MAIN_BUTTON_CLICK:{evid:"x",src:"x",endpoint:"editor",fields:{app_name:"string",app_id:"string",button_state:"string",is_first:"boolean"}},MENU_OPENED:{evid:"x",src:"x",endpoint:"editor",fields:{app_name:"string",app_id:"string",button_state:"string",app_state:"string",origin:"string",is_first:"boolean"}}},firstTimeTour:{template:{STEP_1_CONTINUE_CLICK:{evid:198,src:38,endpoint:"editor",fields:{app_id:"string",app_name:"string"}},STEP_1_CLOSE_CLICK:{evid:199,src:38,endpoint:"editor",fields:{app_id:"string",app_name:"string"}},STEP_2_WELCOME_CONTINUE_CLICK:{evid:200,src:38,endpoint:"editor",fields:{app_id:"string",app_name:"string"}},STEP_2_WELCOME_CLOSE_CLICK:{evid:201,src:38,endpoint:"editor",fields:{app_id:"string",app_name:"string"}},STEP_1_WELCOME_CONTINUE_CLICK:{evid:202,src:38,endpoint:"editor",fields:{app_id:"string",app_name:"string"}},STEP_1_WELCOME_CLOSE_CLICK:{evid:204,src:38,endpoint:"editor",fields:{app_id:"string",app_name:"string"}}},manuallyInstalled:{STEP_1_WELCOME_CONTINUE_CLICK:{evid:202,src:38,endpoint:"editor",fields:{app_id:"string",app_name:"string"}},STEP_1_WELCOME_CLOSE_CLICK:{evid:204,src:38,endpoint:"editor",fields:{app_id:"string",app_name:"string"}}},promotional:{INSTALL_AGREE_CLICK:{evid:193,src:38,endpoint:"editor",fields:{app_id:"string",app_name:"string"}},INSTALL_CLOSE_CLICK:{evid:194,src:38,endpoint:"editor",fields:{app_id:"string",app_name:"string"}},INSTALL_FOUND_OUT_MORE_CLICK:{evid:195,src:38,endpoint:"editor",fields:{app_id:"string",app_name:"string"}},STEP_2_WELCOME_CONTINUE_CLICK:{evid:196,src:38,endpoint:"editor",fields:{app_id:"string",app_name:"string"}},STEP_2_WELCOME_CLOSE_CLICK:{evid:197,src:38,endpoint:"editor",fields:{app_id:"string",app_name:"string"}}}},PANEL_SELECT:{evid:204,src:38,endpoint:"editor",fields:{panel:"string",app_id:"string",app_name:"string"}},MANAGE_PANEL_BUTTON_CLICK:{evid:205,src:38,endpoint:"editor",fields:{button_name:"string",app_id:"string",app_name:"string"}},UPGRADE_TOOLTIP_OPENED:{evid:206,src:38,endpoint:"editor",fields:{origin:"string",app_id:"string",app_name:"string"}},UPGRADE_CLICK:{evid:207,src:38,endpoint:"editor",fields:{origin:"string",app_id:"string",app_name:"string"}},LEARN_MORE_PANEL_CATEGORY_CLICK:{evid:209,src:38,endpoint:"editor",fields:{category:"string",app_id:"string",app_name:"string"}},HELP_ICON_CLICK:{evid:210,src:38,endpoint:"editor",fields:{panel:"string",app_id:"string",app_name:"string"}}};return{mixins:[e.mixins.editorAPIMixin],superAppEvents:t,registerEvents:function(){this.getEditorAPI().documentServices.bi.register("components","event",t)}}}),define("superAppMenuInfra/bi/superAppBi",["superAppMenuInfra/bi/superAppEvents"],function(e){"use strict";return{events:e.superAppEvents,registerEvents:e.registerEvents}}),define("superAppMenuInfra/panels/superAppTooltipUpgrade.rt",["react","lodash","util","baseUI","symbols"],function(e,t,s,n,i){"use strict";return function(){return function(){var r=this.getEditorAPI().wixStores.isSiteInWixStoreTestDrive();return e.createElement("div",{className:t({superAppTooltipUpgrade:!0,"test-drive":r}).transform(function(e,t,s){t&&e.push(s)},[]).join(" ")},e.createElement("div",{className:"wix-store-upgrade-left"},this.props.title?e.createElement("h3",{className:"upgrade-title",key:"upgradeTitle"},s.translate(this.props.title)):null,this.props.text?e.createElement("p",{className:"upgrade-content",key:"upgradeContent"},s.translate(this.props.text)):null,e.createElement(n.button,{className:t({"upgrade-button":!0,"migration-button":r}).transform(function(e,t,s){t&&e.push(s)},[]).join(" "),label:this.props.label,onClick:function(e){this.props.upgrade()}.bind(this,r)})),e.createElement(i.symbol,{name:this.props.image}))}.apply(this,[])}}),define("superAppMenuInfra/panels/superAppTooltipUpgrade",["create-react-class","prop-types","lodash","core","superAppMenuInfra/panels/superAppTooltipUpgrade.rt"],function(e,t,s,n,i){"use strict";return e({displayName:"superAppTooltipUpgrade",mixins:[n.mixins.editorAPIMixin],propTypes:{title:t.string,text:t.string,label:t.string,image:t.string,upgrade:t.func},render:i})}),define("superAppMenuInfra/panels/menuPanels/superAppManagePanel.rt",["react","lodash","baseUI"],function(e,t,s){"use strict";return function(){return e.createElement("div",{className:"super-app-manage-panel"},e.createElement(this.props.superApp.panel.manage.template,{}))}}),define("superAppMenuInfra/panels/menuPanels/superAppManagePanel",["lodash","create-react-class","prop-types","superAppMenuInfra/panels/menuPanels/superAppManagePanel.rt"],function(e,t,s,n){"use strict";return t({displayName:"superAppManagePanel",propTypes:{superApp:s.object.isRequired},render:n})}),define("superAppMenuInfra/panels/menuPanels/superAppPagesPanel.rt",["react","lodash"],function(e,t){"use strict";return function(){return e.createElement("div",{className:"site-app-pages-panel"},e.createElement(this.props.superApp.panel.pages.template,{}))}}),define("superAppMenuInfra/panels/menuPanels/superAppPagesPanel",["lodash","create-react-class","superAppMenuInfra/panels/menuPanels/superAppPagesPanel.rt"],function(e,t,s){"use strict";return t({displayName:"superAppPagesPanel",render:s})}),define("superAppMenuInfra/panels/menuPanels/superAppAddElementsPanel.rt",["react","lodash","util","baseUI","core","symbols"],function(e,t,s,n,i,r){"use strict";return function(){return function(){var n=this.props.superApp.panel.addElements,i=this.isMobile(),a=this.getEditorAPI().addPanelInfra.categoryView;return e.createElement("div",{className:"super-app-add-elements-panel category-view-wrapper"},i?null:e.createElement(a,t.assign({},{key:"categoryView",teaser:this.getTeaser(),origin:"vertical_button",items:this.getSections()},this.getCategoryViewProps())),i?e.createElement("div",{className:"super-app-mobile-view",key:"mobileView"},e.createElement(r.symbol,{name:this.props.superApp.panel.addElements.mobileImage}),e.createElement("p",{className:"bigger-text"},s.translate(n.disabledInMobileMessageTitle)),e.createElement("p",{},"\n            ",s.translate(n.disabledInMobileMessageDescription)," ",e.createElement("a",{onClick:this.goToDesktop},s.translate(n.disabledInMobileMessageDescriptionLink)))):null)}.apply(this,[])}}),define("superAppMenuInfra/panels/menuPanels/superAppAddElementsPanel",["lodash","create-react-class","prop-types","core","mixins","superAppMenuInfra/panels/menuPanels/superAppAddElementsPanel.rt"],function(e,t,s,n,i,r){"use strict";return t({displayName:"superAppAddElementsPanel",mixins:[n.mixins.editorAPIMixin,i.dragToStageMixin],getInitialState:function(){return{firstTimeInfoBoxHeight:0}},propTypes:{superApp:s.object.isRequired},isMobile:function(){return this.getEditorAPI().documentServices.viewMode.get()===this.getEditorAPI().documentServices.viewMode.VIEW_MODES.MOBILE},needToNotifyInnerNavigationToCalculateSections:function(e){this.setState({firstTimeInfoBoxHeight:e})},getSections:function(){var t=this.getEditorAPI(),s=this.props.superApp.panel.addElements.sections;return e.isFunction(s)&&(s=s(t)),e.isUndefined(s)&&(s=t.addPanel.getCategory(this.props.superApp.panel.addElements.categoryId).items),e.isEqual(s,this.lastComputedSectionItems)||(this.lastComputedSectionItems=e.cloneDeep(s)),this.lastComputedSectionItems},getTeaser:function(){var t=this.props.superApp.panel.addElements.teaser;return e.isFunction(t)&&(t=t(this.getEditorAPI())),t},getCategoryViewProps:function(){return e.assign({},this.props,{changeStateOnInnerNavigationOpen:this.changeStateOnInnerNavigationOpen,firstTimeInfoBoxHeight:this.state.firstTimeInfoBoxHeight,onItemDrag:this.startItemDrag})},changeStateOnInnerNavigationOpen:function(e){this.props.onChangeStateOnInnerNavigationOpen(e)},goToDesktop:function(){this.getEditorAPI().setDesktopEditor()},render:r})}),define("superAppMenuInfra/panels/menuPanels/superAppLearnMorePanel.rt",["react","lodash","util","panels","symbols","baseUI","baseUILib"],function(e,t,s,n,i,r,a){"use strict";return function(){function n(n,r){return e.createElement.apply(this,["div",{className:"section-container"},e.createElement("div",{className:"section-top"},e.createElement("h4",{className:"title"},s.translate(n.title)),e.createElement("a",{className:"see-all-link",href:n.link},"See All")),t.map(n.data,function(t,s,n,r){return e.createElement("div",{className:"content-wrapper",onClick:function(e,t,s,n){this.openPanel(s.link)}.bind(this,t,s,n,r)},e.createElement("img",{src:n.image,alt:!0}),e.createElement("div",{className:"description"},n.description),e.createElement("span",{className:"arrow-wrapper"},e.createElement(i.symbol,{name:"actionArrowRight",className:"actionArrowRight"})))}.bind(this,n,r))])}return e.createElement("div",{className:"site-app-learn-more"},e.createElement(a.CustomScroll,{heightRelativeToParent:"100%"},this.isLearnMoreExperimentOpen()?null:e.createElement("div",{className:"first-view",key:"firstView"},this.props.superApp.panel.learnMore.data.viewA.helpCenterPopUp.isHidden?null:e.createElement("div",{className:"image-container",key:"helpCenterPopUp",onClick:function(){this.openPanel("helpCenterPopUp","viewA"),this.reportBiEvent("HelpCenter")}.bind(this)},e.createElement("div",{className:"active-layer"}),e.createElement("img",{src:this.props.superApp.panel.learnMore.data.viewA.helpCenterPopUp.image,alt:"WixStores Help Center"}),e.createElement("div",{className:"link-container"},e.createElement("p",{},s.translate(this.props.superApp.panel.learnMore.section1HeaderViewA)),e.createElement(i.symbol,{name:"arrowWithStates"}))),this.props.superApp.panel.learnMore.data.viewA.supportForumsPopUp.isHidden?null:e.createElement("a",{className:"image-container",key:"supportForumsPopUp",onClick:function(){this.reportBiEvent("Forums")}.bind(this),target:"_blank",href:this.props.superApp.panel.learnMore.data.viewA.supportForumsPopUp.link},e.createElement("div",{className:"active-layer"}),e.createElement("img",{src:this.props.superApp.panel.learnMore.data.viewA.supportForumsPopUp.image,alt:"WixStores Support Forum"}),e.createElement("div",{className:"link-container"},e.createElement("p",{},s.translate(this.props.superApp.panel.learnMore.section2HeaderViewA)),e.createElement(i.symbol,{name:"arrowWithStates"}))),this.props.superApp.panel.learnMore.data.viewA.wixTipsBlog.isHidden?null:e.createElement("a",{className:"image-container",key:"wixTipsBlog",onClick:function(){this.reportBiEvent("FromTheWixBlog")}.bind(this),target:"_blank",href:this.props.superApp.panel.learnMore.data.viewA.wixTipsBlog.link},e.createElement("div",{className:"active-layer"}),e.createElement("img",{src:this.props.superApp.panel.learnMore.data.viewA.wixTipsBlog.image,alt:"Tips from the Wix Blog"}),e.createElement("div",{className:"link-container"},e.createElement("p",{},s.translate(this.props.superApp.panel.learnMore.section3HeaderViewA)),e.createElement(i.symbol,{name:"arrowWithStates"})))),this.isLearnMoreExperimentOpen()?e.createElement.apply(this,["div",{className:"second-view",key:"secondView"},t.map(this.getLearnMoreDataForViewB(),n.bind(this))]):null))}}),define("superAppMenuInfra/panels/menuPanels/superAppLearnMorePanel",["create-react-class","core","superAppMenuInfra/bi/superAppBi","superAppMenuInfra/utils/experiments","constants","superAppMenuInfra/panels/menuPanels/superAppLearnMorePanel.rt"],function(e,t,s,n,i,r){"use strict";return e({displayName:"superAppLearnMorePanel",mixins:[t.mixins.editorAPIMixin],getUrl:function(e,t){return"viewA"===t?this.props.superApp.panel.learnMore.data[t][e].link:e},openPanel:function(e,t){var s=this.getEditorAPI(),n={panel_name:e,origin:i.BI.HELP.ORIGIN.LEFTBAR,component:this.props.superApp.appName,learn_more:!0};s.panelManager.openHelpCenter(this.getUrl(e,t),null,n)},reportBiEvent:function(e){var t=this.props.superApp,n={category:e,app_id:t.appDefId,app_name:t.appName};this.getEditorAPI().bi.event(s.events.LEARN_MORE_PANEL_CATEGORY_CLICK,n)},getLearnMoreDataForViewB:function(){return this.props.superApp.panel.learnMore.data.viewB},isLearnMoreExperimentOpen:function(){return n.isLearnMoreExperimentOn()},render:r})}),define("superAppMenuInfra/panels/superAppMenuPanel.rt",["react","lodash","util","baseUI","symbols","constants"],function(e,t,s,n,i,r){"use strict";return function(){function a(){var a=this.getSelectedTab();return e.createElement("div",{className:"super-app-menu-panel left-panel-frame-content "+(a.isDynamicHeight?"dynamic-height":""),onWheel:this.blockOuterScroll},e.createElement("div",{className:"tabs"},e.createElement.apply(this,["ul",{},t.map(this.getTabs(),function(t,n,i){return e.createElement("li",{onClick:function(e,t,s){this.selectTab(t)}.bind(this,t,n,i),className:"tab",style:{height:"100px"}},e.createElement("span",{className:"tabNameWrapper "+(t===n?"isSelected":"")},e.createElement("span",{className:"tabName"},s.translate(n.title))))}.bind(this,a))]),this.showPremiumLink()?e.createElement("div",{key:"premium"},e.createElement("div",{className:"separator"}),e.createElement("div",{className:"premium"},e.createElement(n.tooltip,{value:this.getTooltipValue(),alignment:r.UI.TOOLTIP.ALIGNMENT.BOTTOM,styleType:r.UI.TOOLTIP.STYLE_TYPE.NORMAL,interactive:!0,width:"432px",id:"superAppUpgradePopoverId"},e.createElement("p",{},s.translate(this.props.superApp.upgradeLinkText))))):null),e.createElement("div",{className:t({content:!0,"inner-navigation-open":this.state.isInnerNavigationOpened}).transform(function(e,t,s){t&&e.push(s)},[]).join(" ")},e.createElement("div",{className:"header"},e.createElement("label",{className:"title"},s.translate(a.title)),e.createElement("div",{className:"actions"},a.helpId?e.createElement("div",{key:"helpButton",className:"button help",onClick:this.onHelpButtonClick},"\n                   ?\n                "):null,e.createElement("div",{className:"button close",onClick:this.props.onClose},e.createElement(i.symbol,{name:"headerCloseButton"})))),e.createElement("div",{className:"selected-content-wrapper "+(a.isDynamicHeight?"dynamic-height":"")},e.createElement(a.content,{superApp:this.props.superApp,onChangeStateOnInnerNavigationOpen:this.onChangeStateOnInnerNavigationOpen}))))}return a.apply(this,[])}}),define("superAppMenuInfra/panels/superAppMenuPanel",["lodash","react","create-react-class","prop-types","core","baseUI","util","superAppMenuInfra/bi/superAppBi","addPanelDataConsts","superAppMenuInfra/panels/superAppTooltipUpgrade","superAppMenuInfra/panels/menuPanels/superAppManagePanel","superAppMenuInfra/panels/menuPanels/superAppPagesPanel","superAppMenuInfra/panels/menuPanels/superAppAddElementsPanel","superAppMenuInfra/panels/menuPanels/superAppLearnMorePanel","coreBi","constants","superAppMenuInfra/panels/superAppMenuPanel.rt"],function(e,t,s,n,i,r,a,p,l,o,u,d,c,m,g,h,f){"use strict";return s({displayName:"SuperAppMenuPanel",mixins:[i.mixins.editorAPIMixin,a.blockOuterScrollMixin],propTypes:{superApp:n.object.isRequired,onClose:n.func.isRequired,selectedTabName:n.string},getInitialState:function(){var t=this.getTabs();return{selectedTab:e.find(t,{name:this.props.selectedTabName})||t[0]}},getTabs:function(){var t=this.props.superApp,s=[{name:"Manage",isDynamicHeight:!1,title:t.panel.manage.title,helpId:t.panel.manage.helpId,isHidden:t.panel.manage.isHidden,content:u},{name:"Pages",isDynamicHeight:!0,title:t.panel.pages.title,helpId:t.panel.pages.helpId,isHidden:t.panel.pages.isHidden,content:d},{name:"Add",isDynamicHeight:!0,title:t.panel.addElements.title,helpId:t.panel.addElements.helpId,isHidden:t.panel.addElements.isHidden,content:c},{name:"LearnMore",isDynamicHeight:!1,title:t.panel.learnMore.title,isHidden:t.panel.learnMore.isHidden,content:m}];return s=e.reject(s,{isHidden:!0}),t.extraTabs&&t.extraTabs.forEach(function(e){s.splice(e.index,0,{name:"Manage",isDynamicHeight:e.isDynamicHeight,title:e.title,helpId:e.helpId,content:e.template})}),this.tabs=this.tabs||s,this.tabs},showPremiumLink:function(){var e=this.props.superApp;return e.hasPremiumPlan&&(this.getEditorAPI().wixStores.isSiteInWixStoreTestDrive()||!e.isPremium(this.getEditorAPI()))},selectTab:function(e){var t=this.props.superApp,s={panel:e.name,app_id:t.appDefId,app_name:t.appName};this.getEditorAPI().bi.event(p.events.PANEL_SELECT,s),this.setState({selectedTab:e,isInnerNavigationOpened:!1})},getSelectedTab:function(){return this.state.selectedTab},openAppPremiumPackagePicker:function(){var e=this.props.superApp,t={origin:"TooltipUpgradeLink",app_id:e.appDefId,app_name:e.appName};this.getEditorAPI().bi.event(p.events.UPGRADE_CLICK,t),e.openAppPremiumPackagePicker(this.getEditorAPI()),r.tooltipManager.hide("superAppUpgradePopoverId",!0)},openMigrationPopup:function(){this.props.superApp.openSwitchSitesPopup(this.getEditorAPI()),this.getEditorAPI().bi.event(g.events.wixstores.WIXSTORES_MIGRATION_UPGRADE_CLICKED,{origin:"upgrade_popup"}),r.tooltipManager.hide("superAppUpgradePopoverId",!0)},getStyle:function(){return{width:l.CATEGORY_VIEW.TOTAL_WIDTH}},onHelpButtonClick:function(){var e=this.getEditorAPI(),t=this.props.superApp,s={panel:this.state.selectedTab.name,app_id:t.appDefId,app_name:t.appName};e.bi.event(p.events.HELP_ICON_CLICK,s);var n={panel_name:this.state.selectedTab.name,origin:h.BI.HELP.ORIGIN.LEFTBAR,component:t.appName,learn_more:!1};e.panelManager.openHelpCenter(this.getSelectedTab().helpId,null,n)},getTooltipValue:function(){return this.getEditorAPI().wixStores.isSiteInWixStoreTestDrive()?t.createElement(o,{title:this.props.superApp.tooltip.migration.title,text:this.props.superApp.tooltip.migration.text,label:this.props.superApp.tooltip.migration.label,image:this.props.superApp.tooltip.migration.image,upgrade:this.openMigrationPopup}):t.createElement(o,{title:this.props.superApp.tooltip.upgrade.title,text:this.props.superApp.tooltip.upgrade.text,label:this.props.superApp.tooltip.upgrade.label,image:this.props.superApp.tooltip.upgrade.image,upgrade:this.openAppPremiumPackagePicker})},onChangeStateOnInnerNavigationOpen:function(e){this.setState({isInnerNavigationOpened:e})},render:f})}),define("superAppMenuInfra/panels/superAppPanel.rt",["react","lodash","panels","superAppMenuInfra/panels/firstTimeTour/superAppFirstTimeTourPanel","superAppMenuInfra/panels/superAppMenuPanel"],function(e,t,s,n,i){"use strict";return function(){return e.createElement(s.frames.leftPanelFrame,{ref:"superAppPanel",styleOverride:{overflow:"visible"},panelName:this.props.superApp.panel.name,panelClass:"super-app-panel "+this.props.panelClass,panelIndex:this.props.panelIndex},this.isInFirstTimeTour()||!this.props.superApp.isAppInstalled(this.getEditorAPI())?e.createElement(n,{key:"firstTimeTour",superApp:this.props.superApp,appWasManuallyInstalled:this.props.appWasManuallyInstalled,onTourEnd:this.finishFirstTimeTour,onClose:this.closePanel}):null,!this.isInFirstTimeTour()&&this.props.superApp.isAppInstalled(this.getEditorAPI())?e.createElement(i,{key:"AppMenu",superApp:this.props.superApp,selectedTabName:this.props.selectedTabName,onClose:this.closePanel}):null)}}),define("superAppMenuInfra/panels/superAppPanel",["lodash","create-react-class","prop-types","core","stateManagement","superAppMenuInfra/panels/superAppPanel.rt"],function(e,t,s,n,i,r){"use strict";return t({displayName:"SuperAppPanel",propTypes:{superApp:s.object.isRequired,appWasManuallyInstalled:s.bool,selectedTabName:s.string},mixins:[n.mixins.editorAPIMixin],getInitialState:function(){var e=this.props.superApp.id+"/in_first_time_tour",t=i.editorPlugins.userPreferences.selectors.getSiteUserPreferences(e)(this.getEditorAPI().store.getState());return{inFirstTimeTour:!t||"false"!==t}},isInFirstTimeTour:function(){return this.state.inFirstTimeTour},finishFirstTimeTour:function(){var e=this.props.superApp.id+"/in_first_time_tour";this.getEditorAPI().store.dispatch(i.editorPlugins.userPreferences.actions.setSiteUserPreferences(e,"false")),this.setState({inFirstTimeTour:!1})},closePanel:function(){this.getEditorAPI().panelManager.closePanelByName(this.props.superApp.panel.name)},render:r})}),define("superAppMenuInfra/utils/button",["lodash","stateManagement","superAppMenuInfra/utils/experiments"],function(e,t,s){"use strict";var n=function(e){return e+"/calledUnRegisterButton"},i={registerButton:function(e,i,r,a,p,l,o,u,d){e.registerInitUserPrefsCallback(function(){var c=void 0,m=t.editorPlugins.userPreferences.selectors.getSiteUserPreferences(n(a))(e.store.getState());if(r?(c=p,d=!0):s.isPromotionalExperimentOn(i)&&!m&&(c=l),void 0!==c){d=d||!1;var g=s.isWaitForClickExperimentOn(i)&&r;e.store.dispatch(t.editorPlugins.leftBar.actions.addSuperAppsButton(a,{},c,o,u,!1,g,d))}})},unRegisterButton:function(e,s){e.store.dispatch(t.editorPlugins.leftBar.actions.removeSuperAppsButton(s)),e.store.dispatch(t.editorPlugins.userPreferences.actions.setSiteUserPreferences(n(s),!0))},onAppInstalled:function(t,s,n,r,a,p){i.registerButton(t,s,!0,n,r,null,a,p,!0),void 0===e.find(t.panelManager.getOpenPanels(),{name:n})&&t.panelManager.openPanel(n,{appWasManuallyInstalled:!0},!0)}};return i}),define("superAppMenuInfra/panels/firstTimeTour/slides/getStartedSlide.rt",["react","lodash","util","baseUI","symbols"],function(e,t,s,n,i){"use strict";return function(){return e.createElement("div",{className:"get-started-slide"},e.createElement("div",{className:"button",onClick:this.onClose},e.createElement(i.symbol,{name:"headerCloseButton"})),e.createElement(i.symbol,{className:"main-image",name:this.props.mainImage}),e.createElement("h1",{className:"title"},s.translate(this.props.title)),e.createElement("p",{className:"sub-title"},s.translate(this.props.subTitle)),e.createElement("div",{className:"bullets-wrapper"},e.createElement.apply(this,["ul",{className:"tip-bullets"},t.map(this.props.pros,function(t,n){return e.createElement("li",{className:"bullet"},e.createElement("span",{className:"bullet-symbol"},e.createElement(i.symbol,{name:"cyclePickerV",className:"cyclePickerV"})),e.createElement("p",{className:"bullet-text"},s.translate(t)))}.bind(this))])),this.props.teaser?e.createElement("p",{key:"teaser",className:"teaser"},s.translate(this.props.teaser)):null,e.createElement(n.button,{label:this.props.nextButtonLabel,onClick:this.onNextButtonClick,className:"get-started-add-btn"}),this.props.footer?e.createElement("footer",{key:"footer"},e.createElement("p",{},s.translate(this.props.footer),"\n            ",e.createElement("a",{href:!0,onClick:function(e){this.openAppPremiumPackagePicker(e)}.bind(this)},s.translate(this.props.upgradeLink)))):null)}}),define("superAppMenuInfra/panels/firstTimeTour/slides/getStartedSlide",["create-react-class","prop-types","core","superAppMenuInfra/bi/superAppBi","superAppMenuInfra/panels/firstTimeTour/slides/getStartedSlide.rt"],function(e,t,s,n,i){"use strict";return e({displayName:"GetStartedSlide",mixins:[s.mixins.editorAPIMixin],propTypes:{onClose:t.func.isRequired,nextSlide:t.func.isRequired,superApp:t.object.isRequired,title:t.string.isRequired,subTitle:t.string.isRequired,pros:t.arrayOf(t.string).isRequired,teaser:t.string,nextButtonLabel:t.string.isRequired,mainImage:t.string.isRequired,footer:t.string,upgradeLink:t.string,upgrade:t.func},onClose:function(){var e=this.props.superApp,t={app_id:e.appDefId,app_name:e.appName},s=this.props.appWasManuallyInstalled?"manuallyInstalled":"template",i=n.events.firstTimeTour[s].STEP_1_WELCOME_CLOSE_CLICK;i&&this.getEditorAPI().bi.event(i,t),this.props.onClose()},onNextButtonClick:function(){var e=this.props.superApp,t={app_id:e.appDefId,app_name:e.appName},s=this.props.appWasManuallyInstalled?"manuallyInstalled":"template",i=n.events.firstTimeTour[s].STEP_1_WELCOME_CONTINUE_CLICK;i&&this.getEditorAPI().bi.event(i,t),this.props.nextSlide()},openAppPremiumPackagePicker:function(e){e.preventDefault();var t=this.props.superApp,s={origin:"TooltipUpgradeLink",app_id:t.appDefId,app_name:t.appName};this.getEditorAPI().bi.event(n.events.UPGRADE_CLICK,s),t.openAppPremiumPackagePicker(this.getEditorAPI())},render:i})}),define("superAppMenuInfra/panels/firstTimeTour/slides/innerImageGallery/innerImageGallery.rt",["react","lodash"],function(e,t){"use strict";return function(){return e.createElement("div",{className:"inner-image-gallery"},e.createElement("div",{className:"gallery-viewport"},e.createElement.apply(this,["ul",{className:"gallery-images"},t.map(this.props.items,function(t,s){return e.createElement("li",{className:"slide "+this._getAlignment(s)},e.createElement("img",{src:t,alt:!0}))}.bind(this))])),this.props.showBullets?e.createElement("nav",{className:"gallery-navigation-wrapper",key:"bullets"},e.createElement.apply(this,["ul",{className:"navigation-bullets"},t.map(this.props.items,function(t,s){return e.createElement("li",{className:"bullet "+(this.state.currentIndex===s?"active":""),onClick:function(e,t,s){this.slideToIndex(t,s)}.bind(this,t,s)})}.bind(this))])):null)}}),define("superAppMenuInfra/panels/firstTimeTour/slides/innerImageGallery/innerImageGallery",["lodash","create-react-class","prop-types","superAppMenuInfra/panels/firstTimeTour/slides/innerImageGallery/innerImageGallery.rt"],function(e,t,s,n){"use strict";return t({displayName:"innerImageGallery",propTypes:{items:s.array.isRequired,showBullets:s.bool,autoPlay:s.bool,slideInterval:s.number},getDefaultProps:function(){return{showBullets:!1,autoPlay:!1,slideInterval:4e3}},getInitialState:function(){return{currentIndex:0,containerWidth:0}},componentDidMount:function(){this.props.autoPlay&&this.play()},componentWillUnmount:function(){this.pause()},slideToIndex:function(e,t){var s=this.props.items.length-1;e<0?this.setState({currentIndex:s}):e>s?this.setState({currentIndex:0}):this.setState({currentIndex:e}),t&&(this._intervalId&&(this.pause(),this.play()),t.preventDefault())},play:function(){this._intervalId||(this._intervalId=window.setInterval(function(){this.slideToIndex(this.state.currentIndex+1)}.bind(this),this.props.slideInterval))},pause:function(){this._intervalId&&(window.clearInterval(this._intervalId),this._intervalId=null)},_getAlignment:function(e){var t=this.state.currentIndex,s="";switch(e){case t-1:s="left";break;case t:s="center",this.props.items.length<=3&&(s+=" relative");break;case t+1:s="right"}return this.props.items.length>=3&&(0===e&&t===this.props.items.length-1?s="right":e===this.props.items.length-1&&0===t&&(s="left")),s},render:n})}),define("superAppMenuInfra/panels/firstTimeTour/slides/installAppSlide.rt",["react","lodash","util","baseUI","symbols","superAppMenuInfra/panels/firstTimeTour/slides/innerImageGallery/innerImageGallery"],function(e,t,s,n,i,r){"use strict";return function(){return e.createElement("div",{className:"first-time-install-app "+this.props.wixStoreClassName},this.props.wixStoreClassName?null:e.createElement("div",{className:"close white",onClick:this.onClose,key:"wixStoreClassName"},e.createElement(i.symbol,{name:"headerCloseButton",className:"headerCloseButton"})),this.state.isInstalling?null:e.createElement("div",{key:"isInstalling",className:"pre-install-section"},this.props.sliderImages?e.createElement(r,t.assign({},{key:"sliderImages",items:this.props.sliderImages},{autoPlay:!0,showBullets:!0})):null,this.props.bannerImgSrc?e.createElement("img",{key:"bannerImage",className:"banner",src:this.props.bannerImgSrc}):null,e.createElement("h1",{className:"title"},s.translate(this.props.title)," "),e.createElement("p",{className:"sub-title"},s.translate(this.props.subTitle)),e.createElement("div",{},e.createElement.apply(this,["ul",{className:"tip-bullets"},t.map(this.props.pros,function(t,n){return e.createElement("li",{className:"bullet"},e.createElement("span",{className:"bullet-symbol"},e.createElement(i.symbol,{name:"cyclePickerV",className:"cyclePickerV"})),e.createElement("p",{className:"bullet-text"},s.translate(t)))}.bind(this))])),this.props.teaser?e.createElement("p",{className:"helper-text",key:"helpText"},s.translate(this.props.teaser)):null,e.createElement(n.button,{label:this.props.nextButtonLabel,onClick:this.installApp,disabled:this.state.isInstalling,icon:"plus",className:"promotional-add-btn"}),e.createElement("a",{href:"#",onClick:function(e){e.preventDefault(),this.openAppMarket()}.bind(this),className:"promotional-link"},"\n            ",s.translate(this.props.openAppMarketLabel),"\n        "),this.props.footer?e.createElement("footer",{key:"footer"},e.createElement("p",{},s.translate(this.props.footer)),e.createElement("a",{href:!0,onClick:function(e){e.preventDefault(),this.openAppPremiumPackagePicker}.bind(this)},s.translate(this.props.upgradeLink))):null),this.state.isInstalling&&!this.props.wixStoreClassName?e.createElement("div",{className:"install-section",key:"installSection"},e.createElement(i.symbol,{className:"installed-image",name:this.props.installImage}),e.createElement("p",{},s.translate(this.props.loadingLabel)),e.createElement("div",{className:"install-preloader"},e.createElement(n.preloader,{}))):null)}}),define("superAppMenuInfra/panels/firstTimeTour/slides/installAppSlide",["lodash","create-react-class","prop-types","core","superAppMenuInfra/bi/superAppBi","superAppMenuInfra/utils/button","superAppMenuInfra/panels/firstTimeTour/slides/installAppSlide.rt"],function(e,t,s,n,i,r,a){"use strict";return t({displayName:"InstallAppSlide",propTypes:{onClose:s.func.isRequired,nextSlide:s.func.isRequired,installApp:s.func.isRequired,superAppPanelName:s.string.isRequired,superAppButtonLabel:s.string.isRequired,superAppPanelClassName:s.string.isRequired,superAppSymbolName:s.string.isRequired,title:s.string.isRequired,subTitle:s.string.isRequired,pros:s.arrayOf(s.string).isRequired,teaser:s.string,footer:s.string,upgradeLink:s.string,nextButtonLabel:s.string.isRequired,openAppMarketLabel:s.string.isRequired,openAppMarket:s.func.isRequired,loadingLabel:s.string.isRequired,sliderImages:s.array,installImage:s.string.isRequired,bannerImgSrc:s.string},mixins:[n.mixins.editorAPIMixin],getInitialState:function(){return{isInstalling:!1,installationDone:!1,minimumInstallationDurationPassed:!1}},installApp:function(){var e=this.props.superApp,t={app_id:e.appDefId,app_name:e.appName,origin:this.props.origin};this.getEditorAPI().bi.event(i.events.firstTimeTour.promotional.INSTALL_AGREE_CLICK,t),this.setState({isInstalling:!0}),this.props.installApp(this._appInstalled),"wixStore"!==this.props.superAppPanelName&&window.setTimeout(this._minimumInstallationDurationPassed,2e3)},_appInstalled:function(){this._installationStepCompleted("installationDone"),r.onAppInstalled(this.getEditorAPI(),this.props.superApp.id,this.props.superAppPanelName,this.props.superAppButtonLabel,this.props.superAppPanelClassName,this.props.superAppSymbolName)},_minimumInstallationDurationPassed:function(){this._installationStepCompleted("minimumInstallationDurationPassed")},_installationStepCompleted:function(e){var t={};t[e]=!0,this.safelySetState(t),this.state.installationDone&&this.state.minimumInstallationDurationPassed&&this.props.nextSlide()},componentDidMount:function(){this._isMounted=!0},componentWillUnmount:function(){this._isMounted=!1},safelySetState:function(e){this._isMounted&&this.setState(e)},openAppMarket:function(){var e=this.props.superApp;if(e&&e.appDefId&&e.appName){var t={app_id:e.appDefId,app_name:e.appName};this.getEditorAPI().bi.event(i.events.firstTimeTour.promotional.INSTALL_FOUND_OUT_MORE_CLICK,t)}this.props.openAppMarket()},onClose:function(){var e=this.props.superApp,t={app_id:e.appDefId,app_name:e.appName};this.getEditorAPI().bi.event(i.events.firstTimeTour.promotional.INSTALL_CLOSE_CLICK,t),this.props.onClose()},openAppPremiumPackagePicker:function(){var e=this.props.superApp,t={origin:"TooltipUpgradeLink",app_id:e.appDefId,app_name:e.appName};this.getEditorAPI().bi.event(i.events.UPGRADE_CLICK,t),e.openAppPremiumPackagePicker(this.getEditorAPI())},render:a})}),define("superAppMenuInfra/panels/firstTimeTour/slides/welcomeSlide.rt",["react","lodash","util","baseUI","symbols"],function(e,t,s,n,i){"use strict";return function(){return e.createElement("div",{className:"welcome-slide"},e.createElement("div",{className:"close",onClick:this.onClose},e.createElement(i.symbol,{name:"headerCloseButton",className:"headerCloseButton"})),e.createElement(i.symbol,{className:"installed-image",name:this.props.installedImage}),e.createElement("h1",{className:"title"},s.translate(this.props.title)),e.createElement("p",{className:"sub-title"},s.translate(this.props.details)),this.props.teaser?e.createElement("p",{key:"teaser"},s.translate(this.props.teaser)):null,e.createElement(n.button,{label:this.props.nextButtonLabel,onClick:this.onNextClick,className:"welcome-add-btn"}))}}),define("superAppMenuInfra/panels/firstTimeTour/slides/welcomeSlide",["lodash","create-react-class","prop-types","core","superAppMenuInfra/bi/superAppBi","superAppMenuInfra/panels/firstTimeTour/slides/welcomeSlide.rt"],function(e,t,s,n,i,r){"use strict";return t({displayName:"WelcomeSlide",mixins:[n.mixins.editorAPIMixin],propTypes:{onClose:s.func.isRequired,nextSlide:s.func.isRequired,title:s.string.isRequired,type:s.string.isRequired,details:s.string.isRequired,nextButtonLabel:s.string.isRequired,teaser:s.string,installedImage:s.string.isRequired},onNextClick:function(){var e=this.props.superApp,t={app_id:e.appDefId,app_name:e.appName};this.getEditorAPI().bi.event(i.events.firstTimeTour[this.props.type].STEP_2_WELCOME_CONTINUE_CLICK,t),this.props.nextSlide()},onClose:function(){var e=this.props.superApp,t={app_id:e.appDefId,app_name:e.appName};this.getEditorAPI().bi.event(i.events.firstTimeTour[this.props.type].STEP_2_WELCOME_CLOSE_CLICK,t),this.props.onClose()},render:r})}),define("superAppMenuInfra/panels/firstTimeTour/slides/welcomeSlideWithNavigation.rt",["react","lodash","superAppMenuInfra/panels/firstTimeTour/slides/welcomeSlide"],function(e,t,s){"use strict";return function(){return e.createElement(s,t.assign({},{type:"template"},this.filteredProps()))}}),define("superAppMenuInfra/panels/firstTimeTour/slides/welcomeSlideWithNavigation",["lodash","create-react-class","prop-types","core","util","superAppMenuInfra/panels/firstTimeTour/slides/welcomeSlideWithNavigation.rt"],function(e,t,s,n,i,r){"use strict";return t({displayName:"WelcomeSlideWithNavigation",mixins:[n.mixins.editorAPIMixin,i.propTypesFilterMixin],propTypes:{superAppMainPageId:s.string.isRequired,isFirstSlide:s.bool.isRequired},componentDidMount:function(){(this.props.isFirstSlide||this.getEditorAPI().documentServices.pages.getFocusedPageId()!==this.props.superAppMainPageId)&&this._navigateToAppMainPage()},_navigateToAppMainPage:function(){return this.getEditorAPI().pages.navigateTo(this.props.superAppMainPageId)},render:r})}),define("superAppMenuInfra",["superAppMenuInfra/panels/superAppPanel","superAppMenuInfra/utils/button","superAppMenuInfra/panels/firstTimeTour/slides/getStartedSlide","superAppMenuInfra/panels/firstTimeTour/slides/installAppSlide","superAppMenuInfra/panels/firstTimeTour/slides/welcomeSlide","superAppMenuInfra/panels/firstTimeTour/slides/welcomeSlideWithNavigation"],function(e,t,s,n,i,r){"use strict";return{superAppPanel:e,firstTimeTourPanels:{getStartedSlide:s,installAppSlide:n,welcomeSlide:i,welcomeSlideWithNavigation:r},button:t}});
//# sourceMappingURL=superAppMenuInfra.min.js.map