define("addPanelInfra/addPanel/addPanelStyleManager",["lodash","core"],function(e,t){"use strict";var i={"wysiwyg.viewer.components.MatrixGallery":["mg2","mg3"],"wysiwyg.viewer.components.SlideShowGallery":["ssg3"],"wysiwyg.viewer.components.SliderGallery":["sg2"],"wysiwyg.viewer.components.PaginatedGridGallery":["pagg2","pagg3"],"wysiwyg.viewer.components.SiteButton":["b1","b2","b3","b4"],"wysiwyg.viewer.components.PopupCloseTextButton":["b1","b2","b3","b4"],"mobile.core.components.Container":["c1","c2","c3","c4"],"core.components.ContainerOBC":["c1","c2","c3","c4"],"wysiwyg.viewer.components.BgImageStrip":["bgis1","bgis2"],"wysiwyg.viewer.components.FiveGridLine":["hl1","hl2","hl3","hl4"],fiveGridLineFullWidth:["hl1","hl2","hl3","hl4"],"wysiwyg.viewer.components.VerticalLine":["vl1","vl2","vl3","vl4"],"wysiwyg.common.components.singleaudioplayer.viewer.SingleAudioPlayer":["SingleAudioPlayer_1"],"wysiwyg.viewer.components.AudioPlayer":["ap1","ap2"],"wysiwyg.viewer.components.WFacebookLike":["fbl1"],"wysiwyg.viewer.components.WGooglePlusOne":["gp1"],"wysiwyg.viewer.components.WTwitterTweet":["twt1"],"wysiwyg.viewer.components.ContactForm":["cf1","cf2"],"wysiwyg.viewer.components.DynamicContactForm":["cf1","cf2"],"wysiwyg.common.components.subscribeform.viewer.SubscribeForm":["SubscribeForm_1"],"wysiwyg.viewer.components.GoogleMap":["gm1"],"wysiwyg.viewer.components.mobile.TinyMenu":["tm1","tm2"],"wysiwyg.viewer.components.HorizontalMenu":["rt1","rt2","rt3"],"wysiwyg.viewer.components.menus.DropDownMenu":["ddm1","ddm2","ddm3"],"wysiwyg.common.components.verticalmenu.viewer.VerticalMenu":["VerticalMenu_1"],"wysiwyg.viewer.components.WPhoto":["wp1","wp2","wp3","wp4"],"wysiwyg.viewer.components.Video":["v1"],"wysiwyg.viewer.components.FooterContainer":["fc1","fc2","fc3"],"wysiwyg.viewer.components.HeaderContainer":["hc1","hc2"],"wysiwyg.viewer.components.ScreenWidthContainer":["sc1","sc2","sc3","sc4"],pageContainer:["p1","p2","p3"],WRichTextStyle1:["txtNew"],WRichTextStyle2:["txtNew"],WRichTextStyle3:["txtNew"],WRichTextStyle4:["txtNew"],WRichTextStyle5:["txtNew"],WRichTextStyle6:["txtNew"]};return{getComponentThemeStyles:function(n,o,s){var a=i[n],r=e.without(e.map(a,function(e){return t.styleManager.getStyleById(o,s,e)}),void 0),l=[];return e.forEach(r,function(i){if(e.isEmpty(l))l.push(i);else{e.find(l,function(e){return t.styleManager.isEqualWithoutTypeConsideration(i,e)})||l.push(i)}}),l},getThemeStylesArr:function(t,i,n){return e.reduce(t,e.bind(function(t,o){var s=this.getComponentThemeStyles(o,i,n);return e.isEmpty(s)?t:t.concat(e.map(s,"id"))},this),[])},getPersonalizeStylesArr:function(i,n,o){return e.reduce(o,function(o,s){var a=t.styleManager.getUniqueCustomStyleList(i,n,s);return e.isEmpty(a)?o:o.concat(a)},[])}}}),define("addPanelInfra/addPanel/componentsDefaultData",["lodash","util","addPanelDataConsts"],function(e,t,i){"use strict";function n(){return[{type:"Image",title:o("add_default_text1_image1"),uri:"a9ff3b_61fe61f3eb4c4adeb5835a166de10689.jpg",description:o("add_default_text1_gallerydescription"),width:1920,height:1280,id:"i01ch4",metaData:{isHidden:!1,isPreset:!0,schemaVersion:"1.0"}},{type:"Image",title:o("add_default_text1_image2"),uri:"a9ff3b_5f378900670848919283755eb67a5949.jpg",description:o("add_default_text1_gallerydescription"),width:1920,height:1922,id:"i1119k",metaData:{isHidden:!1,isPreset:!0,schemaVersion:"1.0"}},{type:"Image",title:o("add_default_text1_image3"),uri:"a9ff3b_7125cf82b18841c2961ce0a241b78826.jpg",description:o("add_default_text1_gallerydescription"),width:1920,height:1280,id:"i2lj2",metaData:{isHidden:!1,isPreset:!0,schemaVersion:"1.0"}},{type:"Image",title:o("add_default_text1_image4"),uri:"a9ff3b_1d0b83b8723c4dc39192405fd083142a.jpg",description:o("add_default_text1_gallerydescription"),width:1920,height:1280,id:"i321j6",metaData:{isHidden:!1,isPreset:!0,schemaVersion:"1.0"}},{type:"Image",title:o("add_default_text1_image5"),uri:"a9ff3b_f69457ef952c4aa4ba805827a02331c4.jpg",description:o("add_default_text1_gallerydescription"),width:1920,height:1280,id:"i41crh",metaData:{isHidden:!1,isPreset:!0,schemaVersion:"1.0"}},{type:"Image",title:o("add_default_text1_image6"),uri:"a9ff3b_f2f5a5f6dac648e8a23cd07144c67530.jpg",description:o("add_default_text1_gallerydescription"),width:1920,height:1280,id:"i56rx",metaData:{isHidden:!1,isPreset:!0,schemaVersion:"1.0"}},{type:"Image",title:o("add_default_text1_image7"),uri:"a9ff3b_42da54d3813d45d4b968f5d693c1d29c.jpg",description:o("add_default_text1_gallerydescription"),width:1920,height:1920,id:"image_217e",metaData:{isHidden:!1,isPreset:!0,schemaVersion:"1.0"}},{type:"Image",title:o("add_default_text1_image8"),uri:"a9ff3b_a2cb5c4ffde14da5a2f47610c4587ad1.jpg",description:o("add_default_text1_gallerydescription"),width:1920,height:1920,id:"image_14p9",metaData:{isHidden:!1,isPreset:!0,schemaVersion:"1.0"}},{type:"Image",title:o("add_default_text1_image9"),uri:"a9ff3b_2919fbec56cb4c3086b8159d5aa04b2e.jpg",description:o("add_default_text1_gallerydescription"),width:1920,height:1280,id:"image_kae",metaData:{isHidden:!1,isPreset:!0,schemaVersion:"1.0"}},{type:"Image",title:o("add_default_text1_image10"),uri:"a9ff3b_ffc94924b5634693a8686d91ab95b0bb.jpg",description:o("add_default_text1_gallerydescription"),width:1920,height:1280,id:"image_tty",metaData:{isHidden:!1,isPreset:!0,schemaVersion:"1.0"}},{type:"Image",title:o("add_default_text1_image11"),uri:"a9ff3b_ee9cb7f87e424de7a2d49bcb20ea25f1.jpg",description:o("add_default_text1_gallerydescription"),width:1920,height:1280,id:"image_1tta",metaData:{isHidden:!1,isPreset:!0,schemaVersion:"1.0"}},{type:"Image",title:o("add_default_text1_image12"),uri:"a9ff3b_f48ad132eda944eba22352d9dc140fb5.jpg",description:o("add_default_text1_gallerydescription"),width:1920,height:1280,id:"image_1hwt",metaData:{isHidden:!1,isPreset:!0,schemaVersion:"1.0"}},{type:"Image",title:o("add_default_text1_image13"),uri:"a9ff3b_06ae2bbfb3904aeebd681a5b9e7262d7.jpg",description:o("add_default_text1_gallerydescription"),width:1920,height:1280,id:"image_tfr",metaData:{isHidden:!1,isPreset:!0,schemaVersion:"1.0"}},{type:"Image",title:o("add_default_text1_image14"),uri:"a9ff3b_efb829d794c1430ebfc6fbd3ef39f46e.jpg",description:o("add_default_text1_gallerydescription"),width:1920,height:1280,id:"image_1fav",metaData:{isHidden:!1,isPreset:!0,schemaVersion:"1.0"}}]}var o=t.translate,s=[{type:"ExternalLink",target:"_blank",anchorDataId:void 0,id:"rfv",url:""},{type:"BasicMenuItem",isVisible:!0,isVisibleMobile:!0,items:[],label:o("add_default_text1_Hmenu"),link:"#rfv",id:"BasicMenuItem1",metaData:{}},{type:"BasicMenuItem",isVisible:!0,isVisibleMobile:!0,items:[],label:o("add_default_text2_Hmenu"),link:"#rfv",id:"BasicMenuItem2",metaData:{}},{type:"BasicMenuItem",isVisible:!0,isVisibleMobile:!0,items:[],label:o("add_default_text3_Hmenu"),link:"#rfv",id:"BasicMenuItem3",metaData:{}}],a={"wysiwyg.viewer.components.MatrixGallery":{componentType:"wysiwyg.viewer.components.MatrixGallery",label:o("add_preset_Grid"),dataId:"matrixDefaultData",propId:"matrixDefaultProp",addPanelLayout:{width:568,height:568},designPanelLayout:{width:440,height:416},data:{id:"matrixDefaultData",items:["#i01ch4","#i1119k","#i2lj2","#i321j6","#i41crh","#i56rx","#image_217e","#image_14p9","#image_kae"],type:"ImageList"},additionalData:n(),props:{numCols:3,maxRows:3,incRows:2,margin:15,alignText:"center",expandEnabled:!0,imageMode:"clipImage",goToLinkText:"Go to link",galleryImageOnClickAction:"disabled",showMoreLabel:"Show More",type:"MatrixGalleryProperties"},stageData:{items:e.map(n(),function(t){return e.omit(t,"id")})},stageProps:{galleryImageOnClickAction:"zoomMode"}},"wysiwyg.viewer.components.PaginatedGridGallery":{componentType:"wysiwyg.viewer.components.PaginatedGridGallery",label:o("add_preset_Animatedgrid"),dataId:"PaginatedGridDefaultData",propId:"PaginatedGridDefaultProp",addPanelLayout:{width:568,height:568},designPanelLayout:{width:440,height:416},data:{id:"PaginatedGridDefaultData",items:["#i01ch4","#i1119k","#i2lj2","#i321j6","#i41crh","#i56rx","#image_217e","#image_14p9","#image_kae"],type:"ImageList"},additionalData:n(),props:{autoplay:!1,autoplayInterval:3,expandEnabled:!0,galleryImageOnClickAction:"disabled",goToLinkText:"Go to link",imageMode:"clipImage",margin:15,maxRows:3,numCols:3,showAutoplay:!0,showCounter:!0,showNavigation:!0,transDuration:1,transition:"seq_crossFade_All",type:"PaginatedGridGalleryProperties"},stageData:{items:e.map(n(),function(t){return e.omit(t,"id")})},stageProps:{galleryImageOnClickAction:"zoomMode"}},"wysiwyg.viewer.components.SlideShowGallery":{componentType:"wysiwyg.viewer.components.SlideShowGallery",label:o("add_preset_Slideshow"),dataId:"slideShowDefaultData",propId:"slideShowDefaultProp",addPanelLayout:{width:568,height:300},designPanelLayout:{width:440,height:256},data:{id:"slideShowDefaultData",items:["#i01ch4","#i1119k","#i2lj2","#i321j6","#i41crh","#i56rx","#image_217e","#image_14p9","#image_kae"],type:"ImageList"},additionalData:n(),props:{imageMode:"clipImage",transition:"swipeHorizontal",autoplayInterval:5,autoplay:!1,transDuration:1,bidirectional:!0,reverse:!1,showAutoplay:!0,showNavigation:!0,showExpand:!1,showSocial:!1,showCounter:!0,expandEnabled:!0,goToLinkText:"Go to link",galleryImageOnClickAction:"disabled",type:"SlideShowGalleryProperties"},stageData:{items:e.map(n(),function(t){return e.omit(t,"id")})},stageProps:{galleryImageOnClickAction:"zoomMode"}},"wysiwyg.viewer.components.SliderGallery":{componentType:"wysiwyg.viewer.components.SliderGallery",label:o("add_preset_Slider"),dataId:"sliderDefaultData",propId:"sliderDefaultProp",addPanelLayout:{width:568,height:300},designPanelLayout:{width:440,height:256},data:{id:"sliderDefaultData",items:["#i01ch4","#i1119k","#i2lj2","#i321j6","#i41crh","#i56rx","#image_217e","#image_14p9","#image_kae"],type:"ImageList"},additionalData:n(),props:{aspectRatio:1.3333333333333333,aspectRatioPreset:"4:3",autoplay:!1,autoplayInterval:0,expandEnabled:!0,galleryImageOnClickAction:"disabled",goToLinkText:"Go to link",type:"SliderGalleryProperties",imageMode:"clipImage",loop:!0,margin:15,maxSpeed:7,showAutoplay:!1,showCounter:!0,transDuration:0},stageData:{items:e.map(n(),function(t){return e.omit(t,"id")})},stageProps:{galleryImageOnClickAction:"zoomMode"}},"core.components.Container":{componentType:"mobile.core.components.Container",label:"container",isContainer:!0,addPanelLayout:{width:284,height:120},stageLayout:{width:568,height:240},designPanelLayout:{width:220,height:96}},"mobile.core.components.Container":{componentType:"mobile.core.components.Container",isContainer:!0,componentTypeSkinOverride:"core.components.Container",label:"container",addPanelLayout:{width:284,height:120},stageLayout:{width:568,height:240},designPanelLayout:{width:220,height:96}},"wysiwyg.viewer.components.BgImageStrip":{componentType:"wysiwyg.viewer.components.BgImageStrip",label:"BgImageStrip",propId:"bgImageStripDefaultProp",addPanelLayout:{width:608,height:119},stageLayout:{width:568,height:362},designPanelLayout:{width:480,height:96},props:{id:"bgImageStripDefaultProp",alignType:"center",fittingType:"fill",type:"BgImageStripUnifiedProperties"}},"wysiwyg.viewer.components.menus.DropDownMenu":{componentType:"wysiwyg.viewer.components.menus.DropDownMenu",label:"DropDownMenu",dataId:"CUSTOM_MAIN_MENU",propId:"dropDownDefaultProp",addPanelLayout:{width:304,height:30},designPanelLayout:{width:240,height:24},stageLayout:{width:708,height:50},data:{id:"CUSTOM_MAIN_MENU",items:["#BasicMenuItem1","#BasicMenuItem2","#BasicMenuItem3"],type:"CustomMenu"},dataQuery:"#MAIN_MENU",additionalMatserPageData:s,props:{alignButtons:"center",alignText:"center",moreButtonLabel:"More",moreItemHeight:15,sameWidthButtons:!1,stretchButtonsToMenuWidth:!0,type:"HorizontalMenuProperties"}},"wysiwyg.common.components.verticalmenu.viewer.VerticalMenu":{componentType:"wysiwyg.common.components.verticalmenu.viewer.VerticalMenu",label:"VerticalMenu",dataId:"CUSTOM_MAIN_MENU",propId:"verticalDefaultProp",addPanelLayout:{width:88,height:150},designPanelLayout:{width:66,height:120},stageLayout:{width:100,height:200},dataQuery:"#MAIN_MENU",data:{id:"CUSTOM_MAIN_MENU",items:["#BasicMenuItem1","#BasicMenuItem2","#BasicMenuItem3"],type:"CustomMenu"},additionalMatserPageData:s,props:{itemsAlignment:"left",subMenuOpenSide:"right",type:"VerticalMenuProperties",ifRef:!0}},"wysiwyg.viewer.components.FiveGridLine":{componentType:"wysiwyg.viewer.components.FiveGridLine",label:"FiveGridLine",propId:"fiveGridLineDefaultProp",addClickArea:15,addPanelLayout:{width:142,height:7},stageLayout:{width:284,height:7},designPanelLayout:{width:110,height:5},props:{fullScreenModeOn:!1,type:"FiveGridLineProperties"}},fiveGridLineFullWidth:{componentType:"wysiwyg.viewer.components.FiveGridLine",label:"fiveGridLineFullWidth",propId:"fullLineDefaultProp",addClickArea:15,addPanelLayout:{width:304,height:7},designPanelLayout:{width:240,height:5},props:{fullScreenModeOn:!0,type:"FiveGridLineProperties"}},"wysiwyg.viewer.components.VerticalLine":{componentType:"wysiwyg.viewer.components.VerticalLine",label:"VerticalLine",addClickArea:15,addPanelLayout:{width:5,height:140},designPanelLayout:{width:5,height:110}},"wysiwyg.common.components.singleaudioplayer.viewer.SingleAudioPlayer":{componentType:"wysiwyg.common.components.singleaudioplayer.viewer.SingleAudioPlayer",label:o("add_preset_Audioplayer"),dataId:"singleAudioPlayerDefaultData",propId:"singleAudioPlayerDefaultProp",addPanelLayout:{width:304,height:60},designPanelLayout:{width:320,height:64},data:{id:"singleAudioPlayerDefaultData",artist:o("add_default_text2_audioplayer"),originalFileName:"",track:o("add_default_text1_audioplayer"),uri:"",type:"SingleAudioPlayer"},props:{autoplay:!1,loop:!1,showArtist:!0,showTrack:!0,uri:"",volume:50,type:"SingleAudioPlayerProperties"}},"wysiwyg.viewer.components.AudioPlayer":{componentType:"wysiwyg.viewer.components.AudioPlayer",label:o("add_preset_Playbutton"),dataId:"audioPlayerDefaultProp",addPanelLayout:{width:40,height:40},designPanelLayout:{width:45,height:48},data:{id:"audioPlayerDefaultProp",volume:100,visible:!0,uri:"",type:"AudioPlayer"}},"wysiwyg.viewer.components.WFacebookLike":{componentType:"wysiwyg.viewer.components.WFacebookLike",propId:"facebookDefaultProp",addPanelLayout:{width:250,height:40},data:{type:"WFacebookLike",urlFormat:"hashBang"},props:{id:"facebookDefaultProp",action:"like",colorScheme:"light",font:"helvetica",layout:"standard",send:!1,show_faces:!1,type:"WFacebookLikeProperties"}},"wysiwyg.viewer.components.WGooglePlusOne":{componentType:"wysiwyg.viewer.components.WGooglePlusOne",propId:"googlePlusDefaultProp",addPanelLayout:{width:250,height:40},props:{id:"googlePlusDefaultProp",annotation:"inline",size:"standard",type:"WGooglePlusOneProperties"}},"wysiwyg.viewer.components.WTwitterTweet":{componentType:"wysiwyg.viewer.components.WTwitterTweet",propId:"twitterTweetDefaultProp",dataId:"twitterTweetDefaultData",addPanelLayout:{width:100,height:20},data:{id:"twitterTweetDefaultData",accountToFollow:"",defaultText:"",urlFormat:"hashBang",type:"TwitterTweet"},props:{id:"twitterTweetDefaultProp",dataCount:"horizontal",dataLang:"en",type:"WTwitterTweetProperties"}},"wysiwyg.viewer.components.GoogleMap":{componentType:"wysiwyg.viewer.components.GoogleMap",propId:"googleMapDefaultProp",label:o("add_preset_GoogleMap"),dataId:"googleMapDefaultData",addPanelLayout:{width:608,height:140},stageLayout:{width:608,height:280},designPanelLayout:{width:480,height:112},data:{id:"googleMapDefaultData",address:"500 Terry Francois Street, 6th Floor. San Francisco, CA 94158",addressInfo:"Wix Office",latitude:37.77065,longitude:-122.387301,type:"GeoMap",mapStyle:[]},props:{id:"googleMapDefaultProp",mapDragging:!1,mapType:"ROADMAP",showMapType:!0,showPosition:!0,showStreetView:!0,showZoom:!0,language:t.languages.getLanguageCode(),type:"GoogleMapProperties"}},"wysiwyg.common.components.subscribeform.viewer.SubscribeForm":{componentType:"wysiwyg.common.components.subscribeform.viewer.SubscribeForm",label:o("add_preset_Subscribeform"),propId:"subscribeFormDefaultProp",dataId:"subscribeFormDefaultData",addPanelLayout:{width:608,height:100},designPanelLayout:{width:480,height:100},data:{id:"subscribeFormDefaultData",bccEmailAddress:"",emailFieldLabel:"Email",errorMessage:"Please provide a valid email",lastNameFieldLabel:"Last Name",phoneFieldLabel:"Mobile Number",submitButtonLabel:"Subscribe Now",subscribeFormTitle:"Subscribe for Updates",successMessage:"Congrats! You’re subscribed",textDirection:"left",toEmailAddress:"",firstNameFieldLabel:"Name",type:"SubscribeForm"},props:{id:"subscribeFormDefaultProp",hiddenEmailField:!0,hiddenFirstNameField:!1,hiddenLastNameField:!1,hiddenPhoneField:!1,requiredEmailField:!0,requiredFirstNameField:!1,requiredLastNameField:!1,requiredPhoneField:!1,type:"SubscribeFormProperties"}},"wysiwyg.viewer.components.ContactForm":{componentType:"wysiwyg.viewer.components.ContactForm",label:o("add_preset_Contactform"),propId:"contactFormDefaultProp",dataId:"contactFormDefaultData",takeMeasuredLayout:!0,addPanelLayout:{width:284,height:20},designPanelLayout:{width:220,height:20},data:{id:"contactFormDefaultData",addressFieldLabel:o("Contact_Form_Settings_Customize_Form_Fields_Address_default"),bccEmailAddress:"",emailFieldLabel:o("Contact_Form_Settings_Customize_Form_Fields_Email_default"),errorMessage:o("Contact_Form_Settings_Messages_Error_message_for_email_fields_default"),messageFieldLabel:o("Contact_Form_Settings_Customize_Form_Fields_Messages_default"),nameFieldLabel:o("Contact_Form_Settings_Customize_Form_Fields_Name_default"),phoneFieldLabel:o("Contact_Form_Settings_Customize_Form_Fields_Phone_default"),subjectFieldLabel:o("Contact_Form_Settings_Customize_Form_Fields_Subject_default"),submitButtonLabel:o("Contact_Form_Settings__Send_button_text_default"),successMessage:o("Contact_Form_Settings_Messages_Success_message_default"),textDirection:"left",toEmailAddress:"",type:"ContactForm"},props:{id:"contactFormDefaultProp",hidden_addressFieldLabel:!1,hidden_emailFieldLabel:!0,hidden_messageFieldLabel:!0,hidden_nameFieldLabel:!0,hidden_phoneFieldLabel:!1,hidden_subjectFieldLabel:!0,required_addressFieldLabel:!1,required_emailFieldLabel:!0,required_messageFieldLabel:!1,required_nameFieldLabel:!0,required_phoneFieldLabel:!1,required_subjectFieldLabel:!1,type:"ContactFormProperties"}},"wysiwyg.viewer.components.DynamicContactForm":{componentType:"wysiwyg.viewer.components.DynamicContactForm",label:o("add_preset_Contactform"),dataId:"dynamicContactFormDefaultData",takeMeasuredLayout:!0,addPanelLayout:{width:284,height:20},designPanelLayout:{width:220,height:20},data:{id:"dynamicContactFormDefaultData",bccEmailAddress:"",errorMessage:o("Contact_Form_Settings_Messages_Error_message_for_email_fields_default"),submitButtonLabel:o("Contact_Form_Settings__Send_button_text_default"),successMessage:o("Contact_Form_Settings_Messages_Success_message_default"),textDirection:"left",toEmailAddress:"",formName:"",type:"DynamicContactForm"},props:{type:"DefaultProperties"}},"wysiwyg.viewer.components.SiteButton":{componentType:"wysiwyg.viewer.components.SiteButton",label:"SiteButton",dataId:"siteButtonDefaultData",propId:"siteButtonDefaultProp",addPanelLayout:{width:142,height:40},designPanelLayout:{width:110,height:32},data:{label:o("add_default_text1_textbutton"),link:null,type:"LinkableButton"},props:{align:"center",margin:0,type:"ButtonProperties"}},"wysiwyg.viewer.components.WPhoto":{componentType:"wysiwyg.viewer.components.WPhoto",label:"SiteButton",dataId:"wphotoDefaultData",propId:"wphotoDefaultProp",designPanelLayout:{width:220,height:160},addPanelLayout:{width:180,height:160},data:{id:"wphotoDefaultData",type:"Image",alt:"",description:"",height:1280,title:"",uri:"edb491_a5f1565968db4168a7b1931d503faaa2~mv2_d_1920_1280_s_2.jpg",width:1920},props:{id:"wphotoDefaultProp",displayMode:"fill",onClickBehavior:"",type:"WPhotoProperties"}},"wysiwyg.viewer.components.inputs.TextInput":{componentType:"wysiwyg.viewer.components.inputs.TextInput",label:"TextInput",dataId:"textInputDefaultData",propId:"textInputDefaultProp",designPanelLayout:{width:240,height:43},addPanelLayout:{width:240,height:43},data:{id:"textInputDefaultData",type:"TextInput"},props:{id:"textInputDefaultProp",type:"TextInputProperties"}},"wysiwyg.viewer.components.inputs.TextAreaInput":{componentType:"wysiwyg.viewer.components.inputs.TextAreaInput",label:"TextAreaInput",dataId:"textAreaInputDefaultData",propId:"textAreaInputDefaultProp",designPanelLayout:{width:240,height:70},addPanelLayout:{width:240,height:70},data:{id:"textAreaDefaultData"},props:{id:"textAreaInputDefaultProp",type:"TextAreaInputProperties",placeholder:"placeholder"}},"wysiwyg.viewer.components.inputs.ComboBoxInput":{componentType:"wysiwyg.viewer.components.inputs.ComboBoxInput",label:"ComboBoxInput",dataId:"comboBoxInputDefaultData",propId:"comboBoxInputDefaultProp",designPanelLayout:{width:240,height:43},addPanelLayout:{width:240,height:43},data:{id:"comboBoxInputDefaultData"},props:{id:"comboBoxInputDefaultProp",type:"comboBoxInputProperties",textAlignment:"left"}},"wysiwyg.viewer.components.inputs.RadioGroup":{componentType:"wysiwyg.viewer.components.inputs.RadioGroup",label:"RadioGroup",dataId:"radioGroupDefaultData",propId:"radioGroupDefaultProp",designPanelLayout:{width:144,height:91},addPanelLayout:{width:144,height:91},data:{id:"radioGroupDefaultData",options:[{id:"dataItem-ix03jgwd1",type:"RadioButton",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},value:"Radio button1",label:"NY Yankees"},{id:"dataItem-ix03jgwf",type:"RadioButton",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},value:"Radio button2",label:"Chicago Cubs"},{id:"dataItem-ix03jgwf1",type:"RadioButton",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},value:"Radio button3",label:"LA Dodgers"}],defaultValue:"Radio button1"},props:{id:"radioGroupDefaultProp",type:"RadioGroupProperties",alignment:"left",layout:"vertical",buttonsMargin:14,spacing:15,buttonSize:17}},"wysiwyg.viewer.components.inputs.DatePicker":{componentType:"wysiwyg.viewer.components.inputs.DatePicker",label:"DatePicker",dataId:"datePickerDefaultData",propId:"datePickerDefaultProp",designPanelLayout:{width:240,height:43},addPanelLayout:{width:240,height:43},data:{id:"datePickerDefaultData"},props:{id:"datePickerDefaultProp",type:"DatePickerProperties",textAlignment:"left",textPadding:27}},"wysiwyg.viewer.components.Video":{componentType:"wysiwyg.viewer.components.Video",label:"Video",dataId:"videoDefaultData",propId:"videoDefaultProp",designPanelLayout:{width:440,height:320},addPanelLayout:{width:440,height:320},data:{id:"videoDefaultData",type:"Video",videoId:"PMWmYf2043g",videoType:"YOUTUBE"},props:{id:"videoDefaultProp",autoplay:!1,lightTheme:!1,loop:!1,showControls:"always_show",showinfo:!1,type:"VideoProperties"}},"wysiwyg.viewer.components.mobile.TinyMenu":{componentType:"wysiwyg.viewer.components.mobile.TinyMenu",label:"Tiny Menu",dataId:"CUSTOM_MAIN_MENU",propId:"tinyMenuDefaultProp",designPanelLayout:{width:48,height:48},addPanelLayout:{width:48,height:48},data:{id:"CUSTOM_MAIN_MENU",items:["#BasicMenuItem1","#BasicMenuItem2","#BasicMenuItem3"],type:"CustomMenu"},props:{id:"tinyMenuDefaultProp",direction:"left",type:"TinyMenuProperties"},additionalMatserPageData:s,dataQuery:"#MAIN_MENU"},"wysiwyg.viewer.components.HeaderContainer":{componentType:"wysiwyg.viewer.components.HeaderContainer",isContainer:!0,label:"Header",designPanelLayout:{width:480,height:96},addPanelLayout:{width:608,height:96}},"wysiwyg.viewer.components.FooterContainer":{componentType:"wysiwyg.viewer.components.FooterContainer",isContainer:!0,label:"Header",designPanelLayout:{width:480,height:96},addPanelLayout:{width:608,height:96}},"wysiwyg.viewer.components.ScreenWidthContainer":{componentType:"wysiwyg.viewer.components.ScreenWidthContainer",isContainer:!0,designPanelLayout:{width:480,height:96},addPanelLayout:{width:608,height:96}},pageContainer:{componentType:"mobile.core.components.Container",componentTypeSkinOverride:"mobile.core.components.Page",isContainer:!0,label:"Header",designPanelLayout:{width:70,height:55},addPanelLayout:{width:70,height:55}},"wysiwyg.common.components.verticalanchorsmenu.viewer.VerticalAnchorsMenu":{componentType:"wysiwyg.common.components.verticalanchorsmenu.viewer.VerticalAnchorsMenu",label:"Vertical Anchors Menu",dataId:"anchorsMenuDefaultData",propId:"anchorsMenuDefaultProp",designPanelLayout:{width:32,height:60},addPanelLayout:{width:32,height:60},data:{id:"anchorsMenuDefaultData",hiddenAnchorIds:{c1dmp:["PAGE_TOP_ANCHOR"]},pageTopLabel:o("ANCHOR_MENU_MANAGER_TOP_LABEL"),pageBottomLabel:"Bottom of Page",type:"VerticalAnchorsMenu"},props:{id:"anchorsMenuDefaultProp",itemsAlignment:"right",orientation:"right",type:"VerticalAnchorsMenuProperties"}},WRichTextStyle1:{componentType:"wysiwyg.viewer.components.WRichText",dataId:"WRichTextStyle1DefaultData",propId:"WRichTextStyle1DefaultProp",takeMeasuredLayout:!0,addPanelLayout:{width:304,height:10},data:{id:"WRichTextStyle1DefaultData",text:'<h1 class="font_0">'+o("add_default_text1_sitetitle")+"</h1>",type:"StyledText",stylesMapId:"CK_EDITOR_PARAGRAPH_STYLES"},props:{id:"WRichTextStyle1DefaultProp",type:"WRichTextProperties",brightness:1}},WRichTextStyle2:{componentType:"wysiwyg.viewer.components.WRichText",dataId:"WRichTextStyle2DefaultData",propId:"WRichTextStyle2DefaultProp",takeMeasuredLayout:!0,addPanelLayout:{width:304,height:10},data:{id:"WRichTextStyle2DefaultData",text:'<h2 class="font_2">'+o("add_default_text1_pagetitle")+"</h2>",type:"StyledText",stylesMapId:"CK_EDITOR_PARAGRAPH_STYLES"},props:{id:"WRichTextStyle2DefaultProp",type:"WRichTextProperties",brightness:1}},WRichTextStyle3:{componentType:"wysiwyg.viewer.components.WRichText",dataId:"WRichTextStyle3DefaultData",propId:"WRichTextStyle3DefaultProp",takeMeasuredLayout:!0,addPanelLayout:{width:304,height:10},data:{id:"WRichTextStyle3DefaultData",text:'<h4 class="font_4">'+o("add_default_text1_largeheading")+"</h4>",type:"StyledText",stylesMapId:"CK_EDITOR_PARAGRAPH_STYLES"},props:{id:"WRichTextStyle3DefaultProp",type:"WRichTextProperties",brightness:1}},WRichTextStyle4:{componentType:"wysiwyg.viewer.components.WRichText",dataId:"WRichTextStyle4DefaultData",propId:"WRichTextStyle4DefaultProp",takeMeasuredLayout:!0,addPanelLayout:{width:304,height:10},data:{id:"WRichTextStyle4DefaultData",text:'<h6 class="font_6">'+o("add_default_text1_smallheading")+"</h6>",type:"StyledText",stylesMapId:"CK_EDITOR_PARAGRAPH_STYLES"},props:{id:"WRichTextStyle4DefaultProp",type:"WRichTextProperties",brightness:1}},WRichTextStyle5:{componentType:"wysiwyg.viewer.components.WRichText",dataId:"WRichTextStyle5DefaultData",propId:"WRichTextStyle5DefaultProp",takeMeasuredLayout:!0,addPanelLayout:{width:304,height:10},data:{id:"WRichTextStyle5DefaultData",text:'<p class="font_7">'+o("add_default_text1_paragraphL")+"</p>",type:"StyledText",stylesMapId:"CK_EDITOR_PARAGRAPH_STYLES"},props:{id:"WRichTextStyle5DefaultProp",type:"WRichTextProperties",brightness:1}},WRichTextStyle6:{componentType:"wysiwyg.viewer.components.WRichText",dataId:"WRichTextStyle6DefaultData",propId:"WRichTextStyle6DefaultProp",takeMeasuredLayout:!0,addPanelLayout:{width:304,height:10},data:{id:"WRichTextStyle6DefaultData",text:'<p class="font_8">'+o("add_default_text1_paragraphM")+"</p>",type:"StyledText",stylesMapId:"CK_EDITOR_PARAGRAPH_STYLES"},props:{id:"WRichTextStyle6DefaultProp",type:"WRichTextProperties",brightness:1}},"wysiwyg.viewer.components.PopupCloseTextButton":{componentType:"wysiwyg.viewer.components.PopupCloseTextButton",label:"PopupCloseTextButton",dataId:"popupCloseTextButtonDefaultData",propId:"popupCloseTextButtonDefaultProps",addPanelLayout:{width:142,height:40},designPanelLayout:{width:110,height:32},data:{label:o("POPUPS_Close_Button_Default_Text"),link:null,type:"LinkableButton"},props:{align:"center",margin:0,type:"ButtonProperties"}},"wysiwyg.viewer.components.HoverBox":{componentType:"wysiwyg.viewer.components.PopupCloseTextButton",label:"HoverBox",dataId:"hoverBoxDefaultData",propId:"hoverBoxDefaultProps",designPanelLayout:{width:110,height:32},props:{align:"center",margin:0,type:"HoverBoxProperties"}}};return{getComponentDefault:function(t,n,o){var s=e.cloneDeep(a[t]);return s&&(s.siteId=o,n===i.PANEL_TYPES.DESIGN_PANEL?s.panelLayout=s.designPanelLayout:s.panelLayout=s.addPanelLayout,s.data&&(s.data=e.defaults(s.data,{metaData:{isHidden:!1,isPreset:!0,schemaVersion:"1.0"}})),s.props&&(s.props=e.merge(s.props,{metaData:{isHidden:!1,isPreset:!0,schemaVersion:"1.0"}})),s=e.omit(s,["addPanelLayout","designPanelLayout"])),s}}}),define("addPanelInfra/sections/liveComponentsSections/liveSectionLoader.rt",["react","lodash"],function(e,t){"use strict";return function(){return function(){var i=this.getLiveSection();return e.createElement(i,t.assign({},{key:this.props.id,ref:this.props.id},this.getPropsForLiveSection()))}.apply(this,[])}}),define("addPanelInfra/sections/mixins/bubbleOnHoverMixin",["core","constants","baseUI","stateManagement"],function(e,t,i,n){"use strict";return{mixins:[e.mixins.editorAPIMixin],componentWillUnmount:function(){this.hideBubble()},showBubbleOnMouseMove:function(e){this.props.isDisabled||this.setBubbleTimeout({left:e.clientX,top:e.clientY})},hideBubbleOnMouseLeave:function(){this.hideBubble()},showBubble:function(e){n.editorPlugins.userPreferences.selectors.getSessionUserPreferences("addPanel.dragToStage")(this.getEditorAPI().store.getState())||i.tooltipManager.isDisplayingAnything()||this.getEditorAPI().showFloatingBubble("add_section_tooltip_drag",e,{alignment:t.UI.TOOLTIP.ALIGNMENT.RIGHT})},hideBubble:function(){this.props.isDisabled||(this.getEditorAPI().hideFloatingBubble(),this.clearBubbleTimeout())},setBubbleTimeout:function(e){this.getEditorAPI().hideFloatingBubble(),this.clearBubbleTimeout(),this.bubbleTimeout=window.setTimeout(this.showBubble.bind(this,e),600)},clearBubbleTimeout:function(){this.bubbleTimeout&&(window.clearTimeout(this.bubbleTimeout),delete this.bubbleTimeout)}}}),define("addPanelInfra/sections/liveComponentsSections/componentCreationUtil",[],function(){"use strict";return{getComponentDef:function(e,t,i,n,o,s,a,r){var l={styleId:e,id:t,dataQuery:i,layout:{width:s.size.width,height:s.size.height,x:s.position.x,y:s.position.y,scale:1,rotationInDegrees:0,anchors:[],fixedPosition:!1},propertyQuery:n,componentType:o,originalStyleId:r};return a&&(l.components=[]),l},createBottomTopAnchor:function(e,t,i){return{distance:i,locked:!0,fromComp:e.compId,targetComponent:t.compId,originalValue:t.compPosition.y,type:"BOTTOM_TOP"}},createBottomParentAnchor:function(e,t,i){return{distance:0,locked:!0,fromComp:e.compId,targetComponent:i,originalValue:t,type:"BOTTOM_PARENT"}}}}),define("addPanelInfra/sections/liveComponentsSections/liveComponentStyleAdjuster",["lodash","util"],function(e,t){"use strict";function i(e){return!!e&&/^#(([0-9|a-f|A-F]){3}){1,2}$/.test(e)}function n(e){var t=e.toString(16);return 1===t.length?"0"+t:t}function o(e){return"#"+n(parseInt(e[0],10))+n(parseInt(e[1],10))+n(parseInt(e[2],10))}function s(t,n,s){var a=t;e.includes(t,"color_")&&(a=function(e){return i(e)?e:o(e.split(","))}(n.colors.get(t)));var r=l(a,s);return r&&r.wasReplaced?r.value:a}function a(e){return parseInt(e.split(" ")[3].split("/")[0].replace("px",""),10)}function r(e,i,n){var o=e.split(" "),s=o[3].split("/");s[0]=i+"px",o[3]=s.join("/");var a=o[4];return o[4]=t.fontLangsFallbacks.getFontFallbackIfNeeded(n,a),o.join(" ")}function l(t,n){var s="string"==typeof t&&i(t),a="string"==typeof t&&function(t){if(null===t)return{isRgb:!1};var i=t.replace(/[^0-9,\.]/g,"").split(",");if(3!==i.length&&4!==i.length)return{isRgb:!1};var n=i[3];return e.every(i.slice(0,3),function(e){return e>=0&&e<=255})&&(!n||n>=0&&n<=1)?{isRgb:!0,rgbArr:i}:{isRgb:!1}}(t),r=void 0;if(!a.isRgb&&!s)return null;a.isRgb?r=o(a.rgbArr.slice(0,3)):s&&(r=t);var l=void 0;return(l="text"===n?"#000000":function(e,t){for(var i=0;i<=10;i++){var n=d.hexToHsb(p);n.brightness-=i;var o=d.hsbToHex(n);if(e.toLowerCase()===o.toLowerCase()){var s=d.hexToHsb(u[t]||c);return s.brightness-=i,d.hsbToHex(s)}}return null}(r,n))||(l=function(e){var t=d.hexToHsb(e);if(100===t.brightness){if(t.hue<=250&&t.saturation<10)return t.saturation=10,d.hsbToHex(t);if(t.hue>250&&t.saturation<5)return t.saturation=5,d.hsbToHex(t)}return null}(r)),l?{value:l,wasReplaced:!0}:null}var d=t.colors,p="#FFFFFF",c="#eff2f6",u={button:c,text:c,menu:c,contact:c,gallery:"#EFF3F6",box:"#EFF3F6",shape:"#EFF3F6",music:"#EFF3F6"};return{handleExceedingFontForTextComp:function(t,i,n,o,d,p){var c=n.data.text,u=c.indexOf("font_"),h=c.substr(u,6),m=d.fonts.get(h),g=a(m),f=m.split(" ")[5],y=void 0,I=void 0,P=void 0;if(g>i&&(y=(y=(y=r(m,i,p)).substring(0,y.indexOf("{"))).replace(/\+/g," "),I=s(f,d,t)),e.includes(f,"color_"))g<=i&&(I=s(f,d,t));else{var S=l(f);S&&S.wasReplaced&&(I=S.value,y=m.split(" ").splice(-1,1).join(" "))}y&&(P=c.replace('class="'+h+'"','style="color:'+I+";font:"+y+'"'),o.data[n.dataId].text=P)},changeBordersNotDividingInScale:function(t,i){var n=["brw","brwT","brwB","brwH","sz1","sz2","sz3"];return t&&t.style&&t.style.properties&&i&&1!==i?e.reduce(t.style.properties,function(t,o,s){if(e.includes(n,s)){var a=parseInt(o,10);if(a%(1/i)){var r=a+a%(1/i);r>8&&(r=8),t[s]=r+"px"}}return t},{}):{}},limitShadowOnAddPanel:function(t){var i=["shd","ishd","bls_shd","bls_shd_input","bls_shd_subscribe_button","bls_shd_input_rtl","llf_shd","llt_shd","shadow","shd1","boxShadow","insetShadow","dropShadow"];return t&&t.style&&t.style.properties?e.reduce(t.style.properties,function(t,n,o){if(e.includes(i,o)){var s=n.split(" "),a=parseInt(s[0],10),r=parseInt(s[1],10),l=parseInt(s[2],10),d=parseInt(s[3],10);(a>10||a<-10)&&(s[0]=a>10?"10px":"-10px"),(r>10||r<-10)&&(s[1]=r>10?"10px":"-10px"),l>15&&(s[2]="15px"),d>10&&(s[3]="10px"),t[o]=s.join(" ")}return t},{}):{}},getFontExceedingFromMaxSize:function(t,i,n){return i&&t&&t.style&&t.style.properties?e.reduce(t.style.properties,function(t,o,s){var r="string"==typeof o&&e.includes(o,"font_"),l="string"==typeof o&&o.split(" ").length>4;if(r||l){var d=l?o:n.fonts.get(o);a(d)>i&&(t[s]=d)}return t},{}):{}},generateCustomStyle:function(t,i,n,o,s,a,l){var d=e.cloneDeep(t);return d.id=e.uniqueId("previewStyle"),e.forEach(i,function(e,t){d.style.properties[t]=r(e,n,l)}),e.forEach(o,function(e,t){d.style.properties[t]=e}),e.forEach(s,function(e,t){d.style.properties[t]=e}),e.forEach(a,function(e,t){d.style.properties[t]=e}),d},changeColorsNotSuitableFotAddPanel:function(t,i){return t&&t.style&&t.style.properties?e.reduce(t.style.properties,function(e,t,n){var o=l(t,i);return o?(o.wasReplaced&&(e[n]=o.value),e):e},{}):{}},getColorTeReplaceIfNeeded:l}}),define("addPanelInfra/sections/liveComponentsSections/liveComponentSectionMixin",["reactDOM","prop-types","core","lodash","addPanelDataConsts","addPanelInfra/addPanel/componentsDefaultData","addPanelInfra/sections/liveComponentsSections/componentCreationUtil","addPanelInfra/sections/liveComponentsSections/liveComponentStyleAdjuster"],function(e,t,i,n,o,s,a,r){"use strict";function l(e,t,o,s,l,d,p,c,u,h,m){var g=p*(1/c);!function(e,t){t.propId&&(e.props[t.propId]=t.props);t.dataId&&(e.data[t.dataId]=t.data);t.additionalData&&(e.additionalData=e.additionalData.concat(t.additionalData));t.additionalMatserPageData&&(e.additionalMatserPageData=e.additionalMatserPageData.concat(t.additionalMatserPageData))}(o,t);var f=s.styleId,y=function(e,t){for(var i in e)if(e.hasOwnProperty(i)){var o=n.find(e[i],{index:t});if(o)return{compData:o,line:i}}}(e,d);if(y){var I={position:y.compData.compPosition,size:{width:t.panelLayout.width,height:t.panelLayout.height}},P=i.styleManager.getStyleById(u.theme,u.components,f),S=r.changeBordersNotDividingInScale(P,c),v=r.limitShadowOnAddPanel(P),w=r.changeColorsNotSuitableFotAddPanel(P,h),T="txtNew"!==f?r.getFontExceedingFromMaxSize(P,l,u.theme):r.handleExceedingFontForTextComp(h,l,t,o,u.theme,m),b=n.isEmpty(T)&&n.isEmpty(v)&&n.isEmpty(S)&&n.isEmpty(w)?null:r.generateCustomStyle(P,T,l,S,v,w),C=f;b&&(C=b.id);var D=a.getComponentDef(C,y.compData.compId,t.dataId,t.propId,t.componentType,I,t.isContainer,f);!function(e,t,i,o){var s=t[parseInt(i,10)],r=t[parseInt(i,10)+1];n.forEach(s,function(t){n.forEach(r,function(i){var n=a.createBottomTopAnchor(t,i,o);e.layout.anchors.push(n)})})}(D,e,y.line,g),o.comps.push({styleId:C,customStyle:b,compFullStructure:D})}}function d(e,t){var i=s.getComponentDefault(e.key,t),o={componentType:e.compType,style:e.styleId,layout:function(e,t){return t.takeMeasuredLayout?{width:e.width,height:e.height}:t.stageLayout?{width:t.stageLayout.width,height:t.stageLayout.height}:{width:t.panelLayout.width,height:t.panelLayout.height}}(e,i),type:"Component"};return(i.data||i.stageData)&&(o.data=n.merge({},n.omit(i.data,"id"),i.stageData)),(i.props||i.stageProps)&&(o.props=n.merge({},n.omit(i.props,"id"),i.stageProps)),i.dataQuery&&(o.dataQuery=i.dataQuery,delete o.data),i.isContainer&&(o.components=[],o.type="Container"),o}function p(e,t){return n.maxBy(e[t],"compDef.panelLayout.height").compDef.panelLayout.height}var c=0;return{componentWillMount:function(){this.elementsPositionInSection={},this.compsByLines={},this.currentRowNum=0,this.currentRowWidth=0,this.compsByLines[this.currentRowWidth]=[],this.totalSectionHeight=0,this.calculateCompsPosition(),this.setState({sectionSiteHeight:this.totalSectionHeight,layoutDone:!1})},getChildContext:function(){return{documentServices:this.getEditorAPI().documentServices,styleManager:i.styleManager}},childContextTypes:{documentServices:t.object.isRequired,styleManager:t.object.isRequired},calculateCompsPosition:function(){n.forEach(this.props.stylesForSection,n.bind(function(e,t){c++;var i=s.getComponentDefault(e.compType,this.props.parentType),n="Comp"+c;this.locatePositionInGrid(i,t,e,n)},this))},getRelevantConstantData:function(){return this.props.parentType===o.PANEL_TYPES.ADD_PANEL?o.ADD_PANEL:o.DESIGN_PANEL},getStyleProps:function(){return{width:this.getRelevantConstantData().LIVE_COMPONENT_CATEGORY_CONTENT/this.props.props.scaleProportion.x,WebkitTransform:"scale("+this.props.props.scaleProportion.x+","+this.props.props.scaleProportion.y+")",transform:"scale("+this.props.props.scaleProportion.x+","+this.props.props.scaleProportion.y+")",WebkitTransformOrigin:"0 0",transformOrigin:"0 0",WebkitBackfaceVisibility:"hidden",backfaceVisibility:"hidden"}},getCompDataByItemKey:function(e){var t=this.elementsPositionInSection[e];return t?t=d(t,this.props.parentType):null},getCompDataByXY:function(t,i){var n=e.findDOMNode(this).getBoundingClientRect(),o=this.props.props.scaleProportion,a={x:n.left+this.getRelevantConstantData().LIVE_COMPONENT_SECTION_MARGIN,y:n.top+(this.props.showSectionHeader?this.getRelevantConstantData().SECTION_HEADER_HEIGHT:0)+(this.props.showSectionHeader?this.getRelevantConstantData().LIVE_COMPONENT_SECTION_MARGIN:0)},r=function(e,t,i,n,o){for(var a in i)if(i.hasOwnProperty(a)){var r=s.getComponentDefault(i[a].key,o),l=i[a].compPosition.x*n.x,d=i[a].compPosition.y*n.y,p=l+i[a].width*n.x,c=d+i[a].height*n.y,u=e>=l-(r.addClickArea||0)&&e<=p+(r.addClickArea||0),h=t>=d-(r.addClickArea||0)&&t<=c+(r.addClickArea||0);if(u&&h)return i[a]}return null}(t-a.x,i-a.y,this.elementsPositionInSection,o,this.props.parentType);if(r){var l={left:r.compPosition.x*o.x+a.x,top:r.compPosition.y*o.y+a.y,width:r.width*o.x,height:r.height*o.y};return r=d(r,this.props.parentType),{rect:l,structure:r,sectionTitle:this.props.title,categoryId:this.props.categoryId}}return null},onSiteReadyUpdateLayout:function(e,t){this.setState({sectionSiteHeight:e},function(){n.forEach(this.elementsPositionInSection,n.bind(function(e){var i=e.compId;e.compPosition.y=t.top[i],e.height=t.height[i]},this)),this.props.notifyLayoutDone&&this.props.notifyLayoutDone(),this.setState({layoutDone:!0})}.bind(this))},calculateTotalSectionHeight:function(){return Math.ceil(this.state.sectionSiteHeight*this.props.props.scaleProportion.y+(this.props.showSectionHeader?this.getRelevantConstantData().SECTION_HEADER_HEIGHT:0)+this.getRelevantConstantData().LIVE_COMPONENT_SECTION_MARGIN)},updateRowLineAndAddToDic:function(e,t,i,n,o,s){this.currentRowWidth+=e;var a=function(e,t,i,n,o){return{key:t.compType,compType:i.componentType,styleId:t.styleId,compPosition:n,compId:e,height:i.panelLayout.height,width:i.panelLayout.width,index:o,compDef:i}}(s,n,t,i,o);this.elementsPositionInSection[n.compType+"_"+n.styleId]=a,this.compsByLines[this.currentRowNum].push(a)},locatePositionInGrid:function(e,t,i,n){var o={},s=this.props.props.scaleProportion,a=e.panelLayout.width,r=this.props.props.horizontalMargin*(1/s.x),l=this.props.props.verticalMargin*(1/s.y),d=this.getRelevantConstantData().LIVE_COMPONENT_CATEGORY_CONTENT/s.x;if(0===this.currentRowWidth&&a<=d)o.x=this.currentRowWidth,o.y=this.totalSectionHeight,this.updateRowLineAndAddToDic(a,e,o,i,t,n);else if(this.currentRowWidth+r+a<=d)o.x=this.currentRowWidth+r,o.y=this.totalSectionHeight,this.updateRowLineAndAddToDic(a+r,e,o,i,t,n);else{var c=p(this.compsByLines,this.currentRowNum);this.currentRowWidth=0,this.currentRowNum++,this.totalSectionHeight=this.totalSectionHeight+c+l,this.compsByLines[this.currentRowNum]=[],o.x=this.currentRowWidth,o.y=this.totalSectionHeight,this.updateRowLineAndAddToDic(a,e,o,i,t,n)}if(this.props.stylesForSection.length-1===t){var u=p(this.compsByLines,this.currentRowNum);this.totalSectionHeight+=u}},getLiveCompsComponentsDef:function(e,t){var i={props:{},data:{},comps:[],additionalData:[],additionalMatserPageData:[],actionsForPreviewExtension:{},siteId:n.uniqueId("siteID_")};i.actionsForPreviewExtension={labelMode:this.props.additionalBehaviours.labelMode,infoIcon:this.props.additionalBehaviours.infoIcon,iconEnabledForComps:this.props.additionalBehaviours.iconEnabledForComps,scaleProportion:this.props.props.scaleProportion,fontSize:o.LABEL_FONT_SIZE*(1/this.props.props.scaleProportion.y),compTypesLabels:{}},n.forEach(this.props.stylesForSection,n.bind(function(e,n){var o=s.getComponentDefault(e.compType,this.props.parentType,i.siteId);i.actionsForPreviewExtension.compTypesLabels[o.componentType]=o.label,l(this.compsByLines,o,i,e,this.props.props.maxFontSize,n,this.props.props.verticalMargin,this.props.props.scaleProportion.y,this.getEditorAPI(),this.props.categoryId,t)},this));var r=this.compsByLines[n.max(n.keys(this.compsByLines))];return n.forEach(r,n.bind(function(t){var o=a.createBottomParentAnchor(t,this.totalSectionHeight,e);n.find(i.comps,{compFullStructure:{id:t.compId}}).compFullStructure.layout.anchors.push(o)},this)),i.totalSectionHeight=this.totalSectionHeight,i.siteWidth=this.getRelevantConstantData().LIVE_COMPONENT_CATEGORY_CONTENT/this.props.props.scaleProportion.x,i.compTypes=this.props.props.compTypes,i.categoryId=this.props.categoryId,i.maxFontSize=this.props.props.maxFontSize,i.compTypes=n.uniq(n.map(i.comps,"compFullStructure.componentType")),i}}}),define("addPanelInfra/sections/mixins/preventDoubleClickMixin",[],function(){"use strict";return{setClickTimeStamp:function(e){this.clickTimestamp=e.timeStamp},isAnotherMouseActionAllowed:function(e){return!this.clickTimestamp||e.timeStamp-this.clickTimestamp>1e3}}}),define("addPanelInfra/sections/sectionHeader/sectionHeader.rt",["react","lodash","util","constants","baseUI","experiment"],function(e,t,i,n,o,s){"use strict";return function(){return this.props.showSectionHeader?e.createElement("div",{className:"section-header "+this.props.type,style:this.getSectionHeaderStyle(),key:"header"},e.createElement("div",{className:"title-line"},e.createElement("div",{className:"title"},i.translate(this.props.title)),this.isInfoShown()?e.createElement(o.infoIcon,t.assign({},{disableTooltip:!0,key:"infoIcon",tooltipWidth:"300px",alignment:n.UI.TOOLTIP.ALIGNMENT.RIGHT},this.props.help)):null)):null}}),define("addPanelInfra/sections/sectionHeader/sectionHeader",["create-react-class","core","lodash","addPanelDataConsts","constants","addPanelInfra/sections/sectionHeader/sectionHeader.rt"],function(e,t,i,n,o,s){"use strict";return e({displayName:"sectionHeader",mixins:[t.mixins.editorAPIMixin],getSectionHeaderStyle:function(){var e=void 0;return e=this.props.parentType===n.PANEL_TYPES.DESIGN_PANEL?n.DESIGN_PANEL:n.ADD_PANEL,{width:e.LIVE_COMPONENT_CATEGORY_CONTENT,minHeight:e.SECTION_HEADER_HEIGHT}},isInfoShown:function(){return function(e){return this.props[e]&&!this.props[e].hide}.call(this,"help")},onLearnMoreClickOpenHelpCenter:function(){var e=this.getEditorAPI();if(this.props.teaser.helpId){var t=i.get(this.props,"teaser.helpCompType")||this.props.categoryId,n={origin:o.BI.HELP.ORIGIN.ADD_PANEL,component:t,learn_more:!0};e.panelManager.openHelpCenter(this.props.teaser.helpId,null,n)}},render:s})}),define("addPanelInfra/sections/sectionFooter/sectionFooter.rt",["react","lodash","util","baseUI"],function(e,t,i,n){"use strict";return function(){return e.createElement("div",{className:"section-footer",style:this.getSectionStyle()},this.showAction()?e.createElement("span",{className:"link",onClick:this.onClick,key:"action"},i.translate(this.props.label),"\n        ",e.createElement(n.symbol,{name:"arrowRight",className:"arrow"})):null)}}),define("addPanelInfra/sections/sectionFooter/sectionFooter",["create-react-class","lodash","core","addPanelInfra/sections/sectionFooter/sectionFooter.rt"],function(e,t,i,n){"use strict";return e({displayName:"sectionFooter",mixins:[i.mixins.editorAPIMixin],getSectionStyle:function(){return this.props.styleOverride},onClick:function(){this.props.action(this.getEditorAPI(),this.props)},showAction:function(){return!this.props.showAction||this.props.showAction(this.getEditorAPI(),this.props)},render:n})}),define("addPanelInfra/sections/sectionWrapper.rt",["react","lodash","addPanelInfra/sections/sectionHeader/sectionHeader","addPanelInfra/sections/sectionFooter/sectionFooter","util"],function(e,t,i,n,o){"use strict";return function(){return e.createElement("div",{className:o.inheritClassName(this.props,"section-wrapper"),"data-section-title":o.translate(this.props.title),"data-tooltip-bounds":"true",style:this.props.style},e.createElement(i,this.props),"\n    ",this.props.children,"\n    ",this.props.sectionFooter&&!this.props.sectionFooter.hide?e.createElement(n,t.assign({},{key:"footer"},this.getSectionFooterProps())):null)}}),define("addPanelInfra/sections/sectionWrapper",["create-react-class","lodash","coreBi","addPanelInfra/sections/sectionWrapper.rt"],function(e,t,i,n){"use strict";return e({displayName:"sectionWrapper",getSectionFooterProps:function(){return t.assign({},this.props.sectionFooter,{addPanelBiEvent:i.events.addPanel,categoryId:this.props.categoryId,sectionName:this.props.sectionName})},render:n})}),define("addPanelInfra/sections/liveComponentsSections/liveComponentSection.rt",["react","lodash","core","addPanelInfra/sections/sectionWrapper","util","santaPreview","addPanelInfra/sections/liveComponentsSections/liveComponentStyleAdjuster"],function(e,t,i,n,o,s,a){"use strict";return function(){return t.isEmpty(this.props.stylesForSection)||this.props.hide?null:e.createElement(n,function(e,i){var n=t.assign({},e,i);return e.hasOwnProperty("style")&&(n.style=t.defaults(n.style,e.style)),e.hasOwnProperty("className")&&i.hasOwnProperty("className")&&(n.className=i.className+" "+e.className),n}({className:"live-comps",key:"liveComps",style:{height:this.calculateTotalSectionHeight()+"px"}},this.props),e.createElement("div",{key:this.props.id,ref:"sectionLiveSiteWrapper"+this.props.id,className:"section-live-site-wrapper",style:this.getStyleProps()},e.createElement(s.santaPreviewContainer,{rootUrl:window.santaBase,languageCode:o.languages.getLanguageCode(),ref:"santaPreview"+this.props.id,key:"santaPreview"+this.props.id,preview:this.getLiveCompsComponentsDef,onSiteReady:this.onSiteReadyUpdateLayout,extraEventsHandlers:this.getExtraEventHandles(),getColorToReplaceIfNeeded:a.getColorTeReplaceIfNeeded})))}}),define("addPanelInfra/sections/liveComponentsSections/liveComponentSection",["create-react-class","lodash","addPanelInfra/sections/mixins/bubbleOnHoverMixin","addPanelInfra/sections/liveComponentsSections/liveComponentSectionMixin","addPanelInfra/sections/mixins/preventDoubleClickMixin","addPanelInfra/sections/liveComponentsSections/liveComponentSection.rt"],function(e,t,i,n,o,s){"use strict";return e({displayName:"liveComponentSection",mixins:[n,i,o],onMouseDownCapture:function(e){if(this.isAnotherMouseActionAllowed(e)&&!t.includes(e.target.className,"info-icon")&&t.isFunction(this.props.onItemDrag)){"INPUT"!==e.target.nodeName&&"TEXTAREA"!==e.target.nodeName||e.target.blur();var i=this.getCompDataByXY(e.clientX,e.clientY);i&&(i.section="live",this.props.onItemDrag(e,i))}},onClickCapture:function(e){if(this.isAnotherMouseActionAllowed(e)&&!t.includes(e.target.className,"info-icon")){"INPUT"!==e.target.nodeName&&"TEXTAREA"!==e.target.nodeName||e.target.blur();var i=this.getCompDataByXY(e.clientX,e.clientY);i&&(this.props.onClick(i.structure,this.props.title,""),this.setClickTimeStamp(e)),e.stopPropagation(),e.preventDefault()}},onMouseUp:function(e){this.getEditorAPI().mouseActions.onMouseUp(e)},getExtraEventHandles:function(){return{onClickCapture:this.onClickCapture,onMouseDownCapture:this.onMouseDownCapture,onMouseMove:this.showBubbleOnMouseMove,onMouseLeave:this.hideBubbleOnMouseLeave,onMouseUp:this.onMouseUp}},render:s})}),define("addPanelInfra/sections/liveComponentsSections/designPanelLiveComponentSection.rt",["react","lodash","addPanelInfra/sections/sectionWrapper","util","core","symbols","santaPreview","addPanelInfra/sections/liveComponentsSections/liveComponentStyleAdjuster"],function(e,t,i,n,o,s,a,r){"use strict";return function(){function o(i,o){return e.createElement("div",{key:i,"data-styleId":this.getStyleId(i),style:this.getItemStyle(i),className:t(this.getItemClass(i)).transform(function(e,t,i){t&&e.push(i)},[]).join(" "),onMouseEnter:function(e,t){this.onItemHover(e)}.bind(this,i,o),onMouseLeave:function(e,t){this.onMouseLeave(e)}.bind(this,i,o),onClick:function(e,t){this.onItemClick(e)}.bind(this,i,o)},this.isSelectedItem(i)?e.createElement(s.symbol,{key:"selectedItem",name:"selectedItemDesignPanel",style:this.getSelectedItemSelectBoxStyle(i)}):null,this.getItemText(i)?function(t,i){var o=this.getItemText(t);return e.createElement("div",{key:"itemText",style:this.getItemTextStyle(t)},e.createElement("span",{},n.translate(o)))}.apply(this,[i,o]):null)}return t.isEmpty(this.props.stylesForSection)||this.props.hide?null:e.createElement(i,function(e,i){var n=t.assign({},e,i);return e.hasOwnProperty("style")&&(n.style=t.defaults(n.style,e.style)),e.hasOwnProperty("className")&&i.hasOwnProperty("className")&&(n.className=i.className+" "+e.className),n}({className:"live-comps",key:"liveComps",style:{height:this.calculateTotalSectionHeight()+"px"},sectionFooter:!1},this.props),e.createElement("div",{key:this.props.id,ref:"sectionLiveSiteWrapper"+this.props.id,className:"section-live-site-wrapper",style:this.getStyleProps(),onClickCapture:this.onClick},e.createElement(a.santaPreviewContainer,{rootUrl:window.santaBase,languageCode:n.languages.getLanguageCode(),ref:"santaPreview"+this.props.id,key:"santaPreview"+this.props.id,preview:this.getLiveCompsComponentsDef,onSiteReady:this.onSiteReadyUpdateLayout,getColorToReplaceIfNeeded:r.getColorTeReplaceIfNeeded}),this.state.layoutDone?e.createElement.apply(this,["div",{className:"section-live-site-block-layer",key:"blockLayer"},t.map(this.getSectionItemsKeys(),o.bind(this))]):null))}}),define("addPanelInfra/sections/liveComponentsSections/designPanelLiveComponentSection",["create-react-class","core","lodash","addPanelInfra/sections/liveComponentsSections/liveComponentSectionMixin","addPanelInfra/addPanel/componentsDefaultData","addPanelInfra/sections/liveComponentsSections/designPanelLiveComponentSection.rt"],function(e,t,i,n,o,s){"use strict";return e({displayName:"designPanelLiveComponentSection",mixins:[n,t.mixins.editorAPIMixin],onItemClick:function(e){var t=this.getCompDataByItemKey(e);t&&this.props.onClick(t,this.props.title,"",e)},onItemHover:function(e){var t=this.getCompDataByItemKey(e);t&&this.props.onMouseEnter&&this.props.onMouseEnter(t,e)},onMouseLeave:function(e){this.props.onMouseLeave&&this.props.onMouseLeave(e)},getSectionItemsKeys:function(){return i.keys(this.elementsPositionInSection)},getItemStyle:function(e){var t=this.elementsPositionInSection[e],i=o.getComponentDefault(t.key,this.props.parentType);return{left:t.compPosition.x-(i.addClickArea?i.addClickArea/2:0),top:t.compPosition.y,width:t.width+(i.addClickArea?i.addClickArea:0),height:t.height}},getSelectedItemSelectBoxStyle:function(e){var t=this.props.props.scaleProportion.x,i=this.elementsPositionInSection[e],n=o.getComponentDefault(i.key,this.props.parentType);return{top:-12/t,right:-12/t+(n.addClickArea?n.addClickArea/2:0),width:24/t,height:24/t}},getItemProps:function(e){var t=this.elementsPositionInSection[e];return this.props.getAdditionalElementProps&&this.props.getAdditionalElementProps(t)},getItemClass:function(e){var t=this.getItemProps(e),i={"section-live-site-item":!0,"design-panel-selected-item":this.isSelectedItem(e),"section-scaled-in-half":.5===this.props.props.scaleProportion.x};return t&&t.className&&(i[t.className]=!0),i},getItemText:function(e){var t=this.getItemProps(e);return t&&t.text},getItemTextStyle:function(e){return{lineHeight:this.elementsPositionInSection[e].height+"px",fontSize:14/this.props.props.scaleProportion.x}},getStyleId:function(e){var t=e.split("."),i=t[t.length-1];return i?i.substring(i.indexOf("_")+1):""},isSelectedItem:function(e){if(this.props.selectedItemKey)return i.includes(this.props.selectedItemKey,e);var t=this.elementsPositionInSection[e];return!!this.props.isSelectedItem&&this.props.isSelectedItem(t)},render:s})}),define("addPanelInfra/sections/liveComponentsSections/liveSectionLoaderMixin",["lodash","addPanelDataConsts","addPanelInfra/sections/liveComponentsSections/liveSectionLoader.rt","addPanelInfra/sections/liveComponentsSections/liveComponentSection","addPanelInfra/sections/liveComponentsSections/designPanelLiveComponentSection"],function(e,t,i,n,o){"use strict";var s=n,a={};return a[t.PANEL_TYPES.ADD_PANEL]=n,a[t.PANEL_TYPES.DESIGN_PANEL]=o,{getInitialState:function(){return{stylesForSection:this.getStylesForSection()}},getLiveSection:function(){return a[this.props.parentType]||s},componentWillReceiveProps:function(t){e.isEqual(this.props.props.compTypes,t.props.compTypes)||this.setState({stylesForSection:this.getStylesForSection()})},getPropsForLiveSection:function(){return e.assign({stylesForSection:this.state.stylesForSection},this.props)},render:i}}),define("addPanelInfra/sections/liveComponentsSections/themeSection",["create-react-class","core","lodash","addPanelInfra/addPanel/addPanelStyleManager","addPanelInfra/addPanel/componentsDefaultData","addPanelInfra/sections/liveComponentsSections/liveSectionLoaderMixin"],function(e,t,i,n,o,s){"use strict";return e({displayName:"themeSection",mixins:[s,t.mixins.editorAPIMixin],getStylesForSection:function(){var e=[],t=this.getEditorAPI(),s=this.props.parentType;return i.forEach(this.props.props.compTypes,function(a){if(o.getComponentDefault(a,s)){var r=i.map(n.getComponentThemeStyles(a,t.theme,t.components),"id");r&&0!==r.length&&i.forEach(r,function(t){e.push({styleId:t,compType:a})})}}),e}})}),define("addPanelInfra/sections/liveComponentsSections/personalizedSection",["create-react-class","lodash","addPanelInfra/addPanel/componentsDefaultData","core","addPanelInfra/sections/liveComponentsSections/liveSectionLoaderMixin"],function(e,t,i,n,o){"use strict";return e({displayName:"personalizedSection",mixins:[o,n.mixins.editorAPIMixin],getStylesForSection:function(){var e=[],o=this.getEditorAPI(),s=this.props.parentType,a=this.props.compTypes||this.props.props.compTypes;return t.forEach(a,function(a){var r=i.getComponentDefault(a,s);if(r){var l=r.componentTypeSkinOverride||r.componentType||a,d=n.styleManager.getUniqueCustomStyleList(o.theme,o.components,l);d&&0!==d.length&&(d=t.take(d,24),t.forEach(d,function(t){e.push({styleId:t.id,compType:a})}))}}),e}})}),define("addPanelInfra/sections/designSections/designDataPresetSection",["react","react-dom-factories","create-react-class","lodash","core","util","addPanelDataConsts","symbols","addPanelInfra/sections/sectionWrapper"],function(e,t,i,n,o,s,a,r,l){"use strict";return i({mixins:[o.mixins.editorAPIMixin],displayName:"designDataPresetSection",getInitialState:function(){return{items:this.getItems()}},getItemClassName:function(e){var t="design-data-preset-item";return e.empty&&(t+=" empty-preset"),t},getItemProps:function(e,t){return{key:"designDataPresetItem",className:this.getItemClassName(e),style:n.assign({},this.renderDesign(e.design)),onClick:n.partial(this.props.onClick,e,t),onMouseEnter:n.partial(this.props.onMouseEnter,e,t),onMouseLeave:n.partial(this.props.onMouseLeave,e,t)}},getItemChildren:function(e){if(e.empty)return"No Style"},isSelectedItem:function(e){return!!this.props.isSelectedItem&&this.props.isSelectedItem(e,this.props.type)},getPresetItems:function(){var e=this.getEditorAPI().theme.colors.getAll(),t=this.props.props.items;return n.forEach(t,function(t){s.designData.updateThemeColors(t.structure.design,e)}),n.map(t,"structure")},getPersonalizedDesignItems:function(){return o.designManager.getPersonalizedDesigns(this.getEditorAPI(),this.props.compTypes)},getItems:function(){var e=a.SECTIONS_TYPES;switch(this.props.type){case e.DESIGN_DATA_PRESET:case e.DESIGN_DATA_THEME_PRESET:return this.getPresetItems();case e.PERSONALIZED_DESIGN:return this.getPersonalizedDesignItems()}},renderItems:function(i){return n.map(i,n.bind(function(i){var n="themeDesignSectionItem"+i.design.charas,o=this.getItemProps(i,n),s=this.getItemChildren(i),a=[t.div(o,s)];return this.isSelectedItem(i)&&!i.empty&&a.push(e.createElement(r.symbol,{key:"selectedItem",name:"selectedItemDesignPanel",style:{position:"absolute",top:"-12px",right:"-12px"}})),t.div({className:"design-data-preset-item-wrapper",key:n},a)},this))},render:function(){var t=this.state.items;return 0===t.length?null:e.createElement(l,n.assign({key:"designDataPresets",className:this.props.props.class||""},this.props),e.createElement("div",{className:"design-data-preset-items-container"},this.renderItems(t)))}})}),define("addPanelInfra/sections/mixins/imageFallbackMixin",["util"],function(e){"use strict";var t=new RegExp("_"+e.languages.getLanguageCode(),"g");return{getFallbackImage:function(e){return e?e.replace(t,"_en"):""}}}),define("addPanelInfra/sections/presetSection/presetItemVideoMixin",["reactDOM","util","addPanelDataConsts"],function(e,t,i){"use strict";function n(){return t.serviceTopology.editorAssetsBaseUrl}return{getInitialState:function(){return{videoPlaying:!1}},getVideoPosterSrc:function(){return n()+"image/"+this.props.preset.video.poster},hasVideo:function(){return this.props.hoverImageAction===i.HOVER_IMAGE_ACTIONS.VIDEO&&!!this.props.preset.video},playVideo:function(){var i=e.findDOMNode(this.refs.video),o=n()+"video/"+this.props.preset.video.source;!function(e,t){e.addEventListener("timeupdate",t)}(i,this.onStartedPlaying),i.readyState===i.HAVE_NOTHING&&(i.src=function(e){return e+(t.browserUtil.getDevicePixelRatio()>=2?"-@2x":"")+".mp4"}(o),i.load()),i.play()},pauseVideo:function(){var i=e.findDOMNode(this.refs.video);!function(e,t){e.removeEventListener("timeupdate",t)}(i,this.onStartedPlaying),this.setState({videoPlaying:!1}),window.requestAnimationFrame(function(){i.pause(),t.browserUtil.isIE()?i.readyState>=i.HAVE_CURRENT_DATA&&(i.currentTime=0):i.src="http://"})},isVideoReady:function(e){return e.readyState!==e.HAVE_NOTHING},componentDidMount:function(){this.mounted=!0},componentWillUnmount:function(){this.mounted=!1},onStartedPlaying:function(e){this.state.videoPlaying||function(e){var t=e.target;return!t.paused&&t.currentTime>0}(e)&&window.requestAnimationFrame(function(){if(this.mounted){e.target.currentTime=0,this.setState({videoPlaying:!0})}}.bind(this))}}}),define("addPanelInfra/sections/presetSection/presetItem.rt",["react","lodash","util","baseUI","symbols"],function(e,t,i,n,o){"use strict";return function(){return e.createElement("div",{ref:this.props.id,draggable:"false",className:t(this.getClassSet()).transform(function(e,t,i){t&&e.push(i)},[]).join(" "),"data-comp":this.props.structure.componentType,style:this.getItemStyle(),onClick:this.onClick,onMouseDown:this.onMouseDown,onMouseEnter:function(){this.onMouseEnter()}.bind(this),onMouseLeave:function(){this.onMouseLeave()}.bind(this)},this.hasVideo()?e.createElement("video",{ref:"video",muted:"true",className:"video "+(this.state.videoPlaying?"":"videoPaused"),key:"video",width:this.props.preset.rect.width,height:this.props.preset.rect.height,loop:"true"}):null,this.props.liveTextToShow?e.createElement("div",{key:"live-text"},e.createElement("span",{style:this.getLiveTextStyle()},i.translate(this.props.liveTextToShow))):null,this.showLabel()?e.createElement("label",{key:"label",className:"preset-item-label "+this.props.labelMode+" "+(this.props.preset.labelClasses||"")},i.translate(this.props.preset.label)):null,this.hasInfoIcon()?e.createElement("div",{className:t({"info-wrapper":!0,"has-label":"none"!==this.props.labelMode}).transform(function(e,t,i){t&&e.push(i)},[]).join(" "),key:"infoIcon"},e.createElement(n.infoIcon,this.getInfoIcon())):null,this.props.symbolName?e.createElement(o.symbol,{key:"symbolKey",name:this.props.symbolName}):null,this.props.text?e.createElement("div",{key:"itemText",style:{lineHeight:this.props.preset.rect.height+"px"}},e.createElement("span",{},i.translate(this.props.text))):null)}}),define("addPanelInfra/sections/presetSection/presetItem",["reactDOM","create-react-class","prop-types","lodash","util","core","addPanelDataConsts","addPanelInfra/sections/presetSection/presetItemVideoMixin","addPanelInfra/sections/mixins/preventDoubleClickMixin","addPanelInfra/sections/mixins/imageFallbackMixin","addPanelInfra/sections/presetSection/presetItem.rt"],function(e,t,i,n,o,s,a,r,l,d,p){"use strict";var c=s.utils.mediaManagerPresetUtil;return t({displayName:"presetItem",mixins:[s.mixins.editorAPIMixin,r,l,d],propTypes:{preset:i.shape({rect:i.shape({x:i.number.isRequired,y:i.number.isRequired,width:i.number.isRequired,height:i.number.isRequired}).isRequired,label:i.string,video:i.shape({poster:i.string,source:i.string.isRequired})}).isRequired,labelMode:i.oneOf([a.LABEL_BEHAVIOUR.ALWAYS,a.LABEL_BEHAVIOUR.HOVER,a.LABEL_BEHAVIOUR.NONE]).isRequired,infoIcon:i.oneOfType([i.shape({title:i.string,text:i.string}),i.bool]),symbolName:i.string,image:i.string.isRequired,imageHover:i.string,onClick:i.func.isRequired,onMouseEnter:i.func,id:i.string.isRequired,structure:i.object.isRequired,sectionTitle:i.string.isRequired,appDefinitionId:i.string,overrideClass:i.string},getInitialState:function(){return{hover:!1}},onClick:function(e){if(this.isAnotherMouseActionAllowed(e)){var t=this.getEditorAPI(),i=n.get(this.props,["mediaManager","path"]);c.storePath(t,c.getIdByDataType(this.props.structure),i),this.props.onClick(this.getItemData(),this.props.sectionTitle,this.props.preset.tags||"",this.props.id,t,{appDefinitionId:this.props.appDefinitionId})}this.setClickTimeStamp(e)},onMouseEnter:function(e){this.hasVideo()?this.playVideo():this.props.onMouseEnter?this.props.onMouseEnter(this.props.structure,this.props.id):this.setState({hover:!0},e),this.props.itemHoverCallback&&this.props.itemHoverCallback(this.props.itemHoverArg)},onMouseLeave:function(e){this.hasVideo()?this.pauseVideo():this.props.onMouseLeave?this.props.onMouseLeave(this.props.id):this.setState({hover:!1},e)},onMouseDown:function(e){e.preventDefault(),n.isFunction(this.props.onItemDrag)&&this.isAnotherMouseActionAllowed(e)&&this.props.onItemDrag(e,{rect:this.getDOMDimensions(),structure:this.getItemData(),mediaManager:this.props.mediaManager,section:"preset",appDefinitionId:this.props.appDefinitionId,sectionTitle:this.props.sectionTitle,categoryId:this.props.categoryId,itemId:this.props.id,onDrop:this.props.onDrop,tags:this.props.preset.tags})},getDOMDimensions:function(){return n.pick(e.findDOMNode(this).getBoundingClientRect(),["left","top","width","height"])},getItemStyle:function(){var e=this.props.preset.rect,t={width:e.width};return this.props.liveTextToShow||(t={left:e.x,top:e.y,width:e.width,height:e.height}),this.state.hover?(t.backgroundPosition=-1*e.x+"px "+-1*e.y+"px",t.backgroundRepeat="no-repeat",this.props.hoverImageAction===a.HOVER_IMAGE_ACTIONS.IMAGE&&(t.backgroundImage="url('"+o.media.getMediaUrl(this.props.imageHover,this.getFallbackImage(this.props.imageHover))+"')")):t.background="",t},getItemData:function(){var e=n.cloneDeep(this.props.structure);if(!e.style||!n.isString(e.style)){var t=this.getEditorAPI();e.style=e.styleId||s.styleManager.getStyleIdByDef(t.theme,t.components,e.style,e.componentType)}return e},getClassSet:function(){var e={"preset-item":!0};return this.props.className&&(e[this.props.className]=!0),this.props.overrideClass&&(e[this.props.overrideClass]=!0),e},hasInfoIcon:function(){return!!this.props.infoIcon},getHelp:function(){return this.getEditorAPI()?this.getEditorAPI().panelManager.openHelpCenter:""},getInfoIcon:function(){return n.assign({width:a.CATEGORY_VIEW.TOTAL_WIDTH,openHelp:this.getHelp()},this.props.infoIcon)},showLabel:function(){return this.props.labelMode!==a.LABEL_BEHAVIOUR.NONE},getLiveTextStyle:function(){var e=this.getEditorAPI(),t=this.props.themeName,i=e.theme.fonts.getMap(),o=n(i).reject(function(e,t){return n.includes(["font_1","font_10"],t)}).map(function(e){return n.parseInt(e.size)}).sort().value(),s=n.get(i,t);return{fontWeight:s.weight,fontFamily:s.family+","+s.fontWithFallbacks,fontSize:function(e){var t=n.min(o),i=n.max(o);return n.ceil(14+22*(e-t)/(i-t))}(parseInt(s.size,10)),fontStyle:s.style}},render:p})}),define("addPanelInfra/sections/presetSection/presetSection.rt",["react","lodash","addPanelInfra/sections/sectionWrapper","addPanelInfra/sections/presetSection/presetItem","experiment"],function(e,t,i,n,o){"use strict";return function(){return e.createElement(i,t.assign({},{className:this.getCssClasses()},this.getSectionWrapperProps()),e.createElement("div",{className:t(this.getSectionClasses()).transform(function(e,t,i){t&&e.push(i)},[]).join(" "),ref:"itemsWrapper",style:this.getSectionDimensions(this.props.additionalScaling||1),onMouseEnter:function(){this.showHintForDisabledSection()}.bind(this),onMouseMove:function(e){"ADD_PANEL"===this.props.parentType&&this.showBubbleOnMouseMove(e)}.bind(this),onMouseLeave:function(e){this.hideBubbleOnMouseLeave(e)}.bind(this)},e.createElement("div",{className:t(this.getItemClasses()).transform(function(e,t,i){t&&e.push(i)},[]).join(" "),style:this.getSectionItemsStyle()},this.props.props.image?e.createElement("img",function(e,i){var n=t.assign({},e,i);return e.hasOwnProperty("style")&&(n.style=t.defaults(n.style,e.style)),e.hasOwnProperty("className")&&i.hasOwnProperty("className")&&(n.className=i.className+" "+e.className),n}({style:this.getImageSectionStyle(),ref:"sectionImage",key:"section_image"},this.getSectionImageProps())):null,"\n            ",this.getPresetItems(),"\n        ")))}}),define("addPanelInfra/sections/presetSection/presetAreaItem.rt",["react","lodash"],function(e,t){"use strict";return function(){return e.createElement("area",{ref:this.props.id,className:"preset-area-item",draggable:"false",href:"#","data-comp":this.props.structure.componentType,onClick:this.onClick,onMouseDown:this.onMouseDown,onMouseEnter:function(){this.onMouseEnter()}.bind(this),onMouseLeave:function(){this.onMouseLeave()}.bind(this),shape:this.props.preset.shape.name,coords:this.props.preset.shape.coords})}}),define("addPanelInfra/sections/presetSection/presetAreaItem",["create-react-class","prop-types","lodash","util","core","addPanelDataConsts","addPanelInfra/sections/mixins/preventDoubleClickMixin","addPanelInfra/sections/mixins/imageFallbackMixin","addPanelInfra/sections/presetSection/presetAreaItem.rt"],function(e,t,i,n,o,s,a,r,l){"use strict";var d=o.utils.mediaManagerPresetUtil;return e({displayName:"presetAreaItem",mixins:[o.mixins.editorAPIMixin,a,r],propTypes:{preset:t.shape({rect:t.shape({x:t.number.isRequired,y:t.number.isRequired,width:t.number.isRequired,height:t.number.isRequired}).isRequired,shape:t.shape({name:t.string.isRequired,coords:t.string.isRequired}).isRequired}).isRequired,image:t.string.isRequired,imageHover:t.string,onClick:t.func.isRequired,onMouseEnter:t.func,id:t.string.isRequired,structure:t.object.isRequired,sectionTitle:t.string.isRequired,overrideClass:t.string,getImagePosition:t.func.isRequired},getInitialState:function(){return{hover:!1}},onClick:function(e){if(e.preventDefault(),this.isAnotherMouseActionAllowed(e)){var t=this.getEditorAPI(),n=i.get(this.props,["mediaManager","path"]);d.storePath(t,d.getIdByDataType(this.props.structure),n),this.props.onClick(this.getItemData(),this.props.sectionTitle,this.props.preset.tags||"",this.props.id,t)}this.setClickTimeStamp(e)},onMouseEnter:function(e){this.props.onMouseEnter?this.props.onMouseEnter(this.props.structure,this.props.id):this.setState({hover:!0},e),this.props.itemHoverCallback&&this.props.itemHoverCallback(this.props.itemHoverArg)},onMouseLeave:function(e){this.props.onMouseLeave?this.props.onMouseLeave(this.props.id):this.setState({hover:!1},e)},onMouseDown:function(e){e.preventDefault(),i.isFunction(this.props.onItemDrag)&&this.isAnotherMouseActionAllowed(e)&&this.props.onItemDrag(e,{rect:this.getNormalizedRectValues(this.props.preset.rect),structure:this.getItemData(),mediaManager:this.props.mediaManager,section:"preset",sectionTitle:this.props.sectionTitle,categoryId:this.props.categoryId,itemId:this.props.id,onDrop:this.props.onDrop,tags:this.props.preset.tags})},getNormalizedRectValues:function(e){var t=this.props.getImagePosition();return{width:e.width,height:e.height,top:e.y+t.top,left:e.x+t.left}},getItemStyle:function(){var e=this.props.preset.rect,t={width:e.width};return this.props.liveTextToShow||(t={left:e.x,top:e.y,width:e.width,height:e.height}),this.state.hover?(t.backgroundPosition=-1*e.x+"px "+-1*e.y+"px",t.backgroundRepeat="no-repeat",this.props.hoverImageAction===s.HOVER_IMAGE_ACTIONS.IMAGE&&(t.backgroundImage="url('"+n.media.getMediaUrl(this.props.imageHover,this.getFallbackImage(this.props.imageHover))+"')")):t.background="",t},getItemData:function(){var e=i.cloneDeep(this.props.structure),t=this.getEditorAPI();return e.style&&i.isString(e.style)||(e.style=e.styleId||(e.style?o.styleManager.getStyleIdByDef(t.theme,t.components,e.style,e.componentType):"")),e},render:l})}),define("addPanelInfra/sections/mixins/hintForDisabledSectionMixin",["constants"],function(e){"use strict";return{showHintForDisabledSection:function(){if(this.props.isDisabled){var t=this.refs.itemsWrapper.getBoundingClientRect(),i=this.getEditorAPI(),n={classPath:this.props.onHoverDisabledTooltipClassPath,props:{}},o={height:0,width:0,top:t.top,left:t.right},s={noArrow:!0,shake:!0,behindPopUps:!0,alignment:e.UI.TOOLTIP.ALIGNMENT.RIGHT,timeoutForMouseOverBubble:1e4,closeTriggers:["onMouseLeave"]};i.showFloatingBubble(n,o,s,!0)}}}}),define("addPanelInfra/sections/presetSection/presetSection",["react","create-react-class","prop-types","reactDOM","lodash","util","addPanelDataConsts","addPanelInfra/sections/mixins/bubbleOnHoverMixin","addPanelInfra/sections/mixins/imageFallbackMixin","addPanelInfra/sections/presetSection/presetSection.rt","addPanelInfra/sections/presetSection/presetItem","addPanelInfra/sections/presetSection/presetAreaItem","addPanelInfra/sections/mixins/hintForDisabledSectionMixin"],function(e,t,i,n,o,s,a,r,l,d,p,c,u){"use strict";return t({displayName:"presetSection",mixins:[r,l,u],propTypes:{hide:i.bool.isRequired,id:i.string.isRequired,props:i.shape({items:i.arrayOf(i.object)}).isRequired,additionalBehaviours:i.shape({labelMode:i.oneOf(o.values(a.LABEL_BEHAVIOUR)).isRequired,infoIcon:i.oneOf(o.values(a.INFO_ICON_BEHAVIOUR)).isRequired,hoverImageAction:i.oneOf(o.values(a.HOVER_IMAGE_ACTIONS)).isRequired}).isRequired,showSectionHeader:i.bool.isRequired,title:i.string.isRequired,type:i.string.isRequired,additionalScaling:i.number,appDefinitionId:i.string,getAdditionalItemProps:i.func},getOnClick:function(){return this.props.props.onClick||this.props.onClick},getItemProps:function(e,t){var i=this.props.additionalBehaviours.infoIcon===a.INFO_ICON_BEHAVIOUR.HOVER,n=this.props.additionalBehaviours.iconEnabledForComps[e.structure.componentType],s=o.isFunction(n)?n(e.structure.data):n,r=o.assign({},e,{onClick:this.props.props.onClick||e.onClick||this.props.onClick,onDrop:this.props.props.onDrop||this.props.onDrop||e.onDrop,onItemDrag:this.props.onItemDrag,appDefinitionId:this.props.appDefinitionId,labelMode:this.props.additionalBehaviours.labelMode,hoverImageAction:this.props.additionalBehaviours.hoverImageAction,scaleProportion:this.props.additionalBehaviours.scaleProportion,infoIcon:i&&o.assign(s,{mouseEnterCallback:this.hideBubble}),image:this.props.props.image,imageHover:this.props.props.imageHover,sectionTitle:this.props.title,categoryId:this.props.categoryId,itemHoverCallback:this.props.itemHoverCallback,itemHoverArg:{sectionIndex:this.props.sectionIndex,sectionTitle:this.props.title,itemIndex:t},overrideClass:this.props.overrideClass,getImagePosition:this.getImagePosition},this.props.getAdditionalItemProps&&this.props.getAdditionalItemProps(e));return this.props.onMouseEnter&&(r.onMouseEnter=this.props.onMouseEnter),this.props.onMouseLeave&&(r.onMouseLeave=this.props.onMouseLeave),e.shape&&(r.shape=o.clone(e.shape)),r},getSectionDimensions:function(e){var t=function(e){return o.reduce(e,function(e,t){var i=t.preset.rect;return e.width=Math.max(e.width,i.x+i.width),e.height=Math.max(e.height,i.y+i.height),e},{width:0,height:0})}(this.props.props.items);return this.props.isImageSection?{}:{width:t.width*(e||1),height:t.height*(e||1)}},isRetinaImage:function(){var e=o.get(this.props,["props","retinaImage"]);return s.browserUtil.getDevicePixelRatio()>=2&&e},getImageSectionStyle:function(){if(this.isRetinaImage()){var e=o.get(this.props,["props","retinaImage","dimensions"]);return{width:e.width/2,height:e.height/2}}return o.get(this.props,["props","imageStyle"],{})},getSectionItemsStyle:function(){var e=this.getSectionDimensions();if(this.props.additionalScaling&&!this.props.isImageSection){var t="scale("+this.props.additionalScaling+","+this.props.additionalScaling+")";e.WebkitTransform=t,e.msTransform=t,e.transform=t,e.msTransformOrigin="0 0",e.WebkitTransformOrigin="0 0",e.transformOrigin="0 0",e.WebkitBackfaceVisibility="hidden",e.backfaceVisibility="hidden"}return e},getSectionImageSrc:function(){var e=void 0;return e=this.isRetinaImage()?o.get(this.props,["props","retinaImage","src"]):o.get(this.props,["props","image"]),s.media.getMediaUrl(e,this.getFallbackImage(e))},showLabels:function(){return"none"!==this.props.additionalBehaviours.labelMode},showFooter:function(){return this.props.sectionFooter&&!this.props.sectionFooter.hide},getSectionClasses:function(){return{"items-wrapper":!0,"image-items-wrapper":this.props.isImageSection}},getCssClasses:function(){var e=this.showFooter(),t=this.showLabels(),i={"section-wrapper":!0,"preset-section":!0,"no-space-before-section":!this.props.showSectionHeader,"no-header-sibling":this.showSiblingHeader(),"with-footer":e,"without-footer":!e,"with-labels":t,"without-labels":!t};return o.keys(o.pickBy(i,Boolean)).join(" ")},showSiblingHeader:function(){var e=this.props.nextSibling;return e&&e.type===a.SECTIONS_TYPES.PRESET&&!e.showSectionHeader},getSectionWrapperProps:function(){return this.props.sectionFooter?o.merge({},this.props,{sectionFooter:{sectionTitle:this.props.title,onClick:this.getOnClick()}}):this.props},getImagePosition:function(){return this.refs.sectionImage?o.pick(n.findDOMNode(this.refs.sectionImage).getBoundingClientRect(),["left","top"]):null},getSectionImageProps:function(){var e={src:this.getSectionImageSrc()};return o.get(this.props,["props","items",0,"preset","shape"])&&(e.useMap="#"+this.props.id),e},getPresetItems:function(){var t=o.get(this.props,["props","items",0,"preset","shape"])?c:p,i=o.map(this.props.props.items,o.bind(function(i,n){return e.createElement(t,o.assign({},{key:i.id},this.getItemProps(i,n)))},this));return t===c?e.createElement("map",{name:this.props.id},i):i},getItemClasses:function(){return{items:!0,"has-label":this.showLabels(),"disabled-preset-section":this.props.isDisabled}},render:d})}),define("addPanelInfra/sections/listSection/listSection.rt",["react","lodash","baseUI","experiment","addPanelInfra/sections/sectionWrapper"],function(e,t,i,n,o){"use strict";return function(){return e.createElement(o,t.assign({},{className:"list-section"},this.props),e.createElement.apply(this,["div",{className:"items"},t.map(this.props.props.items,function(n,o){return e.createElement(i.listItemWithImage,t.assign({},{key:n.title+o},this.getItemProps(n)))}.bind(this))]))}}),define("addPanelInfra/sections/listSection/listSection",["create-react-class","prop-types","core","util","lodash","addPanelInfra/sections/listSection/listSection.rt"],function(e,t,i,n,o,s){"use strict";return e({displayName:"listSection",mixins:[i.mixins.editorAPIMixin],propTypes:{callback:t.func.isRequired,shouldBeDisabled:t.func,getDisabledToolTip:t.func},getItemImageUrl:function(e){var t=e.image;return this.isDisabled(e)&&(t=e.disabledImage),n.media.getMediaUrl(t)},getTooltip:function(e){return this.isDisabled(e)?this.props.getDisabledToolTip(e):e.tooltip},isDisabled:function(e){return!!e.disabledImage&&this.props.shouldBeDisabled&&this.props.shouldBeDisabled(e)},getItemProps:function(e){return{url:this.getItemImageUrl(e),title:e.title,desc:e.desc,symbol:e.symbol,callback:this.props.callback.bind(null,e),disabled:this.isDisabled(e),tooltip:this.getTooltip(e)}},render:s})}),define("addPanelInfra/sections/listSection/imageSection.rt",["react","lodash","addPanelInfra/sections/listSection/listSection"],function(e,t,i){"use strict";return function(){return e.createElement(i,t.assign({},{callback:this.onItemClick},this.props))}}),define("addPanelInfra/sections/listSection/imageSection",["create-react-class","lodash","core","stateManagement","coreBi","addPanelInfra/sections/listSection/imageSection.rt"],function(e,t,i,n,o,s){"use strict";return e({displayName:"imageSection",mixins:[i.mixins.editorAPIMixin],onItemClick:function(e){var t=this,i=this.getEditorAPI(),n=i.mediaServices;i.bi.event(o.events.addPanel.ADD_MENU_IMAGE_SECTION_BUTTON_CLICK,{section:this.props.title,sub_section:e.biItemName}),n.mediaManager.open(n.mediaManager.categories[e.category||"IMAGE"],{multiSelect:!0,callback:function(i,o){t.onItemsSelected(e.compType,i,o),n.setFocusToEditor()},path:e.path,translation:e.translation})},onItemsSelected:function(e,i,o){if(i){var s=this.getEditorAPI(),a=n.editorPlugins.userPreferences.actions.setSessionUserPreferences,r=s.store.dispatch;t.forEach(i,t.bind(function(t){r(a("last_media_path_"+t.fileName,o.path)),this.addCompFromImageItem(e,t)},this))}},addCompFromImageItem:function(e,t){this.props.onClick(function(e,t){var i=Math.min(600,t.width);return{componentType:e||"wysiwyg.viewer.components.WPhoto",layout:{width:i,height:i*t.height/t.width},data:{width:t.width,height:t.height,alt:"",uri:t.fileName,type:"Image",description:""}}}(e,t),this.props.title,"")},render:s})}),define("addPanelInfra/sections/listSection/dataSection.rt",["react","lodash","addPanelInfra/sections/listSection/listSection"],function(e,t,i){"use strict";return function(){return e.createElement(i,t.assign({},{shouldBeDisabled:this.isDisabled,getDisabledToolTip:this.getDisabledToolTip,callback:this.onItemClick},this.props))}}),define("addPanelInfra/sections/listSection/dataSection",["lodash","create-react-class","core","platform","addPanelDataConsts","tpa","addPanelInfra/sections/listSection/dataSection.rt"],function(e,t,i,n,o,s,a){"use strict";return t({displayName:"dataSection",mixins:[i.mixins.editorAPIMixin],onItemClick:function(t){var i=this.getEditorAPI(),a=i.documentServices.platform.getAppDataByAppDefId(i.documentServices.platform.editorApps.DATA_BINDING.appDefId);switch(t.action){case o.CLICK_ACTION.DATA.ADD_COLLECTION:var r=n.constants.EVENTS.createCollectionButtonClicked;i.documentServices.platform.notifyApplication(a.applicationId,{eventType:r,eventPayload:{origin:"add_panel"}});break;case o.CLICK_ACTION.DATA.ADD_DATASET:this.props.onClick(t.structure);break;case o.CLICK_ACTION.DATA.INSTALL_APP_AND_NOTIFY:return Promise.resolve().then(function(){return function(t,i){return new Promise(function(o,a){t.platform.isPlatformAppInstalled(i)&&o(t.platform.getAppDataByAppDefId(i));var r=s.constants.BI.initiator.EDITOR,l=s.constants.APP.TYPE.PLATFORM_ONLY,d={originType:s.constants.BI.type.ADD_APP_ADD_PANEL},p={initiator:n.constants.ORIGIN.INITIATOR.EDITOR,info:{type:n.constants.ORIGIN.TYPE.ADD_PANEL}};s.services.tpaAddAppService.addApp(t,i,null,null,l,r,!1,{},d,function(t){return e.get(t,"success")?o(t):a(t)},p)})}(i,t.appDefinitionId)}).then(function(){return function(e,t,i){var n=e.platform.getAppDataByAppDefId(t);e.documentServices.platform.notifyApplication(n.applicationId,{eventType:o.CLICK_ACTION.EVENT.APP_CLICKED,eventPayload:i})}(i,t.appDefinitionId,t.params)});case o.CLICK_ACTION.DATA.ADD_DP_DATASET:var l=i.documentServices.pages.getPrimaryPageId();i.documentServices.platform.notifyApplication(a.applicationId,{eventType:"addDynamicPageClicked",eventPayload:{pageRef:i.documentServices.pages.getReference(l),origin:"add_panel"}})}},databaseHasCollections:function(){return this.getEditorAPI().store.getState().hasDatabaseCollections},getDisabledToolTip:function(e){return this.isDisabled(e)?this.databaseHasCollections()?e.disabledTooltipNonConnectablePage:e.disabledTooltipNoCollection:e.tooltip},isDisabled:function(e){var t=this.getEditorAPI();if(!this.databaseHasCollections())return!0;var i=t.documentServices.pages.getFocusedPageId();return e.action===o.CLICK_ACTION.DATA.ADD_DP_DATASET&&!t.documentServices.routers.pages.isConnectablePage(i)},render:a})}),define("addPanelInfra/sections/generalSection/generalSectionContent",["react","create-react-class"],function(e,t){"use strict";return t({displayName:"generalSectionContent",render:function(){return e.createElement(this.props.props.template,this.props)}})}),define("addPanelInfra/sections/generalSection/generalSection.rt",["react","lodash","addPanelInfra/sections/generalSection/generalSectionContent","addPanelInfra/sections/sectionWrapper"],function(e,t,i,n){"use strict";return function(){return e.createElement(n,t.assign({},{className:this.props.props.class||""},this.props),e.createElement(i,this.props))}}),define("addPanelInfra/sections/generalSection/generalSection",["create-react-class","lodash","addPanelInfra/sections/generalSection/generalSection.rt"],function(e,t,i){"use strict";return e({displayName:"generalSection",render:i})}),define("addPanelInfra/sections/welcomeSection/welcomeSectionMapper",["lodash","tpa","platform"],function(e,t,i){"use strict";return function(n){return{installApp:function(o){return new Promise(function(s,a){var r=t.constants.APP.TYPE.PLATFORM_ONLY,l=t.constants.BI.initiator.EDITOR,d={originType:t.constants.BI.type.ADD_APP_ADD_PANEL},p={initiator:i.constants.ORIGIN.INITIATOR.EDITOR,info:{type:i.constants.ORIGIN.TYPE.ADD_PANEL}};t.services.tpaAddAppService.addApp(n,o,null,null,r,l,!1,{},d,function(t){return e.get(t,"success")?s(t):a(t)},p)})},openApplicationHelpPanel:function(e){n.panelManager.openHelpCenter(e)},notifyApplication:function(e,t,i){var o=n.platform.getAppDataByAppDefId(e);o&&o.applicationId&&n.documentServices.platform.notifyApplication(o.applicationId,{eventType:t,eventPayload:i||{}})},closeAddPanel:function(){n.panelManager.closeAllPanelsOfType("leftPanelFrame")}}}}),define("addPanelInfra/sections/welcomeSection/welcomeSection.rt",["react","lodash","util","baseUILib"],function(e,t,i,n){"use strict";return function(){return function(){var t=i.translate;return e.createElement("div",{className:"add-panel-welcome-section"},e.createElement("img",{className:"banner",src:this.props.bannerImgSrc}),e.createElement("div",{className:"title-container"},e.createElement(n.TextLabel,{className:"title",automationId:"welcome_title",enableEllipsis:!1,type:"T16",value:this.props.title}),e.createElement(n.TextLabel,{type:"T11",automationId:"welcome_subtitle",enableEllipsis:!1,value:this.props.subtitle})),e.createElement(n.Composites.PromotionalList,{},e.createElement(n.PromotionalList,{items:this.props.promotionalListItems,automationId:"welcome_promotional_list"})),e.createElement(n.Composites.ActionSetVertical,{},e.createElement(n.Button,{automationId:"welcome_main_action",onClick:this.onMainActionClicked},e.createElement("span",{},t(this.props.mainActionLabel))),e.createElement(n.Button,{automationId:"welcome_second_action",className:"btn-text",onClick:this.onSecondaryActionClicked},e.createElement("span",{},t(this.props.secondaryActionLabel)))))}.apply(this,[])}}),define("addPanelInfra/sections/welcomeSection/welcomeSection",["create-react-class","prop-types","higherOrderComponents","addPanelDataConsts","addPanelInfra/sections/welcomeSection/welcomeSectionMapper","addPanelInfra/sections/welcomeSection/welcomeSection.rt"],function(e,t,i,n,o,s){"use strict";var a=e({displayName:"WelcomeSection",propTypes:{bannerImgSrc:t.string.isRequired,title:t.string.isRequired,subtitle:t.string.isRequired,promotionalListItems:t.arrayOf(t.string).isRequired,mainActionLabel:t.string.isRequired,onMainActionClick:t.func,secondaryActionLabel:t.string.isRequired,onSecondaryActionClick:t.func,installApp:t.func,notifyApplication:t.func,closePanels:t.func},onMainActionClicked:function(){var e=this;this.props.onMainActionClick?this.props.onMainActionClick():this.props.appDefinitionId&&this.props.installApp&&this.props.installApp(this.props.appDefinitionId).then(function(){e.props.notifyApplication(e.props.appDefinitionId,n.CLICK_ACTION.EVENT.WELCOME_SECTION_MAIN_ACTION_CLICKED),e.props.closeAddPanel()})},onSecondaryActionClicked:function(){this.props.onSecondaryActionClick?this.props.onSecondaryActionClick():this.props.appDefinitionId&&this.props.openApplicationHelpPanel(this.props.helpId)},render:s});return i.connectEditorAPI(o)(i.renderWhenMutated(a))}),define("addPanelInfra/sections/baseGenerator",["reactDOM","react","create-react-class","prop-types","lodash","addPanelDataConsts","addPanelInfra/sections/liveComponentsSections/themeSection","addPanelInfra/sections/liveComponentsSections/personalizedSection","addPanelInfra/sections/designSections/designDataPresetSection","addPanelInfra/sections/presetSection/presetSection","addPanelInfra/sections/listSection/imageSection","addPanelInfra/sections/listSection/dataSection","addPanelInfra/sections/generalSection/generalSection","addPanelInfra/sections/welcomeSection/welcomeSection"],function(e,t,i,n,o,s,a,r,l,d,p,c,u,h){"use strict";var m=function(){var e={};return e[s.SECTIONS_TYPES.THEME]=a,e[s.SECTIONS_TYPES.PERSONALIZED]=r,e[s.SECTIONS_TYPES.PRESET]=d,e[s.SECTIONS_TYPES.IMAGE]=p,e[s.SECTIONS_TYPES.GENERAL]=u,e[s.SECTIONS_TYPES.DATA]=c,e[s.SECTIONS_TYPES.DESIGN_DATA_PRESET]=l,e[s.SECTIONS_TYPES.DESIGN_DATA_THEME_PRESET]=l,e[s.SECTIONS_TYPES.PERSONALIZED_DESIGN]=l,e[s.SECTIONS_TYPES.WELCOME]=h,e}();return i({displayName:"baseGenerator",propTypes:{hide:n.bool.isRequired,id:n.string.isRequired,props:n.object,showSectionHeader:n.bool.isRequired,title:n.string.isRequired,type:n.string.isRequired,parentType:n.string.isRequired,onClick:n.func.isRequired},getOffsetTop:function(){var t=e.findDOMNode(this);return t?t.offsetTop:-1},getOffsetHeight:function(){var t=e.findDOMNode(this);return t?t.offsetHeight:-1},shouldComponentUpdate:function(e,t){return!(o.isEqual(this.props,e)&&o.isEqual(this.state,t))},render:function(){return t.createElement(m[this.props.type],o.assign({},this.props))}})}),define("addPanelInfra/addPanel/addPanelMapper",["stateManagement"],function(e){"use strict";return function(t){return{overriddenCategories:e.editorPlugins.addPanel.selectors.getOverriddenCategories(t.store.getState()),overriddenSections:e.editorPlugins.addPanel.selectors.getOverriddenSections(t.store.getState())}}}),define("addPanelInfra/categoryView/categoryViewMixins/categoryViewUserPref",["lodash","stateManagement"],function(e,t){"use strict";return{setTopSectionToUserPrefs:function(e,i,n){this.getEditorAPI().store.dispatch(t.editorPlugins.userPreferences.actions.setSessionUserPreferences("category_"+e+"_topScroll",i)),this.getEditorAPI().store.dispatch(t.editorPlugins.userPreferences.actions.setSessionUserPreferences("category_"+e+"_topSection",n))},onCloseClearSectionFromUserPrefExceptSelectedSection:function(i,n){var o=this.getEditorAPI().store.dispatch;e.forEach(n,function(e){e.id!==i&&(o(t.editorPlugins.userPreferences.actions.setSessionUserPreferences("category_"+e.id+"_topScroll",null)),o(t.editorPlugins.userPreferences.actions.setSessionUserPreferences("category_"+e.id+"_topSection",null)))})},getTopScrollFromUserPrefs:function(e){return t.editorPlugins.userPreferences.selectors.getSessionUserPreferences("category_"+e+"_topScroll")(this.getEditorAPI().store.getState())||0},getTopSectionFromUserPrefs:function(e){return t.editorPlugins.userPreferences.selectors.getSessionUserPreferences("category_"+e+"_topSection")(this.getEditorAPI().store.getState())||0},getInnerNavigationSavedState:function(){return t.editorPlugins.userPreferences.selectors.getSessionUserPreferences("innerNavigationState")(this.getEditorAPI().store.getState())||null}}}),define("addPanelInfra/categoryView/categoryViewMixins/categoryViewMaxHoveredItem",["lodash","coreBi"],function(e,t){"use strict";return{notifyMaxScroll:function(){var e=this.getMaxHoveredItem();e.sectionIndex>-1&&e.itemIndex>-1&&(this.getEditorAPI().bi.event(t.events.addPanel.ADD_MENU_MAX_CATEGORY_SCROLL,{category:this.props.id,section:e.sectionIndex+"_"+e.sectionTitle,max_hover_item:e.itemIndex}),this.setMaxHoveredItem())},updateMaxHoveredItem:function(t){var i=this.getMaxHoveredItem();if(this.props.id===i.category){if(t.sectionIndex<i.sectionIndex)return;if(t.sectionIndex===i.sectionIndex&&t.itemIndex<=i.itemIndex)return}this.setMaxHoveredItem(e.assign(t,{category:this.props.id}))},setMaxHoveredItem:function(e){this.maxHoveredItem=e},getMaxHoveredItem:function(){return this.maxHoveredItem||{}}}}),define("addPanelInfra/addPanel/addPanelUtils",["lodash","util","coreBi","constants"],function(e,t,i,n){"use strict";function o(t,i){return e.includes(n.ADD_PANEL.SECTION_COMP_TYPES,i.componentType)&&t.components.is.fullWidthByStructure(i)}function s(e,t,i){var n=e.pages.getPrimaryContainer(),o=e.pasteLogic.addPanelPasteLogic.getPastePosition(e,t.layout,n.id,i);return a(e,t)&&(e.documentServices.pages.popupPages.isPopupOpened()?o.y=function(e,t,i){var n=e.pages.popupPages.getPopupContainer();switch(e.components.properties.get(n).verticalAlignment){case"top":case"center":return r("bottom",e,n,i);case"bottom":return r("top",e,n,-i)-t.layout.height}}(e,t,30):o.y=function(e,t,i){return r("bottom",e,e.pages.getFocusedPage(),i)}(e,0,30),e.setSiteScale(1,o.y)),o}function a(e,t){var i=e.components.layout.isHorizontallyStretchedToScreenByStructure(t);return o(e,t)||i}function r(t,i,n,o){var s=i.components.getChildren(n),a=!0;t=t||"bottom";return e.reduce(s,function(e,n){var o=i.components.layout.get(n),s="bottom"===t?o.y+o.height:o.y;return"bottom"===t&&s>e||"top"===t&&s<e?(a=i.components.is.fullWidth(n),s):e},0)+(a?0:o)}function l(o,r,l,d,p,c,u,h){var m=function(e,t){return a(e,t)&&e.documentServices.pages.popupPages.isPopupOpened()?e.pages.popupPages.getPopupContainer():e.pages.getPrimaryContainer()}(o,r);if(o.components.is.allowedToContainMoreChildren(m)){var g=s(o,r,l);e.merge(r.layout,g),o.components.add(m,r,void 0,function(e){if(o.selection.selectComponentByCompRef(e),o.openFirstTimePanel(e),"Page"!==r.type&&o.history.add("added component"),o.bi.event(i.events.addPanel.COMPONENT_ADDED_TO_STAGE,{origin:u||"add_panel",category:l,section:d,component_type:r.componentTypeForBI||r.componentType,component_id:e.id,preset_id:c||"",adding_method:"click",preset_data_skin:r.style.skin||r.skin||r.style,preset_data_tags:p,page_id:o.pages.getFocusedPage()&&o.pages.getFocusedPage().id}),h){var s=o.documentServices.platform.getAppDataByAppDefId(h);s&&s.applicationId&&o.documentServices.platform.notifyApplication(s.applicationId,{eventType:n.EVENTS.ADD_PANEL.COMPONENT_ADDED_TO_STAGE,eventPayload:{compRef:e}})}t.fedopsLogger.interactionEnded(t.fedopsLogger.INTERACTIONS.ADD_COMP_FROM_ADD_PANEL)},"add_panel")}}return{isStripStructure:o,isStretchedComp:a,calcCompPastePosition:s,attemptToAddComponent:l}}),define("addPanelInfra/howToVideoTooltipContent/keyGenerator",[],function(){"use strict";return{titleKey:function(e){return e+"_tooltip_title"},descriptionKey:function(e){return e+"_tooltip_description"},thumbnailKey:function(e){return e+"_tooltip_thumbnail"},videoIdKey:function(e){return e+"_tooltip_video_id"}}}),define("addPanelInfra/howToVideoTooltipContent/howToVideoTooltipContent.rt",["react","lodash","baseUILib","symbols","addPanelInfra/howToVideoTooltipContent/keyGenerator","util"],function(e,t,i,n,o,s){"use strict";return function(){return e.createElement("div",{className:"how-to-video-tooltip-content",onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},e.createElement("div",{className:"container-close",onClick:this.handleClickClose},e.createElement(n.symbol,{name:"close"})),e.createElement(i.TextLabel,{type:"T03",value:o.titleKey(this.props.sectionKey)}),this.isVideoAvailable()?e.createElement("div",{key:"thumbnail",className:"container-thumbnail",onClick:this.handleClickPlay},e.createElement("img",{className:"thumbnail",src:s.translate(o.thumbnailKey(this.props.sectionKey)),alt:"how-to video thumbnail"}),e.createElement(n.symbol,{name:"play-video"})):null,e.createElement(i.RichText,{},"\n        ",s.translate(o.descriptionKey(this.props.sectionKey)),"\n        ",this.isHelpAvailable()?e.createElement("a",{className:"video-tooltip-help",key:"link-help",onClick:this.handleClickHelp},"\n            ",s.translate("add_section_label_description_learn_more"),"\n        "):null))}}),define("addPanelInfra/howToVideoTooltipContent/howToVideoTooltipContent",["create-react-class","prop-types","lodash","core","util","addPanelInfra/howToVideoTooltipContent/howToVideoTooltipContent.rt","addPanelInfra/howToVideoTooltipContent/keyGenerator","coreBi","constants","helpIds"],function(e,t,i,n,o,s,a,r,l,d){"use strict";var p="panels.focusPanels.howToVideoPlayer",c=e({displayName:"howToVideoTooltipContent",mixins:[n.mixins.editorAPIMixin],propTypes:{sectionKey:t.string.isRequired,onClose:t.func.isRequired,onMouseEnter:t.func.isRequired,onMouseLeave:t.func.isRequired},isHelpAvailable:function(){return i.has(d.SECTIONS,this.props.sectionKey)},isVideoAvailable:function(){return c.isVideoAvailable(this.props.sectionKey)},handleClickPlay:function(){var e=o.translate(a.videoIdKey(this.props.sectionKey)),t=this.getEditorAPI(),i={tooltipname:a.titleKey(this.props.sectionKey),videoID:e};t.bi.event(r.events.videoTooltip.THUMBNAIL_CLICK,i),t.panelManager.openPanel(p,{videoId:e,origin:"ADD_PANEL"},!0)},handleClickHelp:function(){var e=this.getEditorAPI(),t=d.SECTIONS[this.props.sectionKey],i={component:a.titleKey(this.props.sectionKey),learn_more:!0,panel_name:p,origin:l.BI.HELP.ORIGIN.ADD_PANEL};e.panelManager.openHelpCenter(t,null,i)},handleClickClose:function(e){var t={tooltipname:a.titleKey(this.props.sectionKey)};this.getEditorAPI().bi.event(r.events.videoTooltip.CLOSE,t),this.props.onClose(e)},handleMouseEnter:function(e){this.hoverStartTime=Date.now(),this.props.onMouseEnter(e)},handleMouseLeave:function(e){var t={tooltipname:a.titleKey(this.props.sectionKey),duration:Date.now()-this.hoverStartTime};this.getEditorAPI().bi.event(r.events.videoTooltip.HOVER,t),this.props.onMouseLeave(e)},componentDidMount:function(){this.mounted=!0,window.setTimeout(function(){if(this.mounted){var e={tooltipname:a.titleKey(this.props.sectionKey)};this.getEditorAPI().bi.event(r.events.videoTooltip.OPEN,e)}}.bind(this),1e3)},componentWillUnmount:function(){this.mounted=!1},render:s});return c.isVideoAvailable=function(e){var t=a.videoIdKey(e),n=o.translate(t),s="!"+t+"!";return!i.includes(["NO_VIDEO",s],n)&&n},c}),define("addPanelInfra/anchorsNavigation/anchorsNavigation.rt",["react","lodash","baseUILib","experiment","addPanelInfra/howToVideoTooltipContent/howToVideoTooltipContent"],function(e,t,i,n,o){"use strict";return function(){return e.createElement("div",{className:"anchors-navigation open "+t({"larger-than-window":this.state.largerThanWindow}).transform(function(e,t,i){t&&e.push(i)},[]).join(" ")},e.createElement("div",{className:"anchors-nav-section-wrapper"},e.createElement.apply(this,["ul",{className:"anchors-nav-sections",key:"sections"},t.map(this.props.sectionsWithHeaders,function(n,s){return e.createElement("li",{className:"anchors-nav-section-item "+t({selected:this.state.selected.id===n.id}).transform(function(e,t,i){t&&e.push(i)},[]).join(" "),onClick:function(e,t){this.handleClickAnchor(e)}.bind(this,n,s),onMouseEnter:function(e,t){this.handleMouseEnterAnchor(e)}.bind(this,n,s),onMouseLeave:function(e,t){this.handleMouseLeaveAnchor()}.bind(this,n,s),key:n.id},e.createElement("div",{className:"anchors-nav-pin"}),this.isTooltipOpen(n)?e.createElement(i.Bubble,{contentStyle:this.getBubbleContentStyle(),arrowStyle:this.getBubbleArrowStyle(),arrowAlignment:"left",key:"bubble-"+n.id},e.createElement(o,{onClose:this.handleCloseTooltip,onMouseEnter:function(e,t){this.handleMouseEnterTooltip(e)}.bind(this,n,s),onMouseLeave:this.handleMouseLeaveTooltip,sectionKey:n.title})):null)}.bind(this))])))}}),define("addPanelInfra/anchorsNavigation/anchorsNavigation",["reactDOM","create-react-class","prop-types","core","lodash","addPanelInfra/anchorsNavigation/anchorsNavigation.rt","coreBi","stateManagement"],function(e,t,i,n,o,s,a,r){"use strict";function l(e,t){e.store.dispatch(r.editorPlugins.userPreferences.actions.setSessionUserPreferences("isHowToVideoTooltipClosed",Boolean(t)))}return t({displayName:"anchorsNavigation",mixins:[n.mixins.editorAPIMixin],propTypes:{sectionsWithHeaders:i.array.isRequired,allSections:i.array.isRequired,categoryId:i.string.isRequired,setTopSection:i.func.isRequired,notifyCategoryViewOnStateChange:i.func.isRequired,selected:i.object.isRequired,disableTooltip:i.bool,overrideTooltipId:i.string,timeoutHandler:i.object},getDefaultProps:function(){return{disableTooltip:!1,overrideTooltipId:null,timeoutHandler:window}},getInitialState:function(){return{hover:!1,selected:this.props.selected,largerThanWindow:!1,openedTooltipId:null,prevOpenedTooltipId:null,isTooltipClosed:function(e){return r.editorPlugins.userPreferences.selectors.getSessionUserPreferences("isHowToVideoTooltipClosed")(e.store.getState())}(this.getEditorAPI())}},componentWillMount:function(){window.addEventListener("resize",this.checkIfLargerThanWindow)},componentDidMount:function(){this.mounted=!0,this.checkIfLargerThanWindow(),this.props.notifyCategoryViewOnStateChange(!0),this.openTooltipAsync(this.state.selected.id,1e3)},componentWillReceiveProps:function(e){this.isLongDelay=e.categoryId!==this.props.categoryId,this.setSelectedSection(e.selected)},componentDidUpdate:function(){this.checkIfLargerThanWindow()},componentWillUnmount:function(){window.removeEventListener("resize",this.checkIfLargerThanWindow),this.mounted=!1},render:function(){return s.call(this)},openTooltipAsync:function(e,t){this.props.timeoutHandler.clearTimeout(this.tooltipTimeout),this.tooltipTimeout=this.props.timeoutHandler.setTimeout(function(){!0===this.mounted&&this.setState({openedTooltipId:e,prevOpenedTooltipId:e})}.bind(this),t)},checkIfLargerThanWindow:function(){var t=e.findDOMNode(this);if(t){var i=window.innerHeight-t.offsetHeight-72-24<0;this.state.largerThanWindow!==i&&this.setState({largerThanWindow:i})}},setSelectedSection:function(e){var t=this.isLongDelay?1e3:350;this.isLongDelay=!1;var i=this.openTooltipAsync.bind(this,e.id,t);this.setState({selected:e},i)},handleClickAnchor:function(e){var t=o.findIndex(this.props.allSections,{id:e.id});this.props.setTopSection(t,!0),this.props.timeoutHandler.clearTimeout(this.tooltipTimeout);var i=o.partial(l,this.getEditorAPI(),!1);this.setState({selected:e,selectionMade:!0,openedTooltipId:e.id,prevOpenedTooltipId:e.id,isTooltipClosed:!1},i);var n=a.events.addPanel.ADD_MENU_INNER_NAVIGATION_CHOOSE_SECTION_CLICK,s={category:this.props.categoryId,section:e.title};this.getEditorAPI().bi.event(n,s)},handleMouseEnterAnchor:function(e){this.props.timeoutHandler.clearTimeout(this.tooltipTimeout),this.setState({openedTooltipId:e.id,hover:!0})},handleMouseLeaveAnchor:function(){this.props.timeoutHandler.clearTimeout(this.tooltipTimeout),this.tooltipTimeout=this.props.timeoutHandler.setTimeout(function(){this.setState({openedTooltipId:this.state.prevOpenedTooltipId,hover:!1})}.bind(this),350)},handleMouseEnterTooltip:function(e){this.props.timeoutHandler.clearTimeout(this.tooltipTimeout),this.setState({openedTooltipId:e.id,hover:!0})},handleMouseLeaveTooltip:function(){this.props.timeoutHandler.clearTimeout(this.tooltipTimeout),this.setState({openedTooltipId:this.state.prevOpenedTooltipId,hover:!1})},handleCloseTooltip:function(e){e.stopPropagation();var t=o.partial(l,this.getEditorAPI(),!0);this.setState({isTooltipClosed:!0,hover:!1},t)},isTooltipOpen:function(e){if(this.state.largerThanWindow)return!1;if(this.props.overrideTooltipId)return this.props.overrideTooltipId===e.id;var t=this.state.isTooltipClosed&&!this.state.hover,i=this.props.disableTooltip,n=this.state.openedTooltipId===e.id;return!t&&!i&&n},getBubbleContentStyle:function(){return{position:"absolute",left:"43px",top:"-16px",width:"240px"}},getBubbleArrowStyle:function(){return{position:"absolute",left:"35px",top:"1px"}}})}),define("addPanelInfra/categoryView/categoryView.rt",["react","lodash","baseUI","baseUILib","addPanelInfra/sections/baseGenerator","addPanelInfra/anchorsNavigation/anchorsNavigation","experiment"],function(e,t,i,n,o,s,a){"use strict";return function(){return e.createElement("div",{className:"category-view"},e.createElement(s,{ref:"innerNavigation",sectionsWithHeaders:this.getSectionsWithHeaders(),categoryId:this.props.id,setTopSection:this.setTopSection,allSections:this.props.items,notifyCategoryViewOnStateChange:this.props.changeStateOnInnerNavigationOpen,selected:this.getTopSection(),disableTooltip:this.props.isDragging,overrideTooltipId:this.state.overrideTooltipId}),e.createElement(n.CustomScroll,{ref:"customScroll",onScroll:function(e){this.onScroll(e)}.bind(this),heightRelativeToParent:"100%",addScrolledClass:!0,freezePosition:this.props.isDragging},e.createElement.apply(this,["div",{className:"sections",ref:"sections"},t.map(this.props.items,function(i,n){return e.createElement(o,t.assign({},{ref:this.getSectionRefByIndex(n),key:this.getSectionRefByIndex(n)},this.getSectionItemProps(i,n)))}.bind(this))])))}}),define("addPanelInfra/categoryView/categoryView",["create-react-class","lodash","baseUI","core","addPanelDataConsts","util","uiAnimations","addPanelInfra/categoryView/categoryViewMixins/categoryViewUserPref","addPanelInfra/categoryView/categoryViewMixins/categoryViewMaxHoveredItem","addPanelInfra/addPanel/addPanelUtils","addPanelInfra/categoryView/categoryView.rt","coreBi","constants","addPanelInfra/howToVideoTooltipContent/howToVideoTooltipContent"],function(e,t,i,n,o,s,a,r,l,d,p,c,u,h){"use strict";var m=i.tooltipManager;return e({displayName:"categoryView",mixins:[n.mixins.editorAPIMixin,r,l,s.blockOuterScrollMixin],getInitialState:function(){return this.updateScrollValues(),{showInnerNavigation:!1}},componentDidMount:function(){this.mounted=!0,this.showInnerNavigation(),this.prepareData()},shouldComponentUpdate:function(e,i){return!(t.isEqual(this.props,e)&&t.isEqual(this.state,i))},updateScrollValues:function(){this.lastScroll=this.getTopScrollFromUserPrefs(this.props.id),this.topSection=this.getTopSectionFromUserPrefs(this.props.id)},componentDidUpdate:function(e){this.calcSectionsTop(),this.calcSectionsHeight(),this.props.id!==e.id&&this.prepareData()},prepareData:function(){this.setAllSectionsTops(),this.updateScrollValues(),this.notifyMaxScroll()},componentWillReceiveProps:function(e){this.props.id!==e.id&&this.setTopSectionToUserPrefs(this.props.id,this.lastScroll,this.topSection)},componentWillUnmount:function(){this.mounted=!1,this.setTopSectionToUserPrefs(this.props.id,this.lastScroll,this.topSection)},calcSectionsTop:function(){this.mounted&&(this.sectionTops=t.times(this.props.items.length,t.bind(this.getSectionTopByIndex,this)))},calcSectionsHeight:function(){this.mounted&&(this.sectionsHeight=t.times(this.props.items.length,t.bind(this.getSectionHeightByIndex,this)))},setAllSectionsTops:function(){this.calcSectionsTop(),this.calcSectionsHeight();var e=this.props.section?function(){var e=this.props.section.toLowerCase(),i=t.findIndex(this.props.items,function(t){return t.sectionName&&t.sectionName.toLowerCase()===e});return this.getSectionTops()[i]}.call(this):this.getTopScrollFromUserPrefs(this.props.id);this.scrollTo(e),this.setTopSection(e,!1)},getSectionTops:function(){return this.sectionTops||this.calcSectionsTop(),this.sectionTops},getSectionsHeight:function(){return this.sectionsHeight},showInnerNavigation:function(){this.getInnerNavigationSavedState()?this.setState({showInnerNavigation:!0}):this.state.showInnerNavigation||window.setTimeout(function(){this.mounted&&this.setState({showInnerNavigation:!0})}.bind(this),2e3)},isInnerNavigationShown:function(){return this.state.showInnerNavigation},onLearnMoreClickOpenHelpCenter:function(){var e=this.getEditorAPI();if(this.props.teaser.helpId){var t={origin:u.BI.HELP.ORIGIN.ADD_PANEL,component:this.props.id,panel_name:u.BI.HELP.ORIGIN.ADD_PANEL,learn_more:!0};e.panelManager.openHelpCenter(this.props.teaser.helpId,null,t)}},getSectionItemProps:function(e,i){var n=function(){this.setState({overrideTooltipId:e.id})}.bind(this),s=function(){var t={section:e.title,category:this.props.id};this.getEditorAPI().bi.event(c.events.addPanel.HOVER_SECTION_INFO,t),this.setState({overrideTooltipId:null})}.bind(this),a=e.showSectionHeader&&h.isVideoAvailable(e.title)?"info_video_tooltip_icon":"infoIcon",r=t.assign({onMouseEnter:n,onMouseLeave:s,symbolName:a},e.help);return t.assign({onClick:this.handleItemClick,onItemDrag:this.props.onItemDrag,parentType:this.props.origin||o.PANEL_TYPES.ADD_PANEL,notifyLayoutDone:this.calcSectionsTop,sectionIndex:i,nextSibling:this.props.items[i+1],categoryId:this.props.id,appDefinitionId:this.props.appDefinitionId,currentPage:this.props.currentPage,itemHoverCallback:e.type===o.SECTIONS_TYPES.PRESET?this.updateMaxHoveredItem:t.noop},e,{help:r})},handleItemClick:function(e,i,n,o,a){s.fedopsLogger.interactionStarted(s.fedopsLogger.INTERACTIONS.ADD_COMP_FROM_ADD_PANEL);var r=this.getEditorAPI(),l=this.props,p=l.id,c=l.origin,u=l.appDefinitionId;d.attemptToAddComponent(r,e,p,i,n,o,c,t.get(a,"appDefinitionId")||u)},shouldShowInnerNavigation:function(){return!this.props.hideInnerNavigation&&t.filter(this.props.items,{showSectionHeader:!0}).length>1},getSectionsWithHeaders:function(){return t.filter(this.props.items,"showSectionHeader")},hasMoreScroll:function(e){return e.scrollTop+e.clientHeight<e.scrollHeight},onScroll:function(e){if(t.includes(e.target.className,"inner-container")&&!this.animationInProcess&&this.shouldShowInnerNavigation()){var i=e.target?e.target.scrollTop:0,n=this.getSectionTops(),o=void 0;this.lastScroll-i<0?(o=t.findIndex(n,function(e){return-1!==e&&e-i>=0&&e-i<145}),this.hasMoreScroll(e.target)||(o=n.length-1)):o=t.findIndex(this.getSectionsHeight(),function(e,t){var o=n[t]+e,s=o-i;return-1!==o&&s/e>=.3&&s/e<=1}),this.lastScroll=i,this.setTopSection(o)}},scrollToSection:function(e){this.scrollTo(this.getSectionTops()[e])},scrollToTop:function(){this.scrollTo(0)},scrollTo:function(e){var t=this.refs.customScroll.getScrolledElement();t&&(this.animationInProcess=!0,this.lastScroll=e,a.scrollTo({y:e},.5,0,t,function(){this.animationInProcess=!1}.bind(this)))},setTopSection:function(e,t){if(e>-1){if(t)this.scrollToSection(e);else if(this.refs.innerNavigation){var i=this.getInnerNavigationSection(e),n=this.getInnerNavigationSection(this.topSection);i.id!==n.id&&m.hideAll(function(){m.showForDuration(i.id,1500)})}e!==this.topSection&&(this.topSection=e,this.refs.innerNavigation&&this.refs.innerNavigation.setSelectedSection(this.getInnerNavigationSection(e)))}},getInnerNavigationSection:function(e){var i=this.props.items[e];if(!i)return t.head(this.props.items);if(i.showSectionHeader)return i;for(var n=e;n>=0;n--){var o=this.props.items[n];if(o.showSectionHeader)return o}return t.find(this.props.items,{showSectionHeader:!0})},getTopSection:function(){return this.getInnerNavigationSection(this.topSection)},getSectionByIndex:function(e){return this.refs[this.getSectionRefByIndex(e)]},getSectionRefByIndex:function(e){return this.props.id+"_section"+e},getSectionHeightByIndex:function(e){var t=this.getSectionByIndex(e);return t&&t.getOffsetHeight()},getSectionTopByIndex:function(e){var t=this.getSectionByIndex(e);return t&&t.getOffsetTop()},render:p})}),define("addPanelInfra/categoryView/categoryViewWrapper.rt",["react","lodash","util","baseUI","addPanelInfra/categoryView/categoryView","symbols"],function(e,t,i,n,o,s){"use strict";return function(){return e.createElement("div",{className:"category-view-wrapper "+t({"inner-navigation-open":this.state.isInnerNavigationOpened}).transform(function(e,t,i){t&&e.push(i)},[]).join(" "),style:this.getStyle()},e.createElement("div",{className:"header"},e.createElement("label",{className:"title"},i.translate(this.props.title)),e.createElement("div",{className:"actions"},!this.props.help.hide&&this.props.help.helpId?e.createElement("div",{key:"actions",className:"button help-button",onClick:this.openHelpCenter},"?\r\n            "):null,e.createElement("div",{className:"button close",onClick:this.closePanel},e.createElement(s.symbol,{name:"headerCloseButton"})))),e.createElement(o,t.assign({},{changeStateOnInnerNavigationOpen:this.changeStateOnInnerNavigationOpen},this.props)))}}),define("addPanelInfra/categoryView/categoryViewWrapper",["create-react-class","core","lodash","addPanelDataConsts","addPanelInfra/categoryView/categoryViewMixins/categoryViewUserPref","coreBi","constants","addPanelInfra/categoryView/categoryViewWrapper.rt"],function(e,t,i,n,o,s,a,r){"use strict";return e({displayName:"categoryViewWrapper",mixins:[t.mixins.editorAPIMixin,o],getInitialState:function(){return{isInnerNavigationOpened:!1}},getStyle:function(){return{width:n.CATEGORY_VIEW.TOTAL_WIDTH}},closePanel:function(){this.onCloseClearSectionFromUserPrefExceptSelectedSection(this.props.id,this.props.allCategories),this.props.onClose()},openHelpCenter:function(){var e=this.getEditorAPI();if(this.props.help.helpId){var t={origin:a.BI.HELP.ORIGIN.ADD_PANEL,component:this.props.id,panel_name:a.BI.HELP.ORIGIN.ADD_PANEL,learn_more:!1};e.panelManager.openHelpCenter(this.props.help.helpId,null,t)}e.bi.event(s.events.addPanel.ADD_MENU_HELP_CATEGORY_CLICK,{category:this.props.id})},changeStateOnInnerNavigationOpen:function(e){this.setState({isInnerNavigationOpened:e})},render:r})}),define("addPanelInfra/addPanel/addPanel.rt",["react","lodash","addPanelInfra/categoryView/categoryViewWrapper","util","panels","experiment"],function(e,t,i,n,o,s){"use strict";return function(){function a(){var a=100/this.categories.length;return e.createElement(o.frames.leftPanelFrame,{ref:"addPanel",panelName:this.props.panelName,panelClass:"add-panel",panelIndex:this.props.panelIndex,styleOverride:{overflow:"visible"},onContextMenu:function(e,t){s.isOpen("allowAddPanelRightClick")||t.preventDefault()}.bind(this,a)},e.createElement.apply(this,["ul",{className:"add-panel-category-list",onMouseLeave:this.reset},t.map(this.categories,function(i,o,s){return e.createElement("li",{className:t(this.getClasses(o)).transform(function(e,t,i){t&&e.push(i)},[]).join(" "),key:o.id,style:{height:"calc("+i+"% - 2px)"}},e.createElement("span",t.assign({},{className:t({"category-name-wrapper":!0,"is-selected":this.state.selectedIndex===s}).transform(function(e,t,i){t&&e.push(i)},[]).join(" ")},this.getMouseActionsHandlers(o,s)),e.createElement("span",{className:"category-name"},n.translate(o.label))))}.bind(this,a))]),e.createElement(i,this.getSelectedCategory()))}return a.apply(this,[])}}),define("addPanelInfra/addPanel/addPanel",["create-react-class","core","lodash","prop-types","addPanelInfra/addPanel/addPanelMapper","addPanelInfra/addPanel/addPanel.rt","util","addPanelData","addPanelDataConsts","addPanelInfra/addPanel/addPanelStyleManager","stateManagement","higherOrderComponents","coreBi","mixins"],function(e,t,i,n,o,s,a,r,l,d,p,c,u,h){"use strict";var m=e({displayName:"addPanel",mixins:[a.addPanelHoverMixin,h.dragToStageMixin,t.mixins.editorAPIMixin],propTypes:{overriddenCategories:n.object.isRequired,overriddenSections:n.object.isRequired},getInitialState:function(){var e=this,t=r.getCategories(this.getEditorAPI());return this.categories=i(t).reject(function(t){var n=t.id;return i.get(e.props.overriddenCategories[n],"isHidden",!1)}).map(function(t){return i.forEach(t.items,function(t){t.hide=i.get(e.props.overriddenSections[t.id],"isHidden",t.hide)}),t}).value(),this.currentPage=this.getEditorAPI().documentServices.pages.getFocusedPageId(),{selectedIndex:this.getSelectedIndex(),isDragging:!1}},notifySelectedCategoryEvent:function(e,t){this.getEditorAPI().bi.event(u.events.addPanel[e],{category:t.id})},getSelectedIndex:function(){var e=this.props.category&&this.props.category.toLowerCase()||p.editorPlugins.userPreferences.selectors.getSessionUserPreferences("addPanelCategoryIdOnClose")(this.getEditorAPI().store.getState())||"",t=i.findIndex(this.categories,function(t){return t.id.toLowerCase()===e.toLowerCase()});return-1!==t?t:0},saveCategoryOnPanelClose:function(e){var t=this.categories[e].id;this.getEditorAPI().store.dispatch(p.editorPlugins.userPreferences.actions.setSessionUserPreferences("addPanelCategoryIdOnClose",t))},componentWillUnmount:function(){this.saveCategoryOnPanelClose(this.state.selectedIndex)},componentWillMount:function(){this.selectedSectionItems=this.getVisibleSectionsForCategoryView(this.state.selectedIndex)},componentWillUpdate:function(e,t){this.state.selectedIndex!==t.selectedIndex&&(this.selectedSectionItems=this.getVisibleSectionsForCategoryView(t.selectedIndex))},componentWillReceiveProps:function(e){if(e.category&&e.category!==this.props.category){var t=e.category&&e.category.toLowerCase(),n=i.findIndex(this.categories,function(e){return e.id.toLowerCase()===t});-1!==n&&n!==this.state.selectedIndex&&this.setState({selectedIndex:n})}},getVisibleSectionsForCategoryView:function(e){var t=this.categories[e].items,n=this.getEditorAPI(),o=i.filter(t,{hide:!1});return i.reject(o,function(e){switch(e.type){case l.SECTIONS_TYPES.THEME:var t=d.getThemeStylesArr(e.props.compTypes,n.theme,n.components);return i.isEmpty(t);case l.SECTIONS_TYPES.PERSONALIZED:var o=d.getPersonalizeStylesArr(n.theme,n.components,e.props.compTypes);return i.isEmpty(o);case"default":return!1}})},getSelectedCategory:function(){var e=i.assign({},this.categories[this.state.selectedIndex]);return e=i.assign(e,{onClose:this.closePanel,onItemDrag:this.startItemDrag,allCategories:this.categories,items:this.selectedSectionItems,isDragging:this.state.isDragging,section:this.props.section,currentPage:this.currentPage})},getClasses:function(e){var t={category:!0};return t[e.id]=!0,t},shouldComponentUpdate:function(e,t){var n=this.getEditorAPI().documentServices.pages.getFocusedPageId();return n!==this.currentPage&&(this.currentPage=n),!(i.isEqual(this.props,e)&&i.isEqual(this.state,t))},closePanel:function(){this.getEditorAPI().panelManager.closePanelByName(this.props.panelName)},getMouseActionsHandlers:function(e,t){var i=this;return{onMouseEnter:function(n){i.enter(n,e,t,function(){i.setState({selectedIndex:t}),i.addPanelHoverTimeoutId=window.setTimeout(function(){i.notifySelectedCategoryEvent("ADD_MENU_CATEGORY_SELECT",e)},3e3)})},onMouseLeave:function(e){window.clearTimeout(i.addPanelHoverTimeoutId),i.leave(e,t)},onClick:function(){i.notifySelectedCategoryEvent("ADD_MENU_CATEGORY_CLICK",e),i.setState({selectedIndex:t})}}},render:function(){return s.call(this)}}),g=c.connectEditorAPI(o)(m);return g.pure=m,g}),define("addPanelInfra/addPanel/dragToStage/addPanelDragToStage",["lodash","core","addPanelInfra/addPanel/addPanelUtils"],function(e,t,i){"use strict";var n=void 0;return{start:function(o,s){var a=(i.isStripStructure(o,s.item.structure)||e.get(s,"item.tags.isFullWidth"))&&!e.isEmpty(t.utils.sectionsReorganizeUtil.getPageSections(o))?t.utils.AddPanelSectionDragHandler:t.utils.AddPanelDragHandler;n=new a(o,s.evt,s.item,s.panelElm,s.dragBoxClass,s.onItemDragStart,s.onItemDragEnd)},on:function(e){n.onDrag(e)},end:function(e){n&&(n.endDrag(e),n=null)}}}),define("addPanelInfra/addPanel/dragToStage/dragBox.rt",["react","lodash"],function(e,t){"use strict";return function(){return e.createElement("div",{className:"add-panel-draggable-wrapper"},e.createElement("div",{className:"add-panel-draggable-item",style:this.getDragBoxStyle()}))}}),define("addPanelInfra/addPanel/dragToStage/dragBox",["create-react-class","prop-types","lodash","addPanelInfra/addPanel/dragToStage/dragBox.rt"],function(e,t,i,n){"use strict";return e({displayName:"dragBox",propTypes:{boxSize:t.shape({width:t.number,height:t.number}).isRequired,coords:t.shape({left:t.number,top:t.number}).isRequired,boxOffset:t.shape({left:t.number,top:t.number}).isRequired},shouldComponentUpdate:function(e){return!i.isEqual(this.props,e)},getTransformValue:function(){return"translate("+100*this.props.boxOffset.left+"%, "+100*this.props.boxOffset.top+"%)"},getDragBoxStyle:function(){var e=this.getTransformValue();return i.assign({left:this.props.coords.left,top:this.props.coords.top,WebkitTransform:e,transform:e},this.props.boxSize)},render:function(){return n.call(this)}})}),define("addPanelInfra",["addPanelInfra/sections/baseGenerator","addPanelInfra/addPanel/addPanel","addPanelInfra/categoryView/categoryView","addPanelInfra/addPanel/dragToStage/addPanelDragToStage","addPanelInfra/addPanel/dragToStage/dragBox","addPanelInfra/sections/liveComponentsSections/liveComponentStyleAdjuster","addPanelInfra/addPanel/componentsDefaultData","addPanelInfra/addPanel/addPanelStyleManager","addPanelInfra/sections/liveComponentsSections/liveComponentSection","addPanelInfra/sections/liveComponentsSections/designPanelLiveComponentSection","addPanelInfra/sections/sectionWrapper","addPanelInfra/sections/welcomeSection/welcomeSection","addPanelInfra/addPanel/addPanelUtils","addPanelData"],function(e,t,i,n,o,s,a,r,l,d,p,c,u,h){"use strict";return{addPanel:t,categoryView:i,baseGenerator:e,addPanelDragToStage:n,dragBox:o,liveComponentStyleAdjuster:s,componentsDefaultData:a,addPanelStyleManager:r,liveComponentSection:l,designPanelLiveComponentSection:d,sectionWrapper:p,welcomeSection:c,addPanelUtils:u,addPanelData:h}});
//# sourceMappingURL=addPanelInfra.min.js.map